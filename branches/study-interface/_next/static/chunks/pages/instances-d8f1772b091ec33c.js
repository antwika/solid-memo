(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{1691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var s=n(6029),a=n(281),r=n(3417),l=n(6207),i=n(1979),o=n(8337),c=n(4e3),d=n(5729),h=n(6768),u=n(4426),m=n(2041),p=n(8117),w=n(8429),f=n(9651);function v(){let e=(0,c.useRouter)(),{getService:t}=(0,d.useContext)(l.h),n=t(),{instanceUrls:v,mutate:x,isLoading:g}=function(){let e=(0,p._)(),{data:t,isLoading:n}=(0,f.A)(e.info.webId),[s,a]=(0,d.useState)([]),[r,l]=(0,d.useState)([]),[i,o]=(0,d.useState)([]),{data:c}=(0,f.A)(i),[v,x]=(0,d.useState)([]),{data:g,mutate:j,isLoading:y}=(0,h.Ay)(s,w.P),{data:_,mutate:k,isLoading:A}=(0,h.Ay)(r,w.P);return(0,d.useEffect)(()=>{if(!t)return void a([]);Promise.all(t.map(e=>u.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>m.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>a(e)).catch(e=>console.error("Failed to fetch private type indices, error:",e)),Promise.all(t.map(e=>u.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>m.tX(e,"http://www.w3.org/2000/01/rdf-schema#seeAlso")))).then(e=>e.flat()).then(e=>o(e)).catch(e=>console.error("Failed to fetch see also references, error:",e))},[t]),(0,d.useEffect)(()=>{if(!c)return void l([]);Promise.all(c.map(e=>u.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>m.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>l(e)).catch(e=>console.error("Failed to fetch see also private type indices, error:",e))},[c]),(0,d.useEffect)(()=>{[...null!=g?g:[],...null!=_?_:[]].map(e=>{x(u.eC(e).reduce((e,t)=>{var n,s,a,r;let{predicates:l}=t;return(null==(s=l["http://www.w3.org/ns/solid/terms#forClass"])||null==(n=s.namedNodes)?void 0:n.includes("http://antwika.com/ns/solid-memo#SolidMemoData"))?[...e,...null!=(r=null==(a=l["http://www.w3.org/ns/solid/terms#instance"])?void 0:a.namedNodes)?r:[]]:e},[]))})},[g,_]),{webIdProfileDatasets:t,privateTypeIndexDatasets:g,instanceUrls:v,mutate:()=>{j(g).catch(e=>console.error("Failed to mutate, error:",e)),k(_).catch(e=>console.error("Failed to mutate, error:",e))},isLoading:n||y||A}}();return(0,s.jsxs)(r.default,{children:[(0,s.jsx)(i.$n,{onClick:()=>{n.newInstance().then(()=>x()).catch(e=>console.error("Failed with error:",e))},children:"Create new instance"}),g&&(0,s.jsx)("div",{children:"Loading instances..."}),!g&&0===v.length&&(0,s.jsx)("div",{children:"No instances found"}),!g&&v.map(t=>(0,s.jsx)("div",{className:"items-center gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{title:"Instance",children:(0,s.jsx)(o.A,{})}),(0,s.jsx)("div",{className:"flex grow-1 break-all gap-1",children:(0,s.jsxs)("span",{title:t,children:[(0,s.jsx)("strong",{children:(0,a.L)(t)})," (Instance)"]})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.$n,{size:"sm",onClick:()=>{e.push("/instances/".concat(encodeURIComponent(t)))},children:"View"})})]})},t))]})}},6449:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/instances",function(){return n(1691)}])},8337:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(5229).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9651:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(8429),a=n(6768);function r(e){let{data:t,mutate:n,isLoading:r}=(0,a.Ay)("string"==typeof e?[e]:e,s.P);return{data:t,mutate:n,isLoading:r}}}},e=>{var t=t=>e(e.s=t);e.O(0,[4,636,593,792],()=>t(6449)),_N_E=e.O()}]);