(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{607:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var s=n(3343);function a(e,t){return(0,s.w)(t||e,e)}},1095:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>a,_P:()=>l,s0:()=>i,w4:()=>s});let s=864e5,a=6e4,i=36e5,l=Symbol.for("constructDateFrom")},2271:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var s=n(607);function a(e,t){let n=(0,s.a)(e,t?.in);return n.setHours(0,0,0,0),n}},2790:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(2041),a=n(187),i=n(5986),l=n(7127);function r(e){let{data:t,mutate:n,isLoading:r}=(0,i.A)(e),o=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,l.Ez)({iri:e.url,type:(0,s.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),isInDeck:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInDeck"),front:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#front"),back:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#back"),interval:(0,s.XU)(e,"http://antwika.com/ns/solid-memo#interval"),easeFactor:(0,s.S5)(e,"http://antwika.com/ns/solid-memo#easeFactor"),repetition:(0,s.XU)(e,"http://antwika.com/ns/solid-memo#repetition"),lastReviewed:(0,s.oq)(e,"http://antwika.com/ns/solid-memo#lastReviewed")})),c=o.reduce((e,t)=>(e[t.iri]=t,e),{});return{flashcardDatasets:t,flashcards:o,flashcardMap:c,mutate:n,isLoading:r}}},3343:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var s=n(1095);function a(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&s._P in e?e[s._P](t):e instanceof Date?new e.constructor(t):new Date(t)}},5986:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(5040),a=n(3681);function i(e){let{data:t,mutate:n,isLoading:i}=(0,a.Ay)("string"==typeof e?[e]:e,s.P);return{data:t,mutate:n,isLoading:i}}},6750:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var s=n(3343),a=n(607);function i(e,t,n){let i=(0,a.a)(e,n?.in);return isNaN(t)?(0,s.w)(n?.in||e,NaN):(t&&i.setDate(i.getDate()+t),i)}},7629:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/decks/[iri]/study",function(){return n(9096)}])},8535:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(2041),a=n(187),i=n(5986),l=n(7127);function r(e){let{data:t,mutate:n,isLoading:r}=(0,i.A)(e),o=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,l.nt)({iri:e.url,type:(0,s.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),hasCard:(0,s.tX)(e,"http://antwika.com/ns/solid-memo#hasCard")})),c=o.reduce((e,t)=>(e[t.iri]=t,e),{});return{deckDatasets:t,decks:o,deckMap:c,mutate:n,isLoading:r}}},9096:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var s=n(6029),a=n(872),i=n(1922),l=n(8887),r=n(2229),o=n(5729),c=n(8535),d=n(7127),m=n(2790),u=n(2271),h=n(6750),f=n(607);let w=(0,n(1610).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var p=n(2203),v=n.n(p);function x(){var e;let{getService:t,getSpacedRepetitionAlgorithm:n}=(0,o.useContext)(i.h),p=t(),{iri:x}=(0,r.useParams)(),{deckMap:k,isLoading:g}=(0,c.A)(x?[null==x?void 0:x.toString()]:[]),j=x?k[x.toString()]:void 0,{flashcardMap:N,mutate:D}=(0,m.A)(null!=(e=null==j?void 0:j.hasCard)?e:[]),y=n(),[I,b]=(0,o.useState)(!1),C=(0,o.useMemo)(()=>Object.keys(N).filter(e=>{var t;let n=N[e];if(!n)return!1;let s=(0,u.o)(null!=(t=n.lastReviewed)?t:new Date),a=n.lastReviewed?n.interval:0,i=(0,u.o)((0,h.f)(s,a)),l=(0,u.o)(new Date);return!(+(0,f.a)(i)>+(0,f.a)(l))}).map(e=>N[e]).filter(e=>void 0!==e).sort((e,t)=>(e.lastReviewed?new Date(e.lastReviewed).getTime():0)-(t.lastReviewed?new Date(t.lastReviewed).getTime():0)),[N]);if(g)return(0,s.jsx)(a.default,{children:(0,s.jsx)(l.Zp,{className:"p-2",children:(0,s.jsx)("div",{children:"Loading deck..."})})});if(!j)return(0,s.jsx)(a.default,{children:(0,s.jsx)("div",{children:"No deck found"})});let _=(0,s.jsxs)("div",{className:"flex text-foreground font-semibold",children:[(0,s.jsx)("span",{children:(0,s.jsxs)(v(),{className:"flex items-center",href:"/instances/".concat(encodeURIComponent(j.isInSolidMemoDataInstance)),children:[(0,s.jsx)(w,{})," Back"]})}),(0,s.jsx)("div",{className:"grow"}),(0,s.jsxs)("span",{children:[C.length," remaining"]})]}),A=C[0];if(!A)return(0,s.jsxs)(a.default,{children:[_,(0,s.jsx)("h1",{children:j.name}),(0,s.jsx)("div",{children:"There are no more flashcards to study in this deck!"})]});let R=async(e,t)=>{console.log("Reviewed flashcard",(0,d.L)(e.iri),", answer quality",t);let n=y.compute([{...e,q:t}]);await Promise.all(n.map(e=>p.updateFlashcard(e))),await D(),b(!1)};return(0,s.jsxs)(a.default,{children:[_,(0,s.jsx)("h1",{children:j.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(l.Zp,{className:"items-center",children:[!I&&(0,s.jsx)("h3",{children:A.front}),I&&(0,s.jsx)("h3",{children:A.back})]}),(0,s.jsxs)("div",{className:"flex sm:flex-row flex-col justify-center gap-2 flex-col-reverse",children:[!I&&(0,s.jsx)(l.$n,{onClick:()=>b(!0),children:"Display answer"}),I&&(0,s.jsx)(l.$n,{size:"lg",className:"bg-red-500/60 font-bold",onClick:()=>R(A,0),children:"Again"}),I&&(0,s.jsx)(l.$n,{size:"lg",className:"bg-orange-500/60 font-bold",onClick:()=>R(A,2),children:"Hard"}),I&&(0,s.jsx)(l.$n,{size:"lg",className:"bg-yellow-500/60 font-bold",onClick:()=>R(A,4),children:"Good"}),I&&(0,s.jsx)(l.$n,{size:"lg",className:"bg-green-500/60 font-bold",onClick:()=>R(A,5),children:"Easy"})]})]})]})}}},e=>{e.O(0,[681,636,593,792],()=>e(e.s=7629)),_N_E=e.O()}]);