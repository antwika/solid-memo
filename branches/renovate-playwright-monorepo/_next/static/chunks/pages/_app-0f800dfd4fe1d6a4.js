(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{92:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(4227)}])},261:(e,t,r)=>{"use strict";let n=r(9143),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=r(7894),{Symbol:a}=r(4039),{kIsDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:d}=r(918),f=a("kDestroy"),h=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let i=!1;function o(t){if(i)return;i=!0;let o=e._readableState,s=e._writableState;p(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(m,e,t):n.nextTick(y,e)}try{e._destroy(t||null,o)}catch(e){o(e)}}function m(e,t){v(e,t),y(e)}function y(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function v(e,t){let r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function b(e,t,r){let i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(v,e,t):v(e,t))}function _(e){let t=!1;function r(r){if(t)return void b(e,null!=r?r:new o);t=!0;let i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(f,r):r?b(e,r,!0):n.nextTick(w,e)}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function w(e){e.emit(h)}function S(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function x(e){e.emit("close")}function E(e,t){e.emit("error",t),n.nextTick(x,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let r=e._readableState,i=e._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(h,t),e.listenerCount(h)>1||n.nextTick(_,e)},destroyer:function(e,t){!(!e||u(e))&&(t||c(e)||(t=new s),d(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(E,e,t):n.nextTick(x,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){let r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(p(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(f,function(r){g(this,i(r,e),t)})),this},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},331:(e,t,r)=>{"use strict";let{Buffer:n}=r(1642),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:s}=r(4039),{promisify:{custom:a}}=r(6733),{streamReturningOperators:l,promiseReturningOperators:u}=r(8098),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=r(7894),d=r(3463),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:h}=r(4318),{pipeline:p}=r(927),{destroyer:g}=r(261),m=r(5791),y=r(9666),v=r(918),b=e.exports=r(5718).Stream;for(let e of(b.isDestroyed=v.isDestroyed,b.isDisturbed=v.isDisturbed,b.isErrored=v.isErrored,b.isReadable=v.isReadable,b.isWritable=v.isWritable,b.Readable=r(6261),o(l))){let t=l[e];function _(...e){if(new.target)throw c();return b.Readable.from(s(t,this,e))}i(_,"name",{__proto__:null,value:t.name}),i(_,"length",{__proto__:null,value:t.length}),i(b.Readable.prototype,e,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let e of o(u)){let t=u[e];function w(...e){if(new.target)throw c();return s(t,this,e)}i(w,"name",{__proto__:null,value:t.name}),i(w,"length",{__proto__:null,value:t.length}),i(b.Readable.prototype,e,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}b.Writable=r(2661),b.Duplex=r(9667),b.Transform=r(1079),b.PassThrough=r(3185),b.pipeline=p;let{addAbortSignal:S}=r(9110);b.addAbortSignal=S,b.finished=m,b.destroy=g,b.compose=d,b.setDefaultHighWaterMark=f,b.getDefaultHighWaterMark=h,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>y}),i(p,a,{__proto__:null,enumerable:!0,get:()=>y.pipeline}),i(m,a,{__proto__:null,enumerable:!0,get:()=>y.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},666:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"!==r||"object"!=typeof n)return n.toString();{let e=n.constructor!==Object?n.constructor.name:"";return`${e} {}`.trim()}}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;else if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":if(isNaN(e))return"NaN";if(Object.is(e,-0))return String(e);return e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},695:(e,t,r)=>{"use strict";r.d(t,{Ad:()=>k,EO:()=>_,K:()=>d,MR:()=>u,NQ:()=>A,OI:()=>l,PF:()=>b,QC:()=>w,QH:()=>y,ST:()=>s,Tv:()=>c,Y2:()=>S,Yp:()=>p,ZB:()=>v,c$:()=>x,g0:()=>F,ls:()=>h,tQ:()=>f,vk:()=>a,ye:()=>I});var n=r(5177),i=r(3511),o=r(8785);let s={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function a(e){return e?"true":"false"}function l(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null}function u(e){let t,r;if(e.millisecond&&(t=e.millisecond<10?`00${e.millisecond}`:e.millisecond<100?`0${e.millisecond}`:e.millisecond),"number"==typeof e.timezoneHourOffset){let t=10>Math.abs(e.timezoneHourOffset)?`0${Math.abs(e.timezoneHourOffset)}`:Math.abs(e.timezoneHourOffset);r=e.timezoneHourOffset>=0?`+${t}`:`-${t}`,e.timezoneMinuteOffset?r=`${r}:${e.timezoneMinuteOffset<10?`0${e.timezoneMinuteOffset}`:e.timezoneMinuteOffset}`:r+=":00"}return`${e.hour<10?`0${e.hour}`:e.hour}:${e.minute<10?`0${e.minute}`:e.minute}:${e.second<10?`0${e.second}`:e.second}${e.millisecond?`.${t}`:""}${r||""}`}function c(e){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]=g(e),[n,i,o]=t.split(":"),s=Number.parseInt(n,10),a=Number.parseInt(i,10),[l,u]=o.split("."),c=Number.parseInt(l,10),d=u?Number.parseInt(u,10):void 0;a>=60&&(s+=1,a-=60);let f={hour:s,minute:a,second:c};if("number"==typeof d&&(f.millisecond=d),"string"==typeof r){let[e,t]=m(r);if("number"!=typeof e||e>24||"number"!=typeof t||t>59)return null;f.timezoneHourOffset=e,f.timezoneMinuteOffset=t}return f}function d(e){return e.toISOString()}function f(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]=e.split("T"),[n,i]="-"===t.charAt(0)?[-1,t.substring(1)]:[1,t],[o,s,a]=i.split("-"),l=Number.parseInt(o,10)*n,u=Number.parseInt(s,10)-1,c=Number.parseInt(a,10),[d,f]=g(r),[h,p]="string"==typeof f?m(f):[0,0],[y,v,b]=d.split(":"),_=Number.parseInt(y,10)+h,w=Number.parseInt(v,10)+p,[S,x]=b.split("."),E=new Date(Date.UTC(l,u,c,_,w,Number.parseInt(S,10),x?Number.parseInt(x,10):0));return l>=0&&l<100&&E.setUTCFullYear(E.getUTCFullYear()-1900),E}function h(e){let t=e.getFullYear(),r=e.getMonth()+1,n=e.getDate(),[,i]=g(e.toISOString());return`${t}-${String(r).padStart(2,"0")}-${String(n).padStart(2,"0")}${i}`}function p(e){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]="-"===e.charAt(0)?[-1,e.substring(1)]:[1,e],[n,i,o]=r.split("-"),s=o.length>2?o.substring(0,2):o,a=Number.parseInt(n,10)*t,l=Number.parseInt(i,10)-1,u=new Date(Date.UTC(a,l,Number.parseInt(s,10),12));return a>=0&&a<100&&u.setUTCFullYear(u.getUTCFullYear()-1900),u}function g(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];let t=e.split("+"),r=e.split("-");return 1===t.length&&1===r.length?[t[0],void 0]:t.length>r.length?[t[0],`+${t[1]}`]:[r[0],`-${r[1]}`]}function m(e){if("Z"===e)return[0,0];let t="+"===e.charAt(0)?1:-1,[r,n]=e.substring(1).split(":");return[Number.parseInt(r,10)*t,Number.parseInt(n,10)*t]}function y(e){return e.toString()}function v(e){let t=Number.parseFloat(e);return Number.isNaN(t)?null:t}function b(e){return e.toString()}function _(e){let t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}function w(e){return e.toLowerCase()}function S(e){return E(e)&&"NamedNode"===e.termType}function x(e){return E(e)&&"Literal"===e.termType}function E(e){return null!==e&&"object"==typeof e&&"string"==typeof e.termType&&"string"==typeof e.value&&"function"==typeof e.equals}function k(e){return S(e)&&(0,i.AA)(e.value)}function F(e){let t=(0,o.t)(e);if("function"!=typeof URL)return!0;try{return new URL(t),!0}catch(e){return!1}}function A(e,t){return n.Ay.namedNode(I((0,i.J0)(e.value),t))}function I(e,t){if("function"!=typeof URL)throw Error("The URL interface is not available, so an IRI cannot be determined.");let r=new URL(t);return r.hash=e,r.href}},918:(e,t,r)=>{"use strict";let{SymbolAsyncIterator:n,SymbolIterator:i,SymbolFor:o}=r(4039),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),u=o("nodejs.stream.writable"),c=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise");function f(e,t=!1){var r;return!!(e&&"function"==typeof e.pipe&&"function"==typeof e.on&&(!t||"function"==typeof e.pause&&"function"==typeof e.resume)&&(!e._writableState||(null==(r=e._readableState)?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function h(e){var t;return!!(e&&"function"==typeof e.write&&"function"==typeof e.on&&(!e._readableState||(null==(t=e._writableState)?void 0:t.writable)!==!1))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!!(e&&!p(e)&&"function"==typeof e.pipeThrough&&"function"==typeof e.getReader&&"function"==typeof e.cancel)}function m(e){return!!(e&&!p(e)&&"function"==typeof e.getWriter&&"function"==typeof e.abort)}function y(e){return!!(e&&!p(e)&&"object"==typeof e.readable&&"object"==typeof e.writable)}function v(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[s]||null!=n&&n.destroyed)}function b(e){if(!h(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function _(e,t){if(!f(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function w(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!v(e)&&f(e)&&e.readable&&!_(e)}function S(e){return e&&null!=e[u]?e[u]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!v(e)&&h(e)&&e.writable&&!b(e)}function x(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function E(e){return"boolean"==typeof e._sent100&&x(e)}e.exports={isDestroyed:v,kIsDestroyed:s,isDisturbed:function(e){var t;return!!(e&&(null!=(t=e[c])?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,r,n,i,o,s,l,u,c,d;return!!(e&&(null!=(t=null!=(r=null!=(n=null!=(i=null!=(o=null!=(s=e[a])?s:e.readableErrored)?o:e.writableErrored)?i:null==(l=e._readableState)?void 0:l.errorEmitted)?n:null==(u=e._writableState)?void 0:u.errorEmitted)?r:null==(c=e._readableState)?void 0:c.errored)?t:null==(d=e._writableState)?void 0:d.errored))},kIsErrored:a,isReadable:w,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:o("nodejs.webstream.controllerErrorFunction"),kIsWritable:u,isClosed:function(e){if(!p(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&x(e)?e._closed:null},isDuplexNodeStream:function(e){return!!(e&&"function"==typeof e.pipe&&e._readableState&&"function"==typeof e.on&&"function"==typeof e.write)},isFinished:function(e,t){return p(e)?!!v(e)||!((null==t?void 0:t.readable)!==!1&&w(e)||(null==t?void 0:t.writable)!==!1&&S(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[i]:"function"==typeof e[n]||"function"==typeof e[i])},isReadableNodeStream:f,isReadableStream:g,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!!t&&!t.errored&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:_,isReadableErrored:function(e){var t,r;return p(e)?e.readableErrored?e.readableErrored:null!=(t=null==(r=e._readableState)?void 0:r.errored)?t:null:null},isNodeStream:p,isWebStream:function(e){return g(e)||m(e)||y(e)},isWritable:S,isWritableNodeStream:h,isWritableStream:m,isWritableEnded:b,isWritableFinished:function(e,t){if(!h(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return p(e)?e.writableErrored?e.writableErrored:null!=(t=null==(r=e._writableState)?void 0:r.errored)?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&(null==(t=e.req)?void 0:t.upgradeOrConnect)===void 0},isServerResponse:E,willEmitClose:function(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!n&&E(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}},927:(e,t,r)=>{"use strict";let n,i,o,s=r(9143),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:u,SymbolDispose:c}=r(4039),d=r(5791),{once:f}=r(6733),h=r(261),p=r(9667),{aggregateTwoErrors:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:w}=r(7894),{validateFunction:S,validateAbortSignal:x}=r(1204),{isIterable:E,isReadable:k,isReadableNodeStream:F,isNodeStream:A,isTransformStream:I,isWebStream:T,isReadableStream:R,isReadableFinished:C}=r(918),P=globalThis.AbortController||r(8461).AbortController;function N(e,t,r){let n=!1;return e.on("close",()=>{n=!0}),{destroy:t=>{n||(n=!0,h.destroyer(e,t||new b("pipe")))},cleanup:d(e,{readable:t,writable:r},e=>{n=!e})}}function j(e){if(E(e))return e;if(F(e))return O(e);throw new m("val",["Readable","Iterable","AsyncIterable"],e)}async function*O(e){i||(i=r(6261)),yield*i.prototype[u].call(e)}async function L(e,t,r,{end:n}){let i,o=null,s=e=>{if(e&&(i=e),o){let e=o;o=null,e()}},a=()=>new l((e,t)=>{i?t(i):o=()=>{i?t(i):e()}});t.on("drain",s);let u=d(t,{readable:!1},s);try{for await(let r of(t.writableNeedDrain&&await a(),e))t.write(r)||await a();n&&(t.end(),await a()),r()}catch(e){r(i!==e?g(i,e):e)}finally{u(),t.off("drain",s)}}async function D(e,t,r,{end:n}){I(t)&&(t=t.writable);let i=t.getWriter();try{for await(let t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function U(e,t,i){let l,u,f,h;if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new v("streams");let g=new P,b=g.signal,S=null==i?void 0:i.signal,O=[];function U(){$(new w)}x(S,"options.signal"),o=o||r(6733).addAbortListener,S&&(l=o(S,U));let M=[],B=0;function H(e){$(e,0==--B)}function $(e,r){var n;if(e&&(!u||"ERR_STREAM_PREMATURE_CLOSE"===u.code)&&(u=e),u||r){for(;M.length;)M.shift()(u);null==(n=l)||n[c](),g.abort(),r&&(u||O.forEach(e=>e()),s.nextTick(t,u,f))}}for(let t=0;t<e.length;t++){let o=e[t],a=t<e.length-1,l=t>0,u=a||(null==i?void 0:i.end)!==!1,c=t===e.length-1;if(A(o)){if(u){let{destroy:e,cleanup:t}=N(o,a,l);M.push(e),k(o)&&c&&O.push(t)}function K(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&H(e)}o.on("error",K),k(o)&&c&&O.push(()=>{o.removeListener("error",K)})}if(0===t)if("function"==typeof o){if(!E(h=o({signal:b})))throw new y("Iterable, AsyncIterable or Stream","source",h)}else h=E(o)||F(o)||I(o)?o:p.from(o);else if("function"==typeof o){var W,V;if(h=o(h=I(h)?j(null==(W=h)?void 0:W.readable):j(h),{signal:b}),a){if(!E(h,!0))throw new y("AsyncIterable",`transform[${t-1}]`,h)}else{n||(n=r(3185));let e=new n({objectMode:!0}),t=null==(V=h)?void 0:V.then;if("function"==typeof t)B++,t.call(h,t=>{f=t,null!=t&&e.write(t),u&&e.end(),s.nextTick(H)},t=>{e.destroy(t),s.nextTick(H,t)});else if(E(h,!0))B++,L(h,e,H,{end:u});else if(R(h)||I(h)){let t=h.readable||h;B++,L(t,e,H,{end:u})}else throw new y("AsyncIterable or Promise","destination",h);let{destroy:i,cleanup:o}=N(h=e,!1,!0);M.push(i),c&&O.push(o)}}else if(A(o)){if(F(h)){B+=2;let e=function(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new _)}),e.pipe(t,{end:!1}),n){function o(){i=!0,t.end()}C(e)?s.nextTick(o):e.once("end",o)}else r();return d(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),d(t,{readable:!1,writable:!0},r)}(h,o,H,{end:u});k(o)&&c&&O.push(e)}else if(I(h)||R(h)){let e=h.readable||h;B++,L(e,o,H,{end:u})}else if(E(h))B++,L(h,o,H,{end:u});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=o}else if(T(o)){if(F(h))B++,D(j(h),o,H,{end:u});else if(R(h)||E(h))B++,D(h,o,H,{end:u});else if(I(h))B++,D(h.readable,o,H,{end:u});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=o}else h=p.from(o)}return(null!=b&&b.aborted||null!=S&&S.aborted)&&s.nextTick(U),h}e.exports={pipelineImpl:U,pipeline:function(...e){return U(e,f((S(e[e.length-1],"streams[stream.length - 1]"),e.pop())))}}},1026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=r(5729);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=o(e,n)),t&&(i.current=o(t,n))},[e,t])}function o(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1079:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:n,Symbol:i}=r(4039);e.exports=u;let{ERR_METHOD_NOT_IMPLEMENTED:o}=r(7894).codes,s=r(9667),{getHighWaterMark:a}=r(4318);n(u.prototype,s.prototype),n(u,s);let l=i("kCallback");function u(e){if(!(this instanceof u))return new u(e);let t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{if(t)return void(e?e(t):this.destroy(t));null!=r&&this.push(r),this.push(null),e&&e()})}function d(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(e,t,r){throw new o("_transform()")},u.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(e,t)=>{if(e)return void r(e);null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[l]=r})},u.prototype._read=function(){if(this[l]){let e=this[l];this[l]=null,e()}}},1204:(e,t,r)=>{"use strict";let{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:d,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:h,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:m}=r(4039),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:S}}=r(7894),{normalizeEncoding:x}=r(6733),{isAsyncFunction:E,isArrayBufferView:k}=r(6733).types,F={},A=/^[0-7]+$/,I=y((e,t,r=c,n=u)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>n)throw new w(t,`>= ${r} && <= ${n}`,e)}),T=y((e,t,r=-0x80000000,n=0x7fffffff)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>n)throw new w(t,`>= ${r} && <= ${n}`,e)}),R=y((e,t,r=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new w(t,"an integer",e);let n=+!!r;if(e<n||e>0xffffffff)throw new w(t,`>= ${n} && <= 4294967295`,e)});function C(e,t){if("string"!=typeof e)throw new b(t,"string",e)}let P=y((e,t,r)=>{if(!i(r,e))throw new _(t,e,"must be one of: "+o(s(r,e=>"string"==typeof e?`'${e}'`:p(e)),", "))});function N(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function j(e,t,r){return null!=e&&f(e,t)?e[t]:r}let O=y((e,t,r=null)=>{let i=j(r,"allowArray",!1),o=j(r,"allowFunction",!1);if(!j(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)}),L=y((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)}),D=y((e,t,r=0)=>{if(!n(e))throw new b(t,"Array",e);if(e.length<r)throw new _(t,e,`must be longer than ${r}`)}),U=y((e,t="buffer")=>{if(!k(e))throw new b(t,["Buffer","TypedArray","DataView"],e)}),M=y((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)}),B=y((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)}),H=y((e,t)=>{if("function"!=typeof e||E(e))throw new b(t,"Function",e)}),$=y((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)}),K=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function W(e,t){if(void 0===e||!h(K,e))throw new _(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===h(A,e))throw new _(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return R(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)C(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++){let n=e[r],i=`${t}[${r}]`;if(null==n)throw new b(i,"AbortSignal",n);M(n,i)}},validateBoolean:N,validateBuffer:U,validateDictionary:L,validateEncoding:function(e,t){let r=x(t),n=e.length;if("hex"===r&&n%2!=0)throw new _("encoding",t,`is invalid for data of length ${n}`)},validateFunction:B,validateInt32:T,validateInteger:I,validateNumber:function(e,t,r,n){if("number"!=typeof e)throw new b(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&l(e))throw new w(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:O,validateOneOf:P,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===m(e).length||+e!=e>>>0||e>65535||0===e&&!r)throw new v(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(C(e,t),void 0===F[e]){if(void 0!==F[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:C,validateUint32:R,validateUndefined:$,validateUnion:function(e,t,r){if(!i(r,e))throw new b(t,`('${o(r,"|")}')`,e)},validateAbortSignal:M,validateLinkHeaderValue:function(e){if("string"==typeof e)return W(e,"hints"),e;if(n(e)){let t=e.length,r="";if(0===t)return r;for(let n=0;n<t;n++){let i=e[n];W(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new _("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},1482:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&"object"==typeof e.internal_resourceInfo}function i(e){return"object"==typeof e&&"object"==typeof e.internal_resourceInfo&&"object"==typeof e.internal_resourceInfo.linkedResources}function o(e){return"object"==typeof e.internal_changeLog&&Array.isArray(e.internal_changeLog.additions)&&Array.isArray(e.internal_changeLog.deletions)}r.d(t,{NF:()=>n,OG:()=>i,dT:()=>s,rg:()=>o});class s extends Error{}},1639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return S},useLinkStatus:function(){return w}});let n=r(8365),i=r(6029),o=n._(r(5729)),s=r(6658),a=r(4232),l=r(6225),u=r(8407),c=r(2696),d=r(8265),f=r(2343),h=r(8940),p=r(7469),g=r(1026);r(3724);let m=new Set;function y(e,t,r,n){if((0,a.isLocalURL)(t)){if(!n.bypassPrefetchedCheck){let i=t+"%"+r+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(m.has(i))return;m.add(i)}e.prefetch(t,r,n).catch(e=>{})}}function v(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let b=o.default.forwardRef(function(e,t){let r,n,{href:l,as:m,children:b,prefetch:_=null,passHref:w,replace:S,shallow:x,scroll:E,locale:k,onClick:F,onNavigate:A,onMouseEnter:I,onTouchStart:T,legacyBehavior:R=!1,...C}=e;r=b,R&&("string"==typeof r||"number"==typeof r)&&(r=(0,i.jsx)("a",{children:r}));let P=o.default.useContext(d.RouterContext),N=!1!==_,{href:j,as:O}=o.default.useMemo(()=>{if(!P){let e=v(l);return{href:e,as:m?v(m):e}}let[e,t]=(0,s.resolveHref)(P,l,!0);return{href:e,as:m?(0,s.resolveHref)(P,m):t||e}},[P,l,m]),L=o.default.useRef(j),D=o.default.useRef(O);R&&(n=o.default.Children.only(r));let U=R?n&&"object"==typeof n&&n.ref:t,[M,B,H]=(0,f.useIntersection)({rootMargin:"200px"}),$=o.default.useCallback(e=>{(D.current!==O||L.current!==j)&&(H(),D.current=O,L.current=j),M(e)},[O,j,H,M]),K=(0,g.useMergedRef)($,U);o.default.useEffect(()=>{P&&B&&N&&y(P,j,O,{locale:k})},[O,j,B,k,N,null==P?void 0:P.locale,P]);let W={ref:K,onClick(e){R||"function"!=typeof F||F(e),R&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),P&&(e.defaultPrevented||function(e,t,r,n,i,o,s,l,u){let{nodeName:c}=e.currentTarget;if(!("A"===c.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,a.isLocalURL)(r)){i&&(e.preventDefault(),location.replace(r));return}e.preventDefault(),(()=>{if(u){let e=!1;if(u({preventDefault:()=>{e=!0}}),e)return}let e=null==s||s;"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:o,locale:l,scroll:e}):t[i?"replace":"push"](n||r,{scroll:e})})()}}(e,P,j,O,S,x,E,k,A))},onMouseEnter(e){R||"function"!=typeof I||I(e),R&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),P&&y(P,j,O,{locale:k,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(e){R||"function"!=typeof T||T(e),R&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),P&&y(P,j,O,{locale:k,priority:!0,bypassPrefetchedCheck:!0})}};if((0,u.isAbsoluteUrl)(O))W.href=O;else if(!R||w||"a"===n.type&&!("href"in n.props)){let e=void 0!==k?k:null==P?void 0:P.locale;W.href=(null==P?void 0:P.isLocaleDomain)&&(0,h.getDomainLocale)(O,e,null==P?void 0:P.locales,null==P?void 0:P.domainLocales)||(0,p.addBasePath)((0,c.addLocale)(O,e,null==P?void 0:P.defaultLocale))}return R?o.default.cloneElement(n,W):(0,i.jsx)("a",{...C,...W,children:r})}),_=(0,o.createContext)({pending:!1}),w=()=>(0,o.useContext)(_),S=b;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1642:(e,t,r)=>{"use strict";let n=r(8983),i=r(1838),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);let r=0|p(n,i),o=s(r),l=o.write(n,i);return l!==r&&(o=o.slice(0,l)),o}if(ArrayBuffer.isView(e)){var o=e;if(D(o,Uint8Array)){let e=new Uint8Array(o);return f(e.buffer,e.byteOffset,e.byteLength)}return d(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let l=e.valueOf&&e.valueOf();if(null!=l&&l!==e)return a.from(l,t,r);let u=function(e){if(a.isBuffer(e)){let t=0|h(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|h(e))}function d(e){let t=e.length<0?0:0|h(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function h(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(i)return n?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=U[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var o,s,a;return o=this,s=t,a=r,0===s&&a===o.length?n.fromByteArray(o):n.fromByteArray(o.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r*=1)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return v(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*s}else -1!==n&&(o-=o-n),n=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return -1}function b(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(o=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}var o=n;let s=o.length;if(s<=4096)return String.fromCharCode.apply(String,o);let a="",l=0;for(;l<s;)a+=String.fromCharCode.apply(String,o.slice(l,l+=4096));return a}function _(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,i,o){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function S(e,t,r,n,i){R(t,n,i,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function x(e,t,r,n,i){R(t,n,i,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function E(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,n,o){return t*=1,r>>>=0,o||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,o){return t*=1,r>>>=0,o||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(D(t,Uint8Array))i+t.length>n.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(a.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t,l=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){o=u[e],s=c[e];break}return o<s?-1:+(s<o)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){var i,o,s,a,l,u,c,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let h=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){var a;let n=parseInt(t.substr(2*i,2),16);if((a=n)!=a)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,L(j(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=r,L(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return l=t,u=r,L(O(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,L(function(e,t){let r,n,i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,d);default:if(h)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),a.prototype.readBigUInt64BE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return(e>>>=0,t||_(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),a.prototype.readBigInt64BE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;w(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=M(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=M(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);w(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=M(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=M(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},a.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=a.isBuffer(e)?e:a.from(e,n),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};let A={};function I(e,t,r){A[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function T(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function R(e,t,r,n,i,o){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new A.ERR_OUT_OF_RANGE("value",n,e)}C(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&P(i,n.length-(o+1))}function C(e,t){if("number"!=typeof e)throw new A.ERR_INVALID_ARG_TYPE(t,"number",e)}function P(e,t,r){if(Math.floor(e)!==e)throw C(e,r),new A.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new A.ERR_BUFFER_OUT_OF_BOUNDS;throw new A.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}I("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),I("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),I("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=T(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=T(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let N=/[^+/0-9A-Za-z-_]/g;function j(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function O(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function M(e){return"undefined"==typeof BigInt?B:e}function B(){throw Error("BigInt not supported")}},1838:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=u}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=5960464477539062e-23*(23===i),h=n?0:o-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*g}},2041:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>d,ID:()=>u,K9:()=>m,NB:()=>g,S5:()=>h,XU:()=>p,me:()=>y,oq:()=>f,tX:()=>c});var n=r(695),i=r(2672),o=r(4426),s=r(8785),a=r(3511),l=r(5177);function u(e,t){var r,l,u;if((0,i.xj)(e),!(0,n.g0)(t))throw new o.dU(t);let c=(0,s.t)(t),d=null!=(u=null==(l=null==(r=e.predicates[c])?void 0:r.namedNodes)?void 0:l[0])?u:null;return null===d?null:(0,a.AA)(d)?`#${(0,a.J0)(d)}`:d}function c(e,t){var r,l,u;if((0,i.xj)(e),!(0,n.g0)(t))throw new o.dU(t);let c=(0,s.t)(t);return null!=(u=null==(l=null==(r=e.predicates[c])?void 0:r.namedNodes)?void 0:l.map(e=>(0,a.AA)(e)?`#${(0,a.J0)(e)}`:e))?u:[]}let d=c;function f(e,t){(0,i.xj)(e);let r=v(e,t,n.ST.dateTime);return null===r?null:(0,n.tQ)(r)}function h(e,t){(0,i.xj)(e);let r=v(e,t,n.ST.decimal);return null===r?null:(0,n.ZB)(r)}function p(e,t){(0,i.xj)(e);let r=v(e,t,n.ST.integer);return null===r?null:(0,n.EO)(r)}function g(e,t){return(0,i.xj)(e),v(e,t,n.ST.string)}function m(e,t){return(0,i.xj)(e),function(e,t,r){var i,a,l;if(!(0,n.g0)(t))throw new o.dU(t);let u=(0,s.t)(t);return[...null!=(l=null==(a=null==(i=e.predicates[u])?void 0:i.literals)?void 0:a[r])?l:[]]}(e,t,n.ST.string)}function y(e,t){var r,u;(0,i.xj)(e);let c=d(e,t).map(e=>l.Ay.namedNode(e)),f=function(e,t){var r,a,u,c;if((0,i.xj)(e),!(0,n.g0)(t))throw new o.dU(t);let d=(0,s.t)(t),f=[],h=null!=(a=null==(r=e.predicates[d])?void 0:r.langStrings)?a:{};for(let e of Object.keys(h)){let t=h[e].map(t=>l.Ay.literal(t,e));f=f.concat(t)}let p=null!=(c=null==(u=e.predicates[d])?void 0:u.literals)?c:{};for(let e of Object.keys(p)){let t=p[e],r=l.Ay.namedNode(e),n=t.map(e=>l.Ay.literal(e,r));f=f.concat(n)}return f}(e,t),h=(0,s.t)(t),p=(null!=(u=null==(r=e.predicates[h])?void 0:r.blankNodes)?u:[]).map(e=>{let t=(0,a.GM)(e)?(0,a.Sk)(e):void 0;return l.Ay.blankNode(t)});return c.concat(f).concat(p)}function v(e,t,r){var i,a,l,u;if(!(0,n.g0)(t))throw new o.dU(t);let c=(0,s.t)(t);return null!=(u=null==(l=null==(a=null==(i=e.predicates[c])?void 0:i.literals)?void 0:a[r])?void 0:l[0])?u:null}},2202:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let n=r(5729),i=r(4754),o="function"==typeof IntersectionObserver,s=new Map,a=[];function l(e){let{rootRef:t,rootMargin:r,disabled:l}=e,u=l||!o,[c,d]=(0,n.useState)(!1),f=(0,n.useRef)(null),h=(0,n.useCallback)(e=>{f.current=e},[]);return(0,n.useEffect)(()=>{if(o){if(u||c)return;let e=f.current;if(e&&e.tagName)return function(e,t,r){let{id:n,observer:i,elements:o}=function(e){let t,r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=s.get(n)))return t;let i=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:i},a.push(r),s.set(r,t),t}(r);return o.set(e,t),i.observe(e),function(){if(o.delete(e),i.unobserve(e),0===o.size){i.disconnect(),s.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!c){let e=(0,i.requestIdleCallback)(()=>d(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,r,t,c,f.current]),[h,c,(0,n.useCallback)(()=>{d(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return _}});let n=r(4252),i=r(8365),o=r(6029),s=i._(r(5729)),a=n._(r(6760)),l=n._(r(9836)),u=r(4915),c=r(6904),d=r(72);r(546);let f=r(8265),h=n._(r(3829)),p=r(1026),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/solid-memo/branches/renovate-playwright-monorepo/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function m(e,t,r,n,i,o,s){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function y(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}let v=(0,s.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:i,height:a,width:l,decoding:u,className:c,style:d,fetchPriority:f,placeholder:h,loading:g,unoptimized:v,fill:b,onLoadRef:_,onLoadingCompleteRef:w,setBlurComplete:S,setShowAltText:x,sizesInput:E,onLoad:k,onError:F,...A}=e,I=(0,s.useCallback)(e=>{e&&(F&&(e.src=e.src),e.complete&&m(e,h,_,w,S,v,E))},[r,h,_,w,S,F,v,E]),T=(0,p.useMergedRef)(t,I);return(0,o.jsx)("img",{...A,...y(f),loading:g,width:l,height:a,decoding:u,"data-nimg":b?"fill":"1",className:c,style:d,sizes:i,srcSet:n,src:r,ref:T,onLoad:e=>{m(e.currentTarget,h,_,w,S,v,E)},onError:e=>{x(!0),"empty"!==h&&S(!0),F&&F(e)}})});function b(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...y(r.fetchPriority)};return t&&a.default.preload?(a.default.preload(r.src,n),null):(0,o.jsx)(l.default,{children:(0,o.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let _=(0,s.forwardRef)((e,t)=>{let r=(0,s.useContext)(f.RouterContext),n=(0,s.useContext)(d.ImageConfigContext),i=(0,s.useMemo)(()=>{var e;let t=g||n||c.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),i=t.deviceSizes.sort((e,t)=>e-t),o=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:i,qualities:o}},[n]),{onLoad:a,onLoadingComplete:l}=e,p=(0,s.useRef)(a);(0,s.useEffect)(()=>{p.current=a},[a]);let m=(0,s.useRef)(l);(0,s.useEffect)(()=>{m.current=l},[l]);let[y,_]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),{props:x,meta:E}=(0,u.getImgProps)(e,{defaultLoader:h.default,imgConf:i,blurComplete:y,showAltText:w});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{...x,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:p,onLoadingCompleteRef:m,setBlurComplete:_,setShowAltText:S,sizesInput:e.sizes,ref:t}),E.priority?(0,o.jsx)(b,{isAppRouter:!r,imgAttributes:x}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2572:(e,t,r)=>{var n=r(1642),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},2647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2661:(e,t,r)=>{"use strict";let n,i=r(9143),{ArrayPrototypeSlice:o,Error:s,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:l,ObjectDefineProperties:u,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:d,Symbol:f,SymbolHasInstance:h}=r(4039);e.exports=O,O.WritableState=N;let{EventEmitter:p}=r(5978),g=r(5718).Stream,{Buffer:m}=r(1642),y=r(261),{addAbortSignal:v}=r(9110),{getHighWaterMark:b,getDefaultHighWaterMark:_}=r(4318),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:F,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:T}=r(7894).codes,{errorOrDestroy:R}=y;function C(){}c(O.prototype,g.prototype),c(O,g);let P=f("kOnFinished");function N(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(9667)),this.objectMode=!!(e&&e.objectMode),n&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",n):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let i=!!(e&&!1===e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,j(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function j(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function O(e){let t=this instanceof r(9667);if(!t&&!a(O,this))return new O(e);this._writableState=new N(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&v(e.signal,this)),g.call(this,e),y.construct(this,()=>{let e=this._writableState;e.writing||K(this,e),V(this,e)})}function L(e,t,r,n){let o,s=e._writableState;if("function"==typeof r)n=r,r=s.defaultEncoding;else{if(r){if("buffer"!==r&&!m.isEncoding(r))throw new T(r)}else r=s.defaultEncoding;"function"!=typeof n&&(n=C)}if(null===t)throw new A;if(!s.objectMode)if("string"==typeof t)!1!==s.decodeStrings&&(t=m.from(t,r),r="buffer");else if(t instanceof m)r="buffer";else if(g._isUint8Array(t))t=g._uint8ArrayToBuffer(t),r="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],t);return(s.ending?o=new I:s.destroyed&&(o=new k("write")),o)?(i.nextTick(n,o),R(e,o,!0),o):(s.pendingcb++,function(e,t,r,n,i){let o=t.objectMode?1:r.length;t.length+=o;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==C&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(e,s,t,r,n))}function D(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new k("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function U(e,t,r,n){--t.pendingcb,n(r),$(t),R(e,r)}function M(e,t){let r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)return void R(e,new x);r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?i.nextTick(U,e,r,t,o):U(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&K(e,r),n?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},i.nextTick(B,r.afterWriteTickInfo)):H(e,r,1,o))}function B({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,H(e,t,r,n)}function H(e,t,r,n){for(t.ending||e.destroyed||0!==t.length||!t.needDrain||(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&$(t),V(e,t)}function $(e){var t,r;if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){let{chunk:n,callback:i}=e.buffered[r],o=e.objectMode?1:n.length;e.length-=o,i(null!=(t=e.errored)?t:new k("write"))}let n=e[P].splice(0);for(let t=0;t<n.length;t++)n[t](null!=(r=e.errored)?r:new k("end"));j(e)}function K(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=t,s=r.length-n;if(!s)return;let a=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let n=t.allNoop?C:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},i=t.allNoop&&0===a?r:o(r,a);i.allBuffers=t.allBuffers,D(e,t,!0,t.length,i,"",n),j(t)}else{do{let{chunk:n,encoding:o,callback:s}=r[a];r[a++]=null,D(e,t,!1,i?1:n.length,n,o,s)}while(a<r.length&&!t.writing);a===r.length?j(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function W(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function V(e,t,r){if(W(t)){if(!t.prefinished&&!t.finalCalled)if("function"!=typeof e._final||t.destroyed)t.prefinished=!0,e.emit("prefinish");else{t.finalCalled=!0;let r=!1;function n(n){if(r)return void R(e,null!=n?n:x());if(r=!0,t.pendingcb--,n){let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e](n);R(e,n,t.sync)}else W(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,i.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(e){n(e)}t.sync=!1}0===t.pendingcb&&(r?(t.pendingcb++,i.nextTick((e,t)=>{W(t)?q(e,t):t.pendingcb--},e,t)):W(t)&&(t.pendingcb++,q(e,t)))}}function q(e,t){t.pendingcb--,t.finished=!0;let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}N.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},l(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(O,h,{__proto__:null,value:function(e){return!!a(this,e)||this===O&&e&&e._writableState instanceof N}}),O.prototype.pipe=function(){R(this,new E)},O.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||K(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=d(e)),!m.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},O.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new S("_write()")},O.prototype._writev=null,O.prototype.end=function(e,t,r){let n,o=this._writableState;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){let r=L(this,e,t);r instanceof s&&(n=r)}return o.corked&&(o.corked=1,this.uncork()),n||(o.errored||o.ending?o.finished?n=new F("end"):o.destroyed&&(n=new k("end")):(o.ending=!0,V(this,o,!0),o.ended=!0)),"function"==typeof r&&(n||o.finished?i.nextTick(r,n):o[P].push(r)),this},u(O.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let z=y.destroy;function J(){return void 0===n&&(n={}),n}O.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[P].length)&&i.nextTick($,r),z.call(this,e,t),this},O.prototype._undestroy=y.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},O.fromWeb=function(e,t){return J().newStreamWritableFromWritableStream(e,t)},O.toWeb=function(e){return J().newWritableStreamFromStreamWritable(e)}},2672:(e,t,r)=>{"use strict";r.d(t,{CC:()=>c,Mc:()=>u,ZU:()=>d,e0:()=>a,xj:()=>l});var n=r(695),i=r(1482),o=r(4426),s=r(3511);function a(e){var t,r,i,o,s,a,l,u;if((0,n.Y2)(e))return`<${e.value}> (URL)`;if((0,n.c$)(e)){let c;if(!(0,n.Y2)(e.datatype))return`[${e.value}] (RDF/JS Literal of unknown type)`;switch(e.datatype.value){case n.ST.boolean:return c=null!=(r=null==(t=(0,n.OI)(e.value))?void 0:t.valueOf())?r:`Invalid data: \`${e.value}\``,`${c} (boolean)`;case n.ST.dateTime:return c=null!=(o=null==(i=(0,n.tQ)(e.value))?void 0:i.toUTCString())?o:`Invalid data: \`${e.value}\``,`${c} (datetime)`;case n.ST.decimal:return c=null!=(a=null==(s=(0,n.ZB)(e.value))?void 0:s.toString())?a:`Invalid data: \`${e.value}\``,`${c} (decimal)`;case n.ST.integer:return c=null!=(u=null==(l=(0,n.EO)(e.value))?void 0:l.toString())?u:`Invalid data: \`${e.value}\``,`${c} (integer)`;case n.ST.langString:return`"${e.value}" (${e.language} string)`;case n.ST.string:return`"${e.value}" (string)`;default:return`[${e.value}] (RDF/JS Literal of type: \`${e.datatype.value}\`)`}}return"BlankNode"===e.termType?`[${e.value}] (RDF/JS BlankNode)`:"Quad"===e.termType?"??? (nested RDF* Quad)":"Variable"===e.termType?`?${e.value} (RDF/JS Variable)`:e}function l(e){if(!(0,o.TO)(e))throw new o.lB(e)}function u(e,t){let r=(0,i.rg)(e)?e.internal_changeLog:{additions:[],deletions:[]},[n,o]=t.filter(e=>!f(e)).reduce(([e,t],r)=>void 0!==t.find(e=>e.equals(r))?[e,t.filter(e=>!e.equals(r))]:[e.concat(r),t],[r.additions,r.deletions]);return(0,s.CN)({...e,internal_changeLog:{additions:n,deletions:o}})}function c(e,t){let r=(0,i.rg)(e)?e.internal_changeLog:{additions:[],deletions:[]},[n,o]=t.filter(e=>!f(e)).reduce(([e,t],r)=>void 0!==e.find(e=>e.equals(r))?[e.filter(e=>!e.equals(r)),t]:[e,t.concat(r)],[r.additions,r.deletions]);return(0,s.CN)({...e,internal_changeLog:{additions:n,deletions:o}})}function d(e){return(0,i.rg)(e)?e:(0,s.CN)({...e,internal_changeLog:{additions:[],deletions:[]}})}function f(e){return"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType}},3021:()=>{},3185:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:n}=r(4039);e.exports=o;let i=r(1079);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(o.prototype,i.prototype),n(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},3463:(e,t,r)=>{"use strict";let{pipeline:n}=r(927),i=r(9667),{destroyer:o}=r(261),{isNodeStream:s,isReadable:a,isWritable:l,isWebStream:u,isTransformStream:c,isWritableStream:d,isReadableStream:f}=r(918),{AbortError:h,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(7894),m=r(5791);e.exports=function(...e){let t,r,y,v,b;if(0===e.length)throw new g("streams");if(1===e.length)return i.from(e[0]);let _=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=i.from(e[t])}for(let t=0;t<e.length;++t)if(s(e[t])||u(e[t])){if(t<e.length-1&&!(a(e[t])||f(e[t])||c(e[t])))throw new p(`streams[${t}]`,_[t],"must be readable");if(t>0&&!(l(e[t])||d(e[t])||c(e[t])))throw new p(`streams[${t}]`,_[t],"must be writable")}let w=e[0],S=n(e,function(e){let t=v;v=null,t?t(e):e?b.destroy(e):E||x||b.destroy()}),x=!!(l(w)||d(w)||c(w)),E=!!(a(S)||f(S)||c(S));if(b=new i({writableObjectMode:!!(null!=w&&w.writableObjectMode),readableObjectMode:!!(null!=S&&S.readableObjectMode),writable:x,readable:E}),x){if(s(w))b._write=function(e,r,n){w.write(e,r)?n():t=n},b._final=function(e){w.end(),r=e},w.on("drain",function(){if(t){let e=t;t=null,e()}});else if(u(w)){let e=(c(w)?w.writable:w).getWriter();b._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(e){n(e)}},b._final=async function(t){try{await e.ready,e.close().catch(()=>{}),r=t}catch(e){t(e)}}}m(c(S)?S.readable:S,()=>{if(r){let e=r;r=null,e()}})}if(E){if(s(S))S.on("readable",function(){if(y){let e=y;y=null,e()}}),S.on("end",function(){b.push(null)}),b._read=function(){for(;;){let e=S.read();if(null===e){y=b._read;return}if(!b.push(e))return}};else if(u(S)){let e=(c(S)?S.readable:S).getReader();b._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!b.push(t))return;if(r)return void b.push(null)}catch{return}}}}return b._destroy=function(e,n){e||null===v||(e=new h),y=null,t=null,r=null,null===v?n(e):(v=n,s(S)&&o(S,e))},b}},3511:(e,t,r)=>{"use strict";r.d(t,{AA:()=>o,CN:()=>i,GM:()=>l,J0:()=>s,Sk:()=>u,cW:()=>c,w$:()=>a});let n="https://inrupt.com/.well-known/sdk-local-node/",{freeze:i}=Object;function o(e){return e.substring(0,n.length)===n}function s(e){return e.substring(n.length)}function a(e){return`${n}${e}`}function l(e){return"string"==typeof e&&"_:"===e.substring(0,2)}function u(e){return e.substring(2)}function c(e){return`_:${e.value}`}},3606:(e,t,r)=>{"use strict";r.d(t,{$n:()=>w,Zp:()=>A,Wu:()=>C,BT:()=>R,aR:()=>I,ZB:()=>T,rI:()=>it,SQ:()=>ii,_2:()=>io,ty:()=>ir,pd:()=>S,JU:()=>F});var n,i,o,s=r(6029),a=r(5729),l=r.t(a,2);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function c(...e){return t=>{let r=!1,n=e.map(e=>{let n=u(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():u(e[t],null)}}}}function d(...e){return a.useCallback(c(...e),e)}function f(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){var i;let e,o,s=(i=r,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),l=function(e,t){let r={...t};for(let n in t){let i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...e)=>{o(...e),i(...e)}:i&&(r[n]=i):"style"===n?r[n]={...i,...o}:"className"===n&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(l.ref=t?c(t,s):s),a.cloneElement(r,l)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...i}=e,o=a.Children.toArray(n),l=o.find(g);if(l){let e=l.props.children,n=o.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var h=f("Slot"),p=Symbol("radix.slottable");function g(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}var m=r(9241);let y=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,v=m.$;var b=r(8429);let _=((e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return v(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==o?void 0:o[e];if(null===t)return null;let s=y(t)||y(n);return i[e][s]}),a=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return v(e,s,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...a}[t]):({...o,...a})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function w(e){let{className:t,variant:r,size:n,asChild:i=!1,...o}=e;return(0,s.jsx)(i?h:"button",{"data-slot":"button",className:(0,b.cn)(_({variant:r,size:n,className:t})),...o})}function S(e){let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,b.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var x=r(6760),E=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=f(`Primitive.${t}`),n=a.forwardRef((e,n)=>{let{asChild:i,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i?r:t,{...o,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),k=a.forwardRef((e,t)=>(0,s.jsx)(E.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function F(e){let{className:t,...r}=e;return(0,s.jsx)(k,{"data-slot":"label",className:(0,b.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}function A(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,b.cn)("bg-card text-foreground flex flex-col gap-2 rounded-xl px-4 py-6 shadow-sm",t),...r})}function I(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,b.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function T(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,b.cn)("leading-none font-semibold",t),...r})}function R(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,b.cn)("text-muted-foreground text-sm",t),...r})}function C(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,b.cn)("px-6",t),...r})}function P(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function N(e,t=[]){let r=[],n=()=>{let t=r.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let i=a.createContext(n),o=r.length;r=[...r,n];let l=t=>{let{scope:r,children:n,...l}=t,u=r?.[e]?.[o]||i,c=a.useMemo(()=>l,Object.values(l));return(0,s.jsx)(u.Provider,{value:c,children:n})};return l.displayName=t+"Provider",[l,function(r,s){let l=s?.[e]?.[o]||i,u=a.useContext(l);if(u)return u;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}k.displayName="Label";var j=globalThis?.document?a.useLayoutEffect:()=>{},O=l[" useInsertionEffect ".trim().toString()]||j;function L({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[i,o,s]=function({defaultProp:e,onChange:t}){let[r,n]=a.useState(e),i=a.useRef(r),o=a.useRef(t);return O(()=>{o.current=t},[t]),a.useEffect(()=>{i.current!==r&&(o.current?.(r),i.current=r)},[r,i]),[r,n,o]}({defaultProp:t,onChange:r}),l=void 0!==e,u=l?e:i;{let t=a.useRef(void 0!==e);a.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,n])}return[u,a.useCallback(t=>{if(l){let r="function"==typeof t?t(e):t;r!==e&&s.current?.(r)}else o(t)},[l,e,o,s])]}function D(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){var i;let e,o,s=(i=r,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),l=function(e,t){let r={...t};for(let n in t){let i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...e)=>{let t=o(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...o}:"className"===n&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(l.ref=t?c(t,s):s),a.cloneElement(r,l)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=a.forwardRef((e,r)=>{let{children:n,...i}=e,o=a.Children.toArray(n),l=o.find(M);if(l){let e=l.props.children,n=o.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...i,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,s.jsx)(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}Symbol("RADIX:SYNC_STATE");var U=Symbol("radix.slottable");function M(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===U}var B=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=D(`Primitive.${t}`),n=a.forwardRef((e,n)=>{let{asChild:i,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i?r:t,{...o,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function H(e,t){e&&x.flushSync(()=>e.dispatchEvent(t))}function $(e){let t=e+"CollectionProvider",[r,n]=N(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),l=e=>{let{scope:t,children:r}=e,n=a.useRef(null),o=a.useRef(new Map).current;return(0,s.jsx)(i,{scope:t,itemMap:o,collectionRef:n,children:r})};l.displayName=t;let u=e+"CollectionSlot",c=D(u),f=a.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=d(t,o(u,r).collectionRef);return(0,s.jsx)(c,{ref:i,children:n})});f.displayName=u;let h=e+"CollectionItemSlot",p="data-radix-collection-item",g=D(h),m=a.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,l=a.useRef(null),u=d(t,l),c=o(h,r);return a.useEffect(()=>(c.itemMap.set(l,{ref:l,...i}),()=>void c.itemMap.delete(l))),(0,s.jsx)(g,{...{[p]:""},ref:u,children:n})});return m.displayName=h,[{Provider:l,Slot:f,ItemSlot:m},function(t){let r=o(e+"CollectionConsumer",t);return a.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}var K=new WeakMap;function W(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);let r=function(e,t){let r=e.length,n=V(t),i=n>=0?n:r+n;return i<0||i>=r?-1:i}(e,t);return -1===r?void 0:e[r]}function V(e){return e!=e||0===e?0:Math.trunc(e)}var q=a.createContext(void 0);function z(e){let t=a.useContext(q);return e||t||"ltr"}function J(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}var Z="dismissableLayer.update",G=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Y=a.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:u,onDismiss:c,...f}=e,h=a.useContext(G),[p,g]=a.useState(null),m=p?.ownerDocument??globalThis?.document,[,y]=a.useState({}),v=d(t,e=>g(e)),b=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(_),S=p?b.indexOf(p):-1,x=h.layersWithOutsidePointerEventsDisabled.size>0,E=S>=w,k=function(e,t=globalThis?.document){let r=J(e),n=a.useRef(!1),i=a.useRef(()=>{});return a.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){Q("dismissableLayer.pointerDownOutside",r,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...h.branches].some(e=>e.contains(t));E&&!r&&(o?.(e),u?.(e),e.defaultPrevented||c?.())},m),F=function(e,t=globalThis?.document){let r=J(e),n=a.useRef(!1);return a.useEffect(()=>{let e=e=>{e.target&&!n.current&&Q("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;![...h.branches].some(e=>e.contains(t))&&(l?.(e),u?.(e),e.defaultPrevented||c?.())},m);return!function(e,t=globalThis?.document){let r=J(e);a.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{S===h.layers.size-1&&(n?.(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},m),a.useEffect(()=>{if(p)return r&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(i=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),X(),()=>{r&&1===h.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=i)}},[p,m,r,h]),a.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),X())},[p,h]),a.useEffect(()=>{let e=()=>y({});return document.addEventListener(Z,e),()=>document.removeEventListener(Z,e)},[]),(0,s.jsx)(B.div,{...f,ref:v,style:{pointerEvents:x?E?"auto":"none":void 0,...e.style},onFocusCapture:P(e.onFocusCapture,F.onFocusCapture),onBlurCapture:P(e.onBlurCapture,F.onBlurCapture),onPointerDownCapture:P(e.onPointerDownCapture,k.onPointerDownCapture)})});function X(){let e=new CustomEvent(Z);document.dispatchEvent(e)}function Q(e,t,r,{discrete:n}){let i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?H(i,o):i.dispatchEvent(o)}Y.displayName="DismissableLayer",a.forwardRef((e,t)=>{let r=a.useContext(G),n=a.useRef(null),i=d(t,n);return a.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,s.jsx)(B.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var ee=0;function et(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var er="focusScope.autoFocusOnMount",en="focusScope.autoFocusOnUnmount",ei={bubbles:!1,cancelable:!0},eo=a.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...l}=e,[u,c]=a.useState(null),f=J(i),h=J(o),p=a.useRef(null),g=d(t,e=>c(e)),m=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(n){let e=function(e){if(m.paused||!u)return;let t=e.target;u.contains(t)?p.current=t:el(p.current,{select:!0})},t=function(e){if(m.paused||!u)return;let t=e.relatedTarget;null!==t&&(u.contains(t)||el(p.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&el(u)});return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,u,m.paused]),a.useEffect(()=>{if(u){eu.add(m);let e=document.activeElement;if(!u.contains(e)){let t=new CustomEvent(er,ei);u.addEventListener(er,f),u.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(el(n,{select:t}),document.activeElement!==r)return}(es(u).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&el(u))}return()=>{u.removeEventListener(er,f),setTimeout(()=>{let t=new CustomEvent(en,ei);u.addEventListener(en,h),u.dispatchEvent(t),t.defaultPrevented||el(e??document.body,{select:!0}),u.removeEventListener(en,h),eu.remove(m)},0)}}},[u,f,h,m]);let y=a.useCallback(e=>{if(!r&&!n||m.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[n,o]=function(e){let t=es(e);return[ea(t,e),ea(t.reverse(),e)]}(t);n&&o?e.shiftKey||i!==o?e.shiftKey&&i===n&&(e.preventDefault(),r&&el(o,{select:!0})):(e.preventDefault(),r&&el(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,m.paused]);return(0,s.jsx)(B.div,{tabIndex:-1,...l,ref:g,onKeyDown:y})});function es(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ea(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function el(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}eo.displayName="FocusScope";var eu=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=ec(e,t)).unshift(t)},remove(t){e=ec(e,t),e[0]?.resume()}}}();function ec(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var ed=l[" useId ".trim().toString()]||(()=>void 0),ef=0;function eh(e){let[t,r]=a.useState(ed());return j(()=>{e||r(e=>e??String(ef++))},[e]),e||(t?`radix-${t}`:"")}let ep=["top","right","bottom","left"],eg=Math.min,em=Math.max,ey=Math.round,ev=Math.floor,eb=e=>({x:e,y:e}),e_={left:"right",right:"left",bottom:"top",top:"bottom"},ew={start:"end",end:"start"};function eS(e,t){return"function"==typeof e?e(t):e}function ex(e){return e.split("-")[0]}function eE(e){return e.split("-")[1]}function ek(e){return"x"===e?"y":"x"}function eF(e){return"y"===e?"height":"width"}function eA(e){return["top","bottom"].includes(ex(e))?"y":"x"}function eI(e){return e.replace(/start|end/g,e=>ew[e])}function eT(e){return e.replace(/left|right|bottom|top/g,e=>e_[e])}function eR(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function eC(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function eP(e,t,r){let n,{reference:i,floating:o}=e,s=eA(t),a=ek(eA(t)),l=eF(a),u=ex(t),c="y"===s,d=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,h=i[l]/2-o[l]/2;switch(u){case"top":n={x:d,y:i.y-o.height};break;case"bottom":n={x:d,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:f};break;case"left":n={x:i.x-o.width,y:f};break;default:n={x:i.x,y:i.y}}switch(eE(t)){case"start":n[a]-=h*(r&&c?-1:1);break;case"end":n[a]+=h*(r&&c?-1:1)}return n}let eN=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),l=await (null==s.isRTL?void 0:s.isRTL(t)),u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=eP(u,n,l),f=n,h={},p=0;for(let r=0;r<a.length;r++){let{name:o,fn:g}=a[r],{x:m,y:y,data:v,reset:b}=await g({x:c,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});c=null!=m?m:c,d=null!=y?y:d,h={...h,[o]:{...h[o],...v}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:c,y:d}=eP(u,f,l)),r=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function ej(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=eS(t,e),p=eR(h),g=a[f?"floating"===d?"reference":"floating":d],m=eC(await o.getClippingRect({element:null==(r=await (null==o.isElement?void 0:o.isElement(g)))||r?g:g.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===d?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await (null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await (null==o.isElement?void 0:o.isElement(v))&&await (null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},_=eC(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(m.top-_.top+p.top)/b.y,bottom:(_.bottom-m.bottom+p.bottom)/b.y,left:(m.left-_.left+p.left)/b.x,right:(_.right-m.right+p.right)/b.x}}function eO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function eL(e){return ep.some(t=>e[t]>=0)}async function eD(e,t){let{placement:r,platform:n,elements:i}=e,o=await (null==n.isRTL?void 0:n.isRTL(i.floating)),s=ex(r),a=eE(r),l="y"===eA(r),u=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,d=eS(t,e),{mainAxis:f,crossAxis:h,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof p&&(h="end"===a?-1*p:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}function eU(){return"undefined"!=typeof window}function eM(e){return e$(e)?(e.nodeName||"").toLowerCase():"#document"}function eB(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eH(e){var t;return null==(t=(e$(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function e$(e){return!!eU()&&(e instanceof Node||e instanceof eB(e).Node)}function eK(e){return!!eU()&&(e instanceof Element||e instanceof eB(e).Element)}function eW(e){return!!eU()&&(e instanceof HTMLElement||e instanceof eB(e).HTMLElement)}function eV(e){return!!eU()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof eB(e).ShadowRoot)}function eq(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=eY(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function ez(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function eJ(e){let t=eZ(),r=eK(e)?eY(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function eZ(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function eG(e){return["html","body","#document"].includes(eM(e))}function eY(e){return eB(e).getComputedStyle(e)}function eX(e){return eK(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eQ(e){if("html"===eM(e))return e;let t=e.assignedSlot||e.parentNode||eV(e)&&e.host||eH(e);return eV(t)?t.host:t}function e0(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=eQ(t);return eG(r)?t.ownerDocument?t.ownerDocument.body:t.body:eW(r)&&eq(r)?r:e(r)}(e),o=i===(null==(n=e.ownerDocument)?void 0:n.body),s=eB(i);if(o){let e=e1(s);return t.concat(s,s.visualViewport||[],eq(i)?i:[],e&&r?e0(e):[])}return t.concat(i,e0(i,[],r))}function e1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function e2(e){let t=eY(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=eW(e),o=i?e.offsetWidth:r,s=i?e.offsetHeight:n,a=ey(r)!==o||ey(n)!==s;return a&&(r=o,n=s),{width:r,height:n,$:a}}function e6(e){return eK(e)?e:e.contextElement}function e3(e){let t=e6(e);if(!eW(t))return eb(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:o}=e2(t),s=(o?ey(r.width):r.width)/n,a=(o?ey(r.height):r.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}let e5=eb(0);function e8(e){let t=eB(e);return eZ()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:e5}function e4(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),s=e6(e),a=eb(1);t&&(n?eK(n)&&(a=e3(n)):a=e3(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===eB(s))&&i)?e8(s):eb(0),u=(o.left+l.x)/a.x,c=(o.top+l.y)/a.y,d=o.width/a.x,f=o.height/a.y;if(s){let e=eB(s),t=n&&eK(n)?eB(n):n,r=e,i=e1(r);for(;i&&n&&t!==r;){let e=e3(i),t=i.getBoundingClientRect(),n=eY(i),o=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,c*=e.y,d*=e.x,f*=e.y,u+=o,c+=s,i=e1(r=eB(i))}}return eC({width:d,height:f,x:u,y:c})}function e9(e,t){let r=eX(e).scrollLeft;return t?t.left+r:e4(eH(e)).left+r}function e7(e,t,r){void 0===r&&(r=!1);let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:e9(e,n)),y:n.top+t.scrollTop}}function te(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=eB(e),n=eH(e),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;let e=eZ();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,r);else if("document"===t)n=function(e){let t=eH(e),r=eX(e),n=e.ownerDocument.body,i=em(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=em(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),s=-r.scrollLeft+e9(e),a=-r.scrollTop;return"rtl"===eY(n).direction&&(s+=em(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:s,y:a}}(eH(e));else if(eK(t))n=function(e,t){let r=e4(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=eW(e)?e3(e):eb(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y;return{width:s,height:a,x:i*o.x,y:n*o.y}}(t,r);else{let r=e8(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return eC(n)}function tt(e){return"static"===eY(e).position}function tr(e,t){if(!eW(e)||"fixed"===eY(e).position)return null;if(t)return t(e);let r=e.offsetParent;return eH(e)===r&&(r=r.ownerDocument.body),r}function tn(e,t){let r=eB(e);if(ez(e))return r;if(!eW(e)){let t=eQ(e);for(;t&&!eG(t);){if(eK(t)&&!tt(t))return t;t=eQ(t)}return r}let n=tr(e,t);for(;n&&["table","td","th"].includes(eM(n))&&tt(n);)n=tr(n,t);return n&&eG(n)&&tt(n)&&!eJ(n)?r:n||function(e){let t=eQ(e);for(;eW(t)&&!eG(t);){if(eJ(t))return t;if(ez(t))break;t=eQ(t)}return null}(e)||r}let ti=async function(e){let t=this.getOffsetParent||tn,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=eW(t),i=eH(t),o="fixed"===r,s=e4(e,!0,o,t),a={scrollLeft:0,scrollTop:0},l=eb(0);if(n||!n&&!o)if(("body"!==eM(t)||eq(i))&&(a=eX(t)),n){let e=e4(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=e9(i));o&&!n&&i&&(l.x=e9(i));let u=!i||n||o?eb(0):e7(i,a);return{x:s.left+a.scrollLeft-l.x-u.x,y:s.top+a.scrollTop-l.y-u.y,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},to={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,o="fixed"===i,s=eH(n),a=!!t&&ez(t.floating);if(n===s||a&&o)return r;let l={scrollLeft:0,scrollTop:0},u=eb(1),c=eb(0),d=eW(n);if((d||!d&&!o)&&(("body"!==eM(n)||eq(s))&&(l=eX(n)),eW(n))){let e=e4(n);u=e3(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}let f=!s||d||o?eb(0):e7(s,l,!0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:r.y*u.y-l.scrollTop*u.y+c.y+f.y}},getDocumentElement:eH,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,o=[..."clippingAncestors"===r?ez(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=e0(e,[],!1).filter(e=>eK(e)&&"body"!==eM(e)),i=null,o="fixed"===eY(e).position,s=o?eQ(e):e;for(;eK(s)&&!eG(s);){let t=eY(s),r=eJ(s);r||"fixed"!==t.position||(i=null),(o?!r&&!i:!r&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||eq(s)&&!r&&function e(t,r){let n=eQ(t);return!(n===r||!eK(n)||eG(n))&&("fixed"===eY(n).position||e(n,r))}(e,s))?n=n.filter(e=>e!==s):i=t,s=eQ(s)}return t.set(e,n),n}(t,this._c):[].concat(r),n],s=o[0],a=o.reduce((e,r)=>{let n=te(t,r,i);return e.top=em(n.top,e.top),e.right=eg(n.right,e.right),e.bottom=eg(n.bottom,e.bottom),e.left=em(n.left,e.left),e},te(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:tn,getElementRects:ti,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=e2(e);return{width:t,height:r}},getScale:e3,isElement:eK,isRTL:function(e){return"rtl"===eY(e).direction}};function ts(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let ta=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=eS(e,t)||{};if(null==u)return{};let d=eR(c),f={x:r,y:n},h=ek(eA(i)),p=eF(h),g=await s.getDimensions(u),m="y"===h,y=m?"clientHeight":"clientWidth",v=o.reference[p]+o.reference[h]-f[h]-o.floating[p],b=f[h]-o.reference[h],_=await (null==s.getOffsetParent?void 0:s.getOffsetParent(u)),w=_?_[y]:0;w&&await (null==s.isElement?void 0:s.isElement(_))||(w=a.floating[y]||o.floating[p]);let S=w/2-g[p]/2-1,x=eg(d[m?"top":"left"],S),E=eg(d[m?"bottom":"right"],S),k=w-g[p]-E,F=w/2-g[p]/2+(v/2-b/2),A=em(x,eg(F,k)),I=!l.arrow&&null!=eE(i)&&F!==A&&o.reference[p]/2-(F<x?x:E)-g[p]/2<0,T=I?F<x?F-x:F-k:0;return{[h]:f[h]+T,data:{[h]:A,centerOffset:F-A-T,...I&&{alignmentOffset:T}},reset:I}}}),tl=(e,t,r)=>{let n=new Map,i={platform:to,...r},o={...i.platform,_c:n};return eN(e,t,{...i,platform:o})};var tu="undefined"!=typeof document?a.useLayoutEffect:a.useEffect;function tc(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!tc(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!tc(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function td(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tf(e,t){let r=td(e);return Math.round(t*r)/r}function th(e){let t=a.useRef(e);return tu(()=>{t.current=e}),t}let tp=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:n}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?ta({element:r.current,padding:n}).fn(t):{}:r?ta({element:r,padding:n}).fn(t):{}}}),tg=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:i,y:o,placement:s,middlewareData:a}=t,l=await eD(t,e);return s===(null==(r=a.offset)?void 0:r.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}}(e),options:[e,t]}),tm=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=eS(e,t),u={x:r,y:n},c=await ej(t,l),d=eA(ex(i)),f=ek(d),h=u[f],p=u[d];if(o){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",r=h+c[e],n=h-c[t];h=em(r,eg(h,n))}if(s){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",r=p+c[e],n=p-c[t];p=em(r,eg(p,n))}let g=a.fn({...t,[f]:h,[d]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:o,[d]:s}}}}}}(e),options:[e,t]}),ty=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=eS(e,t),c={x:r,y:n},d=eA(i),f=ek(d),h=c[f],p=c[d],g=eS(a,t),m="number"==typeof g?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){let e="y"===f?"height":"width",t=o.reference[f]-o.floating[e]+m.mainAxis,r=o.reference[f]+o.reference[e]-m.mainAxis;h<t?h=t:h>r&&(h=r)}if(u){var y,v;let e="y"===f?"width":"height",t=["top","left"].includes(ex(i)),r=o.reference[d]-o.floating[e]+(t&&(null==(y=s.offset)?void 0:y[d])||0)+(t?0:m.crossAxis),n=o.reference[d]+o.reference[e]+(t?0:(null==(v=s.offset)?void 0:v[d])||0)-(t?m.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[f]:h,[d]:p}}}}(e),options:[e,t]}),tv=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,i,o,s,a;let{placement:l,middlewareData:u,rects:c,initialPlacement:d,platform:f,elements:h}=t,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=eS(e,t);if(null!=(r=u.arrow)&&r.alignmentOffset)return{};let w=ex(l),S=eA(d),x=ex(d)===d,E=await (null==f.isRTL?void 0:f.isRTL(h.floating)),k=m||(x||!b?[eT(d)]:function(e){let t=eT(e);return[eI(e),t,eI(t)]}(d)),F="none"!==v;!m&&F&&k.push(...function(e,t,r,n){let i=eE(e),o=function(e,t,r){let n=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":if(r)return t?i:n;return t?n:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(ex(e),"start"===r,n);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(eI)))),o}(d,b,v,E));let A=[d,...k],I=await ej(t,_),T=[],R=(null==(n=u.flip)?void 0:n.overflows)||[];if(p&&T.push(I[w]),g){let e=function(e,t,r){void 0===r&&(r=!1);let n=eE(e),i=ek(eA(e)),o=eF(i),s="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=eT(s)),[s,eT(s)]}(l,c,E);T.push(I[e[0]],I[e[1]])}if(R=[...R,{placement:l,overflows:T}],!T.every(e=>e<=0)){let e=((null==(i=u.flip)?void 0:i.index)||0)+1,t=A[e];if(t){let r="alignment"===g&&S!==eA(t),n=(null==(s=R[0])?void 0:s.overflows[0])>0;if(!r||n)return{data:{index:e,overflows:R},reset:{placement:t}}}let r=null==(o=R.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:o.placement;if(!r)switch(y){case"bestFit":{let e=null==(a=R.filter(e=>{if(F){let t=eA(e.placement);return t===S||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=d}if(l!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),tb=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;let i,o,{placement:s,rects:a,platform:l,elements:u}=t,{apply:c=()=>{},...d}=eS(e,t),f=await ej(t,d),h=ex(s),p=eE(s),g="y"===eA(s),{width:m,height:y}=a.floating;"top"===h||"bottom"===h?(i=h,o=p===(await (null==l.isRTL?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(o=h,i="end"===p?"top":"bottom");let v=y-f.top-f.bottom,b=m-f.left-f.right,_=eg(y-f[i],v),w=eg(m-f[o],b),S=!t.middlewareData.shift,x=_,E=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(E=b),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(x=v),S&&!p){let e=em(f.left,0),t=em(f.right,0),r=em(f.top,0),n=em(f.bottom,0);g?E=m-2*(0!==e||0!==t?e+t:em(f.left,f.right)):x=y-2*(0!==r||0!==n?r+n:em(f.top,f.bottom))}await c({...t,availableWidth:E,availableHeight:x});let k=await l.getDimensions(u.floating);return m!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),t_=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...i}=eS(e,t);switch(n){case"referenceHidden":{let e=eO(await ej(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:eL(e)}}}case"escaped":{let e=eO(await ej(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:eL(e)}}}default:return{}}}}}(e),options:[e,t]}),tw=(e,t)=>({...tp(e),options:[e,t]});var tS=a.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...o}=e;return(0,s.jsx)(B.svg,{...o,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,s.jsx)("polygon",{points:"0,0 30,0 15,10"})})});tS.displayName="Arrow";var tx="Popper",[tE,tk]=N(tx),[tF,tA]=tE(tx),tI=e=>{let{__scopePopper:t,children:r}=e,[n,i]=a.useState(null);return(0,s.jsx)(tF,{scope:t,anchor:n,onAnchorChange:i,children:r})};tI.displayName=tx;var tT="PopperAnchor",tR=a.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,o=tA(tT,r),l=a.useRef(null),u=d(t,l);return a.useEffect(()=>{o.onAnchorChange(n?.current||l.current)}),n?null:(0,s.jsx)(B.div,{...i,ref:u})});tR.displayName=tT;var tC="PopperContent",[tP,tN]=tE(tC),tj=a.forwardRef((e,t)=>{let{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:c=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:m="optimized",onPlaced:y,...v}=e,b=tA(tC,r),[_,w]=a.useState(null),S=d(t,e=>w(e)),[E,k]=a.useState(null),F=function(e){let[t,r]=a.useState(void 0);return j(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(E),A=F?.width??0,I=F?.height??0,T="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(f)?f:[f],C=R.length>0,P={padding:T,boundary:R.filter(tU),altBoundary:C},{refs:N,floatingStyles:O,placement:L,isPositioned:D,middlewareData:U}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:u,open:c}=e,[d,f]=a.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=a.useState(n);tc(h,n)||p(n);let[g,m]=a.useState(null),[y,v]=a.useState(null),b=a.useCallback(e=>{e!==E.current&&(E.current=e,m(e))},[]),_=a.useCallback(e=>{e!==k.current&&(k.current=e,v(e))},[]),w=o||g,S=s||y,E=a.useRef(null),k=a.useRef(null),F=a.useRef(d),A=null!=u,I=th(u),T=th(i),R=th(c),C=a.useCallback(()=>{if(!E.current||!k.current)return;let e={placement:t,strategy:r,middleware:h};T.current&&(e.platform=T.current),tl(E.current,k.current,e).then(e=>{let t={...e,isPositioned:!1!==R.current};P.current&&!tc(F.current,t)&&(F.current=t,x.flushSync(()=>{f(t)}))})},[h,t,r,T,R]);tu(()=>{!1===c&&F.current.isPositioned&&(F.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[c]);let P=a.useRef(!1);tu(()=>(P.current=!0,()=>{P.current=!1}),[]),tu(()=>{if(w&&(E.current=w),S&&(k.current=S),w&&S){if(I.current)return I.current(w,S,C);C()}},[w,S,C,I,A]);let N=a.useMemo(()=>({reference:E,floating:k,setReference:b,setFloating:_}),[b,_]),j=a.useMemo(()=>({reference:w,floating:S}),[w,S]),O=a.useMemo(()=>{let e={position:r,left:0,top:0};if(!j.floating)return e;let t=tf(j.floating,d.x),n=tf(j.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...td(j.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,l,j.floating,d.x,d.y]);return a.useMemo(()=>({...d,update:C,refs:N,elements:j,floatingStyles:O}),[d,C,N,j,O])}({strategy:"fixed",placement:n+("center"!==o?"-"+o:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:u=!1}=n,c=e6(e),d=o||s?[...c?e0(c):[],...e0(t)]:[];d.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let f=c&&l?function(e,t){let r,n=null,i=eH(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();let u=e.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||t(),!f||!h)return;let p=ev(d),g=ev(i.clientWidth-(c+f)),m={rootMargin:-p+"px "+-g+"px "+-ev(i.clientHeight-(d+h))+"px "+-ev(c)+"px",threshold:em(0,eg(1,l))||1},y=!0;function v(t){let n=t[0].intersectionRatio;if(n!==l){if(!y)return s();n?s(!1,n):r=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==n||ts(u,e.getBoundingClientRect())||s(),y=!1}try{n=new IntersectionObserver(v,{...m,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(v,m)}n.observe(e)}(!0),o}(c,r):null,h=-1,p=null;a&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),c&&!u&&p.observe(c),p.observe(t));let g=u?e4(e):null;return u&&function t(){let n=e4(e);g&&!ts(g,n)&&r(),g=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{o&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==f||f(),null==(e=p)||e.disconnect(),p=null,u&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===m}),elements:{reference:b.anchor},middleware:[tg({mainAxis:i+I,alignmentAxis:l}),c&&tm({mainAxis:!0,crossAxis:!1,limiter:"partial"===p?ty():void 0,...P}),c&&tv({...P}),tb({...P,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:o}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${r}px`),s.setProperty("--radix-popper-available-height",`${n}px`),s.setProperty("--radix-popper-anchor-width",`${i}px`),s.setProperty("--radix-popper-anchor-height",`${o}px`)}}),E&&tw({element:E,padding:u}),tM({arrowWidth:A,arrowHeight:I}),g&&t_({strategy:"referenceHidden",...P})]}),[M,H]=tB(L),$=J(y);j(()=>{D&&$?.()},[D,$]);let K=U.arrow?.x,W=U.arrow?.y,V=U.arrow?.centerOffset!==0,[q,z]=a.useState();return j(()=>{_&&z(window.getComputedStyle(_).zIndex)},[_]),(0,s.jsx)("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:D?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,s.jsx)(tP,{scope:r,placedSide:M,onArrowChange:k,arrowX:K,arrowY:W,shouldHideArrow:V,children:(0,s.jsx)(B.div,{"data-side":M,"data-align":H,...v,ref:S,style:{...v.style,animation:D?void 0:"none"}})})})});tj.displayName=tC;var tO="PopperArrow",tL={top:"bottom",right:"left",bottom:"top",left:"right"},tD=a.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=tN(tO,r),o=tL[i.placedSide];return(0,s.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,s.jsx)(tS,{...n,ref:t,style:{...n.style,display:"block"}})})});function tU(e){return null!==e}tD.displayName=tO;var tM=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,s=o?0:e.arrowWidth,a=o?0:e.arrowHeight,[l,u]=tB(r),c={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+s/2,f=(i.arrow?.y??0)+a/2,h="",p="";return"bottom"===l?(h=o?c:`${d}px`,p=`${-a}px`):"top"===l?(h=o?c:`${d}px`,p=`${n.floating.height+a}px`):"right"===l?(h=`${-a}px`,p=o?c:`${f}px`):"left"===l&&(h=`${n.floating.width+a}px`,p=o?c:`${f}px`),{data:{x:h,y:p}}}});function tB(e){let[t,r="center"]=e.split("-");return[t,r]}var tH=a.forwardRef((e,t)=>{let{container:r,...n}=e,[i,o]=a.useState(!1);j(()=>o(!0),[]);let l=r||i&&globalThis?.document?.body;return l?x.createPortal((0,s.jsx)(B.div,{...n,ref:t}),l):null});tH.displayName="Portal";var t$=e=>{let{present:t,children:r}=e,n=function(e){var t,r;let[n,i]=a.useState(),o=a.useRef(null),s=a.useRef(e),l=a.useRef("none"),[u,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>r[e][t]??e,t));return a.useEffect(()=>{let e=tK(o.current);l.current="mounted"===u?e:"none"},[u]),j(()=>{let t=o.current,r=s.current;if(r!==e){let n=l.current,i=tK(t);e?c("MOUNT"):"none"===i||t?.display==="none"?c("UNMOUNT"):r&&n!==i?c("ANIMATION_OUT"):c("UNMOUNT"),s.current=e}},[e,c]),j(()=>{if(n){let e,t=n.ownerDocument.defaultView??window,r=r=>{let i=tK(o.current).includes(r.animationName);if(r.target===n&&i&&(c("ANIMATION_END"),!s.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},i=e=>{e.target===n&&(l.current=tK(o.current))};return n.addEventListener("animationstart",i),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{o.current=e?getComputedStyle(e):null,i(e)},[])}}(t),i="function"==typeof r?r({present:n.isPresent}):a.Children.only(r),o=d(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(i));return"function"==typeof r||n.isPresent?a.cloneElement(i,{ref:o}):null};function tK(e){return e?.animationName||"none"}t$.displayName="Presence";var tW="rovingFocusGroup.onEntryFocus",tV={bubbles:!1,cancelable:!0},tq="RovingFocusGroup",[tz,tJ,tZ]=$(tq),[tG,tY]=N(tq,[tZ]),[tX,tQ]=tG(tq),t0=a.forwardRef((e,t)=>(0,s.jsx)(tz.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(tz.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(t1,{...e,ref:t})})}));t0.displayName=tq;var t1=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:c,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...p}=e,g=a.useRef(null),m=d(t,g),y=z(o),[v,b]=L({prop:l,defaultProp:u??null,onChange:c,caller:tq}),[_,w]=a.useState(!1),S=J(f),x=tJ(r),E=a.useRef(!1),[k,F]=a.useState(0);return a.useEffect(()=>{let e=g.current;if(e)return e.addEventListener(tW,S),()=>e.removeEventListener(tW,S)},[S]),(0,s.jsx)(tX,{scope:r,orientation:n,dir:y,loop:i,currentTabStopId:v,onItemFocus:a.useCallback(e=>b(e),[b]),onItemShiftTab:a.useCallback(()=>w(!0),[]),onFocusableItemAdd:a.useCallback(()=>F(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>F(e=>e-1),[]),children:(0,s.jsx)(B.div,{tabIndex:_||0===k?-1:0,"data-orientation":n,...p,ref:m,style:{outline:"none",...e.style},onMouseDown:P(e.onMouseDown,()=>{E.current=!0}),onFocus:P(e.onFocus,e=>{let t=!E.current;if(e.target===e.currentTarget&&t&&!_){let t=new CustomEvent(tW,tV);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=x().filter(e=>e.focusable);t5([e.find(e=>e.active),e.find(e=>e.id===v),...e].filter(Boolean).map(e=>e.ref.current),h)}}E.current=!1}),onBlur:P(e.onBlur,()=>w(!1))})})}),t2="RovingFocusGroupItem",t6=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:o,children:l,...u}=e,c=eh(),d=o||c,f=tQ(t2,r),h=f.currentTabStopId===d,p=tJ(r),{onFocusableItemAdd:g,onFocusableItemRemove:m,currentTabStopId:y}=f;return a.useEffect(()=>{if(n)return g(),()=>m()},[n,g,m]),(0,s.jsx)(tz.ItemSlot,{scope:r,id:d,focusable:n,active:i,children:(0,s.jsx)(B.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...u,ref:t,onMouseDown:P(e.onMouseDown,e=>{n?f.onItemFocus(d):e.preventDefault()}),onFocus:P(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:P(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let i=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(i))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(i)))return t3[i]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=f.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>t5(r))}}),children:"function"==typeof l?l({isCurrentTabStop:h,hasTabStop:null!=y}):l})})});t6.displayName=t2;var t3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function t5(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var t8=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},t4=new WeakMap,t9=new WeakMap,t7={},re=0,rt=function(e){return e&&(e.host||rt(e.parentNode))},rr=function(e,t,r,n){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=rt(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});t7[r]||(t7[r]=new WeakMap);var o=t7[r],s=[],a=new Set,l=new Set(i),u=function(e){!e||a.has(e)||(a.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(a.has(e))c(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(t4.get(e)||0)+1,u=(o.get(e)||0)+1;t4.set(e,l),o.set(e,u),s.push(e),1===l&&i&&t9.set(e,!0),1===u&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),a.clear(),re++,function(){s.forEach(function(e){var t=t4.get(e)-1,i=o.get(e)-1;t4.set(e,t),o.set(e,i),t||(t9.has(e)||e.removeAttribute(n),t9.delete(e)),i||e.removeAttribute(r)}),--re||(t4=new WeakMap,t4=new WeakMap,t9=new WeakMap,t7={})}},rn=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||t8(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),rr(n,i,r,"aria-hidden")):function(){return null}},ri=function(){return(ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ro(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create;Object.create;var rs=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),ra="width-before-scroll-bar";function rl(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var ru="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,rc=new WeakMap;function rd(e){return e}var rf=function(e){void 0===e&&(e={});var t,r,n,i,o=(t=null,void 0===r&&(r=rd),n=[],i=!1,{read:function(){if(i)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:null},useMedium:function(e){var t=r(e,i);return n.push(t),function(){n=n.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(i=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){i=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var o=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(o)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}});return o.options=ri({async:!0,ssr:!1},e),o}(),rh=function(){},rp=a.forwardRef(function(e,t){var r,n,i,o,s=a.useRef(null),l=a.useState({onScrollCapture:rh,onWheelCapture:rh,onTouchMoveCapture:rh}),u=l[0],c=l[1],d=e.forwardProps,f=e.children,h=e.className,p=e.removeScrollBar,g=e.enabled,m=e.shards,y=e.sideCar,v=e.noRelative,b=e.noIsolation,_=e.inert,w=e.allowPinchZoom,S=e.as,x=e.gapMode,E=ro(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=(r=[s,t],n=function(e){return r.forEach(function(t){return rl(t,e)})},(i=(0,a.useState)(function(){return{value:null,callback:n,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=n,o=i.facade,ru(function(){var e=rc.get(o);if(e){var t=new Set(e),n=new Set(r),i=o.current;t.forEach(function(e){n.has(e)||rl(e,null)}),n.forEach(function(e){t.has(e)||rl(e,i)})}rc.set(o,r)},[r]),o),F=ri(ri({},E),u);return a.createElement(a.Fragment,null,g&&a.createElement(y,{sideCar:rf,removeScrollBar:p,shards:m,noRelative:v,noIsolation:b,inert:_,setCallbacks:c,allowPinchZoom:!!w,lockRef:s,gapMode:x}),d?a.cloneElement(a.Children.only(f),ri(ri({},F),{ref:k})):a.createElement(void 0===S?"div":S,ri({},F,{className:h,ref:k}),f))});rp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},rp.classNames={fullWidth:ra,zeroRight:rs};var rg=function(e){var t=e.sideCar,r=ro(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return a.createElement(n,ri({},r))};rg.isSideCarExport=!0;var rm=function(){var e=0,t=null;return{add:function(n){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=o||r.nc;return t&&e.setAttribute("nonce",t),e}())){var i,s;(i=t).styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),s=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ry=function(){var e=rm();return function(t,r){a.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},rv=function(){var e=ry();return function(t){return e(t.styles,t.dynamic),null}},rb={left:0,top:0,right:0,gap:0},r_=function(e){return parseInt(e||"",10)||0},rw=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[r_(r),r_(n),r_(i)]},rS=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return rb;var t=rw(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},rx=rv(),rE="data-scroll-locked",rk=function(e,t,r,n){var i=e.left,o=e.top,s=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(rE,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(rs," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(ra," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(rs," .").concat(rs," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(ra," .").concat(ra," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(rE,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},rF=function(){var e=parseInt(document.body.getAttribute(rE)||"0",10);return isFinite(e)?e:0},rA=function(){a.useEffect(function(){return document.body.setAttribute(rE,(rF()+1).toString()),function(){var e=rF()-1;e<=0?document.body.removeAttribute(rE):document.body.setAttribute(rE,e.toString())}},[])},rI=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;rA();var o=a.useMemo(function(){return rS(i)},[i]);return a.createElement(rx,{styles:rk(o,!t,i,r?"":"!important")})},rT=!1;if("undefined"!=typeof window)try{var rR=Object.defineProperty({},"passive",{get:function(){return rT=!0,!0}});window.addEventListener("test",rR,rR),window.removeEventListener("test",rR,rR)}catch(e){rT=!1}var rC=!!rT&&{passive:!1},rP=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},rN=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),rj(e,n)){var i=rO(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},rj=function(e,t){return"v"===e?rP(t,"overflowY"):rP(t,"overflowX")},rO=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},rL=function(e,t,r,n,i){var o,s=(o=window.getComputedStyle(t).direction,"h"===e&&"rtl"===o?-1:1),a=s*n,l=r.target,u=t.contains(l),c=!1,d=a>0,f=0,h=0;do{var p=rO(e,l),g=p[0],m=p[1]-p[2]-s*g;(g||m)&&rj(e,l)&&(f+=m,h+=g),l=l.parentNode.host||l.parentNode}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return d&&(i&&1>Math.abs(f)||!i&&a>f)?c=!0:!d&&(i&&1>Math.abs(h)||!i&&-a>h)&&(c=!0),c},rD=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rU=function(e){return[e.deltaX,e.deltaY]},rM=function(e){return e&&"current"in e?e.current:e},rB=0,rH=[];let r$=(n=function(e){var t=a.useRef([]),r=a.useRef([0,0]),n=a.useRef(),i=a.useState(rB++)[0],o=a.useState(rv)[0],s=a.useRef(e);a.useEffect(function(){s.current=e},[e]),a.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(rM),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=a.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var i,o=rD(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-o[0],u="deltaY"in e?e.deltaY:a[1]-o[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var f=rN(d,c);if(!f)return!0;if(f?i=d:(i="v"===d?"h":"v",f=rN(d,c)),!f)return!1;if(!n.current&&"changedTouches"in e&&(l||u)&&(n.current=i),!i)return!0;var h=n.current||i;return rL(h,t,e,"h"===h?l:u,!0)},[]),u=a.useCallback(function(e){if(rH.length&&rH[rH.length-1]===o){var r="deltaY"in e?rU(e):rD(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var i=(s.current.shards||[]).map(rM).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?l(e,i[0]):!s.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=a.useCallback(function(e,r,n,i){var o={name:e,delta:r,target:n,should:i,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),d=a.useCallback(function(e){r.current=rD(e),n.current=void 0},[]),f=a.useCallback(function(t){c(t.type,rU(t),t.target,l(t,e.lockRef.current))},[]),h=a.useCallback(function(t){c(t.type,rD(t),t.target,l(t,e.lockRef.current))},[]);a.useEffect(function(){return rH.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",u,rC),document.addEventListener("touchmove",u,rC),document.addEventListener("touchstart",d,rC),function(){rH=rH.filter(function(e){return e!==o}),document.removeEventListener("wheel",u,rC),document.removeEventListener("touchmove",u,rC),document.removeEventListener("touchstart",d,rC)}},[]);var p=e.removeScrollBar,g=e.inert;return a.createElement(a.Fragment,null,g?a.createElement(o,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?a.createElement(rI,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},rf.useMedium(n),rg);var rK=a.forwardRef(function(e,t){return a.createElement(rp,ri({},e,{ref:t,sideCar:r$}))});rK.classNames=rp.classNames;var rW=["Enter"," "],rV=["ArrowUp","PageDown","End"],rq=["ArrowDown","PageUp","Home",...rV],rz={ltr:[...rW,"ArrowRight"],rtl:[...rW,"ArrowLeft"]},rJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rZ="Menu",[rG,rY,rX]=$(rZ),[rQ,r0]=N(rZ,[rX,tk,tY]),r1=tk(),r2=tY(),[r6,r3]=rQ(rZ),[r5,r8]=rQ(rZ),r4=e=>{let{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:o,modal:l=!0}=e,u=r1(t),[c,d]=a.useState(null),f=a.useRef(!1),h=J(o),p=z(i);return a.useEffect(()=>{let e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,s.jsx)(tI,{...u,children:(0,s.jsx)(r6,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:d,children:(0,s.jsx)(r5,{scope:t,onClose:a.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:l,children:n})})})};r4.displayName=rZ;var r9=a.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=r1(r);return(0,s.jsx)(tR,{...i,...n,ref:t})});r9.displayName="MenuAnchor";var r7="MenuPortal",[ne,nt]=rQ(r7,{forceMount:void 0}),nr=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:i}=e,o=r3(r7,t);return(0,s.jsx)(ne,{scope:t,forceMount:r,children:(0,s.jsx)(t$,{present:r||o.open,children:(0,s.jsx)(tH,{asChild:!0,container:i,children:n})})})};nr.displayName=r7;var nn="MenuContent",[ni,no]=rQ(nn),ns=a.forwardRef((e,t)=>{let r=nt(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,o=r3(nn,e.__scopeMenu),a=r8(nn,e.__scopeMenu);return(0,s.jsx)(rG.Provider,{scope:e.__scopeMenu,children:(0,s.jsx)(t$,{present:n||o.open,children:(0,s.jsx)(rG.Slot,{scope:e.__scopeMenu,children:a.modal?(0,s.jsx)(na,{...i,ref:t}):(0,s.jsx)(nl,{...i,ref:t})})})})}),na=a.forwardRef((e,t)=>{let r=r3(nn,e.__scopeMenu),n=a.useRef(null),i=d(t,n);return a.useEffect(()=>{let e=n.current;if(e)return rn(e)},[]),(0,s.jsx)(nc,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:P(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),nl=a.forwardRef((e,t)=>{let r=r3(nn,e.__scopeMenu);return(0,s.jsx)(nc,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nu=D("MenuContent.ScrollLock"),nc=a.forwardRef((e,t)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:c,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:m,disableOutsideScroll:y,...v}=e,b=r3(nn,r),_=r8(nn,r),w=r1(r),S=r2(r),x=rY(r),[E,k]=a.useState(null),F=a.useRef(null),A=d(t,F,b.onContentChange),I=a.useRef(0),T=a.useRef(""),R=a.useRef(0),C=a.useRef(null),N=a.useRef("right"),j=a.useRef(0),O=y?rK:a.Fragment,L=e=>{let t=T.current+e,r=x().filter(e=>!e.disabled),n=document.activeElement,i=r.find(e=>e.ref.current===n)?.textValue,o=function(e,t,r){var n;let i=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=r?e.indexOf(r):-1,s=(n=Math.max(o,0),e.map((t,r)=>e[(n+r)%e.length]));1===i.length&&(s=s.filter(e=>e!==r));let a=s.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return a!==r?a:void 0}(r.map(e=>e.textValue),t,i),s=r.find(e=>e.textValue===o)?.ref.current;!function e(t){T.current=t,window.clearTimeout(I.current),""!==t&&(I.current=window.setTimeout(()=>e(""),1e3))}(t),s&&setTimeout(()=>s.focus())};a.useEffect(()=>()=>window.clearTimeout(I.current),[]),a.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??et()),document.body.insertAdjacentElement("beforeend",e[1]??et()),ee++,()=>{1===ee&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ee--}},[]);let D=a.useCallback(e=>N.current===C.current?.side&&function(e,t){return!!t&&function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let s=t[e],a=t[o],l=s.x,u=s.y,c=a.x,d=a.y;u>n!=d>n&&r<(c-l)*(n-u)/(d-u)+l&&(i=!i)}return i}({x:e.clientX,y:e.clientY},t)}(e,C.current?.area),[]);return(0,s.jsx)(ni,{scope:r,searchRef:T,onItemEnter:a.useCallback(e=>{D(e)&&e.preventDefault()},[D]),onItemLeave:a.useCallback(e=>{D(e)||(F.current?.focus(),k(null))},[D]),onTriggerLeave:a.useCallback(e=>{D(e)&&e.preventDefault()},[D]),pointerGraceTimerRef:R,onPointerGraceIntentChange:a.useCallback(e=>{C.current=e},[]),children:(0,s.jsx)(O,{...y?{as:nu,allowPinchZoom:!0}:void 0,children:(0,s.jsx)(eo,{asChild:!0,trapped:i,onMountAutoFocus:P(o,e=>{e.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:(0,s.jsx)(Y,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:m,children:(0,s.jsx)(t0,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:E,onCurrentTabStopIdChange:k,onEntryFocus:P(c,e=>{_.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,s.jsx)(tj,{role:"menu","aria-orientation":"vertical","data-state":nD(b.open),"data-radix-menu-content":"",dir:_.dir,...w,...v,ref:A,style:{outline:"none",...v.style},onKeyDown:P(v.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&L(e.key));let i=F.current;if(e.target!==i||!rq.includes(e.key))return;e.preventDefault();let o=x().filter(e=>!e.disabled).map(e=>e.ref.current);rV.includes(e.key)&&o.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(o)}),onBlur:P(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(I.current),T.current="")}),onPointerMove:P(e.onPointerMove,nB(e=>{let t=e.target,r=j.current!==e.clientX;e.currentTarget.contains(t)&&r&&(N.current=e.clientX>j.current?"right":"left",j.current=e.clientX)}))})})})})})})});ns.displayName=nn;var nd=a.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,s.jsx)(B.div,{role:"group",...n,ref:t})});nd.displayName="MenuGroup";var nf=a.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,s.jsx)(B.div,{...n,ref:t})});nf.displayName="MenuLabel";var nh="MenuItem",np="menu.itemSelect",ng=a.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:n,...i}=e,o=a.useRef(null),l=r8(nh,e.__scopeMenu),u=no(nh,e.__scopeMenu),c=d(t,o),f=a.useRef(!1);return(0,s.jsx)(nm,{...i,ref:c,disabled:r,onClick:P(e.onClick,()=>{let e=o.current;if(!r&&e){let t=new CustomEvent(np,{bubbles:!0,cancelable:!0});e.addEventListener(np,e=>n?.(e),{once:!0}),H(e,t),t.defaultPrevented?f.current=!1:l.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),f.current=!0},onPointerUp:P(e.onPointerUp,e=>{f.current||e.currentTarget?.click()}),onKeyDown:P(e.onKeyDown,e=>{let t=""!==u.searchRef.current;r||t&&" "===e.key||rW.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ng.displayName=nh;var nm=a.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:n=!1,textValue:i,...o}=e,l=no(nh,r),u=r2(r),c=a.useRef(null),f=d(t,c),[h,p]=a.useState(!1),[g,m]=a.useState("");return a.useEffect(()=>{let e=c.current;e&&m((e.textContent??"").trim())},[o.children]),(0,s.jsx)(rG.ItemSlot,{scope:r,disabled:n,textValue:i??g,children:(0,s.jsx)(t6,{asChild:!0,...u,focusable:!n,children:(0,s.jsx)(B.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:f,onPointerMove:P(e.onPointerMove,nB(e=>{n?l.onItemLeave(e):(l.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:P(e.onPointerLeave,nB(e=>l.onItemLeave(e))),onFocus:P(e.onFocus,()=>p(!0)),onBlur:P(e.onBlur,()=>p(!1))})})})}),ny=a.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...i}=e;return(0,s.jsx)(nk,{scope:e.__scopeMenu,checked:r,children:(0,s.jsx)(ng,{role:"menuitemcheckbox","aria-checked":nU(r)?"mixed":r,...i,ref:t,"data-state":nM(r),onSelect:P(i.onSelect,()=>n?.(!!nU(r)||!r),{checkForDefaultPrevented:!1})})})});ny.displayName="MenuCheckboxItem";var nv="MenuRadioGroup",[nb,n_]=rQ(nv,{value:void 0,onValueChange:()=>{}}),nw=a.forwardRef((e,t)=>{let{value:r,onValueChange:n,...i}=e,o=J(n);return(0,s.jsx)(nb,{scope:e.__scopeMenu,value:r,onValueChange:o,children:(0,s.jsx)(nd,{...i,ref:t})})});nw.displayName=nv;var nS="MenuRadioItem",nx=a.forwardRef((e,t)=>{let{value:r,...n}=e,i=n_(nS,e.__scopeMenu),o=r===i.value;return(0,s.jsx)(nk,{scope:e.__scopeMenu,checked:o,children:(0,s.jsx)(ng,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":nM(o),onSelect:P(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});nx.displayName=nS;var nE="MenuItemIndicator",[nk,nF]=rQ(nE,{checked:!1}),nA=a.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...i}=e,o=nF(nE,r);return(0,s.jsx)(t$,{present:n||nU(o.checked)||!0===o.checked,children:(0,s.jsx)(B.span,{...i,ref:t,"data-state":nM(o.checked)})})});nA.displayName=nE;var nI=a.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,s.jsx)(B.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});nI.displayName="MenuSeparator";var nT=a.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=r1(r);return(0,s.jsx)(tD,{...i,...n,ref:t})});nT.displayName="MenuArrow";var nR="MenuSub",[nC,nP]=rQ(nR);var nN="MenuSubTrigger",nj=a.forwardRef((e,t)=>{let r=r3(nN,e.__scopeMenu),n=r8(nN,e.__scopeMenu),i=nP(nN,e.__scopeMenu),o=no(nN,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=o,f={__scopeMenu:e.__scopeMenu},h=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>h,[h]),a.useEffect(()=>{let e=u.current;return()=>{window.clearTimeout(e),d(null)}},[u,d]),(0,s.jsx)(r9,{asChild:!0,...f,children:(0,s.jsx)(nm,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":nD(r.open),...e,ref:c(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:P(e.onPointerMove,nB(t=>{o.onItemEnter(t),!t.defaultPrevented&&(e.disabled||r.open||l.current||(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100)))})),onPointerLeave:P(e.onPointerLeave,nB(e=>{h();let t=r.content?.getBoundingClientRect();if(t){let n=r.content?.dataset.side,i="right"===n,s=t[i?"left":"right"],a=t[i?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+(i?-5:5),y:e.clientY},{x:s,y:t.top},{x:a,y:t.top},{x:a,y:t.bottom},{x:s,y:t.bottom}],side:n}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:P(e.onKeyDown,t=>{let i=""!==o.searchRef.current;e.disabled||i&&" "===t.key||rz[n.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});nj.displayName=nN;var nO="MenuSubContent",nL=a.forwardRef((e,t)=>{let r=nt(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,o=r3(nn,e.__scopeMenu),l=r8(nn,e.__scopeMenu),u=nP(nO,e.__scopeMenu),c=a.useRef(null),f=d(t,c);return(0,s.jsx)(rG.Provider,{scope:e.__scopeMenu,children:(0,s.jsx)(t$,{present:n||o.open,children:(0,s.jsx)(rG.Slot,{scope:e.__scopeMenu,children:(0,s.jsx)(nc,{id:u.contentId,"aria-labelledby":u.triggerId,...i,ref:f,align:"start",side:"rtl"===l.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{l.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:P(e.onFocusOutside,e=>{e.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:P(e.onEscapeKeyDown,e=>{l.onClose(),e.preventDefault()}),onKeyDown:P(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=rJ[l.dir].includes(e.key);t&&r&&(o.onOpenChange(!1),u.trigger?.focus(),e.preventDefault())})})})})})});function nD(e){return e?"open":"closed"}function nU(e){return"indeterminate"===e}function nM(e){return nU(e)?"indeterminate":e?"checked":"unchecked"}function nB(e){return t=>"mouse"===t.pointerType?e(t):void 0}nL.displayName=nO;var nH="DropdownMenu",[n$,nK]=N(nH,[r0]),nW=r0(),[nV,nq]=n$(nH),nz=e=>{let{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:o,onOpenChange:l,modal:u=!0}=e,c=nW(t),d=a.useRef(null),[f,h]=L({prop:i,defaultProp:o??!1,onChange:l,caller:nH});return(0,s.jsx)(nV,{scope:t,triggerId:eh(),triggerRef:d,contentId:eh(),open:f,onOpenChange:h,onOpenToggle:a.useCallback(()=>h(e=>!e),[h]),modal:u,children:(0,s.jsx)(r4,{...c,open:f,onOpenChange:h,dir:n,modal:u,children:r})})};nz.displayName=nH;var nJ="DropdownMenuTrigger",nZ=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,o=nq(nJ,r),a=nW(r);return(0,s.jsx)(r9,{asChild:!0,...a,children:(0,s.jsx)(B.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:c(t,o.triggerRef),onPointerDown:P(e.onPointerDown,e=>{!n&&0===e.button&&!1===e.ctrlKey&&(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:P(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});nZ.displayName=nJ;var nG=e=>{let{__scopeDropdownMenu:t,...r}=e,n=nW(t);return(0,s.jsx)(nr,{...n,...r})};nG.displayName="DropdownMenuPortal";var nY="DropdownMenuContent",nX=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nq(nY,r),o=nW(r),l=a.useRef(!1);return(0,s.jsx)(ns,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...n,ref:t,onCloseAutoFocus:P(e.onCloseAutoFocus,e=>{l.current||i.triggerRef.current?.focus(),l.current=!1,e.preventDefault()}),onInteractOutside:P(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!i.modal||n)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nX.displayName=nY,a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nd,{...i,...n,ref:t})}).displayName="DropdownMenuGroup";var nQ=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nf,{...i,...n,ref:t})});nQ.displayName="DropdownMenuLabel";var n0=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(ng,{...i,...n,ref:t})});n0.displayName="DropdownMenuItem";var n1=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(ny,{...i,...n,ref:t})});n1.displayName="DropdownMenuCheckboxItem",a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nw,{...i,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var n2=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nx,{...i,...n,ref:t})});n2.displayName="DropdownMenuRadioItem";var n6=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nA,{...i,...n,ref:t})});n6.displayName="DropdownMenuItemIndicator";var n3=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nI,{...i,...n,ref:t})});n3.displayName="DropdownMenuSeparator",a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nT,{...i,...n,ref:t})}).displayName="DropdownMenuArrow";var n5=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nj,{...i,...n,ref:t})});n5.displayName="DropdownMenuSubTrigger";var n8=a.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=nW(r);return(0,s.jsx)(nL,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});n8.displayName="DropdownMenuSubContent";var n4=r(5229);let n9=(0,n4.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var n7=r(6764);let ie=(0,n4.A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),it=nz,ir=nZ;a.forwardRef((e,t)=>{let{className:r,inset:n,children:i,...o}=e;return(0,s.jsxs)(n5,{ref:t,className:(0,b.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",r),...o,children:[i,(0,s.jsx)(n9,{className:"ml-auto"})]})}).displayName=n5.displayName,a.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(n8,{ref:t,className:(0,b.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...n})}).displayName=n8.displayName;let ii=a.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...i}=e;return(0,s.jsx)(nG,{children:(0,s.jsx)(nX,{ref:t,sideOffset:n,className:(0,b.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...i})})});ii.displayName=nX.displayName;let io=a.forwardRef((e,t)=>{let{className:r,inset:n,...i}=e;return(0,s.jsx)(n0,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",r),...i})});io.displayName=n0.displayName,a.forwardRef((e,t)=>{let{className:r,children:n,checked:i,...o}=e;return(0,s.jsxs)(n1,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:i,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n6,{children:(0,s.jsx)(n7.A,{className:"h-4 w-4"})})}),n]})}).displayName=n1.displayName,a.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,s.jsxs)(n2,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n6,{children:(0,s.jsx)(ie,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=n2.displayName,a.forwardRef((e,t)=>{let{className:r,inset:n,...i}=e;return(0,s.jsx)(nQ,{ref:t,className:(0,b.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...i})}).displayName=nQ.displayName,a.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(n3,{ref:t,className:(0,b.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=n3.displayName},3657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return a}});let n=r(4252),i=r(4915),o=r(2439),s=n._(r(3829));function a(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/solid-memo/branches/renovate-playwright-monorepo/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=o.Image},3668:(e,t,r)=>{"use strict";let n;r.d(t,{z:()=>l});var i,o,s,a,l={};r.r(l),r.d(l,{BRAND:()=>eP,DIRTY:()=>x,EMPTY_PATH:()=>b,INVALID:()=>S,NEVER:()=>tp,OK:()=>E,ParseStatus:()=>w,Schema:()=>P,ZodAny:()=>eo,ZodArray:()=>eu,ZodBigInt:()=>Q,ZodBoolean:()=>ee,ZodBranded:()=>eN,ZodCatch:()=>eR,ZodDate:()=>et,ZodDefault:()=>eT,ZodDiscriminatedUnion:()=>eh,ZodEffects:()=>eF,ZodEnum:()=>ex,ZodError:()=>h,ZodFirstPartyTypeKind:()=>a,ZodFunction:()=>eb,ZodIntersection:()=>ep,ZodIssueCode:()=>d,ZodLazy:()=>e_,ZodLiteral:()=>ew,ZodMap:()=>ey,ZodNaN:()=>eC,ZodNativeEnum:()=>eE,ZodNever:()=>ea,ZodNull:()=>ei,ZodNullable:()=>eI,ZodNumber:()=>X,ZodObject:()=>ec,ZodOptional:()=>eA,ZodParsedType:()=>u,ZodPipeline:()=>ej,ZodPromise:()=>ek,ZodReadonly:()=>eO,ZodRecord:()=>em,ZodSchema:()=>P,ZodSet:()=>ev,ZodString:()=>Y,ZodSymbol:()=>er,ZodTransformer:()=>eF,ZodTuple:()=>eg,ZodType:()=>P,ZodUndefined:()=>en,ZodUnion:()=>ed,ZodUnknown:()=>es,ZodVoid:()=>el,addIssueToContext:()=>_,any:()=>eZ,array:()=>eQ,bigint:()=>eK,boolean:()=>eW,coerce:()=>th,custom:()=>eD,date:()=>eV,datetimeRegex:()=>G,defaultErrorMap:()=>p,discriminatedUnion:()=>e6,effect:()=>to,enum:()=>tr,function:()=>e7,getErrorMap:()=>y,getParsedType:()=>c,instanceof:()=>eM,intersection:()=>e3,isAborted:()=>k,isAsync:()=>I,isDirty:()=>F,isValid:()=>A,late:()=>eU,lazy:()=>te,literal:()=>tt,makeIssue:()=>v,map:()=>e4,nan:()=>e$,nativeEnum:()=>tn,never:()=>eY,null:()=>eJ,nullable:()=>ta,number:()=>eH,object:()=>e0,objectUtil:()=>o,oboolean:()=>tf,onumber:()=>td,optional:()=>ts,ostring:()=>tc,pipeline:()=>tu,preprocess:()=>tl,promise:()=>ti,quotelessJson:()=>f,record:()=>e8,set:()=>e9,setErrorMap:()=>m,strictObject:()=>e1,string:()=>eB,symbol:()=>eq,transformer:()=>to,tuple:()=>e5,undefined:()=>ez,union:()=>e2,unknown:()=>eG,util:()=>i,void:()=>eX}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i||(i={})),(o||(o={})).mergeShapes=(e,t)=>({...e,...t});let u=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),c=e=>{switch(typeof e){case"undefined":return u.undefined;case"string":return u.string;case"number":return Number.isNaN(e)?u.nan:u.number;case"boolean":return u.boolean;case"function":return u.function;case"bigint":return u.bigint;case"symbol":return u.symbol;case"object":if(Array.isArray(e))return u.array;if(null===e)return u.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return u.promise;if("undefined"!=typeof Map&&e instanceof Map)return u.map;if("undefined"!=typeof Set&&e instanceof Set)return u.set;if("undefined"!=typeof Date&&e instanceof Date)return u.date;return u.object;default:return u.unknown}},d=i.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),f=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class h extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof h))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}h.create=e=>new h(e);let p=(e,t)=>{let r;switch(e.code){case d.invalid_type:r=e.received===u.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case d.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.joinValues(e.keys,", ")}`;break;case d.invalid_union:r="Invalid input";break;case d.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.joinValues(e.options)}`;break;case d.invalid_enum_value:r=`Invalid enum value. Expected ${i.joinValues(e.options)}, received '${e.received}'`;break;case d.invalid_arguments:r="Invalid function arguments";break;case d.invalid_return_type:r="Invalid function return type";break;case d.invalid_date:r="Invalid date";break;case d.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case d.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case d.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case d.custom:r="Invalid input";break;case d.invalid_intersection_types:r="Intersection results could not be merged";break;case d.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case d.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.assertNever(e)}return{message:r}},g=p;function m(e){g=e}function y(){return g}let v=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,o=[...r,...i.path||[]],s={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let a="";for(let e of n.filter(e=>!!e).slice().reverse())a=e(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},b=[];function _(e,t){let r=g,n=v({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===p?void 0:p].filter(e=>!!e)});e.common.issues.push(n)}class w{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return S;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return w.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return S;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let S=Object.freeze({status:"aborted"}),x=e=>({status:"dirty",value:e}),E=e=>({status:"valid",value:e}),k=e=>"aborted"===e.status,F=e=>"dirty"===e.status,A=e=>"valid"===e.status,I=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(s||(s={}));class T{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let R=(e,t)=>{if(A(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new h(e.common.issues);return this._error=t,this._error}}};function C(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:o}=e;return"invalid_enum_value"===t.code?{message:o??i.defaultError}:void 0===i.data?{message:o??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:o??r??i.defaultError}},description:i}}class P{get description(){return this._def.description}_getType(e){return c(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new w,ctx:{common:e.parent.common,data:e.data,parsedType:c(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(I(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},n=this._parseSync({data:e,path:r.path,parent:r});return R(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return A(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>A(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:c(e)},n=this._parse({data:e,path:r.path,parent:r});return R(r,await (I(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),o=()=>n.addIssue({code:d.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(o(),!1)):!!i||(o(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eF({schema:this,typeName:a.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eA.create(this,this._def)}nullable(){return eI.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eu.create(this)}promise(){return ek.create(this,this._def)}or(e){return ed.create([this,e],this._def)}and(e){return ep.create(this,e,this._def)}transform(e){return new eF({...C(this._def),schema:this,typeName:a.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eT({...C(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:a.ZodDefault})}brand(){return new eN({typeName:a.ZodBranded,type:this,...C(this._def)})}catch(e){return new eR({...C(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:a.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ej.create(this,e)}readonly(){return eO.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let N=/^c[^\s-]{8,}$/i,j=/^[0-9a-z]+$/,O=/^[0-9A-HJKMNP-TV-Z]{26}$/i,L=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,D=/^[a-z0-9_-]{21}$/i,U=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,M=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,W=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,V=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,z="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",J=RegExp(`^${z}$`);function Z(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function G(e){let t=`${z}T${Z(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class Y extends P{_parse(e){var t,r,o,s;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==u.string){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.string,received:t.parsedType}),S}let l=new w;for(let u of this._def.checks)if("min"===u.kind)e.data.length<u.value&&(_(a=this._getOrReturnCtx(e,a),{code:d.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),l.dirty());else if("max"===u.kind)e.data.length>u.value&&(_(a=this._getOrReturnCtx(e,a),{code:d.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),l.dirty());else if("length"===u.kind){let t=e.data.length>u.value,r=e.data.length<u.value;(t||r)&&(a=this._getOrReturnCtx(e,a),t?_(a,{code:d.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):r&&_(a,{code:d.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),l.dirty())}else if("email"===u.kind)B.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"email",code:d.invalid_string,message:u.message}),l.dirty());else if("emoji"===u.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:d.invalid_string,message:u.message}),l.dirty());else if("uuid"===u.kind)L.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:d.invalid_string,message:u.message}),l.dirty());else if("nanoid"===u.kind)D.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:d.invalid_string,message:u.message}),l.dirty());else if("cuid"===u.kind)N.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:d.invalid_string,message:u.message}),l.dirty());else if("cuid2"===u.kind)j.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:d.invalid_string,message:u.message}),l.dirty());else if("ulid"===u.kind)O.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:d.invalid_string,message:u.message}),l.dirty());else if("url"===u.kind)try{new URL(e.data)}catch{_(a=this._getOrReturnCtx(e,a),{validation:"url",code:d.invalid_string,message:u.message}),l.dirty()}else"regex"===u.kind?(u.regex.lastIndex=0,u.regex.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"regex",code:d.invalid_string,message:u.message}),l.dirty())):"trim"===u.kind?e.data=e.data.trim():"includes"===u.kind?e.data.includes(u.value,u.position)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),l.dirty()):"toLowerCase"===u.kind?e.data=e.data.toLowerCase():"toUpperCase"===u.kind?e.data=e.data.toUpperCase():"startsWith"===u.kind?e.data.startsWith(u.value)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:{startsWith:u.value},message:u.message}),l.dirty()):"endsWith"===u.kind?e.data.endsWith(u.value)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:{endsWith:u.value},message:u.message}),l.dirty()):"datetime"===u.kind?G(u).test(e.data)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:"datetime",message:u.message}),l.dirty()):"date"===u.kind?J.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:"date",message:u.message}),l.dirty()):"time"===u.kind?RegExp(`^${Z(u)}$`).test(e.data)||(_(a=this._getOrReturnCtx(e,a),{code:d.invalid_string,validation:"time",message:u.message}),l.dirty()):"duration"===u.kind?M.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"duration",code:d.invalid_string,message:u.message}),l.dirty()):"ip"===u.kind?(t=e.data,!(("v4"===(r=u.version)||!r)&&H.test(t)||("v6"===r||!r)&&K.test(t))&&1&&(_(a=this._getOrReturnCtx(e,a),{validation:"ip",code:d.invalid_string,message:u.message}),l.dirty())):"jwt"===u.kind?!function(e,t){if(!U.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,u.alg)&&(_(a=this._getOrReturnCtx(e,a),{validation:"jwt",code:d.invalid_string,message:u.message}),l.dirty()):"cidr"===u.kind?(o=e.data,!(("v4"===(s=u.version)||!s)&&$.test(o)||("v6"===s||!s)&&W.test(o))&&1&&(_(a=this._getOrReturnCtx(e,a),{validation:"cidr",code:d.invalid_string,message:u.message}),l.dirty())):"base64"===u.kind?V.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"base64",code:d.invalid_string,message:u.message}),l.dirty()):"base64url"===u.kind?q.test(e.data)||(_(a=this._getOrReturnCtx(e,a),{validation:"base64url",code:d.invalid_string,message:u.message}),l.dirty()):i.assertNever(u);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:d.invalid_string,...s.errToObj(r)})}_addCheck(e){return new Y({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...s.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...s.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...s.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...s.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...s.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...s.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...s.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...s.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...s.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...s.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...s.errToObj(t)})}nonempty(e){return this.min(1,s.errToObj(e))}trim(){return new Y({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Y({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Y({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Y.create=e=>new Y({checks:[],typeName:a.ZodString,coerce:e?.coerce??!1,...C(e)});class X extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==u.number){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.number,received:t.parsedType}),S}let r=new w;for(let n of this._def.checks)"int"===n.kind?i.isInteger(e.data)||(_(t=this._getOrReturnCtx(e,t),{code:d.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,n.value)&&(_(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(_(t=this._getOrReturnCtx(e,t),{code:d.not_finite,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new X({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new X({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&i.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}X.create=e=>new X({checks:[],typeName:a.ZodNumber,coerce:e?.coerce||!1,...C(e)});class Q extends P{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==u.bigint)return this._getInvalidInput(e);let r=new w;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(_(t=this._getOrReturnCtx(e,t),{code:d.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):i.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.bigint,received:t.parsedType}),S}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,r,n){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:s.toString(n)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Q.create=e=>new Q({checks:[],typeName:a.ZodBigInt,coerce:e?.coerce??!1,...C(e)});class ee extends P{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==u.boolean){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.boolean,received:t.parsedType}),S}return E(e.data)}}ee.create=e=>new ee({typeName:a.ZodBoolean,coerce:e?.coerce||!1,...C(e)});class et extends P{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==u.date){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.date,received:t.parsedType}),S}if(Number.isNaN(e.data.getTime()))return _(this._getOrReturnCtx(e),{code:d.invalid_date}),S;let r=new w;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(_(t=this._getOrReturnCtx(e,t),{code:d.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):i.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:s.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}et.create=e=>new et({checks:[],coerce:e?.coerce||!1,typeName:a.ZodDate,...C(e)});class er extends P{_parse(e){if(this._getType(e)!==u.symbol){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.symbol,received:t.parsedType}),S}return E(e.data)}}er.create=e=>new er({typeName:a.ZodSymbol,...C(e)});class en extends P{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.undefined,received:t.parsedType}),S}return E(e.data)}}en.create=e=>new en({typeName:a.ZodUndefined,...C(e)});class ei extends P{_parse(e){if(this._getType(e)!==u.null){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.null,received:t.parsedType}),S}return E(e.data)}}ei.create=e=>new ei({typeName:a.ZodNull,...C(e)});class eo extends P{constructor(){super(...arguments),this._any=!0}_parse(e){return E(e.data)}}eo.create=e=>new eo({typeName:a.ZodAny,...C(e)});class es extends P{constructor(){super(...arguments),this._unknown=!0}_parse(e){return E(e.data)}}es.create=e=>new es({typeName:a.ZodUnknown,...C(e)});class ea extends P{_parse(e){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.never,received:t.parsedType}),S}}ea.create=e=>new ea({typeName:a.ZodNever,...C(e)});class el extends P{_parse(e){if(this._getType(e)!==u.undefined){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.void,received:t.parsedType}),S}return E(e.data)}}el.create=e=>new el({typeName:a.ZodVoid,...C(e)});class eu extends P{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==u.array)return _(t,{code:d.invalid_type,expected:u.array,received:t.parsedType}),S;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(_(t,{code:e?d.too_big:d.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(_(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(_(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new T(t,e,t.path,r)))).then(e=>w.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new T(t,e,t.path,r)));return w.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new eu({...this._def,minLength:{value:e,message:s.toString(t)}})}max(e,t){return new eu({...this._def,maxLength:{value:e,message:s.toString(t)}})}length(e,t){return new eu({...this._def,exactLength:{value:e,message:s.toString(t)}})}nonempty(e){return this.min(1,e)}}eu.create=(e,t)=>new eu({type:e,minLength:null,maxLength:null,exactLength:null,typeName:a.ZodArray,...C(t)});class ec extends P{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=i.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==u.object){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),S}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ea&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||o.push(e);let s=[];for(let e of i){let t=n[e],i=r.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new T(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ea){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)s.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&(_(r,{code:d.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new T(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>w.mergeObjectSync(t,e)):w.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return s.errToObj,new ec({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:s.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ec({...this._def,unknownKeys:"strip"})}passthrough(){return new ec({...this._def,unknownKeys:"passthrough"})}extend(e){return new ec({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ec({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:a.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ec({...this._def,catchall:e})}pick(e){let t={};for(let r of i.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ec({...this._def,shape:()=>t})}omit(e){let t={};for(let r of i.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ec({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ec){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=eA.create(e(i))}return new ec({...t._def,shape:()=>r})}if(t instanceof eu)return new eu({...t._def,type:e(t.element)});if(t instanceof eA)return eA.create(e(t.unwrap()));if(t instanceof eI)return eI.create(e(t.unwrap()));if(t instanceof eg)return eg.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of i.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new ec({...this._def,shape:()=>t})}required(e){let t={};for(let r of i.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eA;)e=e._def.innerType;t[r]=e}return new ec({...this._def,shape:()=>t})}keyof(){return eS(i.objectKeys(this.shape))}}ec.create=(e,t)=>new ec({shape:()=>e,unknownKeys:"strip",catchall:ea.create(),typeName:a.ZodObject,...C(t)}),ec.strictCreate=(e,t)=>new ec({shape:()=>e,unknownKeys:"strict",catchall:ea.create(),typeName:a.ZodObject,...C(t)}),ec.lazycreate=(e,t)=>new ec({shape:e,unknownKeys:"strip",catchall:ea.create(),typeName:a.ZodObject,...C(t)});class ed extends P{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new h(e.ctx.common.issues));return _(t,{code:d.invalid_union,unionErrors:r}),S});{let e,n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new h(e));return _(t,{code:d.invalid_union,unionErrors:i}),S}}get options(){return this._def.options}}ed.create=(e,t)=>new ed({options:e,typeName:a.ZodUnion,...C(t)});let ef=e=>{if(e instanceof e_)return ef(e.schema);if(e instanceof eF)return ef(e.innerType());if(e instanceof ew)return[e.value];if(e instanceof ex)return e.options;if(e instanceof eE)return i.objectValues(e.enum);else if(e instanceof eT)return ef(e._def.innerType);else if(e instanceof en)return[void 0];else if(e instanceof ei)return[null];else if(e instanceof eA)return[void 0,...ef(e.unwrap())];else if(e instanceof eI)return[null,...ef(e.unwrap())];else if(e instanceof eN)return ef(e.unwrap());else if(e instanceof eO)return ef(e.unwrap());else if(e instanceof eR)return ef(e._def.innerType);else return[]};class eh extends P{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.object)return _(t,{code:d.invalid_type,expected:u.object,received:t.parsedType}),S;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(_(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),S)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=ef(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new eh({typeName:a.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...C(r)})}}class ep extends P{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(k(e)||k(n))return S;let o=function e(t,r){let n=c(t),o=c(r);if(t===r)return{valid:!0,data:t};if(n===u.object&&o===u.object){let n=i.objectKeys(r),o=i.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of o){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};s[n]=i.data}return{valid:!0,data:s}}if(n===u.array&&o===u.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let o=e(t[i],r[i]);if(!o.valid)return{valid:!1};n.push(o.data)}return{valid:!0,data:n}}if(n===u.date&&o===u.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return o.valid?((F(e)||F(n))&&t.dirty(),{status:t.value,value:o.data}):(_(r,{code:d.invalid_intersection_types}),S)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ep.create=(e,t,r)=>new ep({left:e,right:t,typeName:a.ZodIntersection,...C(r)});class eg extends P{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.array)return _(r,{code:d.invalid_type,expected:u.array,received:r.parsedType}),S;if(r.data.length<this._def.items.length)return _(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),S;!this._def.rest&&r.data.length>this._def.items.length&&(_(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new T(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>w.mergeArray(t,e)):w.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new eg({...this._def,rest:e})}}eg.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eg({items:e,typeName:a.ZodTuple,rest:null,...C(t)})};class em extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.object)return _(r,{code:d.invalid_type,expected:u.object,received:r.parsedType}),S;let n=[],i=this._def.keyType,o=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new T(r,e,r.path,e)),value:o._parse(new T(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?w.mergeObjectAsync(t,n):w.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new em(t instanceof P?{keyType:e,valueType:t,typeName:a.ZodRecord,...C(r)}:{keyType:Y.create(),valueType:e,typeName:a.ZodRecord,...C(t)})}}class ey extends P{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.map)return _(r,{code:d.invalid_type,expected:u.map,received:r.parsedType}),S;let n=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([e,t],o)=>({key:n._parse(new T(r,e,r.path,[o,"key"])),value:i._parse(new T(r,t,r.path,[o,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return S;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of o){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return S;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ey.create=(e,t,r)=>new ey({valueType:t,keyType:e,typeName:a.ZodMap,...C(r)});class ev extends P{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.set)return _(r,{code:d.invalid_type,expected:u.set,received:r.parsedType}),S;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(_(r,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(_(r,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function o(e){let r=new Set;for(let n of e){if("aborted"===n.status)return S;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map((e,t)=>i._parse(new T(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>o(e)):o(s)}min(e,t){return new ev({...this._def,minSize:{value:e,message:s.toString(t)}})}max(e,t){return new ev({...this._def,maxSize:{value:e,message:s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ev.create=(e,t)=>new ev({valueType:e,minSize:null,maxSize:null,typeName:a.ZodSet,...C(t)});class eb extends P{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.function)return _(t,{code:d.invalid_type,expected:u.function,received:t.parsedType}),S;function r(e,r){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,g,p].filter(e=>!!e),issueData:{code:d.invalid_arguments,argumentsError:r}})}function n(e,r){return v({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,g,p].filter(e=>!!e),issueData:{code:d.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ek){let e=this;return E(async function(...t){let s=new h([]),a=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(r(t,e)),s}),l=await Reflect.apply(o,this,a);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw s.addIssue(n(l,e)),s})})}{let e=this;return E(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new h([r(t,s.error)]);let a=Reflect.apply(o,this,s.data),l=e._def.returns.safeParse(a,i);if(!l.success)throw new h([n(a,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eb({...this._def,args:eg.create(e).rest(es.create())})}returns(e){return new eb({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eb({args:e||eg.create([]).rest(es.create()),returns:t||es.create(),typeName:a.ZodFunction,...C(r)})}}class e_ extends P{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}e_.create=(e,t)=>new e_({getter:e,typeName:a.ZodLazy,...C(t)});class ew extends P{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return _(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),S}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eS(e,t){return new ex({values:e,typeName:a.ZodEnum,...C(t)})}ew.create=(e,t)=>new ew({value:e,typeName:a.ZodLiteral,...C(t)});class ex extends P{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return _(t,{expected:i.joinValues(r),received:t.parsedType,code:d.invalid_type}),S}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return _(t,{received:t.data,code:d.invalid_enum_value,options:r}),S}return E(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ex.create(e,{...this._def,...t})}exclude(e,t=this._def){return ex.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ex.create=eS;class eE extends P{_parse(e){let t=i.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==u.string&&r.parsedType!==u.number){let e=i.objectValues(t);return _(r,{expected:i.joinValues(e),received:r.parsedType,code:d.invalid_type}),S}if(this._cache||(this._cache=new Set(i.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=i.objectValues(t);return _(r,{received:r.data,code:d.invalid_enum_value,options:e}),S}return E(e.data)}get enum(){return this._def.values}}eE.create=(e,t)=>new eE({values:e,typeName:a.ZodNativeEnum,...C(t)});class ek extends P{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==u.promise&&!1===t.common.async?(_(t,{code:d.invalid_type,expected:u.promise,received:t.parsedType}),S):E((t.parsedType===u.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ek.create=(e,t)=>new ek({type:e,typeName:a.ZodPromise,...C(t)});class eF extends P{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===a.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,o={addIssue:e=>{_(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===n.type){let e=n.transform(r.data,o);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return S;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?S:"dirty"===n.status||"dirty"===t.value?x(n.value):n});{if("aborted"===t.value)return S;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?S:"dirty"===n.status||"dirty"===t.value?x(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,o);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?S:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?S:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>A(e)?Promise.resolve(n.transform(e.value,o)).then(e=>({status:t.value,value:e})):S);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!A(e))return S;let i=n.transform(e.value,o);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}i.assertNever(n)}}eF.create=(e,t,r)=>new eF({schema:e,typeName:a.ZodEffects,effect:t,...C(r)}),eF.createWithPreprocess=(e,t,r)=>new eF({schema:t,effect:{type:"preprocess",transform:e},typeName:a.ZodEffects,...C(r)});class eA extends P{_parse(e){return this._getType(e)===u.undefined?E(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eA.create=(e,t)=>new eA({innerType:e,typeName:a.ZodOptional,...C(t)});class eI extends P{_parse(e){return this._getType(e)===u.null?E(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eI.create=(e,t)=>new eI({innerType:e,typeName:a.ZodNullable,...C(t)});class eT extends P{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===u.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eT.create=(e,t)=>new eT({innerType:e,typeName:a.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...C(t)});class eR extends P{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return I(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new h(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eR.create=(e,t)=>new eR({innerType:e,typeName:a.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...C(t)});class eC extends P{_parse(e){if(this._getType(e)!==u.nan){let t=this._getOrReturnCtx(e);return _(t,{code:d.invalid_type,expected:u.nan,received:t.parsedType}),S}return{status:"valid",value:e.data}}}eC.create=e=>new eC({typeName:a.ZodNaN,...C(e)});let eP=Symbol("zod_brand");class eN extends P{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ej extends P{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?S:"dirty"===e.status?(t.dirty(),x(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?S:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ej({in:e,out:t,typeName:a.ZodPipeline})}}class eO extends P{_parse(e){let t=this._def.innerType._parse(e),r=e=>(A(e)&&(e.value=Object.freeze(e.value)),e);return I(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eL(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eD(e,t={},r){return e?eo.create().superRefine((n,i)=>{let o=e(n);if(o instanceof Promise)return o.then(e=>{if(!e){let e=eL(t,n),o=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){let e=eL(t,n),o=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:o})}}):eo.create()}eO.create=(e,t)=>new eO({innerType:e,typeName:a.ZodReadonly,...C(t)});let eU={object:ec.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(a||(a={}));let eM=(e,t={message:`Input not instance of ${e.name}`})=>eD(t=>t instanceof e,t),eB=Y.create,eH=X.create,e$=eC.create,eK=Q.create,eW=ee.create,eV=et.create,eq=er.create,ez=en.create,eJ=ei.create,eZ=eo.create,eG=es.create,eY=ea.create,eX=el.create,eQ=eu.create,e0=ec.create,e1=ec.strictCreate,e2=ed.create,e6=eh.create,e3=ep.create,e5=eg.create,e8=em.create,e4=ey.create,e9=ev.create,e7=eb.create,te=e_.create,tt=ew.create,tr=ex.create,tn=eE.create,ti=ek.create,to=eF.create,ts=eA.create,ta=eI.create,tl=eF.createWithPreprocess,tu=ej.create,tc=()=>eB().optional(),td=()=>eH().optional(),tf=()=>eW().optional(),th={string:e=>Y.create({...e,coerce:!0}),number:e=>X.create({...e,coerce:!0}),boolean:e=>ee.create({...e,coerce:!0}),bigint:e=>Q.create({...e,coerce:!0}),date:e=>et.create({...e,coerce:!0})},tp=S},3724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},3735:(e,t,r)=>{"use strict";r.d(t,{fk:()=>h,gt:()=>c,oB:()=>f,$s:()=>d,ng:()=>u});class n extends Error{}let i=new URL("about:blank");function o(e,t){if(void 0!==e)try{return new URL(e,t)}catch{}}class s extends n{constructor(e,t,r,s){if(super(r,s),e.status>=200&&e.status<400)throw new n(`A ClientHttpError cannot be built from a success response, got ${e.status} ${e.statusText}`);this.errorResponse=Object.freeze({status:e.status,statusText:e.statusText,headers:e.headers,url:e.url,body:t,ok:!1}),this.details=function(e){let t,r,n,s,a;if("application/problem+json"===e.headers.get("Content-Type"))try{let i=JSON.parse(e.body),l=o(i.type,e.url);void 0!==l&&(t=l),"string"==typeof i.title&&(r=i.title),"number"==typeof i.status&&(n=i.status),"string"==typeof i.detail&&(s=i.detail);let u=o(i.instance,e.url);void 0!==u&&(a=u)}catch{}return Object.freeze({type:t??i,title:r??e.statusText,status:n??e.status,detail:s,instance:a})}(this.errorResponse)}get response(){return this.errorResponse}get problemDetails(){return this.details}}var a=r(1482),l=r(9786);function u(e,t={ignoreAuthenticationErrors:!1}){if((0,l.BN)(e)&&(!(0,l.IG)(e)||!t.ignoreAuthenticationErrors))throw new h(`Fetching the metadata of the Resource at [${e.url}] failed: [${e.status}] [${e.statusText}].`,e);return{internal_resourceInfo:(0,l.um)(e)}}function c(e){var t;return null!=(t=e.internal_resourceInfo.contentType)?t:null}function d(e){return(0,a.NF)(e)?e.internal_resourceInfo.sourceIri:null}let f=d;class h extends a.dT{constructor(e,t,r){super(e),this.response=t,"string"==typeof r?this.httpError=new s(t,r,e):this.httpError=new s(t,"",e)}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}get problemDetails(){return this.httpError.problemDetails}}},3795:(e,t,r)=>{"use strict";r.d(t,{Lq:()=>i,Xb:()=>o,YV:()=>n});let n={seeAlso:"http://www.w3.org/2000/01/rdf-schema#seeAlso"},i={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},o={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"}},3823:(e,t,r)=>{"use strict";let n=r(331),i=r(9666),o=n.Readable.destroy;e.exports=n.Readable,e.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,e.exports._isUint8Array=n._isUint8Array,e.exports.isDisturbed=n.isDisturbed,e.exports.isErrored=n.isErrored,e.exports.isReadable=n.isReadable,e.exports.Readable=n.Readable,e.exports.Writable=n.Writable,e.exports.Duplex=n.Duplex,e.exports.Transform=n.Transform,e.exports.PassThrough=n.PassThrough,e.exports.addAbortSignal=n.addAbortSignal,e.exports.finished=n.finished,e.exports.destroy=n.destroy,e.exports.destroy=o,e.exports.pipeline=n.pipeline,e.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=n.Stream,e.exports.default=e.exports},3829:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:n,width:i,quality:o}=e,s=o||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(n)+"&w="+i+"&q="+s+(n.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},3913:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_8d2252"}},4e3:(e,t,r)=>{e.exports=r(4895)},4039:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}
`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},4167:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(4685).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4227:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eb});var n=r(6029);r(4361);var i=r(3913),o=r.n(i);r(3021);var s=r(5729);let a=(0,s.createContext)({getRepository:()=>{throw Error("Repository not initialized")}});function l(e){let{children:t,repository:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.Provider,{value:{getRepository:()=>r},children:t})})}var u=r(7127),c=r(9813),d=r(4426),f=r(2041),h=r(3735);r(7181);var p=r(3795);async function g(e,t){var r,n;let i=null!=(r=null==t?void 0:t.fetch)?r:fetch,o=null!=(n=null==t?void 0:t.webIdProfile)?n:await (0,c.aX)(e),s=(await Promise.allSettled((function(e,t){let r=(0,d.B2)(t,e);return Array.from(new Set((0,d.eC)(t).filter(e=>(0,f.Cr)(e,p.Xb.primaryTopic).length>0).map(d.D9).concat(r?(0,f.Cr)(r,p.YV.seeAlso):[]).concat(r?(0,f.Cr)(r,p.Xb.isPrimaryTopicOf):[]).filter(e=>e!==(0,h.oB)(t))))})(e,o).map(e=>(0,c.aX)(e,{fetch:i})))).filter(e=>"fulfilled"===e.status).map(e=>e.value);return{webIdProfile:o,altProfileAll:s}}var m=r(2672),y=r(695),v=r(8785),b=r(3511);let _=(e,t,r)=>{var n,i;let o;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);if(!(0,d.TO)(r)&&!(0,y.g0)(r))throw new d.fe(r);let s=(0,v.t)(t),a=null!=(n=e.predicates[s])?n:{},l=null!=(i=a.namedNodes)?i:[];o=(0,y.Y2)(r)?r.value:"string"==typeof r?r:(0,d.ub)(r)?r.url:(0,d.D9)(r);let u=(0,b.CN)(l.concat((0,v.t)(o))),c=(0,b.CN)({...a,namedNodes:u}),f=(0,b.CN)({...e.predicates,[s]:c});return(0,b.CN)({...e,predicates:f})},w=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.vk)(r),y.ST.boolean)),S=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.K)(r),y.ST.dateTime)),x=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.ls)(r),y.ST.date)),E=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.MR)(r),y.ST.time)),k=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.QH)(r),y.ST.decimal)),F=(e,t,r)=>((0,m.xj)(e),P(e,t,(0,y.PF)(r),y.ST.integer));function A(e,t,r,n){var i,o,s;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let a=(0,v.t)(t),l=(0,y.QC)(n),u=null!=(i=e.predicates[a])?i:{},c=null!=(o=u.langStrings)?o:{},f=null!=(s=c[l])?s:[],h=(0,b.CN)(f.concat(r)),p=(0,b.CN)({...c,[l]:h}),g=(0,b.CN)({...u,langStrings:p}),_=(0,b.CN)({...e.predicates,[a]:g});return(0,b.CN)({...e,predicates:_})}let I=(e,t,r)=>((0,m.xj)(e),P(e,t,r,y.ST.string));function T(e,t,r){return _(e,t,r.value)}function R(e,t,r){if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);return r.datatype.value===y.ST.langString?A(e,t,r.value,r.language):P(e,t,r.value,r.datatype.value)}function C(e,t,r){var n,i;if("NamedNode"===r.termType)return T(e,t,r);if("Literal"===r.termType)return R(e,t,r);if("BlankNode"===r.termType){if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let o=(0,v.t)(t),s=null!=(n=e.predicates[o])?n:{},a=null!=(i=s.blankNodes)?i:[],l=(0,b.CN)(a.concat((0,b.cW)(r))),u=(0,b.CN)({...s,blankNodes:l}),c=(0,b.CN)({...e.predicates,[o]:u});return(0,b.CN)({...e,predicates:c})}throw Error(`Term type [${r.termType}] is not supported by @inrupt/solid-client.`)}function P(e,t,r,n){var i,o,s;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let a=(0,v.t)(t),l=null!=(i=e.predicates[a])?i:{},u=null!=(o=l.literals)?o:{},c=null!=(s=u[n])?s:[],f=(0,b.CN)(c.concat(r)),h=(0,b.CN)({...u,[n]:f}),p=(0,b.CN)({...l,literals:h}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}function N(e,t){if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let r=(0,v.t)(t),n={...e.predicates};return delete n[r],(0,b.CN)({...e,predicates:(0,b.CN)(n)})}let j=(e,t,r)=>{var n,i,o;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let s=(0,v.t)(t);if(!(0,d.TO)(r)&&!(0,y.g0)(r))throw new d.fe(r);let a=(0,d.TO)(r)?(0,d.D9)(r):(0,v.t)(r),l=(0,b.CN)(null!=(o=null==(i=null==(n=e.predicates[s])?void 0:n.namedNodes)?void 0:i.filter(e=>e.toLowerCase()!==a.toLowerCase()))?o:[]),u=(0,b.CN)({...e.predicates[s],namedNodes:l}),c=(0,b.CN)({...e.predicates,[s]:u});return(0,b.CN)({...e,predicates:c})},O=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.boolean,e=>(0,y.OI)(e)===r)),L=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.dateTime,e=>{var t;return(null==(t=(0,y.tQ)(e))?void 0:t.getTime())===r.getTime()})),D=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.date,function(e){let t=(0,y.Yp)(e);return!!t&&t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getUTCDate()===r.getUTCDate()})),U=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.time,function(e){let t=(0,y.Tv)(e);return!!t&&t.hour===r.hour&&t.minute===r.minute&&t.second===r.second&&t.millisecond===r.millisecond&&t.timezoneHourOffset===r.timezoneHourOffset&&t.timezoneMinuteOffset===r.timezoneMinuteOffset})),M=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.decimal,e=>(0,y.ZB)(e)===r)),B=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.integer,e=>(0,y.EO)(e)===r));function H(e,t,r,n){var i,o;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let s=(0,v.t)(t),a=null!=(o=null==(i=e.predicates[s])?void 0:i.langStrings)?o:{},l=Object.keys(a).find(e=>(0,y.QC)(e)===(0,y.QC)(n)&&Array.isArray(a[e])&&a[e].length>0);if("string"!=typeof l)return e;let u=a[l],c=(0,b.CN)(u.filter(e=>e!==r)),f=(0,b.CN)({...a,[l]:c}),h=(0,b.CN)({...e.predicates[s],langStrings:f}),p=(0,b.CN)({...e.predicates,[s]:h});return(0,b.CN)({...e,predicates:p})}let $=(e,t,r)=>((0,m.xj)(e),V(e,t,y.ST.string,e=>e===r));function K(e,t,r){return j(e,t,r.value)}function W(e,t,r){var n,i,o;if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);let s=r.datatype.value;if(s===y.ST.langString)return H(e,t,r.value,r.language);let a=(0,v.t)(t),l=null!=(n=e.predicates[a])?n:{},u=null!=(i=l.literals)?i:{},c=null!=(o=u[s])?o:[],f=(0,b.CN)(c.filter(e=>e!==r.value)),h=(0,b.CN)({...u,[s]:f}),p=(0,b.CN)({...l,literals:h}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}function V(e,t,r,n){var i,o,s;if(!(0,y.g0)(t))throw new d.dU(t);let a=(0,v.t)(t),l=null!=(i=e.predicates[a])?i:{},u=null!=(o=l.literals)?o:{},c=null!=(s=u[r])?s:[],f=(0,b.CN)(c.filter(e=>!n(e))),h=(0,b.CN)({...u,[r]:f}),p=(0,b.CN)({...l,literals:h}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}let q=(e,t,r)=>{if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);if(!(0,d.TO)(r)&&!(0,y.g0)(r))throw new d.fe(r);return _(N(e,t),t,r)},z=(e,t,r)=>((0,m.xj)(e),w(N(e,t),t,r)),J=(e,t,r)=>((0,m.xj)(e),S(N(e,t),t,r)),Z=(e,t,r)=>((0,m.xj)(e),x(N(e,t),t,r)),G=(e,t,r)=>((0,m.xj)(e),E(N(e,t),t,r)),Y=(e,t,r)=>((0,m.xj)(e),k(N(e,t),t,r)),X=(e,t,r)=>((0,m.xj)(e),F(N(e,t),t,r));function Q(e,t,r,n){return(0,m.xj)(e),A(N(e,t),t,r,n)}let ee=(e,t,r)=>((0,m.xj)(e),I(N(e,t),t,r));function et(e,t,r){return(0,m.xj)(e),T(N(e,t),t,r)}function er(e,t,r){return(0,m.xj)(e),R(N(e,t),t,r)}function en(e,t,r){if((0,m.xj)(e),!(0,y.g0)(t))throw new d.dU(t);return C(N(e,t),t,r)}function ei(e=(0,d.vW)()){let t=(0,d.TO)(e)?e:(0,d.vW)(e);function r(e){return(r,n)=>(t=e(t,r,n),o)}function n(e){return(r,n)=>(t=e(t,r,n),o)}function i(e){return(r,n)=>(t=e(t,r,n),o)}let o={build:()=>t,addUrl:r(_),addIri:r(_),addBoolean:r(w),addDatetime:r(S),addDate:r(x),addTime:r(E),addDecimal:r(k),addInteger:r(F),addStringNoLocale:r(I),addStringEnglish:(e,r)=>(t=A(t,e,r,"en"),o),addStringWithLocale:(e,r,n)=>(t=A(t,e,r,n),o),addNamedNode:r(T),addLiteral:r(R),addTerm:r(C),setUrl:n(q),setIri:n(q),setBoolean:n(z),setDatetime:n(J),setDate:n(Z),setTime:n(G),setDecimal:n(Y),setInteger:n(X),setStringNoLocale:n(ee),setStringEnglish:(e,r)=>(t=Q(t,e,r,"en"),o),setStringWithLocale:(e,r,n)=>(t=Q(t,e,r,n),o),setNamedNode:n(et),setLiteral:n(er),setTerm:n(en),removeAll:e=>(t=N(t,e),o),removeUrl:i(j),removeIri:i(j),removeBoolean:i(O),removeDatetime:i(L),removeDate:i(D),removeTime:i(U),removeDecimal:i(M),removeInteger:i(B),removeStringNoLocale:i($),removeStringEnglish:(e,r)=>ei(H(t,e,r,"en")),removeStringWithLocale:(e,r,n)=>ei(H(t,e,r,n)),removeNamedNode:i(K),removeLiteral:i(W)};return o}var eo=r(6002),es=r(8117);function ea(e){return e.split("#")[0]}let el=(e,t,r)=>e.predicates[t]?.namedNodes?.includes(r);class eu{getSession(){return(0,es._)()}isLoggedIn(){return this.getSession().info.isLoggedIn}getFetch(){return this.getSession().fetch}getWebId(){return this.getSession().info.webId}async login(e){return this.getSession().login(e)}async logout(){return this.getSession().logout({logoutType:"app"})}async handleIncomingRedirect(e){let t=this.getSession();t.events.removeAllListeners(es.qY.SESSION_RESTORED),t.events.on(es.qY.SESSION_RESTORED,e),await t.handleIncomingRedirect({restorePreviousSession:!1})}async findOidcIssuers(e){let t=await (0,c.aX)(e),r=(0,d.B2)(t,e);if(!r)throw Error("Failed to discover WebID");return(0,f.tX)(r,"http://www.w3.org/ns/solid/terms#oidcIssuer")}async findAllStorageIris(){let e=this.getWebId();if(!e)throw Error("Session not authenticated!");let t=await g(e,{fetch:this.getFetch()});return[(0,d.B2)(t.webIdProfile,e)].filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/pim/space#storage")).flat()}async findAllPrivateTypeIndexIrisByWebId(){let e=this.getWebId();if(!e)throw Error("Session not authenticated!");let t=await g(e,{fetch:this.getFetch()}),r=[(0,d.B2)(t.webIdProfile,e)],n=r.filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/2000/01/rdf-schema#seeAlso")).flat(),i=(await Promise.all(n.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,d.eC)(e)).flat();return[...r.filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")).flat(),...i.map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")).flat()]}async findAllInstanceUrls(){let e=await this.findAllPrivateTypeIndexIrisByWebId(),t=await Promise.all(e.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})));return(await Promise.all(t.map(e=>(0,d.eC)(e)))).flat().filter(e=>el(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/ns/solid/terms#TypeRegistration")&&el(e,"http://www.w3.org/ns/solid/terms#forClass","http://antwika.com/ns/solid-memo#SolidMemoData")).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#instance")).flat()}async findInstances(e){let t=e??await this.findAllInstanceUrls();return(await Promise.all(t.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,d.eC)(e)).flat().filter(e=>el(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData")).reduce((e,t)=>{let r=(0,u.LW)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),name:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#name"),hasDeck:(0,f.tX)(t,"http://antwika.com/ns/solid-memo#hasDeck"),isInPrivateTypeIndex:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInPrivateTypeIndex")});return e[r.iri]=r,e},{})}async findAllDeckUrls(e){let t=e??await this.findAllInstanceUrls();return(await Promise.all(t.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,d.eC)(e)).flat().filter(e=>el(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData")).map(e=>(0,f.tX)(e,"http://antwika.com/ns/solid-memo#hasDeck")).flat()}async findAllFlashcardUrls(e){return Object.values(await this.findDecks(e)).map(e=>e.hasCard).flat()}async findDecks(e){let t=e??await this.findAllDeckUrls();return(await Promise.all(t.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,d.eC)(e)).flat().filter(e=>el(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Deck")).reduce((e,t)=>{let r=(0,u.nt)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),name:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#name"),back:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#back"),isInSolidMemoDataInstance:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),hasCard:(0,f.tX)(t,"http://antwika.com/ns/solid-memo#hasCard")});return e[r.iri]=r,e},{})}async findFlashcards(e){let t=await Promise.all(e.map(e=>(0,c.aX)(e,{fetch:this.getFetch()})));return(await Promise.all(t.map(e=>(0,d.eC)(e).filter(e=>el(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Flashcard"))))).flat().reduce((e,t)=>{let r=(0,u.Ez)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),front:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#front"),back:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#back"),isInDeck:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInDeck"),isInSolidMemoDataInstance:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),interval:(0,f.XU)(t,"http://antwika.com/ns/solid-memo#interval"),easeFactor:(0,f.S5)(t,"http://antwika.com/ns/solid-memo#easeFactor"),repetition:(0,f.XU)(t,"http://antwika.com/ns/solid-memo#repetition"),lastReviewed:(0,f.XU)(t,"http://antwika.com/ns/solid-memo#lastReviewed")});return e[r.iri]=r,e},{})}async createInstance(e){let t=await this.findAllPrivateTypeIndexIrisByWebId();if(0===t.length)throw Error("No private type indexes found");if(t.length>1)throw Error("Too many private type indexes found");let r=(0,eo.A)().toString(),n=t[0],i=`${n}#${r}`;if(!n)throw Error("Failed to pick private type indexes iri");let o=await (0,c.aX)(n,{fetch:this.getFetch()}),s=(0,d.vW)({name:r});if(!s)throw Error("Expected typeRegistrationThing to be defined!");let a=(0,eo.A)().toString(),l=`${e}solid-memo/data-${(0,eo.A)().toString()}#${a}`,u=ei(s).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/ns/solid/terms#TypeRegistration").addUrl("http://www.w3.org/ns/solid/terms#forClass","http://antwika.com/ns/solid-memo#SolidMemoData").addUrl("http://www.w3.org/ns/solid/terms#instance",l).build(),f=(0,d.xQ)(o,u);await (0,c.cv)(n,f,{fetch:this.getFetch()});let h=(0,c.Yl)(),p=ei((0,d.vW)({name:a})).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData").addUrl("http://antwika.com/ns/solid-memo#isInPrivateTypeIndex",i).addStringNoLocale("http://antwika.com/ns/solid-memo#version","1").addStringNoLocale("http://antwika.com/ns/solid-memo#name","New instance name").build(),g=(0,d.xQ)(h,p);await (0,c.cv)(l,g,{fetch:this.getFetch()})}async createDeck(e,t){let r=await (0,c.aX)(e,{fetch:this.getFetch()}),n=(0,d.B2)(r,e);if(!n)throw Error("Expected instanceThing to be defined!");let i=(0,eo.A)().toString(),o=`${ea(e)}#${i}`,s=ei(n).addUrl("http://antwika.com/ns/solid-memo#hasDeck",o).build(),a=(0,d.xQ)(r,s);await (0,c.cv)(e,a,{fetch:this.getFetch()});let l=await (0,c.aX)(e,{fetch:this.getFetch()}),u=ei({name:i}).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Deck").addStringNoLocale("http://antwika.com/ns/solid-memo#version",t.version).addStringNoLocale("http://antwika.com/ns/solid-memo#name",t.name).addUrl("http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance",t.isInSolidMemoDataInstance).build(),f=(0,d.xQ)(l,u);return await (0,c.cv)(e,f,{fetch:this.getFetch()}),await this.findDecks([o])}async createFlashcard(e,t,r){let n=await (0,c.aX)(t,{fetch:this.getFetch()}),i=(0,d.B2)(n,t);if(!i)throw Error("Expected deckThing to be defined!");let o=(0,eo.A)().toString(),s=`${ea(e)}#${o}`,a=ei(i).addUrl("http://antwika.com/ns/solid-memo#hasCard",s).build(),l=(0,d.xQ)(n,a);await (0,c.cv)(t,l,{fetch:this.getFetch()});let u=await (0,c.aX)(e,{fetch:this.getFetch()}),f=ei({name:o}).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Flashcard").addStringNoLocale("http://antwika.com/ns/solid-memo#version",r.version).addStringNoLocale("http://antwika.com/ns/solid-memo#front",r.front).addStringNoLocale("http://antwika.com/ns/solid-memo#back",r.back).addInteger("http://antwika.com/ns/solid-memo#interval",r.interval).addDecimal("http://antwika.com/ns/solid-memo#easeFactor",r.easeFactor).addInteger("http://antwika.com/ns/solid-memo#repetition",r.repetition).addUrl("http://antwika.com/ns/solid-memo#isInDeck",r.isInDeck).addUrl("http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance",r.isInSolidMemoDataInstance);r.lastReviewed&&f.addDatetime("http://antwika.com/ns/solid-memo#lastReviewed",r.lastReviewed);let h=f.build(),p=(0,d.xQ)(u,h);await (0,c.cv)(e,p,{fetch:this.getFetch()})}async renameInstance(e,t){let r=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),n=(0,d.B2)(r,e.iri);if(!n)throw Error("Could not find instance thing");let i=(0,f.K9)(n,"http://antwika.com/ns/solid-memo#name"),o=n;for(let e of i)o=$(n,"http://antwika.com/ns/solid-memo#name",e);o=ee(o,"http://antwika.com/ns/solid-memo#name",t);let s=(0,d.xQ)(r,o);await (0,c.cv)(e.iri,s,{fetch:this.getFetch()})}async renameDeck(e,t){let r=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),n=(0,d.B2)(r,e.iri);if(!n)throw Error("Could not find deck thing");let i=(0,f.K9)(n,"http://antwika.com/ns/solid-memo#name"),o=n;for(let e of i)o=$(n,"http://antwika.com/ns/solid-memo#name",e);o=ee(o,"http://antwika.com/ns/solid-memo#name",t);let s=(0,d.xQ)(r,o);await (0,c.cv)(e.iri,s,{fetch:this.getFetch()})}async updateInstance(e){let t=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),r=(0,d.B2)(t,e.iri);if(!r)throw Error("Could not find instance thing");let n=r;n=ee(n,"http://antwika.com/ns/solid-memo#name",e.name);let i=(0,d.xQ)(t,n);await (0,c.cv)(e.iri,i,{fetch:this.getFetch()})}async updateDeck(e){let t=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),r=(0,d.B2)(t,e.iri);if(!r)throw Error("Could not find deck thing");let n=r;n=ee(n,"http://antwika.com/ns/solid-memo#name",e.name);let i=(0,d.xQ)(t,n);await (0,c.cv)(e.iri,i,{fetch:this.getFetch()})}async updateFlashcard(e){let t=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),r=(0,d.B2)(t,e.iri);if(!r)throw Error("Could not find flashcard thing");let n=r;n=ee(n,"http://antwika.com/ns/solid-memo#front",e.front),n=Y(n=X(n=ee(n,"http://antwika.com/ns/solid-memo#back",e.back),"http://antwika.com/ns/solid-memo#interval",e.interval),"http://antwika.com/ns/solid-memo#easeFactor",e.easeFactor),n=X(n,"http://antwika.com/ns/solid-memo#repetition",e.repetition),e.lastReviewed&&(n=J(n,"http://antwika.com/ns/solid-memo#lastReviewed",e.lastReviewed));let i=(0,d.xQ)(t,n);await (0,c.cv)(e.iri,i,{fetch:this.getFetch()})}async resetFlashcard(e){let t=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),r=(0,d.B2)(t,e.iri);if(!r)throw Error("Could not find flashcard thing");let n=r;n=Y(n=X(n,"http://antwika.com/ns/solid-memo#interval",1),"http://antwika.com/ns/solid-memo#easeFactor",2.5),n=X(n,"http://antwika.com/ns/solid-memo#repetition",1),e.lastReviewed&&(n=L(n,"http://antwika.com/ns/solid-memo#lastReviewed",e.lastReviewed));let i=(0,d.xQ)(t,n);await (0,c.cv)(e.iri,i,{fetch:this.getFetch()})}async deleteInstance(e){if(e.hasDeck.length>0)throw Error("Clear the instance before deletion");let t=e.isInPrivateTypeIndex,r=await (0,c.aX)(t,{fetch:this.getFetch()}),n=(0,d.rM)(r,e.iri);(0,d.B2)(n,t)&&(n=(0,d.rM)(n,t)),await (0,c.cv)(t,n,{fetch:this.getFetch()});let i=await (0,c.aX)(e.iri,{fetch:this.getFetch()}),o=(0,d.rM)(i,e.iri),s=await (0,c.cv)(e.iri,o,{fetch:this.getFetch()});await (0,c.X)(s,{fetch:this.getFetch()})}async deleteDeck(e){if(e.hasCard.length>0)throw Error("Clear the deck before deletion");let t=e.isInSolidMemoDataInstance,r=await (0,c.aX)(t,{fetch:this.getFetch()}),n=(0,d.rM)(r,e.iri),i=(0,d.B2)(n,t);if(i){let t=j(i,"http://antwika.com/ns/solid-memo#hasDeck",e.iri);n=(0,d.xQ)(n,t)}await (0,c.cv)(t,n,{fetch:this.getFetch()})}async deleteFlashcard(e){let t=e.isInDeck,r=await (0,c.aX)(t,{fetch:this.getFetch()}),n=(0,d.rM)(r,e.iri),i=(0,d.B2)(n,t);if(i){let t=j(i,"http://antwika.com/ns/solid-memo#hasCard",e.iri);n=(0,d.xQ)(n,t)}await (0,c.cv)(t,n,{fetch:this.getFetch()})}}var ec=r(6207),ed=r(9099),ef=r(4e3);let eh=(0,s.createContext)({user:null,loading:!0}),ep=e=>{let{authService:t,children:r}=e,i=(0,ef.useRouter)(),[o,a]=(0,s.useState)(null),[l,u]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{await t.handleIncomingRedirect(e=>i.push(e));let e=t.getWebId();e&&a({name:e}),u(!1)})().then(()=>{}).catch(e=>{console.error("Failed with error:",e)})},[t,l,i]),(0,n.jsx)(eh.Provider,{value:{user:o,loading:l},children:r})},eg=()=>(0,s.useContext)(eh);var em=r(8534),ey=r(3606);let ev=e=>{let{children:t}=e,{user:r,loading:i}=eg(),o=(0,ed.useRouter)();return"/login"!==o.pathname&&(i||!r)?(0,n.jsxs)(em.default,{children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{children:"Not logged in"})}),(0,n.jsx)("div",{children:(0,n.jsx)(ey.$n,{onClick:()=>{o.push("/login").catch(e=>{console.error("Failed with error:",e)})},children:"Go to Login page"})})]}):t},eb=e=>{let{Component:t,pageProps:r}=e,i=new eu,s=new u.uR(i),a=new u.$q(i),c=new u.OM;return(0,n.jsx)("div",{className:o().className,children:(0,n.jsx)(l,{repository:i,children:(0,n.jsx)(ec.A,{authService:s,service:a,spacedRepetitionAlgorithm:c,children:(0,n.jsx)(ep,{authService:s,children:(0,n.jsx)(ev,{children:(0,n.jsx)(t,{...r})})})})})})}},4269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return l},redirect:function(){return a}});let n=r(8316),i=r(5318),o=void 0;function s(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function a(e,t){var r;throw null!=t||(t=(null==o||null==(r=o.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),s(e,t,n.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=i.RedirectType.replace),s(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4318:(e,t,r)=>{"use strict";let{MathFloor:n,NumberIsInteger:i}=r(4039),{validateInteger:o}=r(1204),{ERR_INVALID_ARG_VALUE:s}=r(7894).codes,a=16384,l=16;function u(e){return e?l:a}e.exports={getHighWaterMark:function(e,t,r,o){let a=null!=t.highWaterMark?t.highWaterMark:o?t[r]:null;if(null!=a){if(!i(a)||a<0)throw new s(o?`options.${r}`:"options.highWaterMark",a);return n(a)}return u(e.objectMode)},getDefaultHighWaterMark:u,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:a=t}}},4361:(e,t,r)=>{r(57)},4426:(e,t,r)=>{"use strict";r.d(t,{lB:()=>A,dU:()=>I,fe:()=>T,D9:()=>E,vW:()=>S,B2:()=>v,eC:()=>b,TO:()=>x,ub:()=>F,rM:()=>w,xQ:()=>_,Y:()=>k});let n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};for(var i,o=new Uint8Array(16),s=[],a=0;a<256;++a)s.push((a+256).toString(16).slice(1));let l=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();var a=(e=e||{}).random||(e.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var l=0;l<16;++l)t[r+l]=a[l];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)};var u=r(695),c=r(1482),d=r(8348),f=r(3735),h=r(2672),p=r(3511),g=r(8785),m=r(2041),y=r(5177);function v(e,t,r={}){var n;if(!(0,u.g0)(t)&&!t.match(/^_:/))throw new R(t);let i=void 0!==r.scope?(0,g.t)(r.scope):"default",o=null!=(n=e.graphs[i])?n:{},s=(0,g.t)(t),a=o[(0,p.AA)(s)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(s),(0,f.$s)(e)):s];return void 0===a?null:a}function b(e,t={acceptBlankNodes:!1}){var r;let n=void 0!==t.scope?(0,g.t)(t.scope):"default";return Object.values(null!=(r=e.graphs[n])?r:{}).filter(e=>!(0,p.GM)(e.url)||t.acceptBlankNodes)}function _(e,t){var r;let n=F(t)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(t.url),(0,f.$s)(e)):t.url,i=e.graphs.default,o=(0,p.CN)({...i,[n]:(0,p.CN)({...t,url:n})}),s=(0,p.CN)({...e.graphs,default:o}),a=y.Ay.namedNode(n),l=null==(r=e.graphs.default[n])?void 0:r.predicates,g=void 0!==l?(0,d.FP)(l,a,y.Ay.defaultGraph()):[],m=(0,d.FP)(t.predicates,a,y.Ay.defaultGraph());return(0,h.Mc)((0,h.CC)((0,p.CN)({...e,graphs:s}),g),m)}function w(e,t){var r;let n;n=(0,u.Y2)(t)?t.value:"string"==typeof t?(0,p.AA)(t)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(t),(0,f.$s)(e)):t:F(t)?t.url:E(t);let i={...e.graphs.default};delete i[n];let o=(0,p.CN)({...e.graphs,default:(0,p.CN)(i)}),s=y.Ay.namedNode(n),a=null==(r=e.graphs.default[n])?void 0:r.predicates,l=void 0!==a?(0,d.FP)(a,s,y.Ay.defaultGraph()):[];return(0,h.CC)((0,p.CN)({...e,graphs:o}),l)}function S(e={}){var t;if(void 0!==e.url){let{url:t}=e;if(!(0,u.g0)(t))throw new R(t);return(0,p.CN)({type:"Subject",predicates:(0,p.CN)({}),url:t})}let r=null!=(t=e.name)?t:C(),n=(0,p.w$)(r);return(0,p.CN)({type:"Subject",predicates:(0,p.CN)({}),url:n})}function x(e){return"object"==typeof e&&null!==e&&"string"==typeof e.type&&"Subject"===e.type}let E=function(e,t){if(F(e)){if(void 0===t)throw Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return(0,u.ye)((0,p.J0)(e.url),t)}return e.url};function k(e){let t="";F(e)?t+=`## Thing (no URL yet  identifier: \`#${(0,p.J0)(e.url)}\`)
`:t+=`## Thing: ${e.url}
`;let r=Object.keys(e.predicates);if(0===r.length)t+="\n<empty>\n";else for(let n of r)t+=`
Property: ${n}
`,t+=(0,m.me)(e,n).reduce((e,t)=>`${e}- ${(0,h.e0)(t)}
`,"");return t}function F(e){return(0,p.AA)(e.url)}class A extends c.dT{constructor(e){super(`Expected a Thing, but received: [${e}].`),this.receivedValue=e}}class I extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL to identify a property, but received: [${t}].`),this.receivedProperty=t}}class T extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL value, but received: [${t}].`),this.receivedValue=t}}class R extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL to identify a Thing, but received: [${t}].`),this.receivedValue=t}}let C=()=>l()},4512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ServerInsertedHTMLContext:function(){return i},useServerInsertedHTML:function(){return o}});let n=r(8365)._(r(5729)),i=n.default.createContext(null);function o(e){let t=(0,n.useContext)(i);t&&t(e)}},4587:(e,t,r)=>{e.exports=r(3657)},4681:function(e){e.exports=function(){var e=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.reset=function(){s=3,o=i},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.error.apply(o,Array.from(t))}},n(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={setInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setInterval(e,t)}),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearInterval(e)})},o=!1,s=null;t.Global=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},n(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return i}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(7),s=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("MetadataService: No settings passed to MetadataService"),Error("settings");this._settings=t,this._jsonService=new r(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(t){i.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata})):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then(function(r){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===r[e]){if(!0===t)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),Error("Metadata does not contain property "+e)}return r[e]})},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then(function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys})})},n(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&0>this._metadataUrl.indexOf(s)&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=s))),this._metadataUrl}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var n=r(0),i=r(1);t.UrlUtility=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.addQueryParam=function(e,t,r){return 0>e.indexOf("?")&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),e+="=",e+=encodeURIComponent(r)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=r.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},l=/([^&=]+)=([^&]*)/g,u=0;s=l.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),u++>50)return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var c in a)return a;return{}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var n,i=r(26);t.JoseUtil=(0,((n=r(33))&&n.__esModule?n:{default:n}).default)({jws:i.jws,KeyUtil:i.KeyUtil,X509:i.X509,crypto:i.crypto,hextob64u:i.hextob64u,b64tohex:i.b64tohex,AllowedSigningAlgs:i.AllowedSigningAlgs})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=r(23),a=r(6),l=r(24),u=r(2),c=".well-known/openid-configuration";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.authority,i=t.metadataUrl,o=t.metadata,c=t.signingKeys,d=t.metadataSeed,f=t.client_id,h=t.client_secret,p=t.response_type,g=t.scope,m=t.redirect_uri,y=t.post_logout_redirect_uri,v=t.client_authentication,b=t.prompt,_=t.display,w=t.max_age,S=t.ui_locales,x=t.acr_values,E=t.resource,k=t.response_mode,F=t.filterProtocolClaims,A=t.loadUserInfo,I=t.staleStateAge,T=t.clockSkew,R=t.clockService,C=void 0===R?new s.ClockService:R,P=t.userInfoJwtIssuer,N=t.mergeClaims,j=t.stateStore,O=void 0===j?new a.WebStorageStateStore:j,L=t.ResponseValidatorCtor,D=void 0===L?l.ResponseValidator:L,U=t.MetadataServiceCtor,M=void 0===U?u.MetadataService:U,B=t.extraQueryParams,H=void 0===B?{}:B,$=t.extraTokenParams,K=void 0===$?{}:$;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._authority=r,this._metadataUrl=i,this._metadata=o,this._metadataSeed=d,this._signingKeys=c,this._client_id=f,this._client_secret=h,this._response_type=void 0===p?"id_token":p,this._scope=void 0===g?"openid":g,this._redirect_uri=m,this._post_logout_redirect_uri=y,this._client_authentication=void 0===v?"client_secret_post":v,this._prompt=b,this._display=_,this._max_age=w,this._ui_locales=S,this._acr_values=x,this._resource=E,this._response_mode=k,this._filterProtocolClaims=!!(void 0===F||F),this._loadUserInfo=!!(void 0===A||A),this._staleStateAge=void 0===I?900:I,this._clockSkew=void 0===T?300:T,this._clockService=C,this._userInfoJwtIssuer=void 0===P?"OP":P,this._mergeClaims=!!(void 0!==N&&N),this._stateStore=O,this._validator=new D(this),this._metadataService=new M(this),this._extraQueryParams="object"===(void 0===H?"undefined":n(H))?H:{},this._extraTokenParams="object"===(void 0===K?"undefined":n(K))?K:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},i(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&0>this._metadataUrl.indexOf(c)&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=c)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":n(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":n(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var n=r(0),i=r(1);t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefix,n=t.store,o=void 0===n?i.Global.localStorage:n;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._store=o,this._prefix=void 0===r?"oidc.":r}return e.prototype.set=function(e,t){return n.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){return n.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e,Promise.resolve(this._store.getItem(e))},e.prototype.remove=function(e){n.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){n.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var r=this._store.key(t);0===r.indexOf(this._prefix)&&e.push(r.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var n=r(0),i=r(1);t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),n&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=n}return e.prototype.getJson=function(e,t){var r=this;if(!e)throw n.Log.error("JsonService.getJson: No url passed"),Error("url");return n.Log.debug("JsonService.getJson, url: ",e),new Promise(function(i,o){var s=new r._XMLHttpRequest;s.open("GET",e);var a=r._contentTypes,l=r._jwtHandler;s.onload=function(){if(n.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var r=a.find(function(e){if(t.startsWith(e))return!0});if("application/jwt"==r)return void l(s).then(i,o);if(r)try{return void i(JSON.parse(s.responseText))}catch(e){return n.Log.error("JsonService.getJson: Error parsing JSON response",e.message),void o(e)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){n.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(n.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()})},e.prototype.postForm=function(e,t,r){var i=this;if(!e)throw n.Log.error("JsonService.postForm: No url passed"),Error("url");return n.Log.debug("JsonService.postForm, url: ",e),new Promise(function(o,s){var a=new i._XMLHttpRequest;a.open("POST",e);var l=i._contentTypes;a.onload=function(){if(n.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(t=a.getResponseHeader("Content-Type"))&&l.find(function(e){if(t.startsWith(e))return!0}))try{var t,r=JSON.parse(a.responseText);if(r&&r.error)return n.Log.error("JsonService.postForm: Error from server: ",r.error),void s(Error(r.error))}catch(e){return n.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error(a.statusText+" ("+a.status+")"))}else{if((t=a.getResponseHeader("Content-Type"))&&l.find(function(e){if(t.startsWith(e))return!0}))try{return void o(JSON.parse(a.responseText))}catch(e){return n.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error("Invalid response Content-Type: "+t+", from URL: "+e))}},a.onerror=function(){n.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var u="";for(var c in t){var d=t[c];d&&(u.length>0&&(u+="&"),u+=encodeURIComponent(c),u+="=",u+=encodeURIComponent(d))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==r&&a.setRequestHeader("Authorization","Basic "+btoa(r)),a.send(u)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var n=r(0),i=r(3),o=r(13);t.SigninRequest=function(){function e(t){var r=t.url,s=t.client_id,a=t.redirect_uri,l=t.response_type,u=t.scope,c=t.authority,d=t.data,f=t.prompt,h=t.display,p=t.max_age,g=t.ui_locales,m=t.id_token_hint,y=t.login_hint,v=t.acr_values,b=t.resource,_=t.response_mode,w=t.request,S=t.request_uri,x=t.extraQueryParams,E=t.request_type,k=t.client_secret,F=t.extraTokenParams,A=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!r)throw n.Log.error("SigninRequest.ctor: No url passed"),Error("url");if(!s)throw n.Log.error("SigninRequest.ctor: No client_id passed"),Error("client_id");if(!a)throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"),Error("redirect_uri");if(!l)throw n.Log.error("SigninRequest.ctor: No response_type passed"),Error("response_type");if(!u)throw n.Log.error("SigninRequest.ctor: No scope passed"),Error("scope");if(!c)throw n.Log.error("SigninRequest.ctor: No authority passed"),Error("authority");var I=e.isOidc(l),T=e.isCode(l);_||(_=e.isCode(l)?"query":null),this.state=new o.SigninState({nonce:I,data:d,client_id:s,authority:c,redirect_uri:a,code_verifier:T,request_type:E,response_mode:_,client_secret:k,scope:u,extraTokenParams:F,skipUserInfo:A}),r=i.UrlUtility.addQueryParam(r,"client_id",s),r=i.UrlUtility.addQueryParam(r,"redirect_uri",a),r=i.UrlUtility.addQueryParam(r,"response_type",l),r=i.UrlUtility.addQueryParam(r,"scope",u),r=i.UrlUtility.addQueryParam(r,"state",this.state.id),I&&(r=i.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),T&&(r=i.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=i.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var R={prompt:f,display:h,max_age:p,ui_locales:g,id_token_hint:m,login_hint:y,acr_values:v,resource:b,request:w,request_uri:S,response_mode:_};for(var C in R)R[C]&&(r=i.UrlUtility.addQueryParam(r,C,R[C]));for(var P in x)r=i.UrlUtility.addQueryParam(r,P,x[P]);this.url=r}return e.isOidc=function(e){return!!e.split(/\s+/g).filter(function(e){return"id_token"===e})[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter(function(e){return"token"===e})[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter(function(e){return"code"===e})[0]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=(n=r(14))&&n.__esModule?n:{default:n};t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.data,i=t.created,o=t.request_type;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._id=r||(0,s.default)(),this._data=n,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=o}return e.prototype.toStorageString=function(){return o.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return o.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,r){var n=Date.now()/1e3-r;return t.getAllKeys().then(function(r){o.Log.debug("State.clearStaleState: got keys",r);for(var i,s=[],a=0;a<r.length;a++)!function(a){var l=r[a];i=t.get(l).then(function(r){var i=!1;if(r)try{var s=e.fromStorageString(r);o.Log.debug("State.clearStaleState: got item from key: ",l,s.created),s.created<=n&&(i=!0)}catch(e){o.Log.error("State.clearStaleState: Error parsing state for key",l,e.message),i=!0}else o.Log.debug("State.clearStaleState: no item in storage for key: ",l),i=!0;if(i)return o.Log.debug("State.clearStaleState: removed item for key: ",l),t.remove(l)}),s.push(i)}(a);return o.Log.debug("State.clearStaleState: waiting on promise count:",s.length),Promise.all(s)})},i(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(5),s=r(12),a=r(8),l=r(34),u=r(35),c=r(36),d=r(13),f=r(9);t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.response_type,n=t.scope,o=t.redirect_uri,s=t.data,l=t.state,u=t.prompt,c=t.display,d=t.max_age,f=t.ui_locales,h=t.id_token_hint,p=t.login_hint,g=t.acr_values,m=t.resource,y=t.request,v=t.request_uri,b=t.response_mode,_=t.extraQueryParams,w=t.extraTokenParams,S=t.request_type,x=t.skipUserInfo,E=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var k=this._settings.client_id;r=r||this._settings.response_type,n=n||this._settings.scope,o=o||this._settings.redirect_uri,u=u||this._settings.prompt,c=c||this._settings.display,d=d||this._settings.max_age,f=f||this._settings.ui_locales,g=g||this._settings.acr_values,m=m||this._settings.resource,b=b||this._settings.response_mode,_=_||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var F=this._settings.authority;return a.SigninRequest.isCode(r)&&"code"!==r?Promise.reject(Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var A=new a.SigninRequest({url:t,client_id:k,redirect_uri:o,response_type:r,scope:n,data:s||l,authority:F,prompt:u,display:c,max_age:d,ui_locales:f,id_token_hint:h,login_hint:p,acr_values:g,resource:m,request:y,request_uri:v,extraQueryParams:_,extraTokenParams:w,request_type:S,response_mode:b,client_secret:e._settings.client_secret,skipUserInfo:x}),I=A.state;return(E=E||e._stateStore).set(I.id,I.toStorageString()).then(function(){return A})})},e.prototype.readSigninResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var n="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),o=new l.SigninResponse(e,n?"?":"#");return o.state?(t=t||this._stateStore,(r?t.remove.bind(t):t.get.bind(t))(o.state).then(function(e){if(!e)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),Error("No matching state found in storage");return{state:d.SigninState.fromStorageString(e),response:o}})):(i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(Error("No state in response")))},e.prototype.processSigninResponse=function(e,t){var r=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then(function(e){var t=e.state,n=e.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),r._validator.validateSigninResponse(t,n)})},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id_token_hint,n=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,l=t.request_type,c=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var d=new u.SignoutRequest({url:t,id_token_hint:r,post_logout_redirect_uri:s,data:n||o,extraQueryParams:a,request_type:l}),f=d.state;return f&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(c=c||e._stateStore).set(f.id,f.toStorageString())),d})},e.prototype.readSignoutResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var n=new c.SignoutResponse(e);if(!n.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),n.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",n.error),Promise.reject(new s.ErrorResponse(n))):Promise.resolve({state:void 0,response:n});var o=n.state;return t=t||this._stateStore,(r?t.remove.bind(t):t.get.bind(t))(o).then(function(e){if(!e)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),Error("No matching state found in storage");return{state:f.State.fromStorageString(e),response:n}})},e.prototype.processSignoutResponse=function(e,t){var r=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then(function(e){var t=e.state,n=e.response;return t?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),r._validator.validateSignoutResponse(t,n)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),n)})},e.prototype.clearStaleState=function(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,f.State.clearStaleState(e,this.settings.staleStateAge)},n(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var n=r(7),i=r(2),o=r(0);t.TokenClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),Error("settings");this._settings=t,this._jsonService=new r,this._metadataService=new s(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var r=void 0,n=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=n?("client_secret_basic"==n&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(n){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(n,t,r).then(function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e})})):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var r=void 0,n=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==n&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(n){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(n,t,r).then(function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e})})):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(Error("A refresh_token is required")))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var n=r(0);t.ErrorResponse=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.error,o=r.error_description,s=r.error_uri,a=r.state,l=r.session_state;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),!i)throw n.Log.error("No error passed to ErrorResponse"),Error("error");var u=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,o||i));return u.name="ErrorResponse",u.error=i,u.error_description=o,u.error_uri=s,u.state=a,u.session_state=l,u}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=r(9),a=r(4),l=(n=r(14))&&n.__esModule?n:{default:n};t.SigninState=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.nonce,i=r.authority,o=r.client_id,s=r.redirect_uri,u=r.code_verifier,c=r.response_mode,d=r.client_secret,f=r.scope,h=r.extraTokenParams,p=r.skipUserInfo;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var g=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,arguments[0]));if(!0===n?g._nonce=(0,l.default)():n&&(g._nonce=n),!0===u?g._code_verifier=(0,l.default)()+(0,l.default)()+(0,l.default)():u&&(g._code_verifier=u),g.code_verifier){var m=a.JoseUtil.hashString(g.code_verifier,"SHA256");g._code_challenge=a.JoseUtil.hexToBase64Url(m)}return g._redirect_uri=s,g._authority=i,g._client_id=o,g._response_mode=c,g._client_secret=d,g._scope=f,g._extraTokenParams=h,g._skipUserInfo=p,g}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return o.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return o.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},i(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(s.State)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=n&&null!==n&&void 0!==n.getRandomValues?function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^n.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^16*Math.random()>>e/4).toString(16)})})().replace(/-/g,"")};var n="undefined"!=typeof window?window.crypto||window.msCrypto:null;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.User=function(){function e(t){var r=t.id_token,n=t.session_state,i=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,l=t.profile,u=t.expires_at,c=t.state;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this.id_token=r,this.session_state=n,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=l,this.expires_at=u,this.state=c}return e.prototype.toStorageString=function(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return i.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},n(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var n=r(0),i=r(46);t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.accessTokenExpiringNotificationTime,n=t.accessTokenExpiringTimer,o=void 0===n?new i.Timer("Access token expiring"):n,s=t.accessTokenExpiredTimer,a=void 0===s?new i.Timer("Access token expired"):s;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._accessTokenExpiringNotificationTime=void 0===r?60:r,this._accessTokenExpiring=o,this._accessTokenExpired=a}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var r=t-this._accessTokenExpiringNotificationTime;r<=0&&(r=1),n.Log.debug("AccessTokenEvents.load: registering expiring timer in:",r),this._accessTokenExpiring.init(r)}else n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var i=t+1;n.Log.debug("AccessTokenEvents.load: registering expired timer in:",i),this._accessTokenExpired.init(i)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=r(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex(function(t){return t===e});t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){n.Log.debug("Event: Raising event: "+this._name);for(var e,t=0;t<this._callbacks.length;t++)(e=this._callbacks)[t].apply(e,arguments)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(19),s=r(1);t.SessionMonitor=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=n,this._timer=a,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(e){e?r._start(e):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then(function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),r._start(t)}).catch(function(e){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)})}).catch(function(e){i.Log.error("SessionMonitor ctor: error from getUser:",e.message)}))}return e.prototype._start=function(e){var t=this,r=e.session_state;r&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",r,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",r,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(r):this._metadataService.getCheckSessionIframe().then(function(e){if(e){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var n=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),n,e,o,s),t._checkSessionIFrame.load().then(function(){t._checkSessionIFrame.start(r)})}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(e){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)}))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval(function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then(function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)}).catch(function(e){i.Log.error("SessionMonitor: error from querySessionStatus:",e.message)})},1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then(function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))}).catch(function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())})},n(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var n=r(0);t.CheckSessionIFrame=function(){function e(t,r,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._callback=t,this._client_id=r,this._url=n,this._interval=i||2e3,this._stopOnError=o;var s=n.indexOf("/",n.indexOf("//")+2);this._frame_origin=n.substr(0,s),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=n}return e.prototype.load=function(){var e=this;return new Promise(function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)})},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(n.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):n.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){n.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var r=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};r(),this._timer=window.setInterval(r,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(n.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var n=r(0),i=r(2),o=r(1);t.TokenRevocationClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw n.Log.error("TokenRevocationClient.ctor: No settings provided"),Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=r,this._metadataService=new s(this._settings)}return e.prototype.revoke=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw n.Log.error("TokenRevocationClient.revoke: No token provided"),Error("No token provided.");if("access_token"!==i&&"refresh_token"!=i)throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"),Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(o){if(o){n.Log.debug("TokenRevocationClient.revoke: Revoking "+i);var s=r._settings.client_id,a=r._settings.client_secret;return r._revoke(o,s,a,e,i)}if(t)throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"),Error("Revocation not supported")})},e.prototype._revoke=function(e,t,r,i,o){var s=this;return new Promise(function(a,l){var u=new s._XMLHttpRequestCtor;u.open("POST",e),u.onload=function(){n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",u.status),200===u.status?a():l(Error(u.statusText+" ("+u.status+")"))},u.onerror=function(){n.Log.debug("TokenRevocationClient.revoke: Network Error."),l("Network Error")};var c="client_id="+encodeURIComponent(t);r&&(c+="&client_secret="+encodeURIComponent(r)),c+="&token_type_hint="+encodeURIComponent(o)+"&token="+encodeURIComponent(i),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(c)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.CordovaPopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t}),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(t){return e.hasOwnProperty(t)})},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},n(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(10),o=r(5),s=r(6),a=r(37),l=r(38),u=r(16),c=r(2),d=r(48),f=r(49),h=r(19),p=r(20),g=r(18),m=r(1),y=r(15);t.default={Version:r(50).Version,Log:n.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:l.UserManager,AccessTokenEvents:u.AccessTokenEvents,MetadataService:c.MetadataService,CordovaPopupNavigator:d.CordovaPopupNavigator,CordovaIFrameNavigator:f.CordovaIFrameNavigator,CheckSessionIFrame:h.CheckSessionIFrame,TokenRevocationClient:p.TokenRevocationClient,SessionMonitor:g.SessionMonitor,Global:m.Global,User:y.User},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0),o=r(2),s=r(25),a=r(11),l=r(12),u=r(4),c=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.JoseUtil,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),Error("settings");this._settings=t,this._metadataService=new r(this._settings),this._userInfoService=new n(this._settings),this._joseUtil=l,this._tokenClient=new c(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var r=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then(function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),r._validateTokens(e,t).then(function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),r._processClaims(e,t).then(function(e){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e})})})},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new l.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new l.ErrorResponse(t))):e.nonce&&!t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(Error("No id_token in response"))):!e.nonce&&t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(Error("No code in response"))):!e.code_verifier&&t.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var r=this;if(t.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then(function(e){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=r._mergeClaims(t.profile,e),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)});i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var r=Object.assign({},e);for(var i in t){var o=t[i];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];r[i]?Array.isArray(r[i])?0>r[i].indexOf(a)&&r[i].push(a):r[i]!==a&&("object"===(void 0===a?"undefined":n(a))&&this._settings.mergeClaims?r[i]=this._mergeClaims(r[i],a):r[i]=[r[i],a]):r[i]=a}}return r},e.prototype._filterProtocolClaims=function(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(c.forEach(function(e){delete t[e]}),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var r=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===n(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then(function(n){for(var o in n)t[o]=n[o];return t.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),r._validateIdTokenAttributes(e,t)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)})},e.prototype._validateIdTokenAttributes=function(e,t){var r=this;return this._metadataService.getIssuer().then(function(n){var o=e.client_id,s=r._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),r._settings.getEpochTime().then(function(a){return r._joseUtil.validateJwtAttributes(t.id_token,n,o,s,a).then(function(r){return e.nonce&&e.nonce!==r.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(Error("Invalid nonce in id_token"))):r.sub?(t.profile=r,t):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(Error("No sub present in id_token")))})})})},e.prototype._validateIdTokenAndAccessToken=function(e,t){var r=this;return this._validateIdToken(e,t).then(function(e){return r._validateAccessToken(e)})},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then(function(r){var n=e.header.kid;if(!r)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(n)o=r.filter(function(e){return e.kid===n})[0];else{if((r=t._filterByAlg(r,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(Error("No kid found in id_token and more than one key found in metadata"));o=r[0]}return Promise.resolve(o)})},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then(function(r){return r?Promise.resolve(r):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))})},e.prototype._validateIdToken=function(e,t){var r=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(Error("No nonce on state"));var n=this._joseUtil.parseJwt(t.id_token);return n&&n.header&&n.payload?e.nonce!==n.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(o){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),r._getSigningKeyForJwtWithSingleRetry(n).then(function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(Error("No key matching kid or alg found in signing keys"));var a=e.client_id,l=r._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",l),r._joseUtil.validateJwt(t.id_token,s,o,a,l).then(function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),n.payload.sub?(t.profile=n.payload,t):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(Error("No sub present in id_token")))})})}):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",n),Promise.reject(Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];r="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",r),e=e.filter(function(e){return e.kty===r}),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",r,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(Error("Failed to parse id_token"));var r=t.header.alg;if(!r||5!==r.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r),Promise.reject(Error("Unsupported alg: "+r));var n=r.substr(2,3);if(!n||256!==(n=parseInt(n))&&384!==n&&512!==n)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,n),Promise.reject(Error("Unsupported alg: "+r));var o="sha"+n,s=this._joseUtil.hashString(e.access_token,o);if(!s)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),l=this._joseUtil.hexToBase64Url(a);return l!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",l,e.profile.at_hash),Promise.reject(Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var n=r(7),i=r(2),o=r(0),s=r(4);t.UserInfoService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),Error("settings");this._settings=t,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new a(this._settings),this._joseUtil=l}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then(function(r){return o.Log.debug("UserInfoService.getClaims: received userinfo url",r),t._jsonService.getJson(r,e).then(function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e})}):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(Error("A token is required")))},e.prototype._getClaimsFromJwt=function(e){var t=this;try{var r=this._joseUtil.parseJwt(e.responseText);if(!r||!r.header||!r.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",r),Promise.reject(Error("Failed to parse id_token"));var n=r.header.kid,i=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":i=this._metadataService.getIssuer();break;case"ANY":i=Promise.resolve(r.payload.iss);break;default:i=Promise.resolve(this._settings.userInfoJwtIssuer)}return i.then(function(i){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+i),t._metadataService.getSigningKeys().then(function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(n)a=s.filter(function(e){return e.kid===n})[0];else{if((s=t._filterByAlg(s,r.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(Error("No key matching kid or alg found in signing keys"));var l=t._settings.client_id,u=t._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",u),t._joseUtil.validateJwt(e.responseText,a,i,l,u,void 0,!0).then(function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),r.payload})})})}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];r="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",r),e=e.filter(function(e){return e.kty===r}),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",r,e.length),e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var n=r(27);t.jws=n.jws,t.KeyUtil=n.KEYUTIL,t.X509=n.X509,t.crypto=n.crypto,t.hextob64u=n.hextob64u,t.b64tohex=n.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,s,a,l,u,c,d,f,h,p,g,m,y,v,b,_,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S={userAgent:!1},x={},E=E||(c=Math,h=(f=(d={}).lib={}).Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=f.WordArray=h.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||m).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=0xffffffff<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=h.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(0x100000000*c.random()|0);return new p.init(t,e)}}),m=(g=d.enc={}).Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new p.init(r,t/2)}},y=g.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new p.init(r,t)}},v=g.Utf8={stringify:function(e){try{return decodeURIComponent(escape(y.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return y.parse(unescape(encodeURIComponent(e)))}},b=f.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=v.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,i=this.blockSize,o=n/(4*i),s=(o=e?c.ceil(o):c.max((0|o)-this._minBufferSize,0))*i,a=c.min(4*s,n);if(s){for(var l=0;l<s;l+=i)this._doProcessBlock(r,l);var u=r.splice(0,s);t.sigBytes-=a}return new p.init(u,a)},clone:function(){var e=h.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f.Hasher=b.extend({cfg:h.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new _.HMAC.init(e,r).finalize(t)}}}),_=d.algo={},d);A=(F=(k=E).lib).Base,I=F.WordArray,(k=k.x64={}).Word=A.extend({init:function(e,t){this.high=e,this.low=t}}),k.WordArray=A.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return I.create(r,this.sigBytes)},clone:function(){for(var e=A.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}}),T=E.lib.WordArray,E.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<r;s++)e.push(n.charAt(o>>>6*(3-s)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(n=r.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],i=0,o=0;o<t;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<o%4*2,a=r.indexOf(e.charAt(o))>>>6-o%4*2;n[i>>>2]|=(s|a)<<24-i%4*8,i++}return T.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){for(var t,r=(i=E.lib).WordArray,n=i.Hasher,i=E.algo,o=[],s=[],a=function(e){return 0x100000000*(e-(0|e))|0},l=2,u=0;64>u;){e:{t=l;for(var c=e.sqrt(t),d=2;d<=c;d++)if(!(t%d)){t=!1;break e}t=!0}t&&(8>u&&(o[u]=a(e.pow(l,.5))),s[u]=a(e.pow(l,1/3)),u++),l++}var f=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=0;64>h;h++){if(16>h)f[h]=0|e[t+h];else{var p=f[h-15],g=f[h-2];f[h]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+f[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[h-16]}p=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&c)+s[h]+f[h],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&o^i&o),d=c,c=u,u=l,l=a+p|0,a=o,o=i,i=n,n=p+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+u|0,r[6]=r[6]+c|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/0x100000000),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),E.SHA256=n._createHelper(i),E.HmacSHA256=n._createHmacHelper(i)}(Math),function(){function e(){return r.create.apply(r,arguments)}for(var t=E.lib.Hasher,r=(i=E.x64).Word,n=i.WordArray,i=E.algo,o=[e(0x428a2f98,0xd728ae22),e(0x71374491,0x23ef65cd),e(0xb5c0fbcf,0xec4d3b2f),e(0xe9b5dba5,0x8189dbbc),e(0x3956c25b,0xf348b538),e(0x59f111f1,0xb605d019),e(0x923f82a4,0xaf194f9b),e(0xab1c5ed5,0xda6d8118),e(0xd807aa98,0xa3030242),e(0x12835b01,0x45706fbe),e(0x243185be,0x4ee4b28c),e(0x550c7dc3,0xd5ffb4e2),e(0x72be5d74,0xf27b896f),e(0x80deb1fe,0x3b1696b1),e(0x9bdc06a7,0x25c71235),e(0xc19bf174,0xcf692694),e(0xe49b69c1,0x9ef14ad2),e(0xefbe4786,0x384f25e3),e(0xfc19dc6,0x8b8cd5b5),e(0x240ca1cc,0x77ac9c65),e(0x2de92c6f,0x592b0275),e(0x4a7484aa,0x6ea6e483),e(0x5cb0a9dc,0xbd41fbd4),e(0x76f988da,0x831153b5),e(0x983e5152,0xee66dfab),e(0xa831c66d,0x2db43210),e(0xb00327c8,0x98fb213f),e(0xbf597fc7,0xbeef0ee4),e(0xc6e00bf3,0x3da88fc2),e(0xd5a79147,0x930aa725),e(0x6ca6351,0xe003826f),e(0x14292967,0xa0e6e70),e(0x27b70a85,0x46d22ffc),e(0x2e1b2138,0x5c26c926),e(0x4d2c6dfc,0x5ac42aed),e(0x53380d13,0x9d95b3df),e(0x650a7354,0x8baf63de),e(0x766a0abb,0x3c77b2a8),e(0x81c2c92e,0x47edaee6),e(0x92722c85,0x1482353b),e(0xa2bfe8a1,0x4cf10364),e(0xa81a664b,0xbc423001),e(0xc24b8b70,0xd0f89791),e(0xc76c51a3,0x654be30),e(0xd192e819,0xd6ef5218),e(0xd6990624,0x5565a910),e(0xf40e3585,0x5771202a),e(0x106aa070,0x32bbd1b8),e(0x19a4c116,0xb8d2d0c8),e(0x1e376c08,0x5141ab53),e(0x2748774c,0xdf8eeb99),e(0x34b0bcb5,0xe19b48a8),e(0x391c0cb3,0xc5c95a63),e(0x4ed8aa4a,0xe3418acb),e(0x5b9cca4f,0x7763e373),e(0x682e6ff3,0xd6b2b8a3),e(0x748f82ee,0x5defb2fc),e(0x78a5636f,0x43172f60),e(0x84c87814,0xa1f0ab72),e(0x8cc70208,0x1a6439ec),e(0x90befffa,0x23631e28),e(0xa4506ceb,0xde82bde9),e(0xbef9a3f7,0xb2c67915),e(0xc67178f2,0xe372532b),e(0xca273ece,0xea26619c),e(0xd186b8c7,0x21c0c207),e(0xeada7dd6,0xcde0eb1e),e(0xf57d4f7f,0xee6ed178),e(0x6f067aa,0x72176fba),e(0xa637dc5,0xa2c898a6),e(0x113f9804,0xbef90dae),e(0x1b710b35,0x131c471b),e(0x28db77f5,0x23047d84),e(0x32caab7b,0x40c72493),e(0x3c9ebe0a,0x15c9bebc),e(0x431d67c4,0x9c100d4c),e(0x4cc5d4be,0xcb3e42b6),e(0x597f299c,0xfc657e2a),e(0x5fcb6fab,0x3ad6faec),e(0x6c44198c,0x4a475817)],s=[],a=0;80>a;a++)s[a]=e();i=i.SHA512=t.extend({_doReset:function(){this._hash=new n.init([new r.init(0x6a09e667,0xf3bcc908),new r.init(0xbb67ae85,0x84caa73b),new r.init(0x3c6ef372,0xfe94f82b),new r.init(0xa54ff53a,0x5f1d36f1),new r.init(0x510e527f,0xade682d1),new r.init(0x9b05688c,0x2b3e6c1f),new r.init(0x1f83d9ab,0xfb41bd6b),new r.init(0x5be0cd19,0x137e2179)])},_doProcessBlock:function(e,t){for(var r=(d=this._hash.words)[0],n=d[1],i=d[2],a=d[3],l=d[4],u=d[5],c=d[6],d=d[7],f=r.high,h=r.low,p=n.high,g=n.low,m=i.high,y=i.low,v=a.high,b=a.low,_=l.high,w=l.low,S=u.high,x=u.low,E=c.high,k=c.low,F=d.high,A=d.low,I=f,T=h,R=p,C=g,P=m,N=y,j=v,O=b,L=_,D=w,U=S,M=x,B=E,H=k,$=F,K=A,W=0;80>W;W++){var V=s[W];if(16>W)var q=V.high=0|e[t+2*W],z=V.low=0|e[t+2*W+1];else{q=((z=(q=s[W-15]).high)>>>1|(J=q.low)<<31)^(z>>>8|J<<24)^z>>>7;var J=(J>>>1|z<<31)^(J>>>8|z<<24)^(J>>>7|z<<25),Z=((z=(Z=s[W-2]).high)>>>19|(G=Z.low)<<13)^(z<<3|G>>>29)^z>>>6,G=(G>>>19|z<<13)^(G<<3|z>>>29)^(G>>>6|z<<26),Y=(z=s[W-7]).high,X=(Q=s[W-16]).high,Q=Q.low;q=(q=(q=q+Y+ +((z=J+z.low)>>>0<J>>>0))+Z+ +((z+=G)>>>0<G>>>0))+X+ +((z+=Q)>>>0<Q>>>0),V.high=q,V.low=z}Y=L&U^~L&B,Q=D&M^~D&H,V=I&R^I&P^R&P;var ee=T&C^T&N^C&N,et=(J=(I>>>28|T<<4)^(I<<30|T>>>2)^(I<<25|T>>>7),Z=(T>>>28|I<<4)^(T<<30|I>>>2)^(T<<25|I>>>7),(G=o[W]).high),er=G.low;X=$+((L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9))+ +((G=K+((D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9)))>>>0<K>>>0),$=B,K=H,B=U,H=M,U=L,M=D,L=j+(X=(X=(X=X+Y+ +((G+=Q)>>>0<Q>>>0))+et+ +((G+=er)>>>0<er>>>0))+q+ +((G+=z)>>>0<z>>>0))+ +((D=O+G|0)>>>0<O>>>0)|0,j=P,O=N,P=R,N=C,R=I,C=T,I=X+(V=J+V+ +((z=Z+ee)>>>0<Z>>>0))+ +((T=G+z|0)>>>0<G>>>0)|0}h=r.low=h+T,r.high=f+I+ +(h>>>0<T>>>0),g=n.low=g+C,n.high=p+R+ +(g>>>0<C>>>0),y=i.low=y+N,i.high=m+P+ +(y>>>0<N>>>0),b=a.low=b+O,a.high=v+j+ +(b>>>0<O>>>0),w=l.low=w+D,l.high=_+L+ +(w>>>0<D>>>0),x=u.low=x+M,u.high=S+U+ +(x>>>0<M>>>0),k=c.low=k+H,c.high=E+B+ +(k>>>0<H>>>0),A=d.low=A+K,d.high=F+$+ +(A>>>0<K>>>0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/0x100000000),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),E.SHA512=t._createHelper(i),E.HmacSHA512=t._createHmacHelper(i)}(),R=(N=E.x64).Word,C=N.WordArray,P=(N=E.algo).SHA512,N=N.SHA384=P.extend({_doReset:function(){this._hash=new C.init([new R.init(0xcbbb9d5d,0xc1059ed8),new R.init(0x629a292a,0x367cd507),new R.init(0x9159015a,0x3070dd17),new R.init(0x152fecd8,0xf70e5939),new R.init(0x67332667,0xffc00b31),new R.init(0x8eb44a87,0x68581511),new R.init(0xdb0c2e0d,0x64f98fa7),new R.init(0x47b5481d,0xbefa4fa4)])},_doFinalize:function(){var e=P._doFinalize.call(this);return e.sigBytes-=16,e}}),E.SHA384=P._createHelper(N),E.HmacSHA384=P._createHmacHelper(N);var k,F,A,I,T,R,C,P,N,j,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=O.charAt(r>>6)+O.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=O.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=O.charAt(r>>2)+O.charAt((3&r)<<4));(3&n.length)>0;)n+="=";return n}function D(e){var t,r,n,i="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(n=O.indexOf(e.charAt(t)))<0||(0==o?(i+=W(n>>2),r=3&n,o=1):1==o?(i+=W(r<<2|n>>4),r=15&n,o=2):2==o?(i+=W(r),i+=W(n>>2),r=3&n,o=3):(i+=W(r<<2|n>>4),i+=W(15&n),o=0));return 1==o&&(i+=W(r<<2)),i}function U(e){var t,r=D(e),n=[];for(t=0;2*t<r.length;++t)n[t]=parseInt(r.substring(2*t,2*t+2),16);return n}function M(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function B(){return new M(null)}"Microsoft Internet Explorer"==S.appName?(M.prototype.am=function(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,c=a*l+u*s;i=((l=s*l+((32767&c)<<15)+r[n]+(0x3fffffff&i))>>>30)+(c>>>15)+a*u+(i>>>30),r[n++]=0x3fffffff&l}return i},j=30):"Netscape"!=S.appName?(M.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var s=t*this[e++]+r[n]+i;i=Math.floor(s/0x4000000),r[n++]=0x3ffffff&s}return i},j=26):(M.prototype.am=function(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,c=a*l+u*s;i=((l=s*l+((16383&c)<<14)+r[n]+i)>>28)+(c>>14)+a*u,r[n++]=0xfffffff&l}return i},j=28),M.prototype.DB=j,M.prototype.DM=(1<<j)-1,M.prototype.DV=1<<j,M.prototype.FV=0x10000000000000,M.prototype.F1=52-j,M.prototype.F2=2*j-52;var H,$,K=[];for(H=48,$=0;$<=9;++$)K[H++]=$;for(H=97,$=10;$<36;++$)K[H++]=$;for(H=65,$=10;$<36;++$)K[H++]=$;function W(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function V(e,t){var r=K[e.charCodeAt(t)];return null==r?-1:r}function q(e){var t=B();return t.fromInt(e),t}function z(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function J(e){this.m=e}function Z(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function G(e,t){return e&t}function Y(e,t){return e|t}function X(e,t){return e^t}function Q(e,t){return e&~t}function ee(){}function et(e){return e}function er(e){this.r2=B(),this.q3=B(),M.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}J.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},J.prototype.revert=function(e){return e},J.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},J.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},J.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Z.prototype.convert=function(e){var t=B();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(M.ZERO)>0&&this.m.subTo(t,t),t},Z.prototype.revert=function(e){var t=B();return e.copyTo(t),this.reduce(t),t},Z.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Z.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Z.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},M.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},M.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},M.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=8==r?255&e[n]:V(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&M.ZERO.subTo(this,this)},M.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},M.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},M.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},M.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},M.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},M.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},M.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&M.ZERO.subTo(t,t)},M.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},M.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=B());var o=B(),s=this.s,a=e.s,l=this.DB-z(n[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,c=o[u-1];if(0!=c){var d=c*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),f=this.FV/d,h=(1<<this.F1)/d,p=1<<this.F2,g=r.t,m=g-u,y=null==t?B():t;for(o.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),M.ONE.dlShiftTo(u,y),y.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--m>=0;){var v=r[--g]==c?this.DM:Math.floor(r[g]*f+(r[g-1]+p)*h);if((r[g]+=o.am(0,v,r,m,0,u))<v)for(o.dlShiftTo(m,y),r.subTo(y,r);r[g]<--v;)r.subTo(y,r)}null!=t&&(r.drShiftTo(u,t),s!=a&&M.ZERO.subTo(t,t)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&M.ZERO.subTo(r,r)}}},M.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},M.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},M.prototype.exp=function(e,t){if(e>0xffffffff||e<1)return M.ONE;var r=B(),n=B(),i=t.convert(this),o=z(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)},M.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var t,r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=W(r));s>=0;)a<t?r=(this[s]&(1<<a)-1)<<t-a|this[--s]>>(a+=this.DB-t):(r=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=W(r));return i?o:"0"},M.prototype.negate=function(){var e=B();return M.ZERO.subTo(this,e),e},M.prototype.abs=function(){return this.s<0?this.negate():this},M.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},M.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+z(this[this.t-1]^this.s&this.DM)},M.prototype.mod=function(e){var t=B();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(M.ZERO)>0&&e.subTo(t,t),t},M.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new J(t):new Z(t),this.exp(e,r)},M.ZERO=q(0),M.ONE=q(1),ee.prototype.convert=et,ee.prototype.revert=et,ee.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},ee.prototype.sqrTo=function(e,t){e.squareTo(t)},er.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=B();return e.copyTo(t),this.reduce(t),t},er.prototype.revert=function(e){return e},er.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},er.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},er.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var en=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ei=0x4000000/en[en.length-1];function eo(){this.i=0,this.j=0,this.S=[]}function es(){var e;e=(new Date).getTime(),eb[e_++]^=255&e,eb[e_++]^=e>>8&255,eb[e_++]^=e>>16&255,eb[e_++]^=e>>24&255,e_>=256&&(e_-=256)}if(M.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},M.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=q(r),i=B(),o=B(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s},M.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var l=V(e,a);l<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&M.ZERO.subTo(this,this)},M.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(M.ONE.shiftLeft(e-1),Y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(M.ONE.shiftLeft(e-1),this);else{var n=[],i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},M.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},M.prototype.changeBit=function(e,t){var r=M.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},M.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},M.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},M.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},M.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},M.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},M.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},M.prototype.millerRabin=function(e){var t=this.subtract(M.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>en.length&&(e=en.length);for(var i=B(),o=0;o<e;++o){i.fromInt(en[Math.floor(Math.random()*en.length)]);var s=i.modPow(n,this);if(0!=s.compareTo(M.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(M.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},M.prototype.clone=function(){var e=B();return this.copyTo(e),e},M.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},M.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},M.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},M.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},M.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?r=(this[e]&(1<<n)-1)<<8-n|this[--e]>>(n+=this.DB-8):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},M.prototype.equals=function(e){return 0==this.compareTo(e)},M.prototype.min=function(e){return 0>this.compareTo(e)?this:e},M.prototype.max=function(e){return this.compareTo(e)>0?this:e},M.prototype.and=function(e){var t=B();return this.bitwiseTo(e,G,t),t},M.prototype.or=function(e){var t=B();return this.bitwiseTo(e,Y,t),t},M.prototype.xor=function(e){var t=B();return this.bitwiseTo(e,X,t),t},M.prototype.andNot=function(e){var t=B();return this.bitwiseTo(e,Q,t),t},M.prototype.not=function(){for(var e=B(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},M.prototype.shiftLeft=function(e){var t=B();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},M.prototype.shiftRight=function(e){var t=B();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},M.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return -1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},M.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},M.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},M.prototype.setBit=function(e){return this.changeBit(e,Y)},M.prototype.clearBit=function(e){return this.changeBit(e,Q)},M.prototype.flipBit=function(e){return this.changeBit(e,X)},M.prototype.add=function(e){var t=B();return this.addTo(e,t),t},M.prototype.subtract=function(e){var t=B();return this.subTo(e,t),t},M.prototype.multiply=function(e){var t=B();return this.multiplyTo(e,t),t},M.prototype.divide=function(e){var t=B();return this.divRemTo(e,t,null),t},M.prototype.remainder=function(e){var t=B();return this.divRemTo(e,null,t),t},M.prototype.divideAndRemainder=function(e){var t=B(),r=B();return this.divRemTo(e,t,r),[t,r]},M.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),o=q(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new J(t):t.isEven()?new er(t):new Z(t);var s=[],a=3,l=r-1,u=(1<<r)-1;if(s[1]=n.convert(this),r>1){var c=B();for(n.sqrTo(s[1],c);a<=u;)s[a]=B(),n.mulTo(c,s[a-2],s[a]),a+=2}var d,f,h=e.t-1,p=!0,g=B();for(i=z(e[h])-1;h>=0;){for(i>=l?d=e[h]>>i-l&u:(d=(e[h]&(1<<i+1)-1)<<l-i,h>0&&(d|=e[h-1]>>this.DB+i-l)),a=r;0==(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--h),p)s[d].copyTo(o),p=!1;else{for(;a>1;)n.sqrTo(o,g),n.sqrTo(g,o),a-=2;a>0?n.sqrTo(o,g):(f=o,o=g,g=f),n.mulTo(g,s[d],o)}for(;h>=0&&0==(e[h]&1<<i);)n.sqrTo(o,g),f=o,o=g,g=f,--i<0&&(i=this.DB-1,--h)}return n.revert(o)},M.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return M.ZERO;for(var r=e.clone(),n=this.clone(),i=q(1),o=q(0),s=q(0),a=q(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(M.ONE)?M.ZERO:a.compareTo(e)>=0?a.subtract(e):0>a.signum()?(a.addTo(e,a),0>a.signum()?a.add(e):a):a},M.prototype.pow=function(e){return this.exp(e,new ee)},M.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(0>t.compareTo(r)){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},M.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=en[en.length-1]){for(t=0;t<en.length;++t)if(r[0]==en[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<en.length;){for(var n=en[t],i=t+1;i<en.length&&n<ei;)n*=en[i++];for(n=r.modInt(n);t<i;)if(n%en[t++]==0)return!1}return r.millerRabin(e)},M.prototype.square=function(){var e=B();return this.squareTo(e),e},eo.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},eo.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==eb){if(eb=[],e_=0,void 0!==x&&(void 0!==x.crypto||void 0!==x.msCrypto)){var ea=x.crypto||x.msCrypto;if(ea.getRandomValues){var el=new Uint8Array(32);for(ea.getRandomValues(el),ew=0;ew<32;++ew)eb[e_++]=el[ew]}else if("Netscape"==S.appName&&S.appVersion<"5"){var eu=x.crypto.random(32);for(ew=0;ew<eu.length;++ew)eb[e_++]=255&eu.charCodeAt(ew)}}for(;e_<256;)ew=Math.floor(65536*Math.random()),eb[e_++]=ew>>>8,eb[e_++]=255&ew;e_=0,es()}function ec(){}function ed(e,t){return new M(e,t)}function ef(e,t,r){for(var n="",i=0;n.length<t;)n+=r(String.fromCharCode.apply(String,e.concat([(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function eh(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ep(e,t){this.x=t,this.q=e}function eg(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?M.ONE:n,this.zinv=null}function em(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new eg(this,null,null)}ec.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=function(){if(null==ev){for(es(),(ev=new eo).init(eb),e_=0;e_<eb.length;++e_)eb[e_]=0;e_=0}return ev.next()}()},eh.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},eh.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=ed(e,16),this.e=parseInt(t,16)}},eh.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=[],n=e.length-1;n>=0&&t>0;){var i=e.charCodeAt(n--);i<128?r[--t]=i:i>127&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var o=new ec,s=[];t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new M(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},eh.prototype.encryptOAEP=function(e,t,r){var n=function(e,t,r,n){var i=eS.crypto.MessageDigest,o=eS.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=i.getCanonicalAlgName(r),n=i.getHashLength(s),r=function(e){return eL(o.hashHex(eD(e),s))}),e.length+2*n+2>t)throw"Message too long for RSA";var a,l="";for(a=0;a<t-e.length-2*n-2;a+=1)l+="\0";var u=r("")+l+"\x01"+e,c=Array(n);(new ec).nextBytes(c);var d=ef(c,u.length,r),f=[];for(a=0;a<u.length;a+=1)f[a]=u.charCodeAt(a)^d.charCodeAt(a);var h=ef(f,c.length,r),p=[0];for(a=0;a<c.length;a+=1)p[a+1]=c[a]^h.charCodeAt(a);return new M(p.concat(f))}(e,this.n.bitLength()+7>>3,t,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},eh.prototype.type="RSA",ep.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ep.prototype.toBigInteger=function(){return this.x},ep.prototype.negate=function(){return new ep(this.q,this.x.negate().mod(this.q))},ep.prototype.add=function(e){return new ep(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ep.prototype.subtract=function(e){return new ep(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ep.prototype.multiply=function(e){return new ep(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ep.prototype.square=function(){return new ep(this.q,this.x.square().mod(this.q))},ep.prototype.divide=function(e){return new ep(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},eg.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},eg.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},eg.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(M.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(M.ZERO))},eg.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(M.ZERO)&&!this.y.toBigInteger().equals(M.ZERO)},eg.prototype.negate=function(){return new eg(this.curve,this.x,this.y.negate(),this.z)},eg.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(M.ZERO.equals(r))return M.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new M("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),a=s.multiply(r),l=i.multiply(s),u=t.square().multiply(this.z),c=u.subtract(l.shiftLeft(1)).multiply(e.z).subtract(a).multiply(r).mod(this.curve.q),d=l.multiply(n).multiply(t).subtract(o.multiply(a)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new eg(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(d),f)},eg.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new M("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);M.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),l=s.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),u=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new eg(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(l),u)},eg.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e.multiply(new M("3")),n=this.negate(),i=this,o=this.curve.q.subtract(e),s=o.multiply(new M("3")),a=new eg(this.curve,this.x,this.y),l=a.negate();for(t=r.bitLength()-2;t>0;--t){i=i.twice();var u=r.testBit(t);u!=e.testBit(t)&&(i=i.add(u?this:n))}for(t=s.bitLength()-2;t>0;--t){a=a.twice();var c=s.testBit(t);c!=o.testBit(t)&&(a=a.add(c?a:l))}return i},eg.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(o):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},em.prototype.getQ=function(){return this.q},em.prototype.getA=function(){return this.a},em.prototype.getB=function(){return this.b},em.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},em.prototype.getInfinity=function(){return this.infinity},em.prototype.fromBigInteger=function(e){return new ep(this.q,e)},em.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new eg(this,this.fromBigInteger(new M(r,16)),this.fromBigInteger(new M(n,16)))}},ep.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},eg.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=t(r,32);return e?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(n,32))),i},eg.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),i=t.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var o=new M(n),s=new M(i);return new eg(e,e.fromBigInteger(o),e.fromBigInteger(s))},eg.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),i=t.substr(2+r/2,r/2),o=new M(n,16),s=new M(i,16);return new eg(e,e.fromBigInteger(o),e.fromBigInteger(s))},eg.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),n=r.square().subtract(this.x).subtract(e.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new eg(this.curve,n,i)},eg.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(M.valueOf(2)),t=this.curve.fromBigInteger(M.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new eg(this.curve,n,i)},eg.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e.multiply(new M("3")),n=this.negate(),i=this;for(t=r.bitLength()-2;t>0;--t){i=i.twice();var o=r.testBit(t);o!=e.testBit(t)&&(i=i.add2D(o?this:n))}return i},eg.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return o.equals(s)},eg.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},eg.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(0>t.compareTo(M.ONE)||t.compareTo(e.subtract(M.ONE))>0)throw Error("x coordinate out of bounds");if(0>r.compareTo(M.ONE)||r.compareTo(e.subtract(M.ONE))>0)throw Error("y coordinate out of bounds");if(!this.isOnCurve())throw Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw Error("Point is not a scalar multiple of G.");return!0};var ey=function(){var e=RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function n(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var i=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,l,u,c=r.match(e),d=c[0],f=!1;"{"===d?l={}:"["===d?l=[]:(l=[],f=!0);for(var h=[l],p=1-f,g=c.length;p<g;++p)switch((d=c[p]).charCodeAt(0)){default:(a=h[0])[u||a.length]=+d,u=void 0;break;case 34:if(-1!==(d=d.substring(1,d.length-1)).indexOf("\\")&&(d=d.replace(t,n)),a=h[0],!u){if(!(a instanceof Array)){u=d||i;break}u=a.length}a[u]=d,u=void 0;break;case 91:a=h[0],h.unshift(a[u||a.length]=[]),u=void 0;break;case 93:case 125:h.shift();break;case 102:(a=h[0])[u||a.length]=!1,u=void 0;break;case 110:(a=h[0])[u||a.length]=null,u=void 0;break;case 116:(a=h[0])[u||a.length]=!0,u=void 0;break;case 123:a=h[0],h.unshift(a[u||a.length]={}),u=void 0}if(f){if(1!==h.length)throw Error();l=l[0]}else if(h.length)throw Error();return s&&(l=function e(t,r){var n=t[r];if(n&&"object"===(void 0===n?"undefined":w(n))){var i=null;for(var a in n)if(o.call(n,a)&&n!==t){var l=e(n,a);void 0!==l?n[a]=l:(i||(i=[]),i.push(a))}if(i)for(var u=i.length;--u>=0;)delete n[i[u]]}return s.call(t,r,n)}({"":l},"")),l}}();void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.asn1&&eS.asn1||(eS.asn1={}),eS.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new M(n,16).xor(e).add(M.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return eB(e,t)},this.newObject=function(e){var t=eS.asn1,r=t.ASN1Object,n=t.DERBoolean,i=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,l=t.DERObjectIdentifier,u=t.DEREnumerated,c=t.DERUTF8String,d=t.DERNumericString,f=t.DERPrintableString,h=t.DERTeletexString,p=t.DERIA5String,g=t.DERUTCTime,m=t.DERGeneralizedTime,y=t.DERVisibleString,v=t.DERBMPString,b=t.DERSequence,_=t.DERSet,w=t.DERTaggedObject,S=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var x=Object.keys(e);if(1!=x.length)throw Error("key of param shall be only one.");var E=x[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":"))throw Error("undefined key: "+E);if("bool"==E)return new n(e[E]);if("int"==E)return new i(e[E]);if("bitstr"==E)return new o(e[E]);if("octstr"==E)return new s(e[E]);if("null"==E)return new a(e[E]);if("oid"==E)return new l(e[E]);if("enum"==E)return new u(e[E]);if("utf8str"==E)return new c(e[E]);if("numstr"==E)return new d(e[E]);if("prnstr"==E)return new f(e[E]);if("telstr"==E)return new h(e[E]);if("ia5str"==E)return new p(e[E]);if("utctime"==E)return new g(e[E]);if("gentime"==E)return new m(e[E]);if("visstr"==E)return new y(e[E]);if("bmpstr"==E)return new v(e[E]);if("asn1"==E)return new r(e[E]);if("seq"==E){for(var k=e[E],F=[],A=0;A<k.length;A++){var I=S(k[A]);F.push(I)}return new b({array:F})}if("set"==E){for(k=e[E],F=[],A=0;A<k.length;A++)I=S(k[A]),F.push(I);return new _({array:F})}if("tag"==E){var T=e[E];if("[object Array]"===Object.prototype.toString.call(T)&&3==T.length){var R=S(T[2]);return new w({tag:T[0],explicit:T[1],obj:R})}return new w(T)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},eS.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);n+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new M(n,2).toString(10),n="")}return t},eS.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split(".");r+=t(40*parseInt(n[0])+parseInt(n[1])),n.splice(0,2);for(var i=0;i<n.length;i++)r+=function(e){var r="",n=new M(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(s=0,n=o+n;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[i]);return r},eS.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw Error("this.hV is null or undefined");if(this.hV.length%2==1)throw Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},eS.asn1.DERAbstractString=function(e){eS.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ej(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},e0(eS.asn1.DERAbstractString,eS.asn1.ASN1Object),eS.asn1.DERAbstractTime=function(e){eS.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var l=n(String(a),3);s=s+"."+(l=l.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=eT(e)},this.setByDateValue=function(e,t,r,n,i,o){var s=new Date(Date.UTC(e,t-1,r,n,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},e0(eS.asn1.DERAbstractTime,eS.asn1.ASN1Object),eS.asn1.DERAbstractStructured=function(e){eS.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=[],void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},e0(eS.asn1.DERAbstractStructured,eS.asn1.ASN1Object),eS.asn1.DERBoolean=function(e){eS.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},e0(eS.asn1.DERBoolean,eS.asn1.ASN1Object),eS.asn1.DERInteger=function(e){eS.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=eS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new M(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},e0(eS.asn1.DERInteger,eS.asn1.ASN1Object),eS.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=eS.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}eS.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;this.hTLV=null,this.isModified=!0,this.hV="0"+e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=parseInt(e.substr(r,8),2).toString(16);1==i.length&&(i="0"+i),n+=i}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},e0(eS.asn1.DERBitString,eS.asn1.ASN1Object),eS.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=eS.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}eS.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},e0(eS.asn1.DEROctetString,eS.asn1.DERAbstractString),eS.asn1.DERNull=function(){eS.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},e0(eS.asn1.DERNull,eS.asn1.ASN1Object),eS.asn1.DERObjectIdentifier=function(e){eS.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t};try{if(!e.match(/^[0-9.]+$/))return null;var r="",n=e.split("."),i=40*parseInt(n[0],10)+parseInt(n[1],10);r+=t(i),n.splice(0,2);for(var o=0;o<n.length;o++)r+=function(e){var r="",n=parseInt(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(s=0,n=o+n;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[o]);return r}catch(e){return null}}(e);if(null==t)throw Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=eS.asn1.x509.OID.name2oid(e);if(""===t)throw Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},e0(eS.asn1.DERObjectIdentifier,eS.asn1.ASN1Object),eS.asn1.DEREnumerated=function(e){eS.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=eS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new M(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},e0(eS.asn1.DEREnumerated,eS.asn1.ASN1Object),eS.asn1.DERUTF8String=function(e){eS.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},e0(eS.asn1.DERUTF8String,eS.asn1.DERAbstractString),eS.asn1.DERNumericString=function(e){eS.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},e0(eS.asn1.DERNumericString,eS.asn1.DERAbstractString),eS.asn1.DERPrintableString=function(e){eS.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},e0(eS.asn1.DERPrintableString,eS.asn1.DERAbstractString),eS.asn1.DERTeletexString=function(e){eS.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},e0(eS.asn1.DERTeletexString,eS.asn1.DERAbstractString),eS.asn1.DERIA5String=function(e){eS.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},e0(eS.asn1.DERIA5String,eS.asn1.DERAbstractString),eS.asn1.DERVisibleString=function(e){eS.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},e0(eS.asn1.DERVisibleString,eS.asn1.DERAbstractString),eS.asn1.DERBMPString=function(e){eS.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},e0(eS.asn1.DERBMPString,eS.asn1.DERAbstractString),eS.asn1.DERUTCTime=function(e){eS.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=eT(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=eT(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},e0(eS.asn1.DERUTCTime,eS.asn1.DERAbstractTime),eS.asn1.DERGeneralizedTime=function(e){eS.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=eT(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=eT(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},e0(eS.asn1.DERGeneralizedTime,eS.asn1.DERAbstractTime),eS.asn1.DERSequence=function(e){eS.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},e0(eS.asn1.DERSequence,eS.asn1.DERAbstractStructured),eS.asn1.DERSet=function(e){eS.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=[],t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},e0(eS.asn1.DERSet,eS.asn1.DERAbstractStructured),eS.asn1.DERTaggedObject=function(e){eS.asn1.DERTaggedObject.superclass.constructor.call(this);var t=eS.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==w(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},e0(eS.asn1.DERTaggedObject,eS.asn1.ASN1Object);var ev,eb,e_,ew,eS,ex,eE,ek=new function(){};function eF(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function eA(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function eI(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function eT(e){return eI(eF(e))}function eR(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function eC(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function eP(e){return e.length%2==1&&(e="0"+e),eR(L(e))}function eN(e){return D(eC(e))}function ej(e){return eW(eG(e))}function eO(e){return decodeURIComponent(eV(e))}function eL(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function eD(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function eU(e){return L(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function eM(e){return D(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function eB(e,t){return"-----BEGIN "+t+"-----\r\n"+eU(e)+"\r\n-----END "+t+"-----\r\n"}function eH(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return eM(e=void 0!==t?(e=e.replace(RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function e$(e){var t,r,n,i,o,s,a,l,u,c;if(c=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return t=parseInt(l=c[1]),2===l.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(c[2])-1,n=parseInt(c[3]),i=parseInt(c[4]),o=parseInt(c[5]),s=parseInt(c[6]),a=0,""!==(u=c[7])&&(a=parseInt((u.substr(1)+"00").substr(0,3))),Date.UTC(t,r,n,i,o,s,a);throw"unsupported zulu format: "+e}function eK(e){return~~(e$(e)/1e3)}function eW(e){return e.replace(/%/g,"")}function eV(e){return e.replace(/(..)/g,"%$1")}function eq(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),i=(e=e.replace("::",n)).split(":");if(8!=i.length)throw t;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function ez(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===n)return e.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(e=e.replace(i,"::")).slice(1,-1)}function eJ(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?ez(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function eZ(e){return e.match(/.{4}/g).map(function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var n=128|63&r;return eO((192|(7&t)<<3|(192&r)>>6).toString(16)+n.toString(16))}return n=128|(15&t)<<2|(192&r)>>6,eO((224|(240&t)>>4).toString(16)+n.toString(16)+(128|63&r).toString(16))}).join("")}function eG(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+eT(t[n]);return r}function eY(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function eX(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}ek.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},ek.getL=function(e,t){var r=ek.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},ek.getVblen=function(e,t){var r;return""==(r=ek.getL(e,t))?-1:("8"===r.substr(0,1)?new M(r.substr(2),16):new M(r,16)).intValue()},ek.getVidx=function(e,t){var r=ek.getLblen(e,t);return r<0?r:t+2*(r+1)},ek.getV=function(e,t){var r=ek.getVidx(e,t),n=ek.getVblen(e,t);return e.substr(r,2*n)},ek.getTLV=function(e,t){return e.substr(t,2)+ek.getL(e,t)+ek.getV(e,t)},ek.getTLVblen=function(e,t){return 2+2*ek.getLblen(e,t)+2*ek.getVblen(e,t)},ek.getNextSiblingIdx=function(e,t){return ek.getVidx(e,t)+2*ek.getVblen(e,t)},ek.getChildIdx=function(e,t){var r,n,i,o=[];r=ek.getVidx(e,t),n=2*ek.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,n-=2),i=0;for(var s=r;i<=n;){var a=ek.getTLVblen(e,s);if((i+=a)<=n&&o.push(s),s+=a,i>=n)break}return o},ek.getNthChildIdx=function(e,t,r){return ek.getChildIdx(e,t)[r]},ek.getIdxbyList=function(e,t,r,n){var i,o;return 0==r.length?void 0!==n&&e.substr(t,2)!==n?-1:t:(i=r.shift())>=(o=ek.getChildIdx(e,t)).length?-1:ek.getIdxbyList(e,o[i],r,n)},ek.getIdxbyListEx=function(e,t,r,n){var i,o;if(0==r.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;i=r.shift(),o=ek.getChildIdx(e,t);for(var s=0,a=0;a<o.length;a++){var l=e.substr(o[a],2);if("number"==typeof i&&!ek.isContextTag(l)&&s==i||"string"==typeof i&&ek.isContextTag(l,i))return ek.getIdxbyListEx(e,o[a],r,n);ek.isContextTag(l)||s++}return -1},ek.getTLVbyList=function(e,t,r,n){var i=ek.getIdxbyList(e,t,r,n);return -1==i||i>=e.length?null:ek.getTLV(e,i)},ek.getTLVbyListEx=function(e,t,r,n){var i=ek.getIdxbyListEx(e,t,r,n);return -1==i?null:ek.getTLV(e,i)},ek.getVbyList=function(e,t,r,n,i){var o,s;return -1==(o=ek.getIdxbyList(e,t,r,n))||o>=e.length?null:(s=ek.getV(e,o),!0===i&&(s=s.substr(2)),s)},ek.getVbyListEx=function(e,t,r,n,i){var o,s;return -1==(o=ek.getIdxbyListEx(e,t,r,n))?null:(s=ek.getV(e,o),"03"==e.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},ek.getInt=function(e,t,r){null==r&&(r=-1);try{var n=e.substr(t,2);if("02"!=n&&"03"!=n)return r;var i=ek.getV(e,t);return"02"==n?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16),n=e.substr(2),i=parseInt(n,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-r),parseInt(i,2)}catch(e){return -1}}(i)}catch(e){return r}},ek.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:function(e){if(!eY(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var i=e.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=eQ((127&o[s]).toString(2),7):(l+=eQ((127&o[s]).toString(2),7),a.push(new String(parseInt(l,2))),l="");var u=t.join(".");return a.length>0&&(u=u+"."+a.join(".")),u}catch(e){return null}}(ek.getV(e,t))}catch(e){return r}},ek.getOIDName=function(e,t,r){null==r&&(r=null);try{var n=ek.getOID(e,t,r);if(n==r)return r;var i=eS.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(e){return r}},ek.getString=function(e,t,r){null==r&&(r=null);try{return eL(ek.getV(e,t))}catch(e){return r}},ek.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:Array(t-e.length+1).join("0")+e},r=[],n=parseInt(e.substr(0,2),16);r[0]=new String(Math.floor(n/40)),r[1]=new String(n%40);for(var i=e.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=t((127&o[s]).toString(2),7):(a.push(new String(parseInt(l+=t((127&o[s]).toString(2),7),2))),l="");var u=r.join(".");return a.length>0&&(u=u+"."+a.join(".")),u},ek.dump=function(e,t,r,n){var i=ek.getV,o=ek.dump,s=ek.getChildIdx,a=e;e instanceof eS.asn1.ASN1Object&&(a=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var u,c=t.ommit_long_octet;if("01"==(u=a.substr(r,2)))return"00"==(d=i(a,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==u)return n+"INTEGER "+l(d=i(a,r),c)+"\n";if("03"==u){var d=i(a,r);if(ek.isASN1HEX(d.substr(2))){var f=n+"BITSTRING, encapsulates\n";return f+o(d.substr(2),t,0,n+"  ")}return n+"BITSTRING "+l(d,c)+"\n"}if("04"==u)return(d=i(a,r),ek.isASN1HEX(d))?(f=n+"OCTETSTRING, encapsulates\n")+o(d,t,0,n+"  "):n+"OCTETSTRING "+l(d,c)+"\n";if("05"==u)return n+"NULL\n";if("06"==u){var h=i(a,r),p=eS.asn1.ASN1Util.oidHexToInt(h),g=eS.asn1.x509.OID.oid2name(p),m=p.replace(/\./g," ");return""!=g?n+"ObjectIdentifier "+g+" ("+m+")\n":n+"ObjectIdentifier ("+m+")\n"}if("0a"==u)return n+"ENUMERATED "+parseInt(i(a,r))+"\n";if("0c"==u)return n+"UTF8String '"+eO(i(a,r))+"'\n";if("13"==u)return n+"PrintableString '"+eO(i(a,r))+"'\n";if("14"==u)return n+"TeletexString '"+eO(i(a,r))+"'\n";if("16"==u)return n+"IA5String '"+eO(i(a,r))+"'\n";if("17"==u)return n+"UTCTime "+eO(i(a,r))+"\n";if("18"==u)return n+"GeneralizedTime "+eO(i(a,r))+"\n";if("1a"==u)return n+"VisualString '"+eO(i(a,r))+"'\n";if("1e"==u)return n+"BMPString '"+eZ(i(a,r))+"'\n";if("30"==u){if("3000"==a.substr(r,4))return n+"SEQUENCE {}\n";f=n+"SEQUENCE\n";var y=t;if((2==(_=s(a,r)).length||3==_.length)&&"06"==a.substr(_[0],2)&&"04"==a.substr(_[_.length-1],2)){g=ek.oidname(i(a,_[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=g,y=v}for(var b=0;b<_.length;b++)f+=o(a,y,_[b],n+"  ");return f}if("31"==u){f=n+"SET\n";var _=s(a,r);for(b=0;b<_.length;b++)f+=o(a,t,_[b],n+"  ");return f}if(0!=(128&(u=parseInt(u,16)))){var w=31&u;if(0!=(32&u)){for(f=n+"["+w+"]\n",_=s(a,r),b=0;b<_.length;b++)f+=o(a,t,_[b],n+"  ");return f}if(d=i(a,r),ek.isASN1HEX(d)){var f=n+"["+w+"]\n";return f+o(d,t,0,n+"  ")}return("68747470"==d.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==w)&&(d=eO(d)),f=n+"["+w+"] "+d+"\n"}return n+"UNKNOWN("+u+") "+i(a,r)+"\n"},ek.isContextTag=function(e,t){var r,n;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return -1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((n=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==n}catch(e){return!1}},ek.isASN1HEX=function(e){if(e.length%2==1)return!1;var t=ek.getVblen(e,0),r=e.substr(0,2),n=ek.getL(e,0);return e.length-r.length-n.length==2*t},ek.checkStrictDER=function(e,t,r,n,i){if(void 0===r){if("string"!=typeof e||(e=e.toLowerCase(),!eS.lang.String.isHex(e)))throw Error("not hex string");r=e.length,i=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(ek.getL(e,t).length>2*i)throw Error("L of TLV too long: idx="+t);var o=ek.getVblen(e,t);if(o>n)throw Error("value of L too long than hex: idx="+t);var s=ek.getTLV(e,t),a=s.length-2-ek.getL(e,t).length;if(a!==2*o)throw Error("V string length and L's value not the same:"+a+"/"+2*o);if(0===t&&e.length!=s.length)throw Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var l=e.substr(t,2);if("02"===l){var u=ek.getVidx(e,t);if("00"==e.substr(u,2)&&56>e.charCodeAt(u+2))throw Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var c=ek.getVblen(e,t),d=0,f=ek.getChildIdx(e,t),h=0;h<f.length;h++)d+=ek.getTLV(e,f[h]).length,ek.checkStrictDER(e,f[h],r,n,i);if(2*c!=d)throw Error("sum of children's TLV length and L unmatch: "+2*c+"!="+d)}},ek.oidname=function(e){var t=eS.asn1;eS.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.lang&&eS.lang||(eS.lang={}),eS.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=ex=function(t){return eR(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=eE=function(t){return e.from(eC(t),"base64").toString("utf8")}):(t.utf8tob64u=ex=function(e){return eP(eW(eG(e)))},t.b64utoutf8=eE=function(e){return decodeURIComponent(eV(eN(e)))}),eS.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},eS.lang.String.isHex=function(e){return eY(e)},eS.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},eS.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=eC(e),eS.lang.String.isBase64(e))},eS.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},eS.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},eS.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},eS.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var eQ=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:Array(t-e.length+1).join(r)+e};function e0(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:E.algo.MD5,sha1:E.algo.SHA1,sha224:E.algo.SHA224,sha256:E.algo.SHA256,sha384:E.algo.SHA384,sha512:E.algo.SHA512,ripemd160:E.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",s="00"+n,a="",l=i-o.length-s.length,u=0;u<l;u+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new eS.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new eS.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof eh||e instanceof eS.crypto.DSA||e instanceof eS.crypto.ECDSA}},eS.crypto.Util.md5=function(e){return new eS.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},eS.crypto.Util.ripemd160=function(e){return new eS.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},eS.crypto.Util.SECURERANDOMGEN=new ec,eS.crypto.Util.getRandomHexOfNbytes=function(e){var t=Array(e);return eS.crypto.Util.SECURERANDOMGEN.nextBytes(t),eI(t)},eS.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new M(eS.crypto.Util.getRandomHexOfNbytes(e),16)},eS.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=Array((e-t)/8+1);return eS.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],eI(r)},eS.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new M(eS.crypto.Util.getRandomHexOfNbits(e),16)},eS.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=eS.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},eS.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return eS.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},eS.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=eS.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=eS.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=eS.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=E.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(E.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},eS.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},eS.crypto.MessageDigest.getHashLength=function(e){var t=eS.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},eS.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},eS.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=eS.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=eS.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=E.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=E.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(E.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=eD(e)),void(this.pass=E.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":w(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=ej(e.utf8)),void 0!==e.rstr&&(t=eD(e.rstr)),void 0!==e.b64&&(t=D(e.b64)),void 0!==e.b64u&&(t=eN(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=E.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},eS.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new eS.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?e1.getKey(e):e1.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==eS.crypto.ECDSA&&(this.prvKey=new eS.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof eh&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof eh&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof eS.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof eS.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==eS.crypto.ECDSA&&(this.pubKey=new eS.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof eh&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof eh&&"rsa"===this.pubkeyAlgName||void 0!==eS.crypto.ECDSA&&this.pubKey instanceof eS.crypto.ECDSA||void 0!==eS.crypto.DSA&&this.pubKey instanceof eS.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=e1.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},eS.crypto.Cipher=function(e){},eS.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof eh&&t.isPublic){var n=eS.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},eS.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof eh&&t.isPrivate){var n=eS.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},eS.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof eh){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},eS.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.ECDSA=function(e){var t=Error,r=eS.crypto.ECDSA,n=eS.crypto.ECParameterDB,i=r.getName,o=ek.getVbyListEx,s=ek.isASN1HEX,a=new ec;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new M(e.bitLength(),a).mod(e.subtract(M.ONE)).add(M.ONE)},this.setNamedCurve=function(e){this.ecparams=n.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.G.multiply(t),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+n.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new M(t,16),i=this.ecparams.n,o=new M(e.substring(0,this.ecparams.keylen/4),16);do var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i);while(0>=a.compareTo(M.ZERO));var l=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return r.biRSSigToASN1Sig(a,l)},this.sign=function(e,t){var r=this.ecparams.n,n=M.fromByteArrayUnsigned(e);do var i=this.getBigRandom(r),o=this.ecparams.G.multiply(i).getX().toBigInteger().mod(r);while(0>=o.compareTo(M.ZERO));var s=i.modInverse(r).multiply(n.add(t.multiply(o))).mod(r);return this.serializeSig(o,s)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){try{var i,o,s=r.parseSigHex(t);i=s.r,o=s.s;var a=eg.decodeFromHex(this.ecparams.curve,n),l=new M(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,i,o,a)}catch(e){return!1}},this.verify=function(e,t,r){if(Bitcoin.Util.isArray(t)){var n,i,o,s=this.parseSig(t);n=s.r,i=s.s}else{if("object"!==(void 0===t?"undefined":w(t))||!t.r||!t.s)throw"Invalid value for signature";n=t.r,i=t.s}if(r instanceof eg)o=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";o=eg.decodeFrom(this.ecparams.curve,r)}var a=M.fromByteArrayUnsigned(e);return this.verifyRaw(a,n,i,o)},this.verifyRaw=function(e,t,r,n){var i=this.ecparams.n,o=this.ecparams.G;if(0>t.compareTo(M.ONE)||t.compareTo(i)>=0||0>r.compareTo(M.ONE)||r.compareTo(i)>=0)return!1;var s=r.modInverse(i),a=e.multiply(s).mod(i),l=t.multiply(s).mod(i);return o.multiply(a).add(n.multiply(l)).getX().toBigInteger().mod(i).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){if(48!=e[0])throw Error("Signature not a valid DERSequence");if(2!=e[t=2])throw Error("First element in signature must be a DERInteger");var t,r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw Error("Second element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:M.fromByteArrayUnsigned(r),s:M.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:M.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:M.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,r,n;if(!1===s(e))throw Error("not ASN.1 hex string");try{t=o(e,0,["[0]",0],"06"),r=o(e,0,[1],"04");try{n=o(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var r,n,a;if(!1===s(e))throw new t("not ASN.1 hex string");try{o(e,0,[1,0],"06"),r=o(e,0,[1,1],"06"),n=o(e,0,[2,0,1],"04");try{a=o(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=i(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(a),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var r,n;if(!1===s(e))throw new t("not ASN.1 hex string");try{o(e,0,[0,0],"06"),r=o(e,0,[0,1],"06"),n=o(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=i(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,r){var n,a;if(!1===s(e))throw new t("not ASN.1 hex string");try{n=o(e,0,[0,5,0,1],"06"),a=o(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=i(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(a)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},eS.crypto.ECDSA.parseSigHex=function(e){var t=eS.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new M(t.r,16),s:new M(t.s,16)}},eS.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ek.getChildIdx,r=ek.getV;if(ek.checkStrictDER(e,0),"30"!=e.substr(0,2))throw Error("signature is not a ASN.1 sequence");var n=t(e,0);if(2!=n.length)throw Error("signature shall have two elements");var i=n[0],o=n[1];if("02"!=e.substr(i,2))throw Error("1st item not ASN.1 integer");if("02"!=e.substr(o,2))throw Error("2nd item not ASN.1 integer");return{r:r(e,i),s:r(e,o)}},eS.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=eS.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},eS.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return eS.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},eS.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new M(e,16),n=new M(t,16);return eS.crypto.ECDSA.biRSSigToASN1Sig(r,n)},eS.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=eS.asn1,n=new r.DERInteger({bigint:e}),i=new r.DERInteger({bigint:t});return new r.DERSequence({array:[n,i]}).getEncodedHex()},eS.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new M(e,16)}this.getByName=function(r){var n=r;if(void 0!==t[n]&&(n=t[r]),void 0!==e[n])return e[n];throw"unregistered EC curve name: "+n},this.regist=function(n,i,o,s,a,l,u,c,d,f,h,p){e[n]={};var g=r(o),m=r(s),y=r(a),v=r(l),b=r(u),_=new em(g,m,y),w=_.decodePointHex("04"+c+d);e[n].name=n,e[n].keylen=i,e[n].curve=_,e[n].G=w,e[n].n=v,e[n].h=b,e[n].oid=h,e[n].info=p;for(var S=0;S<f.length;S++)t[f[S]]=n}},eS.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),eS.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),eS.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),eS.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),eS.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),eS.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),eS.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),eS.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),eS.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),eS.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var e1=(r=function(e,t,r){return n(E.AES,e,t,r)},n=function(e,t,r,n){var i=E.enc.Hex.parse(t),o=E.enc.Hex.parse(r),s=E.enc.Hex.parse(n),a={};a.key=o,a.iv=s,a.ciphertext=i;var l=e.decrypt(a,o,{iv:s});return E.enc.Hex.stringify(l)},i=function(e,t,r){return o(E.AES,e,t,r)},o=function(e,t,r,n){var i=E.enc.Hex.parse(t),o=E.enc.Hex.parse(r),s=E.enc.Hex.parse(n),a=e.encrypt(i,o,{iv:s}),l=E.enc.Hex.parse(a.toString());return E.enc.Base64.stringify(l)},s={"AES-256-CBC":{proc:r,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:r,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:r,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,t,r){return n(E.TripleDES,e,t,r)},eproc:function(e,t,r){return o(E.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,t,r){return n(E.DES,e,t,r)},eproc:function(e,t,r){return o(E.DES,e,t,r)},keylen:8,ivlen:8}},a=function(e){var t={},r=e.match(RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var i=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=i&&-1!=s){var a=e.substring(i+2*o,s-o);t.data=a=a.replace(/\s+/g,"")}return t},l=function(e,t,r){for(var n=r.substring(0,16),i=E.enc.Hex.parse(n),o=E.enc.Utf8.parse(t),a=s[e].keylen+s[e].ivlen,l="",u=null;;){var c=E.algo.MD5.create();if(null!=u&&c.update(u),c.update(o),c.update(i),u=c.finalize(),(l+=E.enc.Hex.stringify(u)).length>=2*a)break}var d={};return d.keyhex=l.substr(0,2*s[e].keylen),d.ivhex=l.substr(2*s[e].keylen,2*s[e].ivlen),d},u=function(e,t,r,n){var i=E.enc.Base64.parse(e),o=E.enc.Hex.stringify(i);return(0,s[t].proc)(o,r,n)},{version:"1.0.0",parsePKCS5PEM:function(e){return a(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return l(e,t,r)},decryptKeyB64:function(e,t,r,n){return u(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=a(e),n=(r.type,r.cipher),i=r.ivsalt,o=r.data,s=l(n,t,i).keyhex;return u(o,n,s,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,i){var o,a,u,c,d,f="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===s[n])throw Error("KEYUTIL unsupported algorithm: "+n);void 0!==i&&null!=i||(i=(o=s[n].ivlen,a=E.lib.WordArray.random(o),E.enc.Hex.stringify(a)).toUpperCase());var h=(u=n,c=l(n,r,i).keyhex,d=i,(0,s[u].eproc)(t,c,d));return"-----BEGIN "+e+" PRIVATE KEY-----\r\nProc-Type: 4,ENCRYPTED\r\n"+("DEK-Info: "+n+","+i+"\r\n")+"\r\n"+h.replace(/(.{64})/g,"$1\r\n")+("\r\n-----END "+e+" PRIVATE KEY-----\r\n")},parseHexOfEncryptedPKCS8:function(e){var t=ek.getChildIdx,r=ek.getV,n={},i=t(e,0);if(2!=i.length)throw Error("malformed format: SEQUENCE(0).items != 2: "+i.length);n.ciphertext=r(e,i[1]);var o=t(e,i[0]);if(2!=o.length)throw Error("malformed format: SEQUENCE(0.0).items != 2: "+o.length);if("2a864886f70d01050d"!=r(e,o[0]))throw Error("this only supports pkcs5PBES2");var s=t(e,o[1]);if(2!=o.length)throw Error("malformed format: SEQUENCE(0.0.1).items != 2: "+s.length);var a=t(e,s[1]);if(2!=a.length)throw Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length);if("2a864886f70d0307"!=r(e,a[0]))throw"this only supports TripleDES";n.encryptionSchemeAlg="TripleDES",n.encryptionSchemeIV=r(e,a[1]);var l=t(e,s[0]);if(2!=l.length)throw Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length);if("2a864886f70d01050c"!=r(e,l[0]))throw Error("this only supports pkcs5PBKDF2");var u=t(e,l[1]);if(u.length<2)throw Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length);n.pbkdf2Salt=r(e,u[0]);var c=r(e,u[1]);try{n.pbkdf2Iter=parseInt(c,16)}catch(e){throw Error("malformed format pbkdf2Iter: "+c)}return n},getPBKDF2KeyHexFromParam:function(e,t){var r=E.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,i=E.PBKDF2(t,r,{keySize:6,iterations:n});return E.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=eH(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=e1.getPBKDF2KeyHexFromParam(n,t),o={};o.ciphertext=E.enc.Hex.parse(n.ciphertext);var s=E.enc.Hex.parse(i),a=E.enc.Hex.parse(n.encryptionSchemeIV),l=E.TripleDES.decrypt(o,s,{iv:a});return E.enc.Hex.stringify(l)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=ek.getChildIdx,r=ek.getV,n={algparam:null};if("30"!=e.substr(0,2))throw Error("malformed plain PKCS8 private key(code:001)");var i=t(e,0);if(i.length<3)throw Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(i[1],2))throw Error("malformed PKCS8 private key(code:003)");var o=t(e,i[1]);if(2!=o.length)throw Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(o[0],2))throw Error("malformed PKCS8 private key(code:005)");if(n.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(n.algparam=r(e,o[1])),"04"!=e.substr(i[2],2))throw Error("malformed PKCS8 private key(code:006)");return n.keyidx=ek.getVidx(e,i[2]),n},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=eH(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new eh;else if("2a8648ce380401"==r.algoid)t=new eS.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw Error("unsupported private key algorithm");t=new eS.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=ek.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new eh;else if("2a8648ce380401"===r)t=new eS.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw Error("unsupported PKCS#8 public key hex");t=new eS.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ek.getChildIdx,r=ek.getV,n={};if("30"!=e.substr(0,2))throw Error("malformed RSA key(code:001)");var i=t(e,0);if(2!=i.length)throw Error("malformed RSA key(code:002)");if("02"!=e.substr(i[0],2))throw Error("malformed RSA key(code:003)");if(n.n=r(e,i[0]),"02"!=e.substr(i[1],2))throw Error("malformed RSA key(code:004)");return n.e=r(e,i[1]),n},parsePublicPKCS8Hex:function(e){var t=ek.getChildIdx,r=ek.getV,n={algparam:null},i=t(e,0);if(2!=i.length)throw Error("outer DERSequence shall have 2 elements: "+i.length);var o=i[0];if("30"!=e.substr(o,2))throw Error("malformed PKCS8 public key(code:001)");var s=t(e,o);if(2!=s.length)throw Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(s[0],2))throw Error("malformed PKCS8 public key(code:003)");if(n.algoid=r(e,s[0]),"06"==e.substr(s[1],2)?n.algparam=r(e,s[1]):"30"==e.substr(s[1],2)&&(n.algparam={},n.algparam.p=ek.getVbyList(e,s[1],[0],"02"),n.algparam.q=ek.getVbyList(e,s[1],[1],"02"),n.algparam.g=ek.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(i[1],2))throw Error("malformed PKCS8 public key(code:004)");return n.key=r(e,i[1]).substr(2),n}});function e2(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e}function e6(e,t,r){for(var n="",i=0;n.length<t;)n+=eL(r(eD(e+String.fromCharCode.apply(String,[(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function e3(e){for(var t in eS.crypto.Util.DIGESTINFOHEAD){var r=eS.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function e5(e){var t,r=ek.getChildIdx,n=ek.getV,i=ek.getTLV,o=ek.getVbyList,s=ek.getVbyListEx,a=ek.getTLVbyList,l=ek.getTLVbyListEx,u=ek.getIdxbyList,c=ek.getIdxbyListEx,d=ek.getVidx,f=ek.getInt,h=ek.oidname,p=ek.hextooidstr;try{t=eS.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=a(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=f(a(e,0,[0]),0);if(t<0||2<t)throw Error("malformed version field");return this.version=t+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return s(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return h(s(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return a(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return a(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=o(this.hex,0,[0,4+this.foffset,0]);return decodeURIComponent(e=e.replace(/(..)/g,"%$1"))},this.getNotAfter=function(){var e=o(this.hex,0,[0,4+this.foffset,1]);return decodeURIComponent(e=e.replace(/(..)/g,"%$1"))},this.getPublicKeyHex=function(){return ek.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return u(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return e1.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=a(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=a(this.hex,0,[0],"30"),i=new eS.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.parseExt=function(e){var t,i,s;if(void 0===e){if(s=this.hex,3!==this.version)return -1;t=u(s,0,[0,7,0],"30"),i=r(s,t)}else{var a=u(s=eH(e),0,[0,3,0,0],"06");if("2a864886f70d01090e"!=n(s,a))return void(this.aExtInfo=[]);t=u(s,0,[0,3,0,1,0],"30"),i=r(s,t),this.hex=s}this.aExtInfo=[];for(var l=0;l<i.length;l++){var c={critical:!1},f=0;3===r(s,i[l]).length&&(c.critical=!0,f=1),c.oid=ek.hextooidstr(o(s,i[l],[0],"06"));var h=u(s,i[l],[1+f]);c.vidx=d(s,h),this.aExtInfo.push(c)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=eS.asn1.x509.OID.name2oid(e)),""!==r){for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]}},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"basicConstraints"};if(t&&(o.critical=!0),"3000"===e)return o;if("30030101ff"===e)return o.cA=!0,o;if("30060101ff02"===e.substr(0,12)){var s=parseInt(n(e,10),16);return o.cA=!0,o.pathLen=s,o}throw Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"keyUsage"};return t&&(n.critical=!0),n.names=this.getExtKeyUsageString(e).split(","),n},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=i(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=[],n=0;n<t.length;n++)"1"==t.substr(n,1)&&r.push(e5.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"subjectKeyIdentifier"};return t&&(o.critical=!0),o.kid={hex:n(e,0)},o},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var o=this.getExtInfo("authorityKeyIdentifier");if(void 0===o)return;e=i(this.hex,o.vidx),t=o.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=r(e,0),l=0;l<a.length;l++){var u=e.substr(a[l],2);if("80"===u&&(s.kid={hex:n(e,a[l])}),"a1"===u){var c=i(e,a[l]);s.issuer=this.getGeneralNames(c)[0].dn}"82"===u&&(s.sn={hex:n(e,a[l])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var o=this.getExtInfo("extKeyUsage");if(void 0===o)return;e=i(this.hex,o.vidx),t=o.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=r(e,0),l=0;l<a.length;l++)s.array.push(h(n(e,a[l])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=[],o=i(this.hex,e.vidx);if(""===o)return t;for(var s=r(o,0),a=0;a<s.length;a++)t.push(h(n(o,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"subjectAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"issuerAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getGeneralNames=function(e){for(var t=r(e,0),n=[],o=0;o<t.length;o++){var s=this.getGeneralName(i(e,t[o]));void 0!==s&&n.push(s)}return n},this.getGeneralName=function(e){var t=e.substr(0,2),r=n(e,0),i=eL(r);return"81"==t?{rfc822:i}:"82"==t?{dns:i}:"86"==t?{uri:i}:"87"==t?{ip:eJ(r)}:"a4"==t?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var e,t,o,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=[],l=i(this.hex,s.vidx),u=r(l,0),c=0;c<u.length;c++)o=l.substr(u[c],2),e=n(l,u[c]),"81"===o&&a.push(["MAIL",t=eO(e)]),"82"===o&&a.push(["DNS",t=eO(e)]),"84"===o&&a.push(["DN",t=e5.hex2dn(e,0)]),"86"===o&&a.push(["URI",t=eO(e)]),"87"===o&&a.push(["IP",t=eJ(e)]);return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;e=i(this.hex,n.vidx),t=n.critical}var o={extname:"cRLDistributionPoints",array:[]};t&&(o.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var l=i(e,s[a]);o.array.push(this.getDistributionPoint(l))}return o},this.getDistributionPoint=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var s=e.substr(n[o],2),a=i(e,n[o]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var s=e.substr(n[o],2),a=i(e,n[o]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=[],n=r(this.hex,e.vidx),i=0;i<n.length;i++)try{var s=eO(o(this.hex,n[i],[0,0,0],"86"));t.push(s)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},n=r(this.hex,e.vidx),i=0;i<n.length;i++){var s=o(this.hex,n[i],[0],"06"),a=o(this.hex,n[i],[1],"86");"2b06010505073001"===s&&t.ocsp.push(eO(a)),"2b06010505073002"===s&&t.caissuer.push(eO(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;e=i(this.hex,n.vidx),t=n.critical}var a={extname:"authorityInfoAccess",array:[]};t&&(a.critical=!0);for(var l=r(e,0),u=0;u<l.length;u++){var c=s(e,l[u],[0],"06"),d=eO(o(e,l[u],[1],"86"));if("2b06010505073001"==c)a.array.push({ocsp:d});else{if("2b06010505073002"!=c)throw Error("unknown method: "+c);a.array.push({caissuer:d})}}return a},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;e=i(this.hex,n.vidx),t=n.critical}var o={extname:"certificatePolicies",array:[]};t&&(o.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var l=i(e,s[a]),u=this.getPolicyInformation(l);o.array.push(u)}return o},this.getPolicyInformation=function(e){var t={};t.policyoid=h(o(e,0,[0],"06"));var n=c(e,0,[1],"30");if(-1!=n){t.array=[];for(var s=r(e,n),a=0;a<s.length;a++){var l=i(e,s[a]),u=this.getPolicyQualifierInfo(l);t.array.push(u)}}return t},this.getPolicyQualifierInfo=function(e){var t={},r=o(e,0,[0],"06");if("2b06010505070201"===r)t.cps=eL(s(e,0,[1],"16"));else if("2b06010505070202"===r){var n=a(e,0,[1],"30");t.unotice=this.getUserNotice(n)}return t},this.getUserNotice=function(e){for(var t={},n=r(e,0),o=0;o<n.length;o++){var s=i(e,n[o]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type=({"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"})[e.substr(0,2)],t.str=eL(n(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:n(e,0)},r;throw Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(n(e,0),16),r;throw Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};return t&&(r.critical=!0),r.hex=n(e,0),r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;e=i(this.hex,n.vidx),t=n.critical}var o={extname:"adobeTimeStamp"};t&&(o.critical=!0);var s=r(e,0);if(s.length>1){var a=i(e,s[1]),l=this.getGeneralName(a);null!=l.uri&&(o.uri=l.uri)}if(s.length>2){var u=i(e,s[2]);"0101ff"==u&&(o.reqauth=!0),"010100"==u&&(o.reqauth=!1)}return o},this.getX500NameRule=function(e){for(var t=null,r=[],n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)r.push(i[o]);for(n=0;n<r.length;n++){var s=r[n],a=s.ds,l=s.value,u=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=u)return"mixed";if(eS.lang.String.isMail(l))continue;return"mixed"}if("C"==u){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],n=r(e,0),o=0;o<n.length;o++)t.push(this.getRDN(i(e,n[o])));return t},this.getRDN=function(e){for(var t=[],n=r(e,0),o=0;o<n.length;o++)t.push(this.getAttrTypeAndValue(i(e,n[o])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},n=r(e,0),i=o(e,n[0],[],"06"),s=o(e,n[1],[]),a=eS.asn1.ASN1Util.oidHexToInt(i);return t.type=eS.asn1.x509.OID.oid2atype(a),t.ds=this.HEX2STAG[e.substr(n[1],2)],"bmp"!=t.ds?t.value=eO(s):t.value=eZ(s),t},this.readCertPEM=function(e){this.readCertHex(eH(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{u(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=eB(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=c(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30"));for(var t=[],n=r(e,0),o=0;o<n.length;o++){var s=i(e,n[o]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw Error("wrong number elements in Extension: "+t+" "+e);var n=p(o(e,0,[0],"06")),i=!1;3==t&&"0101ff"==a(e,0,[1])&&(i=!0);var s=a(e,0,[t-1,0]),l=void 0;if("2.5.29.14"==n?l=this.getExtSubjectKeyIdentifier(s,i):"2.5.29.15"==n?l=this.getExtKeyUsage(s,i):"2.5.29.17"==n?l=this.getExtSubjectAltName(s,i):"2.5.29.18"==n?l=this.getExtIssuerAltName(s,i):"2.5.29.19"==n?l=this.getExtBasicConstraints(s,i):"2.5.29.31"==n?l=this.getExtCRLDistributionPoints(s,i):"2.5.29.32"==n?l=this.getExtCertificatePolicies(s,i):"2.5.29.35"==n?l=this.getExtAuthorityKeyIdentifier(s,i):"2.5.29.37"==n?l=this.getExtExtKeyUsage(s,i):"1.3.6.1.5.5.7.1.1"==n?l=this.getExtAuthorityInfoAccess(s,i):"2.5.29.20"==n?l=this.getExtCRLNumber(s,i):"2.5.29.21"==n?l=this.getExtCRLReason(s,i):"1.3.6.1.5.5.7.48.1.2"==n?l=this.getExtOcspNonce(s,i):"1.3.6.1.5.5.7.48.1.5"==n?l=this.getExtOcspNoCheck(s,i):"1.2.840.113583.1.1.9.1"==n&&(l=this.getExtAdobeTimeStamp(s,i)),null!=l)return l;var u={extname:n,extn:s};return i&&(u.critical=!0),u},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array){for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var o=n[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=t)}}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map(function(e){return e.map(function(e){return(e.type+"="+e.value).replace(/\+/,"\\+")}).join("+").replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var e,t,r;if(e="Basic Fields\n  serial number: "+this.getSerialNumberHex()+"\n"+("  signature algorithm: "+this.getSignatureAlgorithmField())+"\n"+("  issuer: "+this.getIssuerString())+"\n"+("  notBefore: "+this.getNotBefore())+"\n"+("  notAfter: "+this.getNotAfter())+"\n"+("  subject: "+this.getSubjectString())+"\n  subject public key info: \n"+("    key algorithm: "+(t=this.getPublicKey()).type)+"\n","RSA"===t.type&&(e+="    n="+eX(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+eX(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var n=0;n<r.length;n++){var i=r[n],o=eS.asn1.x509.OID.oid2name(i.oid);""===o&&(o=i.oid);var s="";if(!0===i.critical&&(s="CRITICAL"),e+="  "+o+" "+s+":\n","basicConstraints"===o){var a=this.getExtBasicConstraints();void 0===a.cA?e+="    {}\n":(e+="    cA=true",void 0!==a.pathLen&&(e+=", pathLen="+a.pathLen),e+="\n")}else if("keyUsage"===o)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===o)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===o){var l=this.getExtAuthorityKeyIdentifier();void 0!==l.kid&&(e+="    kid="+l.kid.hex+"\n")}else"extKeyUsage"===o?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===o?e+="    "+JSON.stringify(this.getExtSubjectAltName().array).replace(/[\[\]\{\}\"]/g,"")+"\n":"cRLDistributionPoints"===o?e+=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];try{void 0!==i.dpname.full[0].uri&&(t+="    "+i.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==i.dname.full[0].dn.hex&&(t+="    "+e5.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t}(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===o?e+=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t}(this.getExtAuthorityInfoAccess()):"certificatePolicies"===o&&(e+=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var o=0;o<i.array.length;o++){var s=i.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t}(this.getExtCertificatePolicies()))}}return e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",e+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):eS.lang.String.isHex(e)&&this.readCertHex(e))}e1.getKey=function(e,t,r){var n,i=(h=ek).getChildIdx,o=(h.getV,h.getVbyList),s=eS.crypto,a=s.ECDSA,l=s.DSA;if(void 0!==eh&&e instanceof eh||void 0!==a&&e instanceof a||void 0!==l&&e instanceof l)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new eh).setPublic(e.n,e.e),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(E=new eh).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(E=new eh).setPrivate(e.n,e.e,e.d),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(E=new l).setPublic(e.p,e.q,e.g,e.y),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(E=new l).setPrivate(e.p,e.q,e.g,e.y,e.x),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new eh).setPublic(eN(e.n),eN(e.e)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(E=new eh).setPrivateEx(eN(e.n),eN(e.e),eN(e.d),eN(e.p),eN(e.q),eN(e.dp),eN(e.dq),eN(e.qi)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(E=new eh).setPrivate(eN(e.n),eN(e.e),eN(e.d)),E;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var u=(x=new a({curve:e.crv})).ecparams.keylen/4,c="04"+("0000000000"+eN(e.x)).slice(-u)+("0000000000"+eN(e.y)).slice(-u);return x.setPublicKeyHex(c),x}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){u=(x=new a({curve:e.crv})).ecparams.keylen/4,c="04"+("0000000000"+eN(e.x)).slice(-u)+("0000000000"+eN(e.y)).slice(-u);var d=("0000000000"+eN(e.d)).slice(-u);return x.setPublicKeyHex(c),x.setPrivateKeyHex(d),x}if("pkcs5prv"===r){var f,h=ek;if(9===(f=i(e,0)).length)(E=new eh).readPKCS5PrvKeyHex(e);else if(6===f.length)(E=new l).readPKCS5PrvKeyHex(e);else{if(!(f.length>2&&"04"===e.substr(f[1],2)))throw Error("unsupported PKCS#1/5 hexadecimal key");(E=new a).readPKCS5PrvKeyHex(e)}return E}if("pkcs8prv"===r)return e1.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return e1._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return e5.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return e5.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var p=eH(e,"PUBLIC KEY");return e1._getKeyFromPublicPKCS8Hex(p)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var g=eH(e,"RSA PRIVATE KEY");return e1.getKey(g,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var m=o(n=eH(e,"DSA PRIVATE KEY"),0,[1],"02"),y=o(n,0,[2],"02"),v=o(n,0,[3],"02"),b=o(n,0,[4],"02"),_=o(n,0,[5],"02");return(E=new l).setPrivate(new M(m,16),new M(y,16),new M(v,16),new M(b,16),new M(_,16)),E}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return g=eH(e,"EC PRIVATE KEY"),e1.getKey(g,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return e1.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var w=e1.getDecryptedKeyHex(e,t),S=new eh;return S.readPKCS5PrvKeyHex(w),S}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var x,E=o(n=e1.getDecryptedKeyHex(e,t),0,[1],"04"),k=o(n,0,[2,0],"06"),F=o(n,0,[3,0],"03").substr(2);if(void 0===eS.crypto.OID.oidhex2name[k])throw Error("undefined OID(hex) in KJUR.crypto.OID: "+k);return(x=new a({curve:eS.crypto.OID.oidhex2name[k]})).setPublicKeyHex(F),x.setPrivateKeyHex(E),x.isPublic=!1,x}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return m=o(n=e1.getDecryptedKeyHex(e,t),0,[1],"02"),y=o(n,0,[2],"02"),v=o(n,0,[3],"02"),b=o(n,0,[4],"02"),_=o(n,0,[5],"02"),(E=new l).setPrivate(new M(m,16),new M(y,16),new M(v,16),new M(b,16),new M(_,16)),E;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return e1.getKeyFromEncryptedPKCS8PEM(e,t);throw Error("not supported argument")},e1.generateKeypair=function(e,t){if("RSA"==e){(o=new eh).generate(t,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new eh,n=o.n.toString(16),i=o.e.toString(16);return r.setPublic(n,i),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}if("EC"==e){var o,s,a=new eS.crypto.ECDSA({curve:t}).generateKeyPairHex();return(o=new eS.crypto.ECDSA({curve:t})).setPublicKeyHex(a.ecpubhex),o.setPrivateKeyHex(a.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new eS.crypto.ECDSA({curve:t})).setPublicKeyHex(a.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}throw Error("unknown algorithm: "+e)},e1.getPEM=function(e,t,r,n,i,o){var s=eS,a=s.asn1,l=a.DERObjectIdentifier,u=a.DERInteger,c=a.ASN1Util.newObject,d=a.x509.SubjectPublicKeyInfo,f=s.crypto,h=f.DSA,p=f.ECDSA;function g(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function m(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==eh&&e instanceof eh||void 0!==h&&e instanceof h||void 0!==p&&e instanceof p)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return eB(w=new d(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==eh&&e instanceof eh&&(void 0===r||null==r)&&1==e.isPrivate)return eB(w=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===r||null==r)&&1==e.isPrivate){var v=new l({name:e.curveName}).getEncodedHex(),b=m(e).getEncodedHex(),_="";return _+=eB(v,"EC PARAMETERS"),_+=eB(b,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===r||null==r)&&1==e.isPrivate)return eB(w=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==eh&&e instanceof eh&&void 0!==r&&null!=r&&1==e.isPrivate){var w=g(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,r,n,o)}if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==r&&null!=r&&1==e.isPrivate)return w=m(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,r,n,o);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==r&&null!=r&&1==e.isPrivate)return w=y(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,r,n,o);var S=function(e,t){var r=x(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},x=function(e,t){var r=E.lib.WordArray.random(8),n=E.lib.WordArray.random(8),i=E.PBKDF2(t,r,{keySize:6,iterations:100}),o=E.enc.Hex.parse(e),s=E.TripleDES.encrypt(o,i,{iv:n})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=E.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=E.enc.Hex.stringify(n),a};if("PKCS8PRV"==t&&null!=eh&&e instanceof eh&&1==e.isPrivate){var k=g(e).getEncodedHex();return w=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(b=S(w,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return k=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(b=S(w,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return k=new u({bigint:e.x}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(b=S(w,r),"ENCRYPTED PRIVATE KEY");throw Error("unsupported object nor format")},e1.getKeyFromCSRPEM=function(e){var t=eH(e,"CERTIFICATE REQUEST");return e1.getKeyFromCSRHex(t)},e1.getKeyFromCSRHex=function(e){var t=e1.parseCSRHex(e);return e1.getKey(t.p8pubkeyhex,null,"pkcs8pub")},e1.parseCSRHex=function(e){var t=ek.getChildIdx,r=ek.getTLV,n={};if("30"!=e.substr(0,2))throw Error("malformed CSR(code:001)");var i=t(e,0);if(i.length<1)throw Error("malformed CSR(code:002)");if("30"!=e.substr(i[0],2))throw Error("malformed CSR(code:003)");var o=t(e,i[0]);if(o.length<3)throw Error("malformed CSR(code:004)");return n.p8pubkeyhex=r(e,o[2]),n},e1.getKeyID=function(e){"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=e1.getKey(e));var t=eH(e1.getPEM(e)),r=ek.getIdxbyList(t,0,[1]),n=ek.getV(t,r).substring(2);return eS.crypto.Util.hashHex(n,"sha1")},e1.getJWKFromKey=function(e){var t,r={};if(e instanceof eh&&e.isPrivate)return r.kty="RSA",r.n=eP(e.n.toString(16)),r.e=eP(e.e.toString(16)),r.d=eP(e.d.toString(16)),r.p=eP(e.p.toString(16)),r.q=eP(e.q.toString(16)),r.dp=eP(e.dmp1.toString(16)),r.dq=eP(e.dmq1.toString(16)),r.qi=eP(e.coeff.toString(16)),r;if(e instanceof eh&&e.isPublic)return r.kty="RSA",r.n=eP(e.n.toString(16)),r.e=eP(e.e.toString(16)),r;if(e instanceof eS.crypto.ECDSA&&e.isPrivate){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw Error("unsupported curve name for JWT: "+t);var n=e.getPublicKeyXYHex();return r.kty="EC",r.crv=t,r.x=eP(n.x),r.y=eP(n.y),r.d=eP(e.prvKeyHex),r}if(e instanceof eS.crypto.ECDSA&&e.isPublic){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw Error("unsupported curve name for JWT: "+t);return n=e.getPublicKeyXYHex(),r.kty="EC",r.crv=t,r.x=eP(n.x),r.y=eP(n.y),r}throw Error("not supported key object")},eh.getPosArrayOfChildrenFromHex=function(e){return ek.getChildIdx(e,0)},eh.getHexValueArrayOfChildrenFromHex=function(e){var t,r=ek.getV,n=r(e,(t=eh.getPosArrayOfChildrenFromHex(e))[0]),i=r(e,t[1]),o=r(e,t[2]),s=r(e,t[3]),a=r(e,t[4]),l=r(e,t[5]),u=r(e,t[6]),c=r(e,t[7]),d=r(e,t[8]);return(t=[]).push(n,i,o,s,a,l,u,c,d),t},eh.prototype.readPrivateKeyFromPEMString=function(e){var t=eH(e),r=eh.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},eh.prototype.readPKCS5PrvKeyHex=function(e){var t=eh.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},eh.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,o,s,a,l,u=ek.getVbyListEx;if(!1===ek.isASN1HEX(e))throw Error("not ASN.1 hex string");try{t=u(e,0,[2,0,1],"02"),r=u(e,0,[2,0,2],"02"),n=u(e,0,[2,0,3],"02"),i=u(e,0,[2,0,4],"02"),o=u(e,0,[2,0,5],"02"),s=u(e,0,[2,0,6],"02"),a=u(e,0,[2,0,7],"02"),l=u(e,0,[2,0,8],"02")}catch(e){throw Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,i,o,s,a,l)},eh.prototype.readPKCS5PubKeyHex=function(e){var t=ek.getV;if(!1===ek.isASN1HEX(e))throw Error("keyHex is not ASN.1 hex string");var r=ek.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw Error("wrong hex for PKCS#5 public key");var n=t(e,r[0]),i=t(e,r[1]);this.setPublic(n,i)},eh.prototype.readPKCS8PubKeyHex=function(e){if(!1===ek.isASN1HEX(e))throw Error("not ASN.1 hex string");if("06092a864886f70d010101"!==ek.getTLVbyListEx(e,0,[0,0]))throw Error("not PKCS8 RSA public key");var t=ek.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(t)},eh.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new e5).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)},RegExp("[^0-9a-f]","gi"),eh.prototype.sign=function(e,t){var r=eS.crypto.Util.hashString(e,t);return this.signWithMessageHash(r,t)},eh.prototype.signWithMessageHash=function(e,t){var r=ed(eS.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return e2(this.doPrivate(r).toString(16),this.n.bitLength())},eh.prototype.signPSS=function(e,t,r){var n,i=(n=eD(e),eS.crypto.Util.hashHex(n,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,t,r)},eh.prototype.signWithMessageHashPSS=function(e,t,r){var n,i=eL(e),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),l=function(e){return eS.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw Error("invalid salt length");if(a<o+r+2)throw Error("data too long");var u="";r>0&&(u=Array(r),(new ec).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=eL(l(eD("\0\0\0\0\0\0\0\0"+i+u))),d=[];for(n=0;n<a-r-o-2;n+=1)d[n]=0;var f=String.fromCharCode.apply(String,d)+"\x01"+u,h=e6(c,f.length,l),p=[];for(n=0;n<f.length;n+=1)p[n]=f.charCodeAt(n)^h.charCodeAt(n);for(p[0]&=~(65280>>8*a-s&255),n=0;n<o;n++)p.push(c.charCodeAt(n));return p.push(188),e2(this.doPrivate(new M(p)).toString(16),this.n.bitLength())},eh.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=ed(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var o=e3(i.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==eS.crypto.Util.hashString(e,s)},eh.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=ed(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=e3(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==e)},eh.prototype.verifyPSS=function(e,t,r,n){var i,o=(i=eD(e),eS.crypto.Util.hashHex(i,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(o,t,r,n)},eh.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new M(t,16),s=function(e){return eS.crypto.Util.hashHex(e,r)},a=eL(e),l=a.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===n||void 0===n)n=l;else if(-2===n)n=c-l-2;else if(n<-2)throw Error("invalid salt length");if(c<l+n+2)throw Error("data too long");var d=this.doPublic(o).toByteArray();for(i=0;i<d.length;i+=1)d[i]&=255;for(;d.length<c;)d.unshift(0);if(188!==d[c-1])throw Error("encoded message does not end in 0xbc");var f=(d=String.fromCharCode.apply(String,d)).substr(0,c-l-1),h=d.substr(f.length,l),p=65280>>8*c-u&255;if(0!=(f.charCodeAt(0)&p))throw Error("bits beyond keysize not zero");var g=e6(h,f.length,s),m=[];for(i=0;i<f.length;i+=1)m[i]=f.charCodeAt(i)^g.charCodeAt(i);m[0]&=~p;var y=c-l-n-2;for(i=0;i<y;i+=1)if(0!==m[i])throw Error("leftmost octets not zero");if(1!==m[y])throw Error("0x01 marker not found");return h===eL(s(eD("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,m.slice(-n)))))},eh.SALT_LEN_HLEN=-1,eh.SALT_LEN_MAX=-2,eh.SALT_LEN_RECOVER=-2,e5.hex2dn=function(e,t){void 0===t&&(t=0);var r=new e5;return ek.getTLV(e,t),r.getX500Name(e).str},e5.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw Error("malformed RDN");for(var r=[],n=ek.getChildIdx(e,t),i=0;i<n.length;i++)r.push(e5.hex2attrTypeValue(e,n[i]));return(r=r.map(function(e){return e.replace("+","\\+")})).join("+")},e5.hex2attrTypeValue=function(e,t){var r=ek.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw Error("malformed attribute type and value");var n=ek.getChildIdx(e,t);2!==n.length||e.substr(n[0],2);var i=r(e,n[0]),o=eS.asn1.ASN1Util.oidHexToInt(i);return eS.asn1.x509.OID.oid2atype(o)+"="+eL(r(e,n[1]))},e5.getPublicKeyFromCertHex=function(e){var t=new e5;return t.readCertHex(e),t.getPublicKey()},e5.getPublicKeyFromCertPEM=function(e){var t=new e5;return t.readCertPEM(e),t.getPublicKey()},e5.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=ek.getVbyList,i={};return i.algparam=null,(t=new e5).readCertPEM(e),i.keyhex=n(r=t.getPublicKeyHex(),0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},e5.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.jws&&eS.jws||(eS.jws={}),eS.jws.JWS=function(){var e=eS.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],o=n[2],s=n[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var l=eN(s),u=ed(l,16);this.parsedJWS.sigvalH=l,this.parsedJWS.sigvalBI=u}var c=eE(i),d=eE(o);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=d,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},eS.jws.JWS.sign=function(e,t,r,n,i){var o,s,a,l,u=eS,c=u.jws.JWS,d=c.readSafeJSONString,f=c.isSafeJSONString,h=u.crypto,p=(h.ECDSA,h.Mac),g=h.Signature,m=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":w(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":w(t))&&(a=t,s=m.stringify(a)),"string"==typeof t){if(!f(s=t))throw"JWS Head is not safe JSON string: "+s;a=d(s)}if(l=r,"object"==(void 0===r?"undefined":w(r))&&(l=m.stringify(r)),""!=e&&null!=e||void 0===a.alg||(e=a.alg),""!=e&&null!=e&&void 0===a.alg&&(a.alg=e,s=m.stringify(a)),e!==a.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+a.alg;var y=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;y=c.jwsalg2sigalg[e];var v=ex(s)+"."+ex(l),b="";if("Hmac"==y.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var _=new p({alg:y,prov:"cryptojs",pass:n});_.updateString(v),b=_.doFinal()}else if(-1!=y.indexOf("withECDSA")){(o=new g({alg:y})).init(n,i),o.updateString(v);var S=o.sign();b=eS.crypto.ECDSA.asn1SigToConcatSig(S)}else"none"!=y&&((o=new g({alg:y})).init(n,i),o.updateString(v),b=o.sign());return v+"."+eP(b)},eS.jws.JWS.verify=function(e,t,r){var n,i=eS,o=i.jws.JWS,s=o.readSafeJSONString,a=i.crypto,l=a.ECDSA,u=a.Mac,c=a.Signature;void 0!==w(eh)&&(n=eh);var d=e.split(".");if(3!==d.length)return!1;var f=d[0]+"."+d[1],h=eN(d[2]),p=s(eE(d[0])),g=null,m=null;if(void 0===p.alg)throw"algorithm not specified in header";if(m=(g=p.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=e1.getKey(t)),!("RS"!=m&&"PS"!=m||t instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==m&&!(t instanceof l))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===o.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(y=o.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var v=new u({alg:y,pass:t});return v.updateString(f),h==v.doFinal()}if(-1!=y.indexOf("withECDSA")){var b,_=null;try{_=l.concatSigToASN1Sig(h)}catch(e){return!1}return(b=new c({alg:y})).init(t),b.updateString(f),b.verify(_)}return(b=new c({alg:y})).init(t),b.updateString(f),b.verify(h)},eS.jws.JWS.parse=function(e){var t,r,n,i=e.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],r=i[1],3==i.length&&(n=i[2]),o.headerObj=eS.jws.JWS.readSafeJSONString(eE(t)),o.payloadObj=eS.jws.JWS.readSafeJSONString(eE(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=eE(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==n&&(o.sigHex=eN(n)),o},eS.jws.JWS.verifyJWT=function(e,t,r){var n=eS.jws,i=n.JWS,o=i.readSafeJSONString,s=i.inArray,a=i.includedArray,l=e.split("."),u=l[0],c=l[1],d=(eN(l[2]),o(eE(u))),f=o(eE(c));if(void 0===d.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(d.alg,r.alg)||void 0!==f.iss&&"object"===w(r.iss)&&!s(f.iss,r.iss)||void 0!==f.sub&&"object"===w(r.sub)&&!s(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"===w(r.aud)){if("string"==typeof f.aud){if(!s(f.aud,r.aud))return!1}else if("object"==w(f.aud)&&!a(f.aud,r.aud))return!1}var h=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(h=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<h)&&!(void 0!==f.nbf&&"number"==typeof f.nbf&&h<f.nbf-r.gracePeriod)&&!(void 0!==f.iat&&"number"==typeof f.iat&&h<f.iat-r.gracePeriod)&&(void 0===f.jti||void 0===r.jti||f.jti===r.jti)&&!!i.verify(e,t,r.alg)},eS.jws.JWS.includedArray=function(e,t){var r=eS.jws.JWS.inArray;if(null===e||"object"!==(void 0===e?"undefined":w(e))||"number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0},eS.jws.JWS.inArray=function(e,t){if(null===t||"object"!==(void 0===t?"undefined":w(t))||"number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},eS.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},eS.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return"object"!=(void 0===(n=ey(e))?"undefined":w(n))||n.constructor===Array?0:(t&&(t[r]=n),1)}catch(e){return 0}},eS.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=ey(e))?"undefined":w(t))||t.constructor===Array?null:t}catch(e){return null}},eS.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},eS.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",'+('"kty":"'+e.kty)+'",'+('"n":"'+e.n)+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",'+('"kty":"'+e.kty)+'",'+('"x":"'+e.x)+'",'+('"y":"'+e.y)+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",'+('"k":"'+e.k)+'"}'}var r=eD(t);return eP(eS.crypto.Util.hashHex(r,"sha256"))},eS.jws.IntDate={},eS.jws.IntDate.get=function(e){var t=eS.jws.IntDate,r=t.getNow,n=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},eS.jws.IntDate.getZulu=function(e){return eK(e)},eS.jws.IntDate.getNow=function(){return~~(new Date/1e3)},eS.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},eS.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=ec,t.rng_seed_time=es,t.BigInteger=M,t.RSAKey=eh,t.EDSA=eS.crypto.EDSA,t.DSA=eS.crypto.DSA,t.Signature=eS.crypto.Signature,t.MessageDigest=eS.crypto.MessageDigest,t.Mac=eS.crypto.Mac,t.Cipher=eS.crypto.Cipher,t.KEYUTIL=e1,t.ASN1HEX=ek,t.X509=e5,t.CryptoJS=E,t.b64tohex=D,t.b64toBA=U,t.stoBA=eF,t.BAtos=eA,t.BAtohex=eI,t.stohex=eT,t.stob64=function(e){return L(eT(e))},t.stob64u=function(e){return eR(L(eT(e)))},t.b64utos=function(e){return eA(U(eC(e)))},t.b64tob64u=eR,t.b64utob64=eC,t.hex2b64=L,t.hextob64u=eP,t.b64utohex=eN,t.utf8tob64u=ex,t.b64utoutf8=eE,t.utf8tob64=function(e){return L(eW(eG(e)))},t.b64toutf8=function(e){return decodeURIComponent(eV(D(e)))},t.utf8tohex=ej,t.hextoutf8=eO,t.hextorstr=eL,t.rstrtohex=eD,t.hextob64=function(e){return L(e)},t.hextob64nl=eU,t.b64nltohex=eM,t.hextopem=eB,t.pemtohex=eH,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(2*n,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t},t.zulutomsec=e$,t.zulutosec=eK,t.zulutodate=function(e){return new Date(e$(e))},t.datetozulu=function(e,t,r){var n,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var o=e.getUTCMilliseconds();0!==o&&(n+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return n+"Z"},t.uricmptohex=eW,t.hextouricmp=eV,t.ipv6tohex=eq,t.hextoipv6=ez,t.hextoip=eJ,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return eq(e);throw t}var r=e.split(".");if(4!==r.length)throw t;var n="";try{for(var i=0;i<4;i++)n+=("0"+parseInt(r[i]).toString(16)).slice(-2);return n}catch(e){throw t}},t.encodeURIComponentAll=eG,t.newline_toUnix=function(e){return e=e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=eX,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)}).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1},t.KJUR=eS,t.crypto=eS.crypto,t.asn1=eS.asn1,t.jws=eS.jws,t.lang=eS.lang}).call(this,r(28).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(30),i=r(31),o=r(32);function s(){return l.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff}function a(e,t){if(s()<t)throw RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=a(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r,n=0|h(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=a(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=s())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(n)return R(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var i,o,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n,i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var o="",s=t;s<r;++s){o+=(n=e[s])<16?"0"+n.toString(16):n.toString(16)}return o}(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=this,o=t,s=r,0===o&&s===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),isNaN(r*=1)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else -1!==c&&(o-=o-c),c=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return -1}function b(e,t,r,n){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=d}var f=n.length;if(f<=w)return String.fromCharCode.apply(String,n);for(var h="",p=0;p<f;)h+=String.fromCharCode.apply(String,n.slice(p,p+=w));return h}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return c(e),e<=0?a(null,e):void 0!==t?"string"==typeof r?a(null,e).fill(t,r):a(null,e).fill(t):a(null,e)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var r,n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!l.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?_(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r),d=0;d<a;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o<s?-1:+(s<o)},l.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i,o,s,a,l,u,c=this.length-t;if((void 0===r||r>c)&&(r=c),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var d=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))break;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,P(R(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return b(this,e,t,r);case"base64":return s=t,a=r,P(C(e),this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,u=r,P(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-l),this,l,u);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,o){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function E(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(e,t,r,n){t<0&&(t=0xffffffff+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function F(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function A(e,t,r,n,o){return o||F(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function I(e,t,r,n,o){return o||F(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e*=1,t|=0,r|=0,n||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e*=1,t|=0,r|=0,n||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0xffffffff,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0xffffffff,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return A(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return A(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i,o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=l.isBuffer(e)?e:R(new l(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var T=/[^+\/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function C(e){return n.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(29))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],l=new o(3*(s+a)/4-a),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(function(e,t,r){for(var i,o=[],s=t;s<r;s+=3)o.push(n[(i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return -1===r&&(r=t),[r,r===t?0:4-r%4]}i[45]=62,i[95]=63},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=u}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=5960464477539062e-23*(23===i),h=n?0:o-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,r=e.KeyUtil,i=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,l=e.AllowedSigningAlgs;function u(){if(!(this instanceof u))throw TypeError("Cannot call a class as a function")}return u.parseJwt=function(e){n.Log.debug("JoseUtil.parseJwt");try{var r=t.JWS.parse(e);return{header:r.headerObj,payload:r.payloadObj}}catch(e){n.Log.error(e)}},u.validateJwt=function(e,t,o,s,l,c,d){n.Log.debug("JoseUtil.validateJwt");try{if("RSA"===t.kty)if(t.e&&t.n)t=r.getKey(t);else{if(!t.x5c||!t.x5c.length)return n.Log.error("JoseUtil.validateJwt: RSA key missing key material",t),Promise.reject(Error("RSA key missing key material"));var f=a(t.x5c[0]);t=i.getPublicKeyFromCertHex(f)}else{if("EC"!==t.kty)return n.Log.error("JoseUtil.validateJwt: Unsupported key type",t&&t.kty),Promise.reject(Error(t.kty));if(!(t.crv&&t.x&&t.y))return n.Log.error("JoseUtil.validateJwt: EC key missing key material",t),Promise.reject(Error("EC key missing key material"));t=r.getKey(t)}return u._validateJwt(e,t,o,s,l,c,d)}catch(e){return n.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},u.validateJwtAttributes=function(e,t,r,i,o,s){i||(i=0),o||(o=parseInt(Date.now()/1e3));var a=u.parseJwt(e).payload;if(!a.iss)return n.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(Error("issuer was not provided"));if(a.iss!==t)return n.Log.error("JoseUtil._validateJwt: Invalid issuer in token",a.iss),Promise.reject(Error("Invalid issuer in token: "+a.iss));if(!a.aud)return n.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(Error("aud was not provided"));if(!(a.aud===r||Array.isArray(a.aud)&&a.aud.indexOf(r)>=0))return n.Log.error("JoseUtil._validateJwt: Invalid audience in token",a.aud),Promise.reject(Error("Invalid audience in token: "+a.aud));if(a.azp&&a.azp!==r)return n.Log.error("JoseUtil._validateJwt: Invalid azp in token",a.azp),Promise.reject(Error("Invalid azp in token: "+a.azp));if(!s){var l=o+i,c=o-i;if(!a.iat)return n.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(Error("iat was not provided"));if(l<a.iat)return n.Log.error("JoseUtil._validateJwt: iat is in the future",a.iat),Promise.reject(Error("iat is in the future: "+a.iat));if(a.nbf&&l<a.nbf)return n.Log.error("JoseUtil._validateJwt: nbf is in the future",a.nbf),Promise.reject(Error("nbf is in the future: "+a.nbf));if(!a.exp)return n.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(Error("exp was not provided"));if(a.exp<c)return n.Log.error("JoseUtil._validateJwt: exp is in the past",a.exp),Promise.reject(Error("exp is in the past:"+a.exp))}return Promise.resolve(a)},u._validateJwt=function(e,r,i,o,s,a,c){return u.validateJwtAttributes(e,i,o,s,a,c).then(function(i){try{return t.JWS.verify(e,r,l)?i:(n.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(Error("signature validation failed")))}catch(e){return n.Log.error(e&&e.message||e),Promise.reject(Error("signature validation failed"))}})},u.hashString=function(e,t){try{return o.Util.hashString(e,t)}catch(e){n.Log.error(e)}},u.hexToBase64Url=function(e){try{return s(e)}catch(e){n.Log.error(e)}},u};var n=r(0);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3);t.SigninResponse=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";if(!(this instanceof e))throw TypeError("Cannot call a class as a function");var n=i.UrlUtility.parseUrlFragment(t,r);this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.code=n.code,this.state=n.state,this.id_token=n.id_token,this.session_state=n.session_state,this.access_token=n.access_token,this.token_type=n.token_type,this.scope=n.scope,this.profile=void 0,this.expires_in=n.expires_in}return n(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var n=r(0),i=r(3),o=r(9);t.SignoutRequest=function e(t){var r=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,l=t.data,u=t.extraQueryParams,c=t.request_type;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!r)throw n.Log.error("SignoutRequest.ctor: No url passed"),Error("url");for(var d in s&&(r=i.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=i.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),l&&(this.state=new o.State({data:l,request_type:c}),r=i.UrlUtility.addQueryParam(r,"state",this.state.id))),u)r=i.UrlUtility.addQueryParam(r,d,u[d]);this.url=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var n=r(3);t.SignoutResponse=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");var r=n.UrlUtility.parseUrlFragment(t,"?");this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.state=r.state}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},n(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(10),s=r(39),a=r(15),l=r(45),u=r(47),c=r(18),d=r(8),f=r(20),h=r(11),p=r(4);t.UserManager=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.TokenRevocationClient,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.TokenClient,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.JoseUtil;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var m=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return m._events=new l.UserManagerEvents(r),m._silentRenewService=new n(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new o(m)),m._tokenRevocationClient=new a(m._settings),m._tokenClient=new d(m._settings),m._joseUtil=g,m}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then(function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)})},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then(function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()})},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then(function(){i.Log.info("UserManager.signinRedirect: successful")})},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then(function(e){return e.profile&&e.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),e})},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),e})):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),e}).catch(function(e){i.Log.error(e.message)})},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then(function(r){return r&&r.refresh_token?(t.refresh_token=r.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&r&&r.id_token,r&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",r.profile.sub),t.current_sub=r.profile.sub),e._signinSilentIframe(t))})},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then(function(t){return t?t.access_token?e._loadUser().then(function(r){if(r){var n=Promise.resolve();return t.id_token&&(n=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),n.then(function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then(function(){return e._events.load(r),r})})}return null}):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var r=this;return this._metadataService.getIssuer().then(function(n){return r.settings.getEpochTime().then(function(o){return r._joseUtil.validateJwtAttributes(t,n,r._settings.client_id,r._settings.clockSkew,o).then(function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(Error("Failed to validate id_token")))})})})},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),e})):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),e})},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then(function(r){var n=r.state;return r.response,"si:r"===n.request_type?t.signinRedirectCallback(e):"si:p"===n.request_type?t.signinPopupCallback(e):"si:s"===n.request_type?t.signinSilentCallback(e):Promise.reject(Error("invalid response_type in state"))})},t.prototype.signoutCallback=function(e,t){var r=this;return this.readSignoutResponseState(e).then(function(n){var i=n.state,o=n.response;return i?"so:r"===i.request_type?r.signoutRedirectCallback(e):"so:p"===i.request_type?r.signoutPopupCallback(e,t):Promise.reject(Error("invalid response_type in state")):o})},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var r=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(t.redirect_uri=r,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:r,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(t){return e.processSigninResponse(t.url).then(function(e){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t})})):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,n).then(function(t){return r._signinEnd(t.url,e)})},t.prototype._signinStart=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(n).then(function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),r.createSigninRequest(e).then(function(e){return i.Log.debug("UserManager._signinStart: got signin request"),n.url=e.url,n.id=e.state.id,t.navigate(n)}).catch(function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e})})},t.prototype._signinEnd=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then(function(e){i.Log.debug("UserManager._signinEnd: got signin response");var n=new a.User(e);if(r.current_sub){if(r.current_sub!==n.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",n.profile.sub),Promise.reject(Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(n).then(function(){return i.Log.debug("UserManager._signinEnd: user stored"),t._events.load(n),n})})},t.prototype._signinCallback=function(e,t){i.Log.debug("UserManager._signinCallback");var r="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,r)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,r).then(function(){i.Log.info("UserManager.signoutRedirect: successful")})},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then(function(e){return i.Log.info("UserManager.signoutRedirectCallback: successful"),e})},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){i.Log.info("UserManager.signoutPopup: successful")})},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then(function(){i.Log.info("UserManager.signoutPopupCallback: successful")})},t.prototype._signout=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,n).then(function(e){return r._signoutEnd(e.url)})},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(n).then(function(r){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then(function(o){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then(function(){var s=e.id_token_hint||o&&o.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then(function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then(function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),n.url=e.url,e.state&&(n.id=e.state.id),r.navigate(n)})})})}).catch(function(e){throw r.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e})})},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then(function(e){return i.Log.debug("UserManager._signoutEnd: got signout response"),e})},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then(function(t){return e._revokeInternal(t,!0).then(function(r){if(r)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then(function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)})})}).then(function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},t.prototype._revokeInternal=function(e,t){var r=this;if(e){var n=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(n,t).then(function(e){return r._revokeRefreshTokenInternal(o,t).then(function(t){return e||t||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t})})}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then(function(){return!0})},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(e){return e?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)})},t.prototype.storeUser=function(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},n(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r(0),r(5)),o=r(40),s=r(41),a=r(43),l=r(6),u=r(1),c=r(8);t.UserManagerSettings=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.popup_redirect_uri,i=r.popup_post_logout_redirect_uri,d=r.popupWindowFeatures,f=r.popupWindowTarget,h=r.silent_redirect_uri,p=r.silentRequestTimeout,g=r.automaticSilentRenew,m=r.validateSubOnSilentRenew,y=r.includeIdTokenInSilentRenew,v=r.monitorSession,b=r.monitorAnonymousSession,_=r.checkSessionInterval,w=r.stopCheckSessionOnError,S=r.query_status_response_type,x=r.revokeAccessTokenOnSignout,E=r.accessTokenExpiringNotificationTime,k=r.redirectNavigator,F=void 0===k?new o.RedirectNavigator:k,A=r.popupNavigator,I=void 0===A?new s.PopupNavigator:A,T=r.iframeNavigator,R=void 0===T?new a.IFrameNavigator:T,C=r.userStore,P=void 0===C?new l.WebStorageStateStore({store:u.Global.sessionStorage}):C;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var N=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,arguments[0]));return N._popup_redirect_uri=n,N._popup_post_logout_redirect_uri=i,N._popupWindowFeatures=d,N._popupWindowTarget=f,N._silent_redirect_uri=h,N._silentRequestTimeout=p,N._automaticSilentRenew=void 0!==g&&g,N._validateSubOnSilentRenew=void 0!==m&&m,N._includeIdTokenInSilentRenew=void 0===y||y,N._accessTokenExpiringNotificationTime=void 0===E?60:E,N._monitorSession=void 0===v||v,N._monitorAnonymousSession=void 0!==b&&b,N._checkSessionInterval=void 0===_?2e3:_,N._stopCheckSessionOnError=void 0===w||w,S?N._query_status_response_type=S:arguments[0]&&arguments[0].response_type?N._query_status_response_type=c.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":N._query_status_response_type="id_token",N._revokeAccessTokenOnSignout=void 0!==x&&x,N._redirectNavigator=F,N._popupNavigator=I,N._iframeNavigator=R,N._userStore=P,N}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(i.OidcClientSettings)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.RedirectNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(Error("No url provided")))},n(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var n=r(0),i=r(42);t.PopupNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new i.PopupWindow(e))},e.prototype.callback=function(e,t,r){n.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(e,t,r),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(3);t.PopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t});var n=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",n,o),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,r){if(window.opener){if(e=e||window.location.href){var n=o.UrlUtility.parseUrlFragment(e,r);if(n.state){var s="popupCallback_"+n.state,a=window.opener[s];a?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},n(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var n=r(0),i=r(44);t.IFrameNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new i.IFrameWindow(e))},e.prototype.callback=function(e){n.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(e),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.IFrameWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},n(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var n=r(0),i=r(16),o=r(17);t.UserManagerEvents=function(e){function t(r){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return n._userLoaded=new o.Event("User loaded"),n._userUnloaded=new o.Event("User unloaded"),n._silentRenewError=new o.Event("Silent renew error"),n._userSignedIn=new o.Event("User signed in"),n._userSignedOut=new o.Event("User signed out"),n._userSessionChanged=new o.Event("User session changed"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),r&&this._userLoaded.raise(t)},t.prototype.unload=function(){n.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){n.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){n.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){n.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){n.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(i.AccessTokenEvents)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(1);t.Timer=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var s=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return s._timer=n,s._nowFunc=i||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var r=5;e<5&&(r=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*r)}},t.prototype.cancel=function(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},n(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(r(17).Event)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var n=r(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(e){}).catch(function(e){n.Log.error("SilentRenewService.start: Error from getUser:",e.message)}))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then(function(e){n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(t){n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var n=r(21);t.CordovaPopupNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new n.CordovaPopupWindow(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var n=r(21);t.CordovaIFrameNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return e.popupWindowFeatures="hidden=yes",Promise.resolve(new n.CordovaPopupWindow(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.6"}],t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,(function(t){return e[t]}).bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}()},4685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,n.isBailoutToCSRError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(5346),i=r(1670);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return p},usePathname:function(){return f},useRouter:function(){return h},useSearchParams:function(){return d},useSelectedLayoutSegment:function(){return m},useSelectedLayoutSegments:function(){return g},useServerInsertedHTML:function(){return u.useServerInsertedHTML}});let n=r(5729),i=r(2875),o=r(6394),s=r(5172),a=r(2835),l=r(6382),u=r(4512),c=void 0;function d(){let e=(0,n.useContext)(o.SearchParamsContext);return(0,n.useMemo)(()=>e?new l.ReadonlyURLSearchParams(e):null,[e])}function f(){return null==c||c("usePathname()"),(0,n.useContext)(o.PathnameContext)}function h(){let e=(0,n.useContext)(i.AppRouterContext);if(null===e)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return e}function p(){return null==c||c("useParams()"),(0,n.useContext)(o.PathParamsContext)}function g(e){void 0===e&&(e="children"),null==c||c("useSelectedLayoutSegments()");let t=(0,n.useContext)(i.LayoutRouterContext);return t?function e(t,r,n,i){let o;if(void 0===n&&(n=!0),void 0===i&&(i=[]),n)o=t[1][r];else{var l;let e=t[1];o=null!=(l=e.children)?l:Object.values(e)[0]}if(!o)return i;let u=o[0],c=(0,s.getSegmentValue)(u);return!c||c.startsWith(a.PAGE_SEGMENT_KEY)?i:(i.push(c),e(o,r,!1,i))}(t.parentTree,e):null}function m(e){void 0===e&&(e="children"),null==c||c("useSelectedLayoutSegment()");let t=g(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===a.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return l}}),r(546);let n=r(5284),i=r(6904),o=["-moz-initial","fill","none","scale-down",void 0];function s(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function l(e,t){var r,l;let u,c,d,{src:f,sizes:h,unoptimized:p=!1,priority:g=!1,loading:m,className:y,quality:v,width:b,height:_,fill:w=!1,style:S,overrideSrc:x,onLoad:E,onLoadingComplete:k,placeholder:F="empty",blurDataURL:A,fetchPriority:I,decoding:T="async",layout:R,objectFit:C,objectPosition:P,lazyBoundary:N,lazyRoot:j,...O}=e,{imgConf:L,showAltText:D,blurComplete:U,defaultLoader:M}=t,B=L||i.imageConfigDefault;if("allSizes"in B)u=B;else{let e=[...B.deviceSizes,...B.imageSizes].sort((e,t)=>e-t),t=B.deviceSizes.sort((e,t)=>e-t),n=null==(r=B.qualities)?void 0:r.sort((e,t)=>e-t);u={...B,allSizes:e,deviceSizes:t,qualities:n}}if(void 0===M)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let H=O.loader||M;delete O.loader,delete O.srcSet;let $="__next_img_default"in H;if($){if("custom"===u.loader)throw Object.defineProperty(Error('Image with src "'+f+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=H;H=t=>{let{config:r,...n}=t;return e(n)}}if(R){"fill"===R&&(w=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[R];e&&(S={...S,...e});let t={responsive:"100vw",fill:"100vw"}[R];t&&!h&&(h=t)}let K="",W=a(b),V=a(_);if((l=f)&&"object"==typeof l&&(s(l)||void 0!==l.src)){let e=s(f)?f.default:f;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,d=e.blurHeight,A=A||e.blurDataURL,K=e.src,!w)if(W||V){if(W&&!V){let t=W/e.width;V=Math.round(e.height*t)}else if(!W&&V){let t=V/e.height;W=Math.round(e.width*t)}}else W=e.width,V=e.height}let q=!g&&("lazy"===m||void 0===m);(!(f="string"==typeof f?f:K)||f.startsWith("data:")||f.startsWith("blob:"))&&(p=!0,q=!1),u.unoptimized&&(p=!0),$&&!u.dangerouslyAllowSVG&&f.split("?",1)[0].endsWith(".svg")&&(p=!0);let z=a(v),J=Object.assign(w?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:P}:{},D?{}:{color:"transparent"},S),Z=U||"empty"===F?null:"blur"===F?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:W,heightInt:V,blurWidth:c,blurHeight:d,blurDataURL:A||"",objectFit:J.objectFit})+'")':'url("'+F+'")',G=o.includes(J.objectFit)?"fill"===J.objectFit?"100% 100%":"cover":J.objectFit,Y=Z?{backgroundSize:G,backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Z}:{},X=function(e){let{config:t,src:r,unoptimized:n,width:i,quality:o,sizes:s,loader:a}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,r){let{deviceSizes:n,allSizes:i}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:i,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))],kind:"x"}}(t,i,s),c=l.length-1;return{sizes:s||"w"!==u?s:"100vw",srcSet:l.map((e,n)=>a({config:t,src:r,quality:o,width:e})+" "+("w"===u?e:n+1)+u).join(", "),src:a({config:t,src:r,quality:o,width:l[c]})}}({config:u,src:f,unoptimized:p,width:W,quality:z,sizes:h,loader:H});return{props:{...O,loading:q?"lazy":m,fetchPriority:I,width:W,height:V,decoding:T,className:y,style:{...J,...Y},sizes:X.sizes,srcSet:X.srcSet,src:x||X.src},meta:{unoptimized:p,priority:g,placeholder:F,fill:w}}}},5172:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5177:(e,t,r)=>{"use strict";let n;r.d(t,{Ay:()=>l,FL:()=>function e(t,r){if("string"==typeof t)return t;if(t instanceof u&&"Quad"!==t.termType)return t.id;if(!t)return n.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==o.string?`^^${t.datatype.value}`:""}`;case"Quad":let i=[e(t.subject,!0),e(t.predicate,!0),e(t.object,!0)];return t.graph&&"DefaultGraph"!==t.graph.termType&&i.push(e(t.graph,!0)),r?i:JSON.stringify(i);default:throw Error(`Unexpected termType: ${t.termType}`)}},iN:()=>function e(t,r,n){if(r=r||a,!t)return r.defaultGraph();switch(t[0]){case"?":return r.variable(t.substr(1));case"_":return r.blankNode(t.substr(2));case'"':if(r===a)return new d(t);if('"'===t[t.length-1])return r.literal(t.substr(1,t.length-2));let i=t.lastIndexOf('"',t.length-1);return r.literal(t.substr(1,i-1),"@"===t[i+1]?t.substr(i+2):r.namedNode(t.substr(i+3)));case"[":t=JSON.parse(t);break;default:if(!n||!Array.isArray(t))return r.namedNode(t)}return r.quad(e(t[0],r,!0),e(t[1],r,!0),e(t[2],r,!0),t[3]&&e(t[3],r,!0))},x1:()=>u});let{rdf:i,xsd:o}=r(7105).A,s=0,a={namedNode:m,blankNode:y,variable:b,literal:v,defaultGraph:function(){return n},quad:_,triple:_,fromTerm:w,fromQuad:S},l=a;class u{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof u?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class c extends u{get termType(){return"NamedNode"}}class d extends u{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new c(this.datatypeString)}get datatypeString(){let e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return"^"===r?e.substr(t+2):"@"!==r?o.string:i.langString}equals(e){return e instanceof d?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class f extends u{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class h extends u{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class p extends u{constructor(){return super(""),n||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}n=new p;class g extends u{constructor(e,t,r,i){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=i||n}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function m(e){return new c(e)}function y(e){return new f(e||`n3-${s++}`)}function v(e,t){if("string"==typeof t)return new d(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return""===r&&("boolean"==typeof e?r=o.boolean:"number"==typeof e&&(Number.isFinite(e)?r=Number.isInteger(e)?o.integer:o.double:(r=o.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),new d(""===r||r===o.string?`"${e}"`:`"${e}"^^${r}`)}function b(e){return new h(e)}function _(e,t,r,n){return new g(e,t,r,n)}function w(e){if(e instanceof u)return e;switch(e.termType){case"NamedNode":return m(e.value);case"BlankNode":return y(e.value);case"Variable":return b(e.value);case"DefaultGraph":return n;case"Literal":return v(e.value,e.language||e.datatype);case"Quad":return S(e);default:throw Error(`Unexpected termType: ${e.termType}`)}}function S(e){if(e instanceof g)return e;if("Quad"!==e.termType)throw Error(`Unexpected termType: ${e.termType}`);return _(w(e.subject),w(e.predicate),w(e.object),w(e.graph))}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(5729);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),s=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:s,iconNode:c,...d},f)=>(0,n.createElement)("svg",{ref:f,...u,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:a("lucide",o),...!s&&!l(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(s)?s:[s]])),d=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...o},l)=>(0,n.createElement)(c,{ref:l,iconNode:t,className:a(`lucide-${i(s(e))}`,`lucide-${e}`,r),...o}));return r.displayName=s(e),r}},5284:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:i,blurDataURL:o,objectFit:s}=e,a=n?40*n:t,l=i?40*i:r,u=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(u?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+o+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},5652:(e,t,r)=>{"use strict";var n=r(2572).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:this.write=f,this.end=h;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},5718:(e,t,r)=>{"use strict";let{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(4039),{EventEmitter:o}=r(5978);function s(e){o.call(this,e)}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(s.prototype,o.prototype),i(s,o),s.prototype.pipe=function(e,t){let r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",u));let s=!1;function l(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return a(r,"error",c),a(e,"error",c),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},e.exports={Stream:s,prependListener:a}},5791:(e,t,r)=>{"use strict";let n,i=r(9143),{AbortError:o,codes:s}=r(7894),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:l}=s,{kEmptyObject:u,once:c}=r(6733),{validateAbortSignal:d,validateFunction:f,validateObject:h,validateBoolean:p}=r(1204),{Promise:g,PromisePrototypeThen:m,SymbolDispose:y}=r(4039),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:w,isReadableFinished:S,isReadableErrored:x,isWritable:E,isWritableNodeStream:k,isWritableStream:F,isWritableFinished:A,isWritableErrored:I,isNodeStream:T,willEmitClose:R,kIsClosedPromise:C}=r(918),P=()=>{};function N(e,t,s){var p,g;if(2==arguments.length?(s=t,t=u):null==t?t=u:h(t,"options"),f(s,"callback"),d(t.signal,"options.signal"),s=c(s),w(e)||F(e))return function(e,t,s){let a=!1,l=P;if(t.signal)if(l=()=>{a=!0,s.call(e,new o(void 0,{cause:t.signal.reason}))},t.signal.aborted)i.nextTick(l);else{let i=(n=n||r(6733).addAbortListener)(t.signal,l),o=s;s=c((...t)=>{i[y](),o.apply(e,t)})}let u=(...t)=>{a||i.nextTick(()=>s.apply(e,t))};return m(e[C].promise,u,u),P}(e,t,s);if(!T(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);let N=null!=(p=t.readable)?p:_(e),j=null!=(g=t.writable)?g:k(e),O=e._writableState,L=e._readableState,D=()=>{e.writable||B()},U=R(e)&&_(e)===N&&k(e)===j,M=A(e,!1),B=()=>{M=!0,e.destroyed&&(U=!1),U&&(!e.readable||N)||(!N||H)&&s.call(e)},H=S(e,!1),$=()=>{H=!0,e.destroyed&&(U=!1),U&&(!e.writable||j)||(!j||M)&&s.call(e)},K=t=>{s.call(e,t)},W=v(e),V=()=>{W=!0;let t=I(e)||x(e);return t&&"boolean"!=typeof t?s.call(e,t):N&&!H&&_(e,!0)&&!S(e,!1)||j&&!M&&!A(e,!1)?s.call(e,new l):void s.call(e)},q=()=>{W=!0;let t=I(e)||x(e);if(t&&"boolean"!=typeof t)return s.call(e,t);s.call(e)},z=()=>{e.req.on("finish",B)};e.setHeader&&"function"==typeof e.abort?(e.on("complete",B),U||e.on("abort",V),e.req?z():e.on("request",z)):j&&!O&&(e.on("end",D),e.on("close",D)),U||"boolean"!=typeof e.aborted||e.on("aborted",V),e.on("end",$),e.on("finish",B),!1!==t.error&&e.on("error",K),e.on("close",V),W?i.nextTick(V):null!=O&&O.errorEmitted||null!=L&&L.errorEmitted?U||i.nextTick(q):!N&&(!U||b(e))&&(M||!1===E(e))||!j&&(!U||E(e))&&(H||!1===b(e))?i.nextTick(q):L&&e.req&&e.aborted&&i.nextTick(q);let J=()=>{s=P,e.removeListener("aborted",V),e.removeListener("complete",B),e.removeListener("abort",V),e.removeListener("request",z),e.req&&e.req.removeListener("finish",B),e.removeListener("end",D),e.removeListener("close",D),e.removeListener("finish",B),e.removeListener("end",$),e.removeListener("error",K),e.removeListener("close",V)};if(t.signal&&!W){let a=()=>{let r=s;J(),r.call(e,new o(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)i.nextTick(a);else{let i=(n=n||r(6733).addAbortListener)(t.signal,a),o=s;s=c((...t)=>{i[y](),o.apply(e,t)})}}return J}e.exports=N,e.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=u),null!=(r=t)&&r.cleanup&&(p(t.cleanup,"cleanup"),n=t.cleanup),new g((r,i)=>{let o=N(e,t,e=>{n&&o(),e?i(e):r()})})}},5978:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,n){var i,o,s;function a(r){e.removeListener(t,l),n(r)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}g(e,t,l,{once:!0}),"error"!==t&&(i=e,o=a,s={once:!0},"function"==typeof i.on&&g(i,"error",o,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,u=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=c.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else for(var u=l.length,c=p(l,u),r=0;r<u;++r)n(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},6002:(e,t,r)=>{"use strict";let n;r.d(t,{A:()=>a});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let a=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();let a=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(o)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)}},6207:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,h:()=>i});var n=r(6029);let i=(0,r(5729).createContext)({isInitializing:!0,getAuthService:()=>({}),getService:()=>{throw Error("Service not initialized")},getSpacedRepetitionAlgorithm:()=>{throw Error("Spaced repetition algorithm not initialized")}});function o(e){let{children:t,authService:r,service:o,spacedRepetitionAlgorithm:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.Provider,{value:{isInitializing:!1,getAuthService:()=>r,getService:()=>o,getSpacedRepetitionAlgorithm:()=>s},children:t})})}},6238:(e,t,r)=>{"use strict";r.d(t,{_:()=>u});var n=r(9143);function i(e,t){if(e instanceof Promise)throw Error(t)}var o=r(9143),s=r(3668),a=r(9143);let l={server:{NODE_ENV:()=>s.z.enum(["development","test","production"])},client:{NEXT_PUBLIC_BASE_PATH:()=>s.z.string().default("/"),NEXT_PUBLIC_VERSION:()=>s.z.string()}},u=()=>(function(e){let t="object"==typeof e.client?e.client:{},r="object"==typeof e.server?e.server:{},s=e.shared,a=e.runtimeEnv?e.runtimeEnv:{...o.env,...e.experimental__runtimeEnv};return function(e){let t=e.runtimeEnvStrict??e.runtimeEnv??n.env;if(e.emptyStringAsUndefined)for(let[e,r]of Object.entries(t))""===r&&delete t[e];if(e.skipValidation)return t;let r="object"==typeof e.client?e.client:{},o="object"==typeof e.server?e.server:{},s="object"==typeof e.shared?e.shared:{},a=e.isServer??("undefined"==typeof window||"Deno"in window),l=a?{...o,...s,...r}:{...r,...s},u=e.createFinalSchema?.(l,a)["~standard"].validate(t)??function(e,t){let r={},n=[];for(let o in e){let s=e[o]["~standard"].validate(t[o]);if(i(s,`Validation must be synchronous, but ${o} returned a Promise.`),s.issues){n.push(...s.issues.map(e=>({...e,path:[o,...e.path??[]]})));continue}r[o]=s.value}return n.length?{issues:n}:{value:r}}(l,t);i(u,"Validation must be synchronous");let c=e.onValidationError??(e=>{throw console.error(" Invalid environment variables:",e),Error("Invalid environment variables")}),d=e.onInvalidAccess??(()=>{throw Error(" Attempted to access a server-side environment variable on the client")});if(u.issues)return c(u.issues);let f=t=>!e.clientPrefix||!t.startsWith(e.clientPrefix)&&!(t in s),h=e=>a||!f(e),p=e=>"__esModule"===e||"$$typeof"===e;return new Proxy(Object.assign((e.extends??[]).reduce((e,t)=>Object.assign(e,t),{}),u.value),{get(e,t){if("string"==typeof t&&!p(t))return h(t)?Reflect.get(e,t):d(t)}})}({...e,shared:s,client:t,server:r,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:a})})({server:{NODE_ENV:l.server.NODE_ENV()},client:{NEXT_PUBLIC_BASE_PATH:l.client.NEXT_PUBLIC_BASE_PATH(),NEXT_PUBLIC_VERSION:l.client.NEXT_PUBLIC_VERSION()},runtimeEnv:{NODE_ENV:"production",NEXT_PUBLIC_BASE_PATH:"/solid-memo/branches/renovate-playwright-monorepo",NEXT_PUBLIC_VERSION:"renovate-playwright-monorepo:0044734"},skipValidation:!!a.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})},6261:(e,t,r)=>{"use strict";let n,i=r(9143),{ArrayPrototypeIndexOf:o,NumberIsInteger:s,NumberIsNaN:a,NumberParseInt:l,ObjectDefineProperties:u,ObjectKeys:c,ObjectSetPrototypeOf:d,Promise:f,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:m}=r(4039);e.exports=K,K.ReadableState=$;let{EventEmitter:y}=r(5978),{Stream:v,prependListener:b}=r(5718),{Buffer:_}=r(1642),{addAbortSignal:w}=r(9110),S=r(5791),x=r(6733).debuglog("stream",e=>{x=e}),E=r(9520),k=r(261),{getHighWaterMark:F,getDefaultHighWaterMark:A}=r(4318),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:j}=r(7894),{validateObject:O}=r(1204),L=m("kPaused"),{StringDecoder:D}=r(5652),U=r(9846);d(K.prototype,v.prototype),d(K,v);let M=()=>{},{errorOrDestroy:B}=k;function H(e){return{enumerable:!1,get(){return(this.state&e)!=0},set(t){t?this.state|=e:this.state&=~e}}}function $(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(9667)),this.state=6192,e&&e.objectMode&&(this.state|=1),n&&e&&e.readableObjectMode&&(this.state|=1),this.highWaterMark=e?F(this,e,"readableHighWaterMark",n):A(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,e&&!1===e.emitClose&&(this.state&=-2049),e&&!1===e.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new D(e.encoding),this.encoding=e.encoding)}function K(e){if(!(this instanceof K))return new K(e);let t=this instanceof r(9667);this._readableState=new $(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),v.call(this,e),k.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}function W(e,t,r,n){let i;x("readableAddChunk",t);let o=e._readableState;if((1&o.state)==0&&("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(n&&o.encoding?t=_.from(t,r).toString(o.encoding):(t=_.from(t,r),r=""))):t instanceof _?r="":v._isUint8Array(t)?(t=v._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new T("chunk",["string","Buffer","Uint8Array"],t))),i)B(e,i);else if(null===t)o.state&=-9,function(e,t){if(x("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?z(e):(t.needReadable=!1,t.emittedReadable=!0,J(e))}}(e,o);else if((1&o.state)!=0||t&&t.length>0)if(n)if((4&o.state)!=0)B(e,new N);else{if(o.destroyed||o.errored)return!1;V(e,o,t,!0)}else if(o.ended)B(e,new P);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?V(e,o,t,!1):Z(e,o)):V(e,o,t,!1)}else n||(o.state&=-9,Z(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function V(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?((65536&t.state)!=0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),(64&t.state)!=0&&z(e)),Z(e,t)}function q(e,t){return e<=0||0===t.length&&t.ended?0:(1&t.state)!=0?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function z(e){let t=e._readableState;x("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(J,e))}function J(e){let t=e._readableState;x("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ee(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,i.nextTick(G,e,t))}function G(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(x("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function Y(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function X(e){x("readable nexttick read 0"),e.read(0)}function Q(e,t){x("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ee(e),t.flowing&&!t.reading&&e.read(0)}function ee(e){let t=e._readableState;for(x("flow",t.flowing);t.flowing&&null!==e.read(););}function et(e,t){"function"!=typeof e.read&&(e=K.wrap(e,{objectMode:!0}));let r=er(e,t);return r.stream=e,r}async function*er(e,t){let r,n=M;function i(t){this===e?(n(),n=M):n=t}e.on("readable",i);let o=S(e,{writable:!1},e=>{r=e?I(r,e):null,n(),n=M});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else if(r)throw r;else{if(null===r)return;await new f(i)}}}catch(e){throw r=I(r,e)}finally{(r||(null==t?void 0:t.destroyOnReturn)!==!1)&&(void 0===r||e._readableState.autoDestroy)?k.destroyer(e,null):(e.off("readable",i),o())}}function en(e,t){let r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function ei(e){let t=e._readableState;x("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(eo,t,e))}function eo(e,t){if(x("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length){if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)i.nextTick(es,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}}function es(e){!e.writable||e.writableEnded||e.destroyed||e.end()}function ea(){return void 0===n&&(n={}),n}u($.prototype,{objectMode:H(1),ended:H(2),endEmitted:H(4),reading:H(8),constructed:H(16),sync:H(32),needReadable:H(64),emittedReadable:H(128),readableListening:H(256),resumeScheduled:H(512),errorEmitted:H(1024),emitClose:H(2048),autoDestroy:H(4096),destroyed:H(8192),closed:H(16384),closeEmitted:H(32768),multiAwaitDrain:H(65536),readingMore:H(131072),dataEmitted:H(262144)}),K.prototype.destroy=k.destroy,K.prototype._undestroy=k.undestroy,K.prototype._destroy=function(e,t){t(e)},K.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},K.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new j,this.destroy(e)),new f((t,r)=>S(this,n=>n&&n!==e?r(n):t(null)))},K.prototype.push=function(e,t){return W(this,e,t,!1)},K.prototype.unshift=function(e,t){return W(this,e,t,!0)},K.prototype.isPaused=function(){let e=this._readableState;return!0===e[L]||!1===e.flowing},K.prototype.setEncoding=function(e){let t=new D(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this},K.prototype.read=function(e){let t;x("read",e),void 0===e?e=NaN:s(e)||(e=l(e,10));let r=this._readableState,n=e;if(e>r.highWaterMark&&(r.highWaterMark=function(e){if(e>0x40000000)throw new C("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(r.state&=-129),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return x("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?ei(this):z(this),null;if(0===(e=q(e,r))&&r.ended)return 0===r.length&&ei(this),null;let i=(64&r.state)!=0;if(x("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&x("length less than watermark",i=!0),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)x("reading, ended or constructing",i=!1);else if(i){x("do read"),r.state|=40,0===r.length&&(r.state|=64);try{this._read(r.highWaterMark)}catch(e){B(this,e)}r.state&=-33,r.reading||(e=q(n,r))}return null===(t=e>0?en(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&ei(this)),null===t||r.errorEmitted||r.closeEmitted||(r.dataEmitted=!0,this.emit("data",t)),t},K.prototype._read=function(e){throw new R("_read()")},K.prototype.pipe=function(e,t){let r,n=this,o=this._readableState;1!==o.pipes.length||o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new h(o.awaitDrainWriters?[o.awaitDrainWriters]:[])),o.pipes.push(e),x("pipe count=%d opts=%j",o.pipes.length,t);let s=t&&!1===t.end||e===i.stdout||e===i.stderr?g:a;function a(){x("onend"),e.end()}o.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",function t(i,s){x("onunpipe"),i===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,x("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),r&&e.removeListener("drain",r),e.removeListener("error",d),e.removeListener("unpipe",t),n.removeListener("end",a),n.removeListener("end",g),n.removeListener("data",c),l=!0,r&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&r())});let l=!1;function u(){var t,i;l||(1===o.pipes.length&&o.pipes[0]===e?(x("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(x("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),n.pause()),r||(t=n,i=e,r=function(){let e=t._readableState;e.awaitDrainWriters===i?(x("pipeOnDrain",1),e.awaitDrainWriters=null):e.multiAwaitDrain&&(x("pipeOnDrain",e.awaitDrainWriters.size),e.awaitDrainWriters.delete(i)),(!e.awaitDrainWriters||0===e.awaitDrainWriters.size)&&t.listenerCount("data")&&t.resume()},e.on("drain",r))}function c(t){x("ondata");let r=e.write(t);x("dest.write",r),!1===r&&u()}function d(t){if(x("onerror",t),g(),e.removeListener("error",d),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?B(e,t):e.emit("error",t)}}function f(){e.removeListener("finish",p),g()}function p(){x("onfinish"),e.removeListener("close",f),g()}function g(){x("unpipe"),n.unpipe(e)}return n.on("data",c),b(e,"error",d),e.once("close",f),e.once("finish",p),e.emit("pipe",n),!0===e.writableNeedDrain?u():o.flowing||(x("pipe resume"),n.resume()),e},K.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=o(t.pipes,e);return -1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},K.prototype.on=function(e,t){let r=v.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,x("on readable",n.length,n.reading),n.length?z(this):n.reading||i.nextTick(X,this)),r},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(e,t){let r=v.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(Y,this),r},K.prototype.off=K.prototype.removeListener,K.prototype.removeAllListeners=function(e){let t=v.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&i.nextTick(Y,this),t},K.prototype.resume=function(){var e,t;let r=this._readableState;return r.flowing||(x("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,i.nextTick(Q,e,t))),r[L]=!1,this},K.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},K.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{B(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=c(e);for(let t=1;t<r.length;t++){let n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},K.prototype[g]=function(){return et(this)},K.prototype.iterator=function(e){return void 0!==e&&O(e,"options"),et(this,e)},u(K.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),u($.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),K._fromList=en,K.from=function(e,t){return U(K,e,t)},K.fromWeb=function(e,t){return ea().newStreamReadableFromReadableStream(e,t)},K.toWeb=function(e,t){return ea().newReadableStreamFromStreamReadable(e,t)},K.wrap=function(e,t){var r,n;return new K({objectMode:null==(r=null!=(n=e.readableObjectMode)?n:e.objectMode)||r,...t,destroy(t,r){k.destroyer(e,t),r(t)}}).wrap(e)}},6382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return i.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return a.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let n=r(4269),i=r(5318),o=r(2647),s=r(2202),a=r(8475),l=r(4167);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6733:(e,t,r)=>{"use strict";let n=r(1642),{format:i,inspect:o}=r(666),{codes:{ERR_INVALID_ARG_TYPE:s}}=r(7894),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:u}=r(4039),AbortSignal=globalThis.AbortSignal||r(8461).AbortSignal,c=globalThis.AbortController||r(8461).AbortController,d=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||n.Blob,h=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new s(t,"AbortSignal",e)},p=(e,t)=>{if("function"!=typeof e)throw new s(t,"Function",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof d,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:void 0!==f?function(e){return e instanceof f}:function(e){return!1},deprecate:(e,t)=>e,addAbortListener:r(5978).addAbortListener||function(e,t){let r;if(void 0===e)throw new s("signal","AbortSignal",e);return h(e,"signal"),p(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[u](){var e;null==(e=r)||e()}}},AbortSignalAny:AbortSignal.any||function(e){if(1===e.length)return e[0];let t=new c,r=()=>t.abort();return e.forEach(e=>{h(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},6764:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(5229).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7105:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i="http://www.w3.org/2001/XMLSchema#",o="http://www.w3.org/2000/10/swap/",s={xsd:{decimal:`${i}decimal`,boolean:`${i}boolean`,double:`${i}double`,integer:`${i}integer`,string:`${i}string`},rdf:{type:`${n}type`,nil:`${n}nil`,first:`${n}first`,rest:`${n}rest`,langString:`${n}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${o}reify#forSome`,forAll:`${o}reify#forAll`},log:{implies:`${o}log#implies`,isImpliedBy:`${o}log#isImpliedBy`}}},7127:(e,t,r)=>{"use strict";r.d(t,{uR:()=>c,$q:()=>d,OM:()=>p,Il:()=>h,nt:()=>o,Ez:()=>a,LW:()=>u,L:()=>f});var n=r(3668);let i=n.z.object({iri:n.z.string(),version:n.z.string(),name:n.z.string(),hasCard:n.z.array(n.z.string()),isInSolidMemoDataInstance:n.z.string()});function o(e){return i.parse(e)}let s=n.z.object({version:n.z.string(),iri:n.z.string(),front:n.z.string(),back:n.z.string(),isInSolidMemoDataInstance:n.z.string(),isInDeck:n.z.string(),interval:n.z.number(),easeFactor:n.z.number(),repetition:n.z.number(),lastReviewed:n.z.date().optional().nullable()});function a(e){return s.parse(e)}let l=n.z.object({iri:n.z.string(),version:n.z.string(),name:n.z.string(),hasDeck:n.z.array(n.z.string()),isInPrivateTypeIndex:n.z.string()});function u(e){return l.parse(e)}n.z.object({iri:n.z.string(),version:n.z.string(),forFlashcard:n.z.string(),date:n.z.string().date(),score:n.z.number()});class c{repository;constructor(e){this.repository=e}isLoggedIn(){return this.repository.isLoggedIn()}getWebId(){return this.repository.getWebId()}getFetch(){return this.repository.getFetch()}async logInWithOidcIssuer({oidcIssuer:e,redirectUrl:t,clientName:r}){return this.repository.login({oidcIssuer:e,redirectUrl:t,clientName:r})}async logInWithWebId({webId:e,redirectUrl:t,clientName:r}){let n=await this.repository.findOidcIssuers(e);if(n.length>1)throw Error("Too many oidc issuers found in WebID");let i=n[0];if(!i)throw Error("Failed to discover oidc issuer of WebID");return this.repository.login({oidcIssuer:i,redirectUrl:t,clientName:r})}async logOut(){return this.repository.logout()}async handleIncomingRedirect(e){await this.repository.handleIncomingRedirect(e)}}class d{repository;constructor(e){this.repository=e}async discoverEverything(){let e=await this.repository.findAllInstanceUrls(),t=await this.repository.findAllDeckUrls(e),r=await this.repository.findAllFlashcardUrls(t);return{instanceUrls:e,deckUrls:t,flashcardUrls:r}}async discoverInstanceUrls(){return this.repository.findAllInstanceUrls()}async newInstance(){let e=await this.repository.findAllStorageIris();if(0===e.length)throw Error("No storage iris found");if(e.length>1)throw Error("Too many storage iris found");let t=e[0];if("string"!=typeof t)throw Error("Failed to discover storage to put instance in");await this.repository.createInstance(t);let r=await this.repository.findAllInstanceUrls(),n=await this.repository.findInstances(r);return{instanceUrls:r,instances:n}}async newDeck(e){return{decks:await this.repository.createDeck(e.isInSolidMemoDataInstance,e)}}async newFlashcard(e,t){return await this.repository.createFlashcard(e,t.isInDeck,t),{decks:await this.repository.findDecks([t.isInDeck])}}async getInstance(e){return this.repository.findInstances([e])}async getDeck(e){return this.repository.findDecks([e])}async getFlashcard(e){return this.repository.findFlashcards([e])}async renameInstance(e,t){await this.repository.renameInstance(e,t)}async renameDeck(e,t){await this.repository.renameDeck(e,t)}async removeInstance(e){await this.repository.deleteInstance(e);let t=await this.repository.findAllInstanceUrls(),r=await this.repository.findInstances(t);return{instanceUrls:t,instances:r}}async removeDeck(e){await this.repository.deleteDeck(e);let t=await this.repository.findAllInstanceUrls(),r=await this.repository.findInstances(t),n=await this.repository.findAllDeckUrls([e.isInSolidMemoDataInstance]),i=await this.repository.findDecks(n);return{instances:r,deckUrls:n,decks:i}}async removeFlashcard(e){await this.repository.deleteFlashcard(e);let t=await this.repository.findDecks([e.isInDeck]),r=await this.repository.findAllFlashcardUrls([e.isInDeck]),n=await this.repository.findFlashcards(r);return{deck:t[e.isInDeck],flashcardUrls:r,flashcards:n}}async updateInstance(e){await this.repository.updateInstance(e)}async updateDeck(e){await this.repository.updateDeck(e)}async updateFlashcard(e){await this.repository.updateFlashcard(e)}async resetFlashcard(e){await this.repository.resetFlashcard(e)}}function f(e){let t=new URL(e).hash.substring(1);return""!==t?t:e}function h(e){return e.endsWith("/")?e:e+"/"}class p{compute(e){return e.map(e=>{var t,r,n;return{iri:e.iri,version:e.version,front:e.front,back:e.back,isInSolidMemoDataInstance:e.isInSolidMemoDataInstance,isInDeck:e.isInDeck,interval:function e(t,r){return 1===(t=Math.ceil(t))?1:2===t?6:Math.ceil(e(t-1,r)*r)}(e.repetition,e.easeFactor),easeFactor:Math.max(parseFloat((Math.max(e.easeFactor,1.3)-.8+.28*(t=e.q)-.02*t*t).toFixed(2)),1.3),repetition:(r=e.repetition,n=e.q,(r=Math.ceil(r),n>=3)?r+1:1),lastReviewed:new Date}})}}},7181:(e,t,r)=>{"use strict";var n=r(1642).Buffer,i=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,l=/[;,"]/,u=/[;,"]|\s/,c=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,d={IDLE:1,URI:2,ATTR:4};function f(e){return e.replace(o,"")}function h(e){return s.test(e)}function p(e){return u.test(e)||!c.test(e)}class g{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var t=[],r=e.toLowerCase(),n=0;n<this.refs.length;n++)"string"==typeof this.refs[n].rel&&this.refs[n].rel.toLowerCase()===r&&t.push(this.refs[n]);return t}get(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++)"string"==typeof this.refs[n][e]&&this.refs[n][e].toLowerCase()===t&&r.push(this.refs[n]);return r}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some(t=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>r in e&&t[r]===e[r]))||this.refs.push(e),this}has(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var r=0;r<this.refs.length;r++)if("string"==typeof this.refs[r][e]&&this.refs[r][e].toLowerCase()===t)return!0;return!1}parse(e,t){e=f(e=(t=t||0)?e.slice(t):e).replace(a,"");for(var r=d.IDLE,n=e.length,t=0,i=null;t<n;)if(r===d.IDLE){if(h(e[t])){t++;continue}if("<"===e[t]){null!=i&&(null!=i.rel?this.refs.push(...g.expandRelations(i)):this.refs.push(i));var o=e.indexOf(">",t);if(-1===o)throw Error("Expected end of URI delimiter at offset "+t);i={uri:e.slice(t+1,o)},t=o,r=d.URI}else throw Error('Unexpected character "'+e[t]+'" at offset '+t);t++}else if(r===d.URI)if(h(e[t])){t++;continue}else if(";"===e[t])r=d.ATTR,t++;else if(","===e[t])r=d.IDLE,t++;else throw Error('Unexpected character "'+e[t]+'" at offset '+t);else if(r===d.ATTR){if(";"===e[t]||h(e[t])){t++;continue}var o=e.indexOf("=",t);-1===o&&(o=e.indexOf(";",t)),-1===o&&(o=e.length);var s=f(e.slice(t,o)).toLowerCase(),u="";if(t=function(e,t){for(;h(e[t]);)t++;return t}(e,t=o+1),'"'===e[t])for(t++;t<n;){if('"'===e[t]){t++;break}"\\"===e[t]&&t++,u+=e[t],t++}else{for(var o=t+1;!l.test(e[o])&&o<n;)o++;u=e.slice(t,o),t=o}switch(i[s]&&g.isSingleOccurenceAttr(s)||("*"===s[s.length-1]?i[s]=g.parseExtendedValue(u):(u="type"===s?u.toLowerCase():u,null!=i[s]?Array.isArray(i[s])?i[s].push(u):i[s]=[i[s],u]:i[s]=u)),e[t]){case",":r=d.IDLE;break;case";":r=d.ATTR}t++}else throw Error('Unknown parser state "'+r+'"');return null!=i&&(null!=i.rel?this.refs.push(...g.expandRelations(i)):this.refs.push(i)),i=null,this}toString(){for(var e=[],t="",r=null,n=0;n<this.refs.length;n++)r=this.refs[n],e.push(t=Object.keys(this.refs[n]).reduce(function(e,t){return"uri"===t?e:e+"; "+g.formatAttribute(t,r[t])},"<"+r.uri+">"));return e.join(", ")}}g.isCompatibleEncoding=function(e){return i.test(e)},g.parse=function(e,t){return new g().parse(e,t)},g.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},g.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},g.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},g.expandRelations=function(e){return e.rel.split(" ").map(function(t){var r=Object.assign({},e);return r.rel=t,r})},g.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:g.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:g.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},g.formatExtendedAttribute=function(e,t){var r=(t.encoding||"utf-8").toUpperCase(),i=t.language||"en",o="";return o=n.isBuffer(t.value)&&g.isCompatibleEncoding(r)?t.value.toString(r):n.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value),e+"="+r+"'"+i+"'"+o},g.formatAttribute=function(e,t){return Array.isArray(t)?t.map(t=>g.formatAttribute(e,t)).join("; "):"*"===e[e.length-1]||"string"!=typeof t?g.formatExtendedAttribute(e,t):(g.isTokenAttr(e)?t=p(t)?'"'+g.escapeQuotes(t)+'"':g.escapeQuotes(t):p(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t)},e.exports=g},7211:(e,t,r)=>{"use strict";let n=r(9143),i=r(1642),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:l,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:d,isReadableStream:f,isWritableStream:h}=r(918),p=r(5791),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:y}}=r(7894),{destroyer:v}=r(261),b=r(9667),_=r(6261),w=r(2661),{createDeferredPromise:S}=r(6733),x=r(9846),E=globalThis.Blob||i.Blob,k=void 0!==E?function(e){return e instanceof E}:function(e){return!1},F=globalThis.AbortController||r(8461).AbortController,{FunctionPrototypeCall:A}=r(4039);class I extends b{constructor(e){super(e),(null==e?void 0:e.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==e?void 0:e.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(e){let t,r,n,i,a,l=e.readable&&"function"!=typeof e.readable.read?_.wrap(e.readable):e.readable,u=e.writable,c=!!o(l),d=!!s(u);function f(e){let t=i;i=null,t?t(e):e&&a.destroy(e)}return a=new I({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=u&&u.writableObjectMode),readable:c,writable:d}),d&&(p(u,e=>{d=!1,e&&v(l,e),f(e)}),a._write=function(e,r,n){u.write(e,r)?n():t=n},a._final=function(e){u.end(),r=e},u.on("drain",function(){if(t){let e=t;t=null,e()}}),u.on("finish",function(){if(r){let e=r;r=null,e()}})),c&&(p(l,e=>{c=!1,e&&v(l,e),f(e)}),l.on("readable",function(){if(n){let e=n;n=null,e()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let e=l.read();if(null===e){n=a._read;return}if(!a.push(e))return}}),a._destroy=function(e,o){e||null===i||(e=new g),n=null,t=null,r=null,null===i?o(e):(i=o,v(u,e),v(l,e))},a}e.exports=function e(t,r){if(d(t))return t;if(u(t))return T({readable:t});if(c(t))return T({writable:t});if(l(t))return T({writable:!1,readable:!1});if(f(t))return T({readable:_.fromWeb(t)});if(h(t))return T({writable:w.fromWeb(t)});if("function"==typeof t){let{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:r}=S(),i=new F,o=i.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:i,done:s,cb:a}=await e;if(n.nextTick(a),s)return;if(o.aborted)throw new g(void 0,{cause:o.reason});({promise:t,resolve:r}=S()),yield i}}(),{signal:o}),write(e,t,n){let i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return x(I,e,{objectMode:!0,write:i,final:o,destroy:s});let l=null==e?void 0:e.then;if("function"==typeof l){let t,r=A(l,e,e=>{if(null!=e)throw new y("nully","body",e)},e=>{v(t,e)});return t=new I({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:s})}throw new y("Iterable, AsyncIterable or AsyncFunction",r,e)}if(k(t))return e(t.arrayBuffer());if(a(t))return x(I,t,{objectMode:!0,writable:!1});if(f(null==t?void 0:t.readable)&&h(null==t?void 0:t.writable))return I.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return T({readable:null!=t&&t.readable?u(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});let i=null==t?void 0:t.then;if("function"==typeof i){let e;return A(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{v(e,t)}),e=new I({objectMode:!0,writable:!1,read(){}})}throw new m(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},7328:(e,t,r)=>{e.exports=r(9836)},7894:(e,t,r)=>{"use strict";let{format:n,inspect:i}=r(666),{AggregateError:o}=r(4039),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c={};function d(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function h(e,t,r){r||(r=Error);class i extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let i=(t.match(/%[dfijoOs]/g)||[]).length;return(d(i===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),0===r.length)?t:n(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,c[e]=i}function p(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(e,t,r)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let o=[],s=[],a=[];for(let e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):u.test(e)?s.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){let e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();n+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();n+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var c;if(null!=(c=r.constructor)&&c.name)n+=`. Received an instance of ${r.constructor.name}`;else{let e=i(r,{depth:-1});n+=`. Received ${e}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),h("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=i(t);n.length>128&&(n=n.slice(0,128)+"...");let o=e.includes(".")?"property":"argument";return`The ${o} '${e}' ${r}. Received ${n}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;let i=null!=r&&null!=(n=r.constructor)&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError),h("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");let r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;if(d(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>0x100000000)n=f(String(r));else if("bigint"==typeof r){n=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(n=f(n)),n+="n"}else n=i(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new s([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:p,codes:c}},8090:(e,t,r)=>{"use strict";r.d(t,{Y9:()=>w,QB:()=>x});var n=r(6029),i=r(6207),o=r(3606),s=r(4587),a=r.n(s),l=r(6238),u=r(7127);function c(e){let t,{size:r}=e,{NEXT_PUBLIC_BASE_PATH:i}=(0,l._)();switch(r){case"xs":t=46;break;case"sm":t=93;break;case"md":t=185;break;case"lg":t=370;break;case"xl":t=740}return(0,n.jsx)(a(),{src:"".concat((0,u.Il)(i),"sm-logo-").concat(r,".png"),width:t,height:t,alt:"Picture of the author"})}var d=r(8230),f=r.n(d),h=r(5729),p=r(5229);let g=(0,p.A)("sun-moon",[["path",{d:"M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4",key:"1fu5g2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.9 4.9 1.4 1.4",key:"b9915j"}],["path",{d:"m17.7 17.7 1.4 1.4",key:"qc3ed3"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.3 17.7-1.4 1.4",key:"5gca6"}],["path",{d:"m19.1 4.9-1.4 1.4",key:"wpu9u6"}]]),m=(0,p.A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),y=(0,p.A)("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var v=r(6764),b=r(9278);function _(){let{theme:e,setTheme:t}=(0,b.D)(),[r,i]=(0,h.useState)();return(0,h.useEffect)(()=>{"system"===e&&i((0,n.jsx)(g,{})),"light"===e&&i((0,n.jsx)(m,{})),"dark"===e&&i((0,n.jsx)(y,{}))},[e]),(0,n.jsxs)(o.rI,{children:[(0,n.jsx)(o.ty,{className:"border-2 border-secondary hover:bg-secondary p-1 rounded-md",title:"Select theme",children:r}),(0,n.jsxs)(o.SQ,{children:[(0,n.jsxs)(o._2,{onClick:()=>t("system"),children:["System ","system"===e&&(0,n.jsx)(v.A,{})]}),(0,n.jsxs)(o._2,{onClick:()=>t("light"),children:["Light ","light"===e&&(0,n.jsx)(v.A,{})]}),(0,n.jsxs)(o._2,{onClick:()=>t("dark"),children:["Dark ","dark"===e&&(0,n.jsx)(v.A,{})]})]})]})}function w(e){let{onLogOut:t}=e,{getAuthService:r}=(0,h.useContext)(i.h),s=r();return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative flex p-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(f(),{href:"/",children:(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(c,{size:"xs"}),(0,n.jsx)("h1",{children:"Solid Memo"}),(0,n.jsx)(_,{})]})}),s.isLoggedIn()&&s.getWebId()&&(0,n.jsxs)("div",{className:"break-all italic opacity-50",children:["Logged in as: ",s.getWebId()]})]}),s.isLoggedIn()&&s.getWebId()&&(0,n.jsx)("div",{className:"absolute right-0",children:(0,n.jsx)(o.$n,{variant:"secondary",onClick:t,children:"Log out"})})]})})}var S=r(8429);function x(e){let{className:t}=e,r=(0,h.useRef)(null),{getAuthService:s}=(0,h.useContext)(i.h),a=s();return(0,n.jsx)("div",{className:(0,S.cn)("flex flex-col gap-6",t),children:(0,n.jsxs)(o.Zp,{children:[(0,n.jsxs)(o.aR,{className:"text-center",children:[(0,n.jsx)(o.ZB,{className:"text-xl",children:"Welcome to Solid Memo"}),(0,n.jsx)(o.BT,{children:"Choose your Solid WebID provider"})]}),(0,n.jsx)(o.Wu,{children:(0,n.jsx)("form",{children:(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)("div",{className:"flex flex-col gap-4",children:[{url:"https://login.inrupt.com",name:"Inrupt PodSpaces"},{url:"http://localhost:3000",name:"Localhost:3000"}].map(e=>(0,n.jsx)(o.$n,{className:"w-full",onClick:t=>{t.preventDefault(),void 0!==a.logInWithOidcIssuer&&a.logInWithOidcIssuer({oidcIssuer:e.url,redirectUrl:new URL((0,l._)().NEXT_PUBLIC_BASE_PATH,window.location.href).toString(),clientName:"Solid Memo"}).catch(e=>{console.error("Failed with error:",e)})},children:e.name},e.url))}),(0,n.jsx)("div",{className:"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t",children:(0,n.jsx)("span",{className:"text-muted-foreground relative z-10 px-2",children:"Or continue with"})}),(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(o.JU,{htmlFor:"email",children:"Your Solid WebID"}),(0,n.jsx)(o.pd,{ref:r,id:"email",type:"email",placeholder:"https://your.pod/profile/card#me",required:!0})]}),(0,n.jsx)(o.$n,{type:"submit",className:"w-full",onClick:e=>(e.preventDefault(),r.current)?a.logInWithWebId?void a.logInWithWebId({webId:r.current.value,redirectUrl:new URL((0,l._)().NEXT_PUBLIC_BASE_PATH,window.location.href).toString(),clientName:"Solid Memo"}).catch(e=>{console.error("Failed with error:",e)}):void console.error("Failed because authService.logInWithWebId is falsy"):void console.error("Failed because inputRef.current is falsy"),children:"Login with WebID"})]}),(0,n.jsxs)("div",{className:"text-center text-sm",children:["Don't have a WebID?"," ",(0,n.jsx)("a",{href:"https://solidproject.org/for-developers#hosted-pod-services",className:"underline underline-offset-4",children:"Find a WebID provider"})]})]})})})]})})}},8098:(e,t,r)=>{"use strict";let n=globalThis.AbortController||r(8461).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:l}=r(7894),{validateAbortSignal:u,validateInteger:c,validateObject:d}=r(1204),f=r(4039).Symbol("kWeak"),h=r(4039).Symbol("kResistStopPropagation"),{finished:p}=r(5791),g=r(3463),{addAbortSignalNoValidate:m}=r(9110),{isWritable:y,isNodeStream:v}=r(918),{deprecate:b}=r(6733),{ArrayPrototypePush:_,Boolean:w,MathFloor:S,Number:x,NumberIsNaN:E,Promise:k,PromiseReject:F,PromiseResolve:A,PromisePrototypeThen:I,Symbol:T}=r(4039),R=T("kEmpty"),C=T("kEof");function P(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal");let n=1;(null==t?void 0:t.concurrency)!=null&&(n=S(t.concurrency));let i=n-1;return(null==t?void 0:t.highWaterMark)!=null&&(i=S(t.highWaterMark)),c(n,"options.concurrency",1),c(i,"options.highWaterMark",0),i+=n,(async function*(){let o,s,a=r(6733).AbortSignalAny([null==t?void 0:t.signal].filter(w)),u=this,c=[],d={signal:a},f=!1,h=0;function p(){f=!0,g()}function g(){h-=1,m()}function m(){s&&!f&&h<n&&c.length<i&&(s(),s=null)}!async function(){try{for await(let t of u){if(f)return;if(a.aborted)throw new l;try{if((t=e(t,d))===R)continue;t=A(t)}catch(e){t=F(e)}h+=1,I(t,g,p),c.push(t),o&&(o(),o=null),!f&&(c.length>=i||h>=n)&&await new k(e=>{s=e})}c.push(C)}catch(t){let e=F(t);I(e,g,p),c.push(e)}finally{f=!0,o&&(o(),o=null)}}();try{for(;;){for(;c.length>0;){let e=await c[0];if(e===C)return;if(a.aborted)throw new l;e!==R&&(yield e),c.shift(),m()}await new k(e=>{o=e})}}finally{f=!0,s&&(s(),s=null)}}).call(this)}async function N(e,t){for await(let r of D.call(this,e,t))return!0;return!1}async function j(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await N.call(this,async(...t)=>!await e(...t),t)}async function O(e,t){for await(let r of D.call(this,e,t))return r}async function L(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r),R}for await(let e of P.call(this,r,t));}function D(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r)?t:R}return P.call(this,r,t)}class U extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function M(e,t,r){var i,s;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&d(r,"options"),(null==r?void 0:r.signal)!=null&&u(r.signal,"options.signal");let a=arguments.length>1;if(null!=r&&null!=(i=r.signal)&&i.aborted){let e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}let c=new n,g=c.signal;null!=r&&r.signal&&r.signal.addEventListener("abort",()=>c.abort(),{once:!0,[f]:this,[h]:!0});let m=!1;try{for await(let n of this){if(m=!0,null!=r&&null!=(s=r.signal)&&s.aborted)throw new l;a?t=await e(t,n,{signal:g}):(t=n,a=!0)}if(!m&&!a)throw new U}finally{c.abort()}return t}async function B(e){null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&u(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l(void 0,{cause:e.signal.reason});_(t,n)}return t}function H(e){if(E(e=x(e)))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b(function(e){return null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&u(e.signal,"options.signal"),(async function*(){let t=0;for await(let n of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),e=H(e),(async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;e--<=0&&(yield r)}}).call(this)},filter:D,flatMap:function(e,t){let r=P.call(this,e,t);return(async function*(){for await(let e of r)yield*e}).call(this)},map:P,take:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),e=H(e),(async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;if(e-- >0&&(yield r),e<=0)return}}).call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),v(e)&&!y(e))throw new i("stream",e,"must be writable");let r=g(this,e);return null!=t&&t.signal&&m(t.signal,r),r}},e.exports.promiseReturningOperators={every:j,forEach:L,reduce:M,toArray:B,some:N,find:O}},8117:(e,t,r)=>{"use strict";let n,i,o,s;r.d(t,{qY:()=>eD,_:()=>tL});let a=new TextEncoder,l=new TextDecoder;function u(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}let c=e=>{let t=e;"string"==typeof t&&(t=a.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},d=e=>c(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),f=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},h=e=>{let t=e;t instanceof Uint8Array&&(t=l.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return f(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}};class p extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}p.code="ERR_JOSE_GENERIC";class g extends p{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n,this.payload=t}}g.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class m extends p{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n,this.payload=t}}m.code="ERR_JWT_EXPIRED";class y extends p{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}y.code="ERR_JOSE_ALG_NOT_ALLOWED";class v extends p{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}v.code="ERR_JOSE_NOT_SUPPORTED";class b extends p{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}b.code="ERR_JWE_DECRYPTION_FAILED";class _ extends p{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}_.code="ERR_JWE_INVALID";class w extends p{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}w.code="ERR_JWS_INVALID";class S extends p{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}S.code="ERR_JWT_INVALID";class x extends p{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}x.code="ERR_JWK_INVALID";class E extends p{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}E.code="ERR_JWKS_INVALID";class k extends p{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}k.code="ERR_JWKS_NO_MATCHING_KEY";class F extends p{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator,F.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class A extends p{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}A.code="ERR_JWKS_TIMEOUT";class I extends p{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function T(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new v(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}I.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";let R=crypto,C=e=>e instanceof CryptoKey,P=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function N(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function j(e,t){return e.name===t}function O(e){return parseInt(e.name.slice(4),10)}function L(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let D=(e,...t)=>L("Key must be ",e,...t);function U(e,t,...r){return L(`Key for the ${e} algorithm must be `,t,...r)}let M=e=>!!C(e)||e?.[Symbol.toStringTag]==="KeyObject",B=["CryptoKey"];function H(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $(e){return H(e)&&"string"==typeof e.kty}let K=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new v('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new v('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new v('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new v('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n=[t,e.ext??!1,e.key_ops??r],i={...e};return delete i.alg,delete i.use,R.subtle.importKey("jwk",i,...n)},W=e=>h(e),V=e=>e?.[Symbol.toStringTag]==="KeyObject",q=async(e,t,r,n,i=!1)=>{let o=e.get(t);if(o?.[n])return o[n];let s=await K({...r,alg:n});return i&&Object.freeze(t),o?o[n]=s:e.set(t,{[n]:s}),s},z={normalizePublicKey:(e,t)=>{if(V(e)){let r=e.export({format:"jwk"});return(delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k)?W(r.k):(i||(i=new WeakMap),q(i,e,r,t))}return $(e)?e.k?h(e.k):(i||(i=new WeakMap),q(i,e,e,t,!0)):e},normalizePrivateKey:(e,t)=>{if(V(e)){let r=e.export({format:"jwk"});return r.k?W(r.k):(n||(n=new WeakMap),q(n,e,r,t))}return $(e)?e.k?h(e.k):(n||(n=new WeakMap),q(n,e,e,t,!0)):e}};async function J(e,t,r){if("sign"===r&&(t=await z.normalizePrivateKey(t,e)),"verify"===r&&(t=await z.normalizePublicKey(t,e)),C(t))return!function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!j(e.algorithm,"HMAC"))throw N("HMAC");let r=parseInt(t.slice(2),10);if(O(e.algorithm.hash)!==r)throw N(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!j(e.algorithm,"RSASSA-PKCS1-v1_5"))throw N("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(O(e.algorithm.hash)!==r)throw N(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!j(e.algorithm,"RSA-PSS"))throw N("RSA-PSS");let r=parseInt(t.slice(2),10);if(O(e.algorithm.hash)!==r)throw N(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw N("Ed25519 or Ed448");break;case"Ed25519":if(!j(e.algorithm,"Ed25519"))throw N("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!j(e.algorithm,"ECDSA"))throw N("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw N(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}var n=e,i=r;if(i.length&&!i.some(e=>n.usages.includes(e))){let e="CryptoKey does not support this operation, its usages must include ";if(i.length>2){let t=i.pop();e+=`one of ${i.join(", ")}, or ${t}.`}else 2===i.length?e+=`one of ${i[0]} or ${i[1]}.`:e+=`${i[0]}.`;throw TypeError(e)}}(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(D(t,...B));return R.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw TypeError(D(t,...B,"Uint8Array","JSON Web Key"))}let Z=async(e,t,r,n)=>{let i=await J(e,t,"verify");P(e,i);let o=T(e,i.algorithm);try{return await R.subtle.verify(o,i,r,n)}catch{return!1}},G=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},Y=e=>e?.[Symbol.toStringTag],X=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},Q=(e,t,r,n)=>{if(!(t instanceof Uint8Array)){if(n&&$(t)){if(function(e){return $(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&X(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!M(t))throw TypeError(U(e,t,...B,"Uint8Array",n?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${Y(t)} instances for symmetric algorithms must be of type "secret"`)}},ee=(e,t,r,n)=>{if(n&&$(t))switch(r){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&X(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&X(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!M(t))throw TypeError(U(e,t,...B,n?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${Y(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${Y(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${Y(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${Y(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${Y(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function et(e,t,r,n){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?Q(t,r,n,e):ee(t,r,n,e)}et.bind(void 0,!1);let er=et.bind(void 0,!0),en=function(e,t,r,n,i){let o;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!o.has(s))throw new v(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===n[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)},ei=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function eo(e,t){if(!H(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return h(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new v('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return K({...e,alg:t});default:throw new v('Unsupported "kty" (Key Type) Parameter value')}}async function es(e,t,r){let n,i;if(!H(e))throw new w("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new w('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new w("JWS Protected Header incorrect type");if(void 0===e.payload)throw new w("JWS Payload missing");if("string"!=typeof e.signature)throw new w("JWS Signature missing or incorrect type");if(void 0!==e.header&&!H(e.header))throw new w("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let t=h(e.protected);o=JSON.parse(l.decode(t))}catch{throw new w("JWS Protected Header is invalid")}if(!G(o,e.header))throw new w("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let s={...o,...e.header},c=en(w,new Map([["b64",!0]]),r?.crit,o,s),d=!0;if(c.has("b64")&&"boolean"!=typeof(d=o.b64))throw new w('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=s;if("string"!=typeof f||!f)throw new w('JWS "alg" (Algorithm) Header Parameter missing or invalid');let p=r&&ei("algorithms",r.algorithms);if(p&&!p.has(f))throw new y('"alg" (Algorithm) Header Parameter value not allowed');if(d){if("string"!=typeof e.payload)throw new w("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new w("JWS Payload must be a string or an Uint8Array instance");let g=!1;"function"==typeof t?(t=await t(o,e),g=!0,er(f,t,"verify"),$(t)&&(t=await eo(t,f))):er(f,t,"verify");let m=u(a.encode(e.protected??""),a.encode("."),"string"==typeof e.payload?a.encode(e.payload):e.payload);try{n=h(e.signature)}catch{throw new w("Failed to base64url decode the signature")}if(!await Z(f,t,n,m))throw new I;if(d)try{i=h(e.payload)}catch{throw new w("Failed to base64url decode the payload")}else i="string"==typeof e.payload?a.encode(e.payload):e.payload;let v={payload:i};return(void 0!==e.protected&&(v.protectedHeader=o),void 0!==e.header&&(v.unprotectedHeader=e.header),g)?{...v,key:t}:v}async function ea(e,t,r){if(e instanceof Uint8Array&&(e=l.decode(e)),"string"!=typeof e)throw new w("Compact JWS must be a string or Uint8Array");let{0:n,1:i,2:o,length:s}=e.split(".");if(3!==s)throw new w("Invalid Compact JWS");let a=await es({payload:i,protected:n,signature:o},t,r),u={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...u,key:a.key}:u}let el=e=>Math.floor(e.getTime()/1e3),eu=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,ec=e=>{let t,r=eu.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t},ed=e=>e.toLowerCase().replace(/^application\//,""),ef=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),eh=(e,t,r={})=>{let n,i;try{n=JSON.parse(l.decode(t))}catch{}if(!H(n))throw new S("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||ed(e.typ)!==ed(o)))throw new g('unexpected "typ" JWT header value',n,"typ","check_failed");let{requiredClaims:s=[],issuer:a,subject:u,audience:c,maxTokenAge:d}=r,f=[...s];for(let e of(void 0!==d&&f.push("iat"),void 0!==c&&f.push("aud"),void 0!==u&&f.push("sub"),void 0!==a&&f.push("iss"),new Set(f.reverse())))if(!(e in n))throw new g(`missing required "${e}" claim`,n,e,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(n.iss))throw new g('unexpected "iss" claim value',n,"iss","check_failed");if(u&&n.sub!==u)throw new g('unexpected "sub" claim value',n,"sub","check_failed");if(c&&!ef(n.aud,"string"==typeof c?[c]:c))throw new g('unexpected "aud" claim value',n,"aud","check_failed");switch(typeof r.clockTolerance){case"string":i=ec(r.clockTolerance);break;case"number":i=r.clockTolerance;break;case"undefined":i=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,p=el(h||new Date);if((void 0!==n.iat||d)&&"number"!=typeof n.iat)throw new g('"iat" claim must be a number',n,"iat","invalid");if(void 0!==n.nbf){if("number"!=typeof n.nbf)throw new g('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>p+i)throw new g('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(void 0!==n.exp){if("number"!=typeof n.exp)throw new g('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=p-i)throw new m('"exp" claim timestamp check failed',n,"exp","check_failed")}if(d){let e=p-n.iat;if(e-i>("number"==typeof d?d:ec(d)))throw new m('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(e<0-i)throw new g('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n};async function ep(e,t,r){let n=await ea(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new S("JWTs MUST NOT use unencoded payload");let i={payload:eh(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...i,key:n.key}:i}let eg=async(e,t,r)=>{let n,i,o=!1;"function"==typeof AbortController&&(n=new AbortController,i=setTimeout(()=>{o=!0,n.abort()},t));let s=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(e=>{if(o)throw new A;throw e});if(void 0!==i&&clearTimeout(i),200!==s.status)throw new p("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new p("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function em(e){return H(e)}function ey(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class ev{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(em)}(e))throw new E("JSON Web Key Set malformed");this._jwks=ey(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new v('Unsupported "alg" value for a JSON Web Key Set')}}(r),o=this._jwks.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:s,length:a}=o;if(0===a)throw new k;if(1!==a){let e=new F,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of o)try{yield await eb(t,e,r)}catch{}},e}return eb(this._cached,s,r)}}async function eb(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await eo({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new E("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function e_(e){let t=new ev(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>ey(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(o="jose/v5.10.0");let ew=Symbol();class eS{constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[ew]!==void 0&&(this._cache=t?.[ew],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!H(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,H)}(t?.[ew],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=e_(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof k&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);o&&!e.has("User-Agent")&&(e.set("User-Agent",o),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=eg(this._url,this._timeoutDuration,this._options).then(e=>{this._local=e_(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}let ex=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:d(e)};if(!C(e))throw TypeError(D(e,...B,"Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...o}=await R.subtle.exportKey("jwk",e);return o};async function eE(e){return ex(e)}let ek=async(e,t,r)=>{let n=await J(e,t,"sign");return P(e,n),new Uint8Array(await R.subtle.sign(T(e,n.algorithm),n,r))};class eF{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new w("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!G(this._protectedHeader,this._unprotectedHeader))throw new w("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},i=en(w,new Map([["b64",!0]]),t?.crit,this._protectedHeader,n),o=!0;if(i.has("b64")&&"boolean"!=typeof(o=this._protectedHeader.b64))throw new w('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=n;if("string"!=typeof s||!s)throw new w('JWS "alg" (Algorithm) Header Parameter missing or invalid');er(s,e,"sign");let c=this._payload;o&&(c=a.encode(d(c)));let f=u(r=this._protectedHeader?a.encode(d(JSON.stringify(this._protectedHeader))):a.encode(""),a.encode("."),c),h={signature:d(await ek(s,e,f)),payload:""};return o&&(h.payload=l.decode(c)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=l.decode(r)),h}}class eA{constructor(e){this._flattened=new eF(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}function eI(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class eT{constructor(e={}){if(!H(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:eI("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:eI("setNotBefore",el(e))}:this._payload={...this._payload,nbf:el(new Date)+ec(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:eI("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:eI("setExpirationTime",el(e))}:this._payload={...this._payload,exp:el(new Date)+ec(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:el(new Date)}:e instanceof Date?this._payload={...this._payload,iat:eI("setIssuedAt",el(e))}:"string"==typeof e?this._payload={...this._payload,iat:eI("setIssuedAt",el(new Date)+ec(e))}:this._payload={...this._payload,iat:eI("setIssuedAt",e)},this}}class eR extends eT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new eA(a.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new S("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}function eC(e){let t=e?.modulusLength??2048;if("number"!=typeof t||t<2048)throw new v("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function eP(e,t){let r,n;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eC(t)},n=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eC(t)},n=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eC(t)},n=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},n=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},n=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},n=["sign","verify"];break;case"Ed25519":r={name:"Ed25519"},n=["sign","verify"];break;case"EdDSA":{n=["sign","verify"];let e=t?.crv??"Ed25519";switch(e){case"Ed25519":case"Ed448":r={name:e};break;default:throw new v("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{n=["deriveKey","deriveBits"];let e=t?.crv??"P-256";switch(e){case"P-256":case"P-384":case"P-521":r={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":r={name:e};break;default:throw new v("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new v('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return R.subtle.generateKey(r,t?.extractable??!1,n)}async function eN(e,t){return eP(e,t)}var ej=r(6002);let eO="solidClientAuthn:",eL=["ES256","RS256"],eD={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",NEW_TOKENS:"newTokens",AUTHORIZATION_REQUEST:"authorizationRequest",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},eU="openid offline_access webid";class eM{handleables;constructor(e){this.handleables=e,this.handleables=e}async getProperHandler(e){let t=await Promise.all(this.handleables.map(t=>t.canHandle(...e)));for(let e=0;e<t.length;e+=1)if(t[e])return this.handleables[e];return null}async canHandle(...e){return await this.getProperHandler(e)!==null}async handle(...e){let t=await this.getProperHandler(e);if(t)return t.handle(...e);throw Error(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map(e=>{try{return JSON.stringify(e)}catch(t){return e.toString()}}).join(", ")}`)}}async function eB(e,t,r,n){let i,o;try{let{payload:o}=await ep(e,function(e,t){let r=new eS(e,void 0),n=async(e,t)=>r.getKey(e,t);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n}(new URL(t)),{issuer:r,audience:n});i=o}catch(e){throw Error(`Token verification failed: ${e.stack}`)}if("string"==typeof i.azp&&(o=i.azp),"string"==typeof i.webid)return{webId:i.webid,clientId:o};if("string"!=typeof i.sub)throw Error(`The token ${JSON.stringify(i)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(i.sub),{webId:i.sub,clientId:o}}catch(e){throw Error(`The token has no 'webid' claim, and its 'sub' claim of [${i.sub}] is invalid as a URL - error [${e}].`)}}function eH(e){try{let t=new URL(e),r=!t.searchParams.has("code")&&!t.searchParams.has("state"),n=""===t.hash;return r&&n}catch(e){return!1}}function e$(e){let t=new URL(e);return t.searchParams.delete("state"),t.searchParams.delete("code"),t.searchParams.delete("error"),t.searchParams.delete("error_description"),t.searchParams.delete("iss"),t}class eK{storageUtility;redirector;constructor(e,t){this.storageUtility=e,this.redirector=t,this.storageUtility=e,this.redirector=t}parametersGuard=e=>void 0!==e.issuerConfiguration.grantTypesSupported&&e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1&&void 0!==e.redirectUrl;async canHandle(e){return this.parametersGuard(e)}async setupRedirectHandler({oidcLoginOptions:e,state:t,codeVerifier:r,targetUrl:n}){var i;if(!this.parametersGuard(e))throw Error("The authorization code grant requires a redirectUrl.");await Promise.all([this.storageUtility.setForUser(t,{sessionId:e.sessionId}),this.storageUtility.setForUser(e.sessionId,{codeVerifier:r,issuer:e.issuer.toString(),redirectUrl:e.redirectUrl,dpop:(!!e.dpop).toString(),keepAlive:(i=e.keepAlive,"boolean"!=typeof i||!!i).toString()})]),this.redirector.redirect(n,{handleRedirect:e.handleRedirect})}}class eW{sessionInfoManager;constructor(e){this.sessionInfoManager=e,this.sessionInfoManager=e}async canHandle(){return!0}async handle(e){await this.sessionInfoManager.clear(e)}}class eV{redirector;constructor(e){this.redirector=e,this.redirector=e}async canHandle(e,t){return t?.logoutType==="idp"}async handle(e,t){if(t?.logoutType!=="idp")throw Error("Attempting to call idp logout handler to perform app logout");if(void 0===t.toLogoutUrl)throw Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(t.toLogoutUrl(t),{handleRedirect:t.handleRedirect})}}class eq{handlers;constructor(e,t){this.handlers=[new eW(e),new eV(t)]}async canHandle(){return!0}async handle(e,t){for(let r of this.handlers)await r.canHandle(e,t)&&await r.handle(e,t)}}function ez(){return{isLoggedIn:!1,sessionId:(0,ej.A)(),fetch:(...e)=>fetch(...e)}}async function eJ(e,t){await Promise.all([t.deleteAllUserData(e,{secure:!1}),t.deleteAllUserData(e,{secure:!0})])}class eZ{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}update(e,t){throw Error("Not Implemented")}set(e,t){throw Error("Not Implemented")}get(e){throw Error("Not implemented")}async getAll(){throw Error("Not implemented")}async clear(e){return eJ(e,this.storageUtility)}async register(e){throw Error("Not implemented")}async getRegisteredSessionIdAll(){throw Error("Not implemented")}async clearAll(){throw Error("Not implemented")}async setOidcContext(e,t){throw Error("Not implemented")}}function eG(e){try{return new URL(e),!0}catch{return!1}}async function eY(e,t,r,n){let i;if(t.scopesSupported.includes("webid")&&void 0!==e.clientId&&eG(e.clientId))i={clientId:e.clientId,clientName:e.clientName,clientType:"solid-oidc"};else{if(void 0===e.clientId||eG(e.clientId))return n.getClient({sessionId:e.sessionId,clientName:e.clientName,redirectUrl:e.redirectUrl},t);i={clientId:e.clientId,clientSecret:e.clientSecret,clientName:e.clientName,clientType:"static"}}let o={clientId:i.clientId,clientType:i.clientType};return"static"===i.clientType&&(o.clientSecret=i.clientSecret),i.clientName&&(o.clientName=i.clientName),await r.setForUser(e.sessionId,o),i}let eX=(e,t)=>fetch(e,t);class eQ{loginHandler;redirectHandler;logoutHandler;sessionInfoManager;issuerConfigFetcher;boundLogout;constructor(e,t,r,n,i){this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=n,this.issuerConfigFetcher=i,this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=n,this.issuerConfigFetcher=i}fetch=eX;logout=async(e,t)=>{await this.logoutHandler.handle(e,t?.logoutType==="idp"?{...t,toLogoutUrl:this.boundLogout}:t),this.fetch=eX,delete this.boundLogout};getSessionInfo=async e=>this.sessionInfoManager.get(e);getAllSessionInfo=async()=>this.sessionInfoManager.getAll()}async function e0(e,t,r){try{let[n,i,o,s,a]=await Promise.all([t.getForUser(e,"issuer",{errorIfNull:!0}),t.getForUser(e,"codeVerifier"),t.getForUser(e,"redirectUrl"),t.getForUser(e,"dpop",{errorIfNull:!0}),t.getForUser(e,"keepAlive")]);await t.deleteForUser(e,"codeVerifier");let l=await r.fetchConfig(n);return{codeVerifier:i,redirectUrl:o,issuerConfig:l,dpop:"true"===s,keepAlive:"string"!=typeof a||"true"===a}}catch(t){throw Error(`Failed to retrieve OIDC context from storage associated with session [${e}]: ${t}`)}}async function e1(e,t,r,n,i,o,s,a){void 0!==o&&await e.setForUser(t,{refreshToken:o},{secure:s}),void 0!==r&&await e.setForUser(t,{webId:r},{secure:s}),void 0!==n&&await e.setForUser(t,{clientId:n},{secure:s}),void 0!==i&&await e.setForUser(t,{isLoggedIn:i},{secure:s}),void 0!==a&&await e.setForUser(t,{publicKey:JSON.stringify(a.publicKey),privateKey:JSON.stringify(await eE(a.privateKey))},{secure:s})}class e2{secureStorage;insecureStorage;constructor(e,t){this.secureStorage=e,this.insecureStorage=t,this.secureStorage=e,this.insecureStorage=t}getKey(e){return`solidClientAuthenticationUser:${e}`}async getUserData(e,t){let r=await (t?this.secureStorage:this.insecureStorage).get(this.getKey(e));if(void 0===r)return{};try{return JSON.parse(r)}catch(n){throw Error(`Data for user [${e}] in [${t?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${r}`)}}async setUserData(e,t,r){await (r?this.secureStorage:this.insecureStorage).set(this.getKey(e),JSON.stringify(t))}async get(e,t){let r=await (t?.secure?this.secureStorage:this.insecureStorage).get(e);if(void 0===r&&t?.errorIfNull)throw Error(`[${e}] is not stored`);return r}async set(e,t,r){return(r?.secure?this.secureStorage:this.insecureStorage).set(e,t)}async delete(e,t){return(t?.secure?this.secureStorage:this.insecureStorage).delete(e)}async getForUser(e,t,r){let n,i=await this.getUserData(e,r?.secure);if(i&&i[t]||(n=void 0),void 0===(n=i[t])&&r?.errorIfNull)throw Error(`Field [${t}] for user [${e}] is not stored`);return n||void 0}async setForUser(e,t,r){let n;try{n=await this.getUserData(e,r?.secure)}catch{n={}}await this.setUserData(e,{...n,...t},r?.secure)}async deleteForUser(e,t,r){let n=await this.getUserData(e,r?.secure);delete n[t],await this.setUserData(e,n,r?.secure)}async deleteAllUserData(e,t){await (t?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(e))}}class e6{map={};async get(e){return this.map[e]||void 0}async set(e,t){this.map[e]=t}async delete(e){delete this.map[e]}}class e3 extends Error{constructor(e){super(e)}}class e5 extends Error{missingFields;constructor(e){super(`Invalid response from OIDC provider: missing fields ${e}`),this.missingFields=e}}class e8 extends Error{error;errorDescription;constructor(e,t,r){super(e),this.error=t,this.errorDescription=r}}async function e4(e,t,r){return new eR({htu:function(e){let t=new URL(e);return new URL(t.pathname,t.origin).toString()}(e),htm:t.toUpperCase(),jti:(0,ej.A)()}).setProtectedHeader({alg:eL[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{})}async function e9(){let{privateKey:e,publicKey:t}=await eN(eL[0]),r={privateKey:e,publicKey:await eE(t)};return[r.publicKey.alg]=eL,r}async function e7(e,t,r,n){let i=new Headers(n?.headers);return i.set("Authorization",`DPoP ${t}`),i.set("DPoP",await e4(e,n?.method??"get",r)),{...n,headers:i}}async function te(e,t,r,n){if(void 0!==r)return e7(e,t,r,n);let i=new Headers(n?.headers);return i.set("Authorization",`Bearer ${t}`),{...n,headers:i}}async function tt(e,t,r,n){return fetch(t,await te(t.toString(),e,n,r))}async function tr(e,t,r){let n=await e.tokenRefresher.refresh(e.sessionId,e.refreshToken,t);return r?.emit(eD.SESSION_EXTENDED,n.expiresIn??600),{accessToken:n.accessToken,refreshToken:n.refreshToken,expiresIn:n.expiresIn}}let tn=e=>void 0!==e?e-5>0?e-5:e:600;var ti=r(5978),to=r(4681);async function ts(e,t){var r;if(!t.registrationEndpoint)throw Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");let n=(r=t.idTokenSigningAlgValuesSupported,eL.find(e=>r.includes(e))??null),i={client_name:e.clientName,application_type:"web",redirect_uris:[e.redirectUrl?.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},o=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(o.ok){let t=await o.json();return!function(e,t){var r;if("string"!=typeof e.client_id)throw Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&Array.isArray((r=e).redirect_uris)&&r.redirect_uris.every(e=>"string"==typeof e)&&e.redirect_uris[0]!==t.redirectUrl.toString())throw Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}(t,e),{clientId:t.client_id,clientSecret:t.client_secret,expiresAt:t.client_secret_expires_at,idTokenSignedResponseAlg:t.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===o.status&&function(e,t){if("invalid_redirect_uri"===e.error)throw Error(`Dynamic client registration failed: the provided redirect uri [${t.redirectUrl?.toString()}] is invalid - ${e.error_description??""}`);if("invalid_client_metadata"===e.error)throw Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${e.error_description??""}`);throw Error(`Dynamic client registration failed: ${e.error} - ${e.error_description??""}`)}(await o.json(),e),Error(`Dynamic client registration failed: the server returned ${o.status} ${o.statusText} - ${await o.text()}`)}function ta(e){return void 0!==e.error_description&&"string"==typeof e.error_description}function tl(e,t){if(void 0!==e.error&&"string"==typeof e.error)throw new e8(`Token endpoint returned error [${e.error}]${ta(e)?`: ${e.error_description}`:""}${void 0!==e.error_uri&&"string"==typeof e.error_uri?` (see ${e.error_uri})`:""}`,e.error,ta(e)?e.error_description:void 0);if(void 0===e.access_token||"string"!=typeof e.access_token)throw new e5(["access_token"]);if(void 0===e.id_token||"string"!=typeof e.id_token)throw new e5(["id_token"]);if(void 0===e.token_type||"string"!=typeof e.token_type)throw new e5(["token_type"]);if(void 0!==e.expires_in&&"number"!=typeof e.expires_in)throw new e5(["expires_in"]);if(!t&&"bearer"!==e.token_type.toLowerCase())throw Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function tu(e,t,r,n){let i;if(r.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(r.grantType)))throw Error(`The issuer [${e.issuer}] does not support the [${r.grantType}] grant`);if(!e.tokenEndpoint)throw Error(`This issuer [${e.issuer}] does not have a token endpoint`);let o={"content-type":"application/x-www-form-urlencoded"};n&&(i=await e9(),o.DPoP=await e4(e.tokenEndpoint,"POST",i)),t.clientSecret&&(o.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);let s={method:"POST",headers:o,body:new URLSearchParams({grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId}).toString()},a=await fetch(e.tokenEndpoint,s),l=tl(await a.json(),n),{webId:u,clientId:c}=await eB(l.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:l.access_token,idToken:l.id_token,refreshToken:void 0!==l.refresh_token&&"string"==typeof l.refresh_token?l.refresh_token:void 0,webId:u,clientId:c,dpopKey:i,expiresIn:l.expires_in}}let tc=e=>{try{return new URL(e),!0}catch{return!1}};async function td(e,t,r,n){let i;if(void 0===r.clientId)throw Error("No client ID available when trying to refresh the access token.");let o={grant_type:"refresh_token",refresh_token:e,scope:eU},s={};void 0!==n&&(s={DPoP:await e4(t.tokenEndpoint,"POST",n)});let a={};void 0!==r.clientSecret?a={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:tc(r.clientId)&&(o.client_id=r.clientId);let l=await fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...s,...a,"Content-Type":"application/x-www-form-urlencoded"}});try{i=await l.json()}catch(e){throw Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}let u=tl(i,void 0!==n),{webId:c}=await eB(u.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:u.access_token,idToken:u.id_token,refreshToken:"string"==typeof u.refresh_token?u.refresh_token:void 0,webId:c,dpopKey:n,expiresIn:u.expires_in}}async function tf(){let e=new to.OidcClient({response_mode:"query"});await e.clearStaleState(new to.WebStorageStateStore({}));let t=window.localStorage,r=[];for(let e=0;e<=t.length;e+=1){let n=t.key(e);n&&(n.match(/^oidc\..+$/)||n.match(/^solidClientAuthenticationUser:.+$/))&&r.push(n)}r.forEach(e=>t.removeItem(e))}class th extends e2{constructor(e,t){super(e,t)}}class tp extends eQ{login=async(e,t)=>{"none"!==e.prompt&&await this.sessionInfoManager.clear(e.sessionId);let r=e.redirectUrl??function(e){let t=e$(e);return(t.hash="",e.includes(`${t.origin}/`))?t.href:`${t.origin}${t.href.substring(t.origin.length+1)}`}(window.location.href);if(!eH(r))throw Error(`${r} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...e,redirectUrl:r,clientName:e.clientName??e.clientId,eventEmitter:t})};validateCurrentSession=async e=>{let t=await this.sessionInfoManager.get(e);return void 0===t||void 0===t.clientAppId||void 0===t.issuer?null:t};handleIncomingRedirect=async(e,t)=>{try{let r=await this.redirectHandler.handle(e,t,void 0);return this.fetch=r.fetch.bind(window),this.boundLogout=r.getLogoutUrl,await this.cleanUrlAfterRedirect(e),{isLoggedIn:r.isLoggedIn,webId:r.webId,sessionId:r.sessionId,expirationDate:r.expirationDate,clientAppId:r.clientAppId}}catch(r){await this.cleanUrlAfterRedirect(e),t.emit(eD.ERROR,"redirect",r);return}};async cleanUrlAfterRedirect(e){let t=e$(e).href;for(window.history.replaceState(null,"",t);window.location.href!==t;)await new Promise(e=>{setTimeout(()=>e(),1)})}}function tg(e){return"string"==typeof e.oidcIssuer}function tm(e){return"string"==typeof e.redirectUrl}class ty{storageUtility;oidcHandler;issuerConfigFetcher;clientRegistrar;constructor(e,t,r,n){this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=n,this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=n}async canHandle(e){return tg(e)&&tm(e)}async handle(e){if(!tg(e))throw new e3(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(e)}`);if(!tm(e))throw new e3(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(e)}`);let t=await this.issuerConfigFetcher.fetchConfig(e.oidcIssuer),r=await eY(e,t,this.storageUtility,this.clientRegistrar),n={issuer:t.issuer,dpop:"dpop"===e.tokenType.toLowerCase(),...e,issuerConfiguration:t,client:r};return this.oidcHandler.handle(n)}}class tv extends eK{async handle(e){let t={authority:e.issuer.toString(),client_id:e.client.clientId,client_secret:e.client.clientSecret,redirect_uri:e.redirectUrl,response_type:"code",scope:eU,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:e.prompt??"consent"},r=new to.OidcClient(t);try{let t=await r.createSigninRequest();return await this.setupRedirectHandler({oidcLoginOptions:e,state:t.state._id,codeVerifier:t.state._code_verifier,targetUrl:t.url.toString()})}catch(e){console.error(e)}}}let tb={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class t_{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}static getLocalStorageKey(e){return`issuerConfig:${e}`}async fetchConfig(e){let t,r=new URL(".well-known/openid-configuration",e.endsWith("/")?e:`${e}/`).href,n=await fetch(r);try{t=function(e){let t={};return Object.keys(e).forEach(r=>{tb[r]&&(t[tb[r].toKey]=e[r])}),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}(await n.json())}catch(t){throw new e3(`[${e.toString()}] has an invalid configuration: ${t.message}`)}return await this.storageUtility.set(t_.getLocalStorageKey(e),JSON.stringify(t)),t}}async function tw(e,t){await eJ(e,t),await tf()}class tS extends eZ{async get(e){let[t,r,n,i,o,s,a,l]=await Promise.all([this.storageUtility.getForUser(e,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(e,"webId",{secure:!0}),this.storageUtility.getForUser(e,"clientId",{secure:!1}),this.storageUtility.getForUser(e,"clientSecret",{secure:!1}),this.storageUtility.getForUser(e,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(e,"refreshToken",{secure:!0}),this.storageUtility.getForUser(e,"issuer",{secure:!1}),this.storageUtility.getForUser(e,"tokenType",{secure:!1})]);if("string"==typeof o&&!eH(o))return void await Promise.all([this.storageUtility.deleteAllUserData(e,{secure:!1}),this.storageUtility.deleteAllUserData(e,{secure:!0})]);if(void 0!==l&&!("string"==typeof l&&["DPoP","Bearer"].includes(l)))throw Error(`Tokens of type [${l}] are not supported.`);if(void 0!==n||void 0!==t||void 0!==r||void 0!==s)return{sessionId:e,webId:r,isLoggedIn:"true"===t,redirectUrl:o,refreshToken:s,issuer:a,clientAppId:n,clientAppSecret:i,tokenType:l??"DPoP"}}async clear(e){return tw(e,this.storageUtility)}}class tx{async canHandle(e){try{return new URL(e),!0}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e){return ez()}}class tE{storageUtility;sessionInfoManager;issuerConfigFetcher;clientRegistrar;tokerRefresher;constructor(e,t,r,n,i){this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=n,this.tokerRefresher=i,this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=n,this.tokerRefresher=i}async canHandle(e){try{let t=new URL(e);return null!==t.searchParams.get("code")&&null!==t.searchParams.get("state")}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){let r;if(!await this.canHandle(e))throw Error(`AuthCodeRedirectHandler cannot handle [${e}]: it is missing one of [code, state].`);let n=new URL(e),i=n.searchParams.get("state"),o=await this.storageUtility.getForUser(i,"sessionId",{errorIfNull:!0}),{issuerConfig:s,codeVerifier:a,redirectUrl:l,dpop:u}=await e0(o,this.storageUtility,this.issuerConfigFetcher),c=n.searchParams.get("iss");if("string"==typeof c&&c!==s.issuer)throw Error(`The value of the iss parameter (${c}) does not match the issuer identifier of the authorization server (${s.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(void 0===a)throw Error(`The code verifier for session ${o} is missing from storage.`);if(void 0===l)throw Error(`The redirect URL for session ${o} is missing from storage.`);let d=await this.clientRegistrar.getClient({sessionId:o},s),f=Date.now(),h=await tu(s,d,{grantType:"authorization_code",code:n.searchParams.get("code"),codeVerifier:a,redirectUrl:l},u);window.localStorage.removeItem(`oidc.${i}`),void 0!==h.refreshToken&&(r={sessionId:o,refreshToken:h.refreshToken,tokenRefresher:this.tokerRefresher});let p=function(e,t){let r,n=e,i=t?.refreshOptions;if(void 0!==i){let e=async()=>{try{let{accessToken:o,refreshToken:s,expiresIn:a}=await tr(i,t.dpopKey,t.eventEmitter);n=o,void 0!==s&&(i.refreshToken=s),clearTimeout(r),r=setTimeout(e,1e3*tn(a)),t.eventEmitter?.emit(eD.TIMEOUT_SET,r)}catch(e){e instanceof e8&&(t?.eventEmitter?.emit(eD.ERROR,e.error,e.errorDescription),t?.eventEmitter?.emit(eD.SESSION_EXPIRED)),e instanceof e5&&e.missingFields.includes("access_token")&&t?.eventEmitter?.emit(eD.SESSION_EXPIRED)}};r=setTimeout(e,1e3*tn(t.expiresIn)),t.eventEmitter?.emit(eD.TIMEOUT_SET,r)}else if(void 0!==t&&void 0!==t.eventEmitter){let e=setTimeout(()=>{t.eventEmitter.emit(eD.SESSION_EXPIRED)},1e3*tn(t.expiresIn));t.eventEmitter.emit(eD.TIMEOUT_SET,e)}return async(e,r)=>{let i=await tt(n,e,r,t?.dpopKey),o=!i.ok&&![401,403].includes(i.status);return i.ok||o||i.url!==e&&t?.dpopKey!==void 0&&(i=await tt(n,i.url,r,t.dpopKey)),i}}(h.accessToken,{dpopKey:h.dpopKey,refreshOptions:r,eventEmitter:t,expiresIn:h.expiresIn});await e1(this.storageUtility,o,h.webId,h.clientId,"true",void 0,!0);let g=await this.sessionInfoManager.get(o);if(!g)throw Error(`Could not retrieve session: [${o}].`);return Object.assign(g,{fetch:p,getLogoutUrl:function({endSessionEndpoint:e,idTokenHint:t}){if(void 0!==e)return function({state:r,postLogoutUrl:n}){return function({endSessionEndpoint:e,idTokenHint:t,postLogoutRedirectUri:r,state:n}){let i=new URL(e);return void 0!==t&&i.searchParams.append("id_token_hint",t),void 0!==r&&(i.searchParams.append("post_logout_redirect_uri",r),void 0!==n&&i.searchParams.append("state",n)),i.toString()}({endSessionEndpoint:e,idTokenHint:t,state:r,postLogoutRedirectUri:n})}}({idTokenHint:h.idToken,endSessionEndpoint:s.endSessionEndpoint}),expirationDate:"number"==typeof h.expiresIn?f+1e3*h.expiresIn:void 0})}}class tk extends eM{constructor(e){super(e)}}class tF{get storage(){return window.localStorage}async get(e){return this.storage.getItem(e)||void 0}async set(e,t){this.storage.setItem(e,t)}async delete(e){this.storage.removeItem(e)}}class tA{redirect(e,t){t&&t.handleRedirect?t.handleRedirect(e):t&&t.redirectByReplacingState?window.history.replaceState({},"",e):window.location.href=e}}class tI{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}async getClient(e,t){var r;let[n,i,o,s,a]=await Promise.all([this.storageUtility.getForUser(e.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"expiresAt",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientName",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientType",{secure:!1})]),l=void 0!==o?Number.parseInt(o,10):-1,u=void 0!==i&&Math.floor(Date.now()/1e3)>l;if(n&&"string"==typeof(r=a)&&["dynamic","static","solid-oidc"].includes(r)&&!u)return void 0!==i?{clientId:n,clientSecret:i,clientName:s,clientType:"dynamic",expiresAt:l}:{clientId:n,clientName:s,clientType:a};try{let r=await ts(e,t),n={clientId:r.clientId,clientType:"dynamic"};return void 0!==r.clientSecret&&(n.clientSecret=r.clientSecret,n.expiresAt=String(r.expiresAt)),r.idTokenSignedResponseAlg&&(n.idTokenSignedResponseAlg=r.idTokenSignedResponseAlg),await this.storageUtility.setForUser(e.sessionId,n,{secure:!1}),r}catch(e){throw Error("Client registration failed.",{cause:e})}}}class tT{async canHandle(e){try{return new URL(e).searchParams.has("error")}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){if(void 0!==t){let r=new URL(e),n=r.searchParams.get("error"),i=r.searchParams.get("error_description");t.emit(eD.ERROR,n,i)}return ez()}}class tR{storageUtility;issuerConfigFetcher;clientRegistrar;constructor(e,t,r){this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r,this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r}async refresh(e,t,r,n){let i=await e0(e,this.storageUtility,this.issuerConfigFetcher),o=await this.clientRegistrar.getClient({sessionId:e},i.issuerConfig);if(void 0===t)throw Error(`Session [${e}] has no refresh token to allow it to refresh its access token.`);if(i.dpop&&void 0===r)throw Error(`For session [${e}], the key bound to the DPoP access token must be provided to refresh said access token.`);let s=await td(t,i.issuerConfig,o,r);return void 0!==s.refreshToken&&n?.emit(eD.NEW_REFRESH_TOKEN,s.refreshToken),s}}function tC(e){let t=new e6,r=new th(e.secureStorage||t,e.insecureStorage||new tF),n=new t_(r),i=new tI(r),o=new tS(r),s=new tR(r,n,i),a=new tA;return new tp(new ty(r,new tv(r,a),n,i),new tk([new tT,new tE(r,o,n,i,s),new tx]),new eq(o,a),o,n)}let tP=`${eO}currentSession`,tN=`${eO}currentUrl`;async function tj(e,t,r){let n=await t.validateCurrentSession(e);return null!==n&&(window.localStorage.setItem(tN,window.location.href),await t.login({sessionId:e,prompt:"none",oidcIssuer:n.issuer,redirectUrl:n.redirectUrl,clientId:n.clientAppId,clientSecret:n.clientAppSecret,tokenType:n.tokenType??"DPoP"},r.events),!0)}class tO{info;events;clientAuthentication;tokenRequestInProgress=!1;constructor(e={},t){this.events=new ti,e.clientAuthentication?this.clientAuthentication=e.clientAuthentication:e.secureStorage&&e.insecureStorage?this.clientAuthentication=tC({secureStorage:e.secureStorage,insecureStorage:e.insecureStorage}):this.clientAuthentication=tC({}),e.sessionInfo?this.info={sessionId:e.sessionInfo.sessionId,isLoggedIn:!1,webId:e.sessionInfo.webId,clientAppId:e.sessionInfo.clientAppId}:this.info={sessionId:t??(0,ej.A)(),isLoggedIn:!1},this.events.on(eD.LOGIN,()=>window.localStorage.setItem(tP,this.info.sessionId)),this.events.on(eD.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(eD.ERROR,()=>this.internalLogout(!1))}login=async e=>(await this.clientAuthentication.login({sessionId:this.info.sessionId,...e,tokenType:e.tokenType??"DPoP"},this.events),new Promise(()=>{}));fetch=(e,t)=>this.clientAuthentication.fetch(e,t);internalLogout=async(e,t)=>{window.localStorage.removeItem(tP),await this.clientAuthentication.logout(this.info.sessionId,t),this.info.isLoggedIn=!1,e&&this.events.emit(eD.LOGOUT)};logout=async e=>this.internalLogout(!0,e);handleIncomingRedirect=async(e={})=>{if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;let t="string"==typeof e?{url:e}:e,r=t.url??window.location.href;this.tokenRequestInProgress=!0;let n=await this.clientAuthentication.handleIncomingRedirect(r,this.events);if(n?.isLoggedIn){this.setSessionInfo(n);let e=window.localStorage.getItem(tN);null===e?this.events.emit(eD.LOGIN):(window.localStorage.removeItem(tN),this.events.emit(eD.SESSION_RESTORED,e))}else if(!0===t.restorePreviousSession){let e=window.localStorage.getItem(tP);if(null!==e&&await tj(e,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,n};setSessionInfo(e){this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.clientAppId=e.clientAppId,this.info.expirationDate=e.expirationDate,this.events.on(eD.SESSION_EXTENDED,e=>{this.info.expirationDate=Date.now()+1e3*e})}}function tL(){return void 0===s&&(s=new tO),s}},8230:(e,t,r)=>{e.exports=r(1639)},8348:(e,t,r)=>{"use strict";r.d(t,{FP:()=>l,Ro:()=>a,fQ:()=>s});var n=r(5177),i=r(3511),o=r(695);function s(e,t){var r;if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw Error(`Cannot parse Quads with nodes of type [${t.graph.termType}] as their Graph node.`);let n="DefaultGraph"===t.graph.termType?"default":t.graph.value,s=null!=(r=e.graphs[n])?r:{};return(0,i.CN)({...e,graphs:(0,i.CN)({...e.graphs,[n]:function(e,t){var r,n,s;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw Error(`Cannot parse Quads with nodes of type [${t.subject.termType}] as their Subject node.`);let a="BlankNode"===t.subject.termType?`_:${t.subject.value}`:t.subject.value,l=null!=(r=e[a])?r:{type:"Subject",url:a,predicates:{}};return(0,i.CN)({...e,[a]:(n=l,s=t,(0,i.CN)({...n,predicates:function(e,t){var r;if(!["NamedNode"].includes(t.predicate.termType))throw Error(`Cannot parse Quads with nodes of type [${t.predicate.termType}] as their Predicate node.`);let n=t.predicate.value,s=null!=(r=e[n])?r:{};return(0,i.CN)({...e,[n]:function(e,t){var r,n,s,a,l,u,c,d;if("NamedNode"===t.object.termType){let n=(0,i.CN)([...null!=(r=e.namedNodes)?r:[],t.object.value]);return(0,i.CN)({...e,namedNodes:n})}if("Literal"===t.object.termType){if(t.object.datatype.value===o.ST.langString){let r=t.object.language.toLowerCase(),o=(0,i.CN)([...null!=(s=null==(n=e.langStrings)?void 0:n[r])?s:[],t.object.value]),l=(0,i.CN)({...null!=(a=e.langStrings)?a:{},[r]:o});return(0,i.CN)({...e,langStrings:l})}let r=(0,i.CN)([...null!=(u=null==(l=e.literals)?void 0:l[t.object.datatype.value])?u:[],t.object.value]),d=(0,i.CN)({...null!=(c=e.literals)?c:{},[t.object.datatype.value]:r});return(0,i.CN)({...e,literals:d})}if("BlankNode"===t.object.termType){let r=(0,i.CN)([...null!=(d=e.blankNodes)?d:[],(0,i.cW)(t.object)]);return(0,i.CN)({...e,blankNodes:r})}throw Error(`Objects of type [${t.object.termType}] are not supported.`)}(s,t)})}(n.predicates,s)}))})}(s,t)})})}function a(e,t={}){var r;let o=[],s=null!=(r=t.dataFactory)?r:n.Ay;return Object.keys(e.graphs).forEach(r=>{let n=e.graphs[r],a="default"===r?s.defaultGraph():s.namedNode(r);Object.keys(n).forEach(e=>{let{predicates:r}=n[e],u=(0,i.GM)(e)?s.blankNode((0,i.Sk)(e)):s.namedNode(e);o.push(...l(r,u,a,t))})}),o}function l(e,t,r,o={}){var s;let a=[],u=null!=(s=o.dataFactory)?s:n.Ay;return Object.keys(e).forEach(n=>{var o,s,c,d;let f=u.namedNode(n),h=null!=(o=e[n].langStrings)?o:{},p=null!=(s=e[n].namedNodes)?s:[],g=null!=(c=e[n].literals)?c:{},m=null!=(d=e[n].blankNodes)?d:[];Object.keys(g).forEach(e=>{let n=u.namedNode(e);g[e].forEach(e=>{let i=u.literal(e,n);a.push(u.quad(t,f,i,r))})}),Object.keys(h).forEach(e=>{h[e].forEach(n=>{let i=u.literal(n,e);a.push(u.quad(t,f,i,r))})}),p.forEach(e=>{let n=u.namedNode(e);a.push(u.quad(t,f,n,r))}),m.forEach(e=>{if((0,i.GM)(e)){let n=u.blankNode((0,i.Sk)(e));a.push(u.quad(t,f,n,r))}else{let n=u.blankNode(),i=u.quad(t,f,n,r),o=l(e,n,r);a.push(i),a.push(...o)}})}),a}},8429:(e,t,r)=>{"use strict";r.d(t,{cn:()=>eh,P:()=>eg});var n=r(9813),i=r(8117),o=r(9241);let s=e=>{let t=c(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),a(r,t)||u(e)},getConflictingClassGroupIds:(e,t)=>{let i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}},a=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],n=t.nextPart.get(r),i=n?a(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;let o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},l=/^\[(.+)\]$/,u=e=>{if(l.test(e)){let t=l.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},c=e=>{let{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(let e in r)d(r[e],n,e,t);return n},d=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:f(t,e)).classGroupId=r;return}if("function"==typeof e)return h(e)?void d(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,i])=>{d(i,f(t,e),r,n)})})},f=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},h=e=>e.isThemeGetter,p=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,n=new Map,i=(i,o)=>{r.set(i,o),++t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}},g=e=>{let{prefix:t,experimentalParseClassName:r}=e,n=e=>{let t,r=[],n=0,i=0,o=0;for(let s=0;s<e.length;s++){let a=e[s];if(0===n&&0===i){if(":"===a){r.push(e.slice(o,s)),o=s+1;continue}if("/"===a){t=s;continue}}"["===a?n++:"]"===a?n--:"("===a?i++:")"===a&&i--}let s=0===r.length?e:e.substring(o),a=m(s);return{modifiers:r,hasImportantModifier:a!==s,baseClassName:a,maybePostfixModifierPosition:t&&t>o?t-o:void 0}};if(t){let e=t+":",r=n;n=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){let e=n;n=t=>r({className:t,parseClassName:e})}return n},m=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,y=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let r=[],n=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...n.sort(),e),n=[]):n.push(e)}),r.push(...n.sort()),r}},v=e=>({cache:p(e.cacheSize),parseClassName:g(e),sortModifiers:y(e),...s(e)}),b=/\s+/,_=(e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:o}=t,s=[],a=e.trim().split(b),l="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{isExternal:u,modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=r(t);if(u){l=t+(l.length>0?" "+l:l);continue}let p=!!h,g=n(p?f.substring(0,h):f);if(!g){if(!p||!(g=n(f))){l=t+(l.length>0?" "+l:l);continue}p=!1}let m=o(c).join(":"),y=d?m+"!":m,v=y+g;if(s.includes(v))continue;s.push(v);let b=i(g,p);for(let e=0;e<b.length;++e){let t=b[e];s.push(y+t)}l=t+(l.length>0?" "+l:l)}return l};function w(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=S(e))&&(n&&(n+=" "),n+=t);return n}let S=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=S(e[n]))&&(r&&(r+=" "),r+=t);return r},x=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},E=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,k=/^\((?:(\w[\w-]*):)?(.+)\)$/i,F=/^\d+\/\d+$/,A=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,I=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,P=e=>F.test(e),N=e=>!!e&&!Number.isNaN(Number(e)),j=e=>!!e&&Number.isInteger(Number(e)),O=e=>e.endsWith("%")&&N(e.slice(0,-1)),L=e=>A.test(e),D=()=>!0,U=e=>I.test(e)&&!T.test(e),M=()=>!1,B=e=>R.test(e),H=e=>C.test(e),$=e=>!W(e)&&!G(e),K=e=>en(e,ea,M),W=e=>E.test(e),V=e=>en(e,el,U),q=e=>en(e,eu,N),z=e=>en(e,eo,M),J=e=>en(e,es,H),Z=e=>en(e,ed,B),G=e=>k.test(e),Y=e=>ei(e,el),X=e=>ei(e,ec),Q=e=>ei(e,eo),ee=e=>ei(e,ea),et=e=>ei(e,es),er=e=>ei(e,ed,!0),en=(e,t,r)=>{let n=E.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},ei=(e,t,r=!1)=>{let n=k.exec(e);return!!n&&(n[1]?t(n[1]):r)},eo=e=>"position"===e||"percentage"===e,es=e=>"image"===e||"url"===e,ea=e=>"length"===e||"size"===e||"bg-size"===e,el=e=>"length"===e,eu=e=>"number"===e,ec=e=>"family-name"===e,ed=e=>"shadow"===e;Symbol.toStringTag;let ef=function(e,...t){let r,n,i,o=function(a){return n=(r=v(t.reduce((e,t)=>t(e),e()))).cache.get,i=r.cache.set,o=s,s(a)};function s(e){let t=n(e);if(t)return t;let o=_(e,r);return i(e,o),o}return function(){return o(w.apply(null,arguments))}}(()=>{let e=x("color"),t=x("font"),r=x("text"),n=x("font-weight"),i=x("tracking"),o=x("leading"),s=x("breakpoint"),a=x("container"),l=x("spacing"),u=x("radius"),c=x("shadow"),d=x("inset-shadow"),f=x("text-shadow"),h=x("drop-shadow"),p=x("blur"),g=x("perspective"),m=x("aspect"),y=x("ease"),v=x("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[..._(),G,W],S=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],k=()=>[G,W,l],F=()=>[P,"full","auto",...k()],A=()=>[j,"none","subgrid",G,W],I=()=>["auto",{span:["full",j,G,W]},j,G,W],T=()=>[j,"auto",G,W],R=()=>["auto","min","max","fr",G,W],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...k()],B=()=>[P,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],H=()=>[e,G,W],en=()=>[..._(),Q,z,{position:[G,W]}],ei=()=>["no-repeat",{repeat:["","x","y","space","round"]}],eo=()=>["auto","cover","contain",ee,K,{size:[G,W]}],es=()=>[O,Y,V],ea=()=>["","none","full",u,G,W],el=()=>["",N,Y,V],eu=()=>["solid","dashed","dotted","double"],ec=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ed=()=>[N,O,Q,z],ef=()=>["","none",p,G,W],eh=()=>["none",N,G,W],ep=()=>["none",N,G,W],eg=()=>[N,G,W],em=()=>[P,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[L],breakpoint:[L],color:[D],container:[L],"drop-shadow":[L],ease:["in","out","in-out"],font:[$],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[L],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[L],shadow:[L],spacing:["px",N],text:[L],"text-shadow":[L],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",P,W,G,m]}],container:["container"],columns:[{columns:[N,W,G,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[j,"auto",G,W]}],basis:[{basis:[P,"full","auto",a,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[N,P,"auto","initial","none",W]}],grow:[{grow:["",N,G,W]}],shrink:[{shrink:["",N,G,W]}],order:[{order:[j,"first","last","none",G,W]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[a,"screen",...B()]}],"min-w":[{"min-w":[a,"screen","none",...B()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...B()]}],h:[{h:["screen",...B()]}],"min-h":[{"min-h":["screen","none",...B()]}],"max-h":[{"max-h":["screen",...B()]}],"font-size":[{text:["base",r,Y,V]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,G,q]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",O,W]}],"font-family":[{font:[X,W,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,G,W]}],"line-clamp":[{"line-clamp":[N,"none",G,q]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",G,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",G,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...eu(),"wavy"]}],"text-decoration-thickness":[{decoration:[N,"from-font","auto",G,V]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[N,"auto",G,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",G,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",G,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:en()}],"bg-repeat":[{bg:ei()}],"bg-size":[{bg:eo()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},j,G,W],radial:["",G,W],conic:[j,G,W]},et,J]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:es()}],"gradient-via-pos":[{via:es()}],"gradient-to-pos":[{to:es()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:ea()}],"rounded-s":[{"rounded-s":ea()}],"rounded-e":[{"rounded-e":ea()}],"rounded-t":[{"rounded-t":ea()}],"rounded-r":[{"rounded-r":ea()}],"rounded-b":[{"rounded-b":ea()}],"rounded-l":[{"rounded-l":ea()}],"rounded-ss":[{"rounded-ss":ea()}],"rounded-se":[{"rounded-se":ea()}],"rounded-ee":[{"rounded-ee":ea()}],"rounded-es":[{"rounded-es":ea()}],"rounded-tl":[{"rounded-tl":ea()}],"rounded-tr":[{"rounded-tr":ea()}],"rounded-br":[{"rounded-br":ea()}],"rounded-bl":[{"rounded-bl":ea()}],"border-w":[{border:el()}],"border-w-x":[{"border-x":el()}],"border-w-y":[{"border-y":el()}],"border-w-s":[{"border-s":el()}],"border-w-e":[{"border-e":el()}],"border-w-t":[{"border-t":el()}],"border-w-r":[{"border-r":el()}],"border-w-b":[{"border-b":el()}],"border-w-l":[{"border-l":el()}],"divide-x":[{"divide-x":el()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":el()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...eu(),"hidden","none"]}],"divide-style":[{divide:[...eu(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...eu(),"none","hidden"]}],"outline-offset":[{"outline-offset":[N,G,W]}],"outline-w":[{outline:["",N,Y,V]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",c,er,Z]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",d,er,Z]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:el()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[N,V]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":el()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",f,er,Z]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[N,G,W]}],"mix-blend":[{"mix-blend":[...ec(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ec()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[N]}],"mask-image-linear-from-pos":[{"mask-linear-from":ed()}],"mask-image-linear-to-pos":[{"mask-linear-to":ed()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":ed()}],"mask-image-t-to-pos":[{"mask-t-to":ed()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":ed()}],"mask-image-r-to-pos":[{"mask-r-to":ed()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":ed()}],"mask-image-b-to-pos":[{"mask-b-to":ed()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":ed()}],"mask-image-l-to-pos":[{"mask-l-to":ed()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":ed()}],"mask-image-x-to-pos":[{"mask-x-to":ed()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":ed()}],"mask-image-y-to-pos":[{"mask-y-to":ed()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[G,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":ed()}],"mask-image-radial-to-pos":[{"mask-radial-to":ed()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[N]}],"mask-image-conic-from-pos":[{"mask-conic-from":ed()}],"mask-image-conic-to-pos":[{"mask-conic-to":ed()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:en()}],"mask-repeat":[{mask:ei()}],"mask-size":[{mask:eo()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",G,W]}],filter:[{filter:["","none",G,W]}],blur:[{blur:ef()}],brightness:[{brightness:[N,G,W]}],contrast:[{contrast:[N,G,W]}],"drop-shadow":[{"drop-shadow":["","none",h,er,Z]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",N,G,W]}],"hue-rotate":[{"hue-rotate":[N,G,W]}],invert:[{invert:["",N,G,W]}],saturate:[{saturate:[N,G,W]}],sepia:[{sepia:["",N,G,W]}],"backdrop-filter":[{"backdrop-filter":["","none",G,W]}],"backdrop-blur":[{"backdrop-blur":ef()}],"backdrop-brightness":[{"backdrop-brightness":[N,G,W]}],"backdrop-contrast":[{"backdrop-contrast":[N,G,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",N,G,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[N,G,W]}],"backdrop-invert":[{"backdrop-invert":["",N,G,W]}],"backdrop-opacity":[{"backdrop-opacity":[N,G,W]}],"backdrop-saturate":[{"backdrop-saturate":[N,G,W]}],"backdrop-sepia":[{"backdrop-sepia":["",N,G,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",G,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[N,"initial",G,W]}],ease:[{ease:["linear","initial",y,G,W]}],delay:[{delay:[N,G,W]}],animate:[{animate:["none",v,G,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,G,W]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:eh()}],"rotate-x":[{"rotate-x":eh()}],"rotate-y":[{"rotate-y":eh()}],"rotate-z":[{"rotate-z":eh()}],scale:[{scale:ep()}],"scale-x":[{"scale-x":ep()}],"scale-y":[{"scale-y":ep()}],"scale-z":[{"scale-z":ep()}],"scale-3d":["scale-3d"],skew:[{skew:eg()}],"skew-x":[{"skew-x":eg()}],"skew-y":[{"skew-y":eg()}],transform:[{transform:[G,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:em()}],"translate-x":[{"translate-x":em()}],"translate-y":[{"translate-y":em()}],"translate-z":[{"translate-z":em()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",G,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",G,W]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[N,Y,V,q]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function eh(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return ef((0,o.$)(t))}async function ep(e){let t=(0,i._)(),r=await t.fetch(e);return(0,n.wI)(r)}async function eg(e){return Promise.all(e.map(e=>ep(e))).then(e=>e.filter(e=>void 0!==e))}},8461:e=>{"use strict";let{AbortController:t,AbortSignal}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=AbortSignal,e.exports.default=t},8475:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8534:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(6029),i=r(8090),o=r(6238),s=r(7127),a=r(6207),l=r(7328),u=r.n(l),c=r(4e3),d=r(5729),f=r(9278);function h(e){let{children:t,...r}=e;return(0,n.jsx)(f.N,{...r,children:t})}function p(e){let{children:t}=e,r=(0,c.useRouter)(),{getAuthService:l}=(0,d.useContext)(a.h),f=l(),{NEXT_PUBLIC_BASE_PATH:p,NEXT_PUBLIC_VERSION:g}=(0,o._)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u(),{children:[(0,n.jsx)("title",{children:"Solid Memo"}),(0,n.jsx)("meta",{name:"description",content:"A memorization app built using Solid"}),(0,n.jsx)("link",{rel:"icon",href:"".concat((0,s.Il)(p),"favicon.ico")})]}),(0,n.jsx)(h,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,n.jsxs)("main",{className:"bg-background text-foreground flex min-h-screen flex-col items-center",children:["main"!==g&&(0,n.jsx)("div",{className:"absolute italic opacity-30",children:(0,n.jsxs)("div",{className:"p-1",children:["Version: ",g]})}),(0,n.jsxs)("div",{className:"container items-center justify-center gap-6 space-y-2 bg-white/60 dark:bg-white/10 p-6",children:[(0,n.jsx)(i.Y9,{onLogOut:()=>{f.logOut().then(()=>{r.push("/login")}).catch(e=>{console.error("Failed with error:",e)})}}),t]})]})})]})}},8785:(e,t,r)=>{"use strict";function n(e){return"string"==typeof e?e:e.value}function i(e,t={}){let r=new URL(e);return r.pathname=r.pathname.replace(/\/\/+/g,"/"),!1===t.trailingSlash&&"/"===r.pathname.slice(-1)&&(r.pathname=r.pathname.slice(0,r.pathname.length-1)),!0===t.trailingSlash&&"/"!==r.pathname.slice(-1)&&(r.pathname=`${r.pathname}/`),r.href}r.d(t,{l:()=>i,t:()=>n})},8940:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(7810),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8983:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,o=l(e),s=o[0],a=o[1],u=new i((s+a)*3/4-a),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},9099:(e,t,r)=>{e.exports=r(8253)},9110:(e,t,r)=>{"use strict";let n,{SymbolDispose:i}=r(4039),{AbortError:o,codes:s}=r(7894),{isNodeStream:a,isWebStream:l,kControllerErrorFunction:u}=r(918),c=r(5791),{ERR_INVALID_ARG_TYPE:d}=s,f=(e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new d(t,"AbortSignal",e)};e.exports.addAbortSignal=function(t,r){if(f(t,"signal"),!a(r)&&!l(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let s=a(t)?()=>{t.destroy(new o(void 0,{cause:e.reason}))}:()=>{t[u](new o(void 0,{cause:e.reason}))};return e.aborted?s():c(t,(n=n||r(6733).addAbortListener)(e,s)[i]),t}},9241:(e,t,r)=>{"use strict";function n(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{$:()=>n})},9278:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,N:()=>d});var n=r(5729),i=(e,t,r,n,i,o,s,a)=>{let l=document.documentElement,u=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?i.map(e=>o[e]||e):i;r?(l.classList.remove(...n),l.classList.add(o&&o[t]?o[t]:t)):l.setAttribute(e,t)}),r=t,a&&u.includes(r)&&(l.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}},o=["light","dark"],s="(prefers-color-scheme: dark)",a="undefined"==typeof window,l=n.createContext(void 0),u={setTheme:e=>{},themes:[]},c=()=>{var e;return null!=(e=n.useContext(l))?e:u},d=e=>n.useContext(l)?n.createElement(n.Fragment,null,e.children):n.createElement(h,{...e}),f=["light","dark"],h=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:i=!0,storageKey:a="theme",themes:u=f,defaultTheme:c=r?"system":"light",attribute:d="data-theme",value:h,children:v,nonce:b,scriptProps:_})=>{let[w,S]=n.useState(()=>g(a,c)),[x,E]=n.useState(()=>"system"===w?y():w),k=h?Object.values(h):u,F=n.useCallback(e=>{let n=e;if(!n)return;"system"===e&&r&&(n=y());let s=h?h[n]:n,a=t?m(b):null,l=document.documentElement,u=e=>{"class"===e?(l.classList.remove(...k),s&&l.classList.add(s)):e.startsWith("data-")&&(s?l.setAttribute(e,s):l.removeAttribute(e))};if(Array.isArray(d)?d.forEach(u):u(d),i){let e=o.includes(c)?c:null,t=o.includes(n)?n:e;l.style.colorScheme=t}null==a||a()},[b]),A=n.useCallback(e=>{let t="function"==typeof e?e(w):e;S(t);try{localStorage.setItem(a,t)}catch(e){}},[w]),I=n.useCallback(t=>{E(y(t)),"system"===w&&r&&!e&&F("system")},[w,e]);n.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),n.useEffect(()=>{let e=e=>{e.key===a&&(e.newValue?S(e.newValue):A(c))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[A]),n.useEffect(()=>{F(null!=e?e:w)},[e,w]);let T=n.useMemo(()=>({theme:w,setTheme:A,forcedTheme:e,resolvedTheme:"system"===w?x:w,themes:r?[...u,"system"]:u,systemTheme:r?x:void 0}),[w,A,e,x,r,u]);return n.createElement(l.Provider,{value:T},n.createElement(p,{forcedTheme:e,storageKey:a,attribute:d,enableSystem:r,enableColorScheme:i,defaultTheme:c,value:h,themes:u,nonce:b,scriptProps:_}),v)},p=n.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:o,enableColorScheme:s,defaultTheme:a,value:l,themes:u,nonce:c,scriptProps:d})=>{let f=JSON.stringify([r,t,a,e,u,l,o,s]).slice(1,-1);return n.createElement("script",{...d,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?c:"",dangerouslySetInnerHTML:{__html:`(${i.toString()})(${f})`}})}),g=(e,t)=>{let r;if(!a){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},m=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},y=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},9520:(e,t,r)=>{"use strict";let{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:s}=r(4039),{Buffer:a}=r(1642),{inspect:l}=r(6733);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);let t=a.allocUnsafe(e>>>0),r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{let o=r.data;if(e>o.length)t+=o,e-=o.length;else{e===o.length?(t+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(o,0,e),this.head=r,r.data=n(o,e));break}++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){let t=a.allocUnsafe(e),r=e,n=this.head,i=0;do{let a=n.data;if(e>a.length)o(t,a,r-e),e-=a.length;else{e===a.length?(o(t,a,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),r-e),this.head=n,n.data=a.slice(e));break}++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},9666:(e,t,r)=>{"use strict";let{ArrayPrototypePop:n,Promise:i}=r(4039),{isIterable:o,isNodeStream:s,isWebStream:a}=r(918),{pipelineImpl:l}=r(927),{finished:u}=r(5791);r(331),e.exports={finished:u,pipeline:function(...e){return new i((t,r)=>{let i,u,c=e[e.length-1];if(c&&"object"==typeof c&&!s(c)&&!o(c)&&!a(c)){let t=n(e);i=t.signal,u=t.end}l(e,(e,n)=>{e?r(e):t(n)},{signal:i,end:u})})}}},9667:(e,t,r)=>{"use strict";let n,i,{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:s,ObjectKeys:a,ObjectSetPrototypeOf:l}=r(4039);e.exports=d;let u=r(6261),c=r(2661);l(d.prototype,u.prototype),l(d,u);{let e=a(c.prototype);for(let t=0;t<e.length;t++){let r=e[t];d.prototype[r]||(d.prototype[r]=c.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);u.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function f(){return void 0===n&&(n={}),n}o(d.prototype,{writable:{__proto__:null,...s(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...s(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...s(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...s(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...s(c.prototype,"writableLength")},writableFinished:{__proto__:null,...s(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...s(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...s(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...s(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},d.from=function(e){return i||(i=r(7211)),i(e,"body")}},9786:(e,t,r)=>{"use strict";r.d(t,{BN:()=>o,IG:()=>s,um:()=>i});var n=r(7181);function i(e){var t,r,i,o,s;let a=null!=(r=null==(t=e.headers.get("Content-Type"))?void 0:t.split(";"))?r:[],l=a.length>0&&["text/turtle","application/ld+json"].includes(a[0]),u={sourceIri:e.url,isRawData:!l,contentLocation:null!=(i=e.headers.get("Content-Location"))?i:void 0,contentType:null!=(o=e.headers.get("Content-Type"))?o:void 0,linkedResources:{},location:null!=(s=e.headers.get("Location"))?s:void 0},c=e.headers.get("Link");if(c){let e=n.parse(c),t=e.get("rel","acl");1===t.length&&(u.aclUrl=new URL(t[0].uri,u.sourceIri).href),u.linkedResources=e.refs.reduce((e,t)=>{var r,n;return null!=e[n=t.rel]||(e[n]=[]),e[t.rel].push(new URL(t.uri,u.sourceIri).href),e},u.linkedResources)}let d=e.headers.get("WAC-Allow");return d&&(u.permissions=function(e){function t(e){let t=e.split(" ");return t.includes("write")?{read:t.includes("read"),append:!0,write:!0,control:t.includes("control")}:{read:t.includes("read"),append:t.includes("append"),write:!1,control:t.includes("control")}}function r(e,t){let r=e.split(",").map(e=>e.split("=")).filter(e=>2===e.length&&e[0].trim()===t);if(1!==r.length)return"";let n=r[0][1].trim();return'"'!==n.charAt(0)||'"'!==n.charAt(n.length-1)?"":n.substring(1,n.length-1)}return{user:t(r(e,"user")),public:t(r(e,"public"))}}(d)),u}function o(e){return!e.ok}function s(e){return 401===e.status||403===e.status}},9813:(e,t,r)=>{"use strict";r.d(t,{Yl:()=>Y,X:()=>en,aX:()=>Q,wI:()=>X,cv:()=>er});var n=r(3823),i=r(5177),o=r(7105);function s(e){return!!e&&"DefaultGraph"===e.termType}function a(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}let l=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,u=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/;class c{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=Array(e.length+1)}static supports(e){return!l.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!c.supports(this.base))return this._baseMatcher=/.^/;let e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",a(e)],r=[],n=[],i=/[^/?#]*([/?#])/y,o,s=0,l=0,u=i.lastIndex=e.length;for(;!s&&!l&&(o=i.exec(this.base));)"#"===o[1]?l=i.lastIndex-1:(t.push(a(o[0]),"(?:"),r.push(")?"),"?"!==o[1]?n.push(u=i.lastIndex):(s=u=i.lastIndex,l=this.base.indexOf("#",s),this._pathReplacements[s]="?"));for(let e=0;e<n.length;e++)this._pathReplacements[n[e]]="../".repeat(n.length-e-1);return this._pathReplacements[n[n.length-1]]="./",this._baseLength=l>0?l:this.base.length,t.push(a(this.base.substring(u,this._baseLength)),s?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...r].join(""))}toRelative(e){let t=this._getBaseMatcher().exec(e);if(!t)return e;let r=t[0].length;if(r===this._baseLength&&r===e.length)return"";let n=this._pathReplacements[r];if(n){let t=e.substring(r);return"?"===n||u.test(t)?"./"===n&&/^[^?#]/.test(t)?t:n+t:e}return e.substring(r-1)}}let d=i.Ay.defaultGraph(),{rdf:f,xsd:h}=o.A,p=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,g=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,m={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class y extends i.x1{equals(e){return e===this}}class v{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,r,n){e+=t,n&&n()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=d,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new c(t.baseIRI)))}get _inDefaultGraph(){return d.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,r,n,i){try{n.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(d.equals(n)?"":`${this._encodeIriOrBlank(n)} {
`)),this._graph=n,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,i):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,i)}catch(e){i&&i(e)}}_writeQuadLine(e,t,r,n,i){delete this._prefixMatch,this._write(this.quadToString(e,t,r,n),i)}quadToString(e,t,r,n){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(r)}${n&&n.value?` ${this._encodeIriOrBlank(n)} .
`:" .\n"}`}quadsToString(e){let t="";for(let r of e)t+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return t}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),p.test(t)&&(t=t.replace(g,b));let r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(p.test(t)&&(t=t.replace(g,b)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===h.string)return`"${t}"`}else switch(e.datatype.value){case h.string:return`"${t}"`;case h.boolean:if("true"===t||"false"===t)return t;break;case h.integer:if(/^[+-]?\d+$/.test(t))return t;break;case h.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case h.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===f.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:r,graph:n}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(r)}${s(n)?"":` ${this._encodeIriOrBlank(n)}`}>>`}_blockedWrite(){throw Error("Cannot write because the writer has been closed.")}addQuad(e,t,r,n,i){void 0===r?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof n?this._writeQuad(e,t,r,d,n):this._writeQuad(e,t,r,n||d,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,r){let n={};n[e]=t,this.addPrefixes(n,r)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let r=!1;for(let t in e){let n=e[t];"string"!=typeof n&&(n=n.value),r=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[n]=t+=":",this._write(`@prefix ${t} <${n}>.
`)}if(r){let e="",t="";for(let r in this._prefixIRIs)e+=e?`|${r}`:r,t+=(t?"|":"")+this._prefixIRIs[r];e=a(e,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=RegExp(`^(?:${t})[^/]*$|^(${e})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?"\n":"",t)}blank(e,t){let r=e,n,i;switch(void 0===e?r=[]:e.termType?r=[{predicate:e,object:t}]:!("length"in e)&&(r=[e]),i=r.length){case 0:return new y("[]");case 1:if(!((n=r[0]).object instanceof y))return new y(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let o="[";for(let t=0;t<i;t++)(n=r[t]).predicate.equals(e)?o+=`, ${this._encodeObject(n.object)}`:(o+=`${(t?";\n  ":"\n  ")+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new y(`${o}
]`)}}list(e){let t=e&&e.length||0,r=Array(t);for(let n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return new y(`(${r.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((r,n)=>{t=null,e(r,n)});if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}}function b(e){let t=m[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}let _=Symbol("iter");function w(e,t,r=4){if(0===r)return Object.assign(e,t);for(let n in t)e[n]=w(e[n]||Object.create(null),t[n],r-1);return e}class S{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||i.Ay}_termFromId(e){if("."===e[0]){let t=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(t[r[1]]),this._termFromId(t[r[2]]),this._termFromId(t[r[3]]),r[4]&&this._termFromId(t[r[4]]))}return(0,i.iN)(e,this._factory)}_termToNumericId(e){if("Quad"===e.termType){let t,r=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),i=this._termToNumericId(e.object);return r&&n&&i&&(s(e.graph)||(t=this._termToNumericId(e.graph)))&&this._ids[t?`.${r}.${n}.${i}.${t}`:`.${r}.${n}.${i}`]}return this._ids[(0,i.FL)(e)]}_termToNewNumericId(e){let t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${s(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:(0,i.FL)(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}createBlankNode(e){let t,r;if(e)for(t=e=`_:${e}`,r=1;this._ids[t];)t=e+r++;else do t=`_:b${this._blankNodeIndex++}`;while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}}class x{constructor(e,t){this._size=0,this._graphs=Object.create(null),t||!e||e[0]||"function"==typeof e.match||(t=e,e=null),t=t||{},this._factory=t.factory||i.Ay,this._entityIndex=t.entityIndex||new S({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e,t,r=this._size;if(null!==r)return r;r=0;let n=this._graphs;for(let i in n)for(let o in e=n[i].subjects)for(let n in t=e[o])r+=Object.keys(t[n]).length;return this._size=r}_addToIndex(e,t,r,n){let i=e[t]||(e[t]={}),o=i[r]||(i[r]={}),s=n in o;return s||(o[n]=null),!s}_removeFromIndex(e,t,r,n){let i=e[t],o=i[r];for(let e in delete o[n],o)return;for(let e in delete i[r],i)return;delete e[t]}*_findInIndex(e,t,r,n,i,o,s,a){let l,u,c,d=this._entities,f=this._termFromId(d[a]),h={subject:null,predicate:null,object:null};for(let a in t&&((l=e,e={})[t]=l[t]),e)if(u=e[a]){for(let e in h[i]=this._termFromId(d[a]),r&&((l=u,u={})[r]=l[r]),u)if(c=u[e]){h[o]=this._termFromId(d[e]);let t=n?n in c?[n]:[]:Object.keys(c);for(let e=0;e<t.length;e++)h[s]=this._termFromId(d[t[e]]),yield this._factory.quad(h.subject,h.predicate,h.object,f)}}}_loop(e,t){for(let r in e)t(r)}_loopByKey0(e,t,r){let n,i;if(n=e[t])for(i in n)r(i)}_loopByKey1(e,t,r){let n;for(n in e)e[n][t]&&r(n)}_loopBy2Keys(e,t,r,n){let i,o,s;if((i=e[t])&&(o=i[r]))for(s in o)n(s)}_countInIndex(e,t,r,n){let i=0,o,s,a;for(let l in t&&((o=e,e={})[t]=o[t]),e)if(s=e[l])for(let e in r&&((o=s,s={})[r]=o[r]),s)(a=s[e])&&(n?n in a&&i++:i+=Object.keys(a).length);return i}_getGraphs(e){return"number"!=typeof(e=""===e?1:e&&(this._termToNumericId(e)||-1))?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){let t=Object.create(null);return r=>{r in t||(t[r]=!0,e(this._termFromId(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n?this._termToNewNumericId(n):1;let i=this._graphs[n];return i||Object.freeze(i=this._graphs[n]={subjects:{},predicates:{},objects:{}}),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),r=this._termToNewNumericId(r),!!this._addToIndex(i.subjects,e,t,r)&&(this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,!0)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,r,n){return e&&e.subject&&({subject:e,predicate:t,object:r,graph:n}=e),!this.readQuads(e,t,r,n).next().done}import(e){return e.on("data",e=>{this.addQuad(e)}),e}removeQuad(e,t,r,n){let i,o,s;t||({subject:e,predicate:t,object:r,graph:n}=e),n=n?this._termToNumericId(n):1;let a=this._graphs;if(!(e=e&&this._termToNumericId(e))||!(t=t&&this._termToNumericId(t))||!(r=r&&this._termToNumericId(r))||!(i=a[n])||!(o=i.subjects[e])||!(s=o[t])||!(r in s))return!1;for(e in this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--,i.subjects)return!0;return delete a[n],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",e=>{this.removeQuad(e)}),e}removeMatches(e,t,r,i){let o=new n.Readable({objectMode:!0}),s=this.readQuads(e,t,r,i);return o._read=e=>{for(;--e>=0;){let{done:e,value:t}=s.next();if(e)return void o.push(null);o.push(t)}},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,r,n){return[...this.readQuads(e,t,r,n)]}*readQuads(e,t,r,n){let i,o,s,a,l=this._getGraphs(n);if((!e||(o=this._termToNumericId(e)))&&(!t||(s=this._termToNumericId(t)))&&(!r||(a=this._termToNumericId(r))))for(let e in l)(i=l[e])&&(o?a?yield*this._findInIndex(i.objects,a,o,s,"object","subject","predicate",e):yield*this._findInIndex(i.subjects,o,s,null,"subject","predicate","object",e):s?yield*this._findInIndex(i.predicates,s,a,null,"predicate","object","subject",e):a?yield*this._findInIndex(i.objects,a,null,null,"object","subject","predicate",e):yield*this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",e))}match(e,t,r,n){return new k(this,e,t,r,n,{entityIndex:this._entityIndex})}countQuads(e,t,r,n){let i=this._getGraphs(n),o=0,s,a,l,u;if(e&&!(a=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||r&&!(u=this._termToNumericId(r)))return 0;for(let n in i)(s=i[n])&&(e?r?o+=this._countInIndex(s.objects,u,a,l):o+=this._countInIndex(s.subjects,a,l,u):t?o+=this._countInIndex(s.predicates,l,u,a):o+=this._countInIndex(s.objects,u,a,l));return o}forEach(e,t,r,n,i){this.some(t=>(e(t,this),!1),t,r,n,i)}every(e,t,r,n,i){return!this.some(t=>!e(t,this),t,r,n,i)}some(e,t,r,n,i){for(let o of this.readQuads(t,r,n,i))if(e(o,this))return!0;return!1}getSubjects(e,t,r){let n=[];return this.forSubjects(e=>{n.push(e)},e,t,r),n}forSubjects(e,t,r,n){let i,o,s,a=this._getGraphs(n);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(n in a)(i=a[n])&&(o?s?this._loopBy2Keys(i.predicates,o,s,e):this._loopByKey1(i.subjects,o,e):s?this._loopByKey0(i.objects,s,e):this._loop(i.subjects,e))}getPredicates(e,t,r){let n=[];return this.forPredicates(e=>{n.push(e)},e,t,r),n}forPredicates(e,t,r,n){let i,o,s,a=this._getGraphs(n);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(n in a)(i=a[n])&&(o?s?this._loopBy2Keys(i.objects,s,o,e):this._loopByKey0(i.subjects,o,e):s?this._loopByKey1(i.predicates,s,e):this._loop(i.predicates,e))}getObjects(e,t,r){let n=[];return this.forObjects(e=>{n.push(e)},e,t,r),n}forObjects(e,t,r,n){let i,o,s,a=this._getGraphs(n);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(n in a)(i=a[n])&&(o?s?this._loopBy2Keys(i.subjects,o,s,e):this._loopByKey1(i.objects,o,e):s?this._loopByKey0(i.predicates,s,e):this._loop(i.objects,e))}getGraphs(e,t,r){let n=[];return this.forGraphs(e=>{n.push(e)},e,t,r),n}forGraphs(e,t,r,n){for(let i in this._graphs)this.some(t=>(e(t.graph),!0),t,r,n,this._termFromId(this._entities[i]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){let r={},n=t?()=>!0:(e,t)=>{throw Error(`${e.value} ${t}`)},i=this.getQuads(null,o.A.rdf.rest,o.A.rdf.nil,null),s=e?[...i]:[];return i.forEach(t=>{let i,a,l=[],u=!1,c=t.graph,d=t.subject;for(;d&&!u;){let e=this.getQuads(null,null,d,null),t=this.getQuads(d,null,null,null),r,f=null,h=null,p=null;for(let l=0;l<t.length&&!u;l++)(r=t[l]).graph.equals(c)?i?u=n(d,"has non-list arcs out"):r.predicate.value===o.A.rdf.first?f?u=n(d,"has multiple rdf:first arcs"):s.push(f=r):r.predicate.value===o.A.rdf.rest?h?u=n(d,"has multiple rdf:rest arcs"):s.push(h=r):e.length?u=n(d,"can't be subject and object"):(i=r,a="subject"):u=n(d,"not confined to single graph");for(let t=0;t<e.length&&!u;++t)r=e[t],i?u=n(d,"can't have coreferences"):r.predicate.value===o.A.rdf.rest?p?u=n(d,"has incoming rdf:rest arcs"):p=r:(i=r,a="object");f?l.unshift(f.object):u=n(d,"has no list head"),d=p&&p.subject}u?e=!1:i&&(r[i[a].value]=l)}),e&&this.removeQuads(s),r}addAll(e){if(e instanceof k&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof x&&e._entityIndex===this._entityIndex)0!==e._size&&(this._graphs=w(this._graphs,e._graphs),this._size=null);else for(let t of e)this.add(t);return this}contains(e){let t,r,n,i,o;if(e instanceof k&&(e=e.filtered),e===this)return!0;if(!(e instanceof x)||this._entityIndex!==e._entityIndex)return e.every(e=>this.has(e));let s=this._graphs,a=e._graphs;for(let e in a){if(!(t=s[e]))return!1;for(let s in t=t.subjects,r=a[e].subjects){if(!(n=t[s]))return!1;for(let e in i=r[s]){if(!(o=n[e]))return!1;for(let t in i[e])if(!(t in o))return!1}}}return!0}deleteMatches(e,t,r,n){for(let i of this.match(e,t,r,n))this.removeQuad(i);return this}difference(e){if(e&&e instanceof k&&(e=e.filtered),e===this)return new x({entityIndex:this._entityIndex});if(e instanceof x&&e._entityIndex===this._entityIndex){let t=new x({entityIndex:this._entityIndex}),r=function e(t,r,n=4){let i=!1;for(let o in t)if(o in r){if(0!==n){let s=e(t[o],r[o],n-1);if(!1!==s)(i=i||Object.create(null))[o]=s;else if(3===n)return!1}}else(i=i||Object.create(null))[o]=0===n?null:w({},t[o],n-1);return i}(this._graphs,e._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>!e.has(t))}equals(e){return e instanceof k&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){let t=new x({entityIndex:this._entityIndex});for(let r of this)e(r,this)&&t.add(r);return t}intersection(e){if(e instanceof k&&(e=e.filtered),e===this){let e=new x({entityIndex:this._entityIndex});return e._graphs=w(Object.create(null),this._graphs),e._size=this._size,e}if(e instanceof x&&this._entityIndex===e._entityIndex){let t=new x({entityIndex:this._entityIndex}),r=function e(t,r,n=4){let i=!1;for(let o in t)if(o in r){let s=0===n?null:e(t[o],r[o],n-1);if(!1!==s)(i=i||Object.create(null))[o]=s;else if(3===n)return!1}return i}(e._graphs,this._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>e.has(t))}map(e){let t=new x({entityIndex:this._entityIndex});for(let r of this)t.add(e(r,this));return t}reduce(e,t){let r=this.readQuads(),n=void 0===t?r.next().value:t;for(let t of r)n=e(n,t,this);return n}toArray(){return this.getQuads()}toCanonical(){throw Error("not implemented")}toStream(){return this.match()}toString(){return new v().quadsToString(this)}union(e){let t=new x({entityIndex:this._entityIndex});return t._graphs=w(Object.create(null),this._graphs),t._size=this._size,t.addAll(e),t}*[Symbol.iterator](){yield*this.readQuads()}}function E(e,t,r=0){let n=t[r];if(n&&!(n in e))return!1;let i=!1;for(let o in n?{[n]:e[n]}:e){let n=2===r?null:E(e[o],t,r+1);!1!==n&&((i=i||Object.create(null))[o]=n)}return i}class k extends n.Readable{constructor(e,t,r,n,i,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:r,object:n,graph:i,options:o})}get filtered(){if(!this._filtered){let e,t,r,{n3Store:n,graph:i,object:o,predicate:s,subject:a}=this,l=this._filtered=new x({factory:n._factory,entityIndex:this.options.entityIndex});if(a&&!(e=l._termToNumericId(a))||s&&!(t=l._termToNumericId(s))||o&&!(r=l._termToNumericId(o)))return l;let u=n._getGraphs(i);for(let n in u){let i,o,s,a;(a=u[n])&&(!e&&t?(o=E(a.predicates,[t,r,e]))&&(i=E(a.subjects,[e,t,r]),s=E(a.objects,[r,e,t])):r?(s=E(a.objects,[r,e,t]))&&(i=E(a.subjects,[e,t,r]),o=E(a.predicates,[t,r,e])):(i=E(a.subjects,[e,t,r]))&&(o=E(a.predicates,[t,r,e]),s=E(a.objects,[r,e,t])),i&&(l._graphs[n]={subjects:i,predicates:o,objects:s}))}l._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[_]&&(this[_]=this[Symbol.iterator]());let t=this[_];for(;--e>=0;){let{done:e,value:r}=t.next();if(e)return void this.push(null);this.push(r)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,t,r,n){return this.filtered.deleteMatches(e,t,r,n)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,t,r,n,i){return this.filtered.every(e,t,r,n,i)}filter(e){return this.filtered.filter(e)}forEach(e,t,r,n,i){return this.filtered.forEach(e,t,r,n,i)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,t,r,n,i){return this.filtered.some(e,t,r,n,i)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,t){return this.filtered.reduce(e,t)}toString(){return new v().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,r,n){return new k(this.filtered,e,t,r,n,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var F=r(8348),A=r(3795),I=r(1642);let{xsd:T}=o.A,R=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,C={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},P=/[\x00-\x20<>\\"\{\}\|\^\`]/,N={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},j=/$0^/;class O{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode)for(let e in this._n3Mode=!1,this)!(e in N)&&this[e]instanceof RegExp&&(this[e]=j);else this._n3Mode=!1!==e.n3;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,n=r.length;for(;;){let e,s;for(;e=this._newline.exec(r);)this.comments&&(s=this._comment.exec(e[0]))&&i("comment",s[1],"",this._line,e[0].length),n=(r=r.substr(e[0].length,r.length)).length,this._line++;if(!e&&(e=this._whitespace.exec(r))&&(r=r.substr(e[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(s=this._comment.exec(r))&&i("comment",s[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;let a=this._line,l=r[0],u="",c="",d="",f=null,h=0,p=!1;switch(l){case"^":if(r.length<3)break;if("^"===r[1]){if(this._previousMarker="^^","<"!==(r=r.substr(2))[0]){p=!0;break}}else{this._n3Mode&&(h=1,u="^");break}case"<":if(f=this._unescapedIri.exec(r))u="IRI",c=f[1];else if(f=this._iri.exec(r)){if(null===(c=this._unescape(f[1]))||P.test(c))return o(this);u="IRI"}else r.length>1&&"<"===r[1]?(u="<<",h=2):this._n3Mode&&r.length>1&&"="===r[1]&&(h=2,this._isImpliedBy?(u="abbreviation",c="<"):(u="inverse",c=">"));break;case">":r.length>1&&">"===r[1]&&(u=">>",h=2);break;case"_":((f=this._blank.exec(r))||t&&(f=this._blank.exec(`${r} `)))&&(u="blank",d="_",c=f[1]);break;case'"':if(f=this._simpleQuotedString.exec(r))c=f[1];else if({value:c,matchLength:h}=this._parseLiteral(r),null===c)return o(this);(null!==f||0!==h)&&(u="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(f=this._simpleApostropheString.exec(r))c=f[1];else if({value:c,matchLength:h}=this._parseLiteral(r),null===c)return o(this);(null!==f||0!==h)&&(u="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(f=this._variable.exec(r))&&(u="var",c=f[0]);break;case"@":"literal"===this._previousMarker&&(f=this._langcode.exec(r))?(u="langcode",c=f[1]):(f=this._keyword.exec(r))&&(u=f[0]);break;case".":if(1===r.length?t:r[1]<"0"||r[1]>"9"){u=".",h=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(r)||t&&(f=this._number.exec(`${r} `)))&&(u="literal",c=f[0],d="string"==typeof f[1]?T.double:"string"==typeof f[2]?T.decimal:T.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(r))?u=f[0].toUpperCase():p=!0;break;case"f":case"t":(f=this._boolean.exec(r))?(u="literal",c=f[0],d=T.boolean):p=!0;break;case"a":(f=this._shortPredicates.exec(r))?(u="abbreviation",c="a"):p=!0;break;case"=":this._n3Mode&&r.length>1&&(u="abbreviation",">"!==r[1]?(h=1,c="="):(h=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(h=1,u=l);break;case"{":!this._lineMode&&r.length>=2&&("|"===r[1]?(u="{|",h=2):(u=l,h=1));break;case"|":r.length>=2&&"}"===r[1]&&(u="|}",h=2);break;default:p=!0}if(p&&(("@prefix"===this._previousMarker||"PREFIX"===this._previousMarker)&&(f=this._prefix.exec(r))?(u="prefix",c=f[1]||""):((f=this._prefixed.exec(r))||t&&(f=this._prefixed.exec(`${r} `)))&&(u="prefixed",d=f[1]||"",c=this._unescape(f[2]))),"^^"===this._previousMarker)switch(u){case"prefixed":u="type";break;case"IRI":u="typeIRI";break;default:u=""}if(!u)if(t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r))return o(this);else return this._input=r;let g=h||f[0].length,m=i(u,c,d,a,g);this.previousToken=m,this._previousMarker=u,r=r.substr(g,r.length)}function i(t,i,o,s,a){let l=r?n-r.length:n,u={type:t,value:i,prefix:o,line:s,start:l,end:l+a};return e(null,u),u}function o(t){e(t._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1,r=e.replace(R,(e,r,n,i)=>{if("string"==typeof r)return String.fromCharCode(Number.parseInt(r,16));if("string"==typeof n){let e=Number.parseInt(n,16);return e<=65535?String.fromCharCode(Number.parseInt(n,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in C?C[i]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){let t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length,n=Math.max(this._literalClosingPos,r);for(;(n=e.indexOf(t,n))>0;){let t=0;for(;"\\"===e[n-t-1];)t++;if(t%2==0){let t=e.substring(r,n),i=t.split(/\r\n|\r|\n/).length-1,o=n+r;if(1===r&&0!==i||3===r&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:o}}n++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let t=Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e)if(this._input=this._readStartingBom(e),"function"==typeof t)queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{let e,t=[];if(this._tokenizeToEnd((r,n)=>r?e=r:t.push(n),!0),e)throw e;return t}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=I.Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let L=0;class D{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&M(this,e.factory);let t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),n=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),s=this._n3Mode=/n3/.test(t),a=i||o;(this._supportsNamedGraphs=!(r||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||n||i||s),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=""===t||/star|\*$/.test(t),a&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new O({lineMode:a,n3:s,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){L=0}_setBase(e){if(e){let t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=0>e.indexOf("/")?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,r,n,i){let o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:n,object:i,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){let r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":if(null!==this._graph)return this._error("Unclosed graph",e);return delete this._prefixes._,this._callback(null,null,this._prefixes);case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":let n=this._resolveIRI(e.value);if(null===n)return this._error("Invalid IRI",e);r=this._factory.namedNode(n);break;case"type":case"prefixed":let i=this._prefixes[e.prefix];if(void 0===i)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject;case"}":return this._readPunctuation(e);case"@forSome":if(!this._n3Mode)return this._error('Unexpected "@forSome"',e);return this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList;case"@forAll":if(!this._n3Mode)return this._error('Unexpected "@forAll"',e);return this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList;case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":if(null===this._predicate)return this._error(`Unexpected ${t}`,e);return this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e);case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject;case"<<":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);let t=null===this._predicate;return(this._restoreContext("blank",e),null!==this._object)?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,n=this._readListItem,i=this._subject,o=this._contextStack,s=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),n=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(n=this._readPredicate,this._subject===this.RDF_NIL)return n}else if(n=this._getContextEndReader(),this._object===this.RDF_NIL)return n;r=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,n=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),n=this._getContextEndReader());break;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject;default:if(void 0===(t=this._readEntity(e)))return}if(null===r&&(this._subject=r=this._factory.blankNode()),null===i?null===s.predicate?s.subject=r:s.object=r:this._emit(i,this.RDF_REST,r,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return n}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let r=this._readEntity(e);if(void 0===r)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){let r=this._completeLiteral(e);if(r)return(this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token)?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph,n=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);let o=this._predicate,s=this._object;this._subject=this._factory.quad(n,o,s,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==n){let e=this._predicate,t=this._object;i?this._emit(t,e,n,r):this._emit(n,e,t,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){let t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let t=this._contextStack,r=t.length&&t[t.length-1];if(r&&"item"===r.type){let t=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r,n=this._factory.blankNode();if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=n):(t=this._object,this._object=n),this._emit(t,r,n,this._graph),this._readPath}_readBackwardPath(e){let t,r,n=this._factory.blankNode();if(void 0!==(t=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,t,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);let t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return(this._restoreContext("<<",e),null===this._subject)?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,n){this._callback(null,this._factory.quad(e,t,r,n||this.DEFAULTGRAPH))}_error(e,t){let r=Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=U}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let t=e.length,r="",n=-1,i=-1,o=0,s="/";for(;n<t;){switch(s){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<t&&"/"!==e[i];)n=i;break;case"?":case"#":n=t;break;case"/":if("."===e[n+1])switch(s=e[++n+1]){case"/":r+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return r+e.substring(o,n)+e.substr(n+1);case".":if(void 0===(s=e[++n+1])||"/"===s||"?"===s||"#"===s){if(r+=e.substring(o,n-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),"/"!==s)return`${r}/${e.substr(n+1)}`;o=n+1}}}s=e[++n]}return r+e.substring(o)}parse(e,t,r){let n,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(n=t.onQuad,i=t.onPrefix,o=t.onComment):(n=t,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L++}_`,this._prefixCallback=i||U,this._inversePredicate=!1,this._quantified=Object.create(null),!n){let t,r=[];if(this._callback=(e,n)=>{e?t=e:n&&r.push(n)},this._lexer.tokenize(e).every(e=>this._readCallback=this._readCallback(e)),t)throw t;return r}let s=(e,t)=>{null!==e?(this._callback(e),this._callback=U):this._readCallback&&(this._readCallback=this._readCallback(t))};o&&(this._lexer.comments=!0,s=(e,t)=>{null!==e?(this._callback(e),this._callback=U):this._readCallback&&("comment"===t.type?o(t.value):this._readCallback=this._readCallback(t))}),this._callback=n,this._lexer.tokenize(e,s)}}function U(){}function M(e,t){e._factory=t,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=t.namedNode(o.A.rdf.first),e.RDF_REST=t.namedNode(o.A.rdf.rest),e.RDF_NIL=t.namedNode(o.A.rdf.nil),e.N3_FORALL=t.namedNode(o.A.r.forAll),e.N3_FORSOME=t.namedNode(o.A.r.forSome),e.ABBREVIATIONS={a:t.namedNode(o.A.rdf.type),"=":t.namedNode(o.A.owl.sameAs),">":t.namedNode(o.A.log.implies),"<":t.namedNode(o.A.log.isImpliedBy)},e.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}M(D.prototype,i.Ay);var B=r(3735);let H=()=>{let e=[],t=[],r=[];return{onQuad:t=>{e.push(t)},onError:e=>{r.push(e)},onComplete:e=>{t.push(e)},parse:(n,i)=>{new D({format:"text/turtle",baseIRI:(0,B.$s)(i)}).parse(n,(n,i)=>{n?r.forEach(e=>e(n)):i?e.forEach(e=>e(i)):t.forEach(e=>e())})}}};async function $(e,t){let r=new v({format:"text/turtle",prefixes:null==t?void 0:t.prefixes}),n=e.map(e=>i.Ay.quad(e.subject,e.predicate,e.object,void 0));r.addQuads(n);let o=new Promise((e,t)=>{r.end((r,n)=>{r?t(r):e(n)})});return await o}var K=r(695),W=r(1482),V=r(8785),q=r(9786),z=r(4426),J=r(2672);function Z(e){let t=new URL(e);return t.hash="",t.href}var G=r(3511);function Y(){return(0,G.CN)({type:"Dataset",graphs:{default:{}}})}async function X(e,t={}){if((0,q.BN)(e)){let t=await e.clone().text();throw new B.fk(`Fetching the SolidDataset at [${e.url}] failed: [${e.status}] [${e.statusText}] ${t}.`,e,t)}let r=(0,B.ng)(e),n={"text/turtle":H(),...t.parsers},i=(0,B.gt)(r);if(null===i)throw Error(`Could not determine the content type of the Resource at [${(0,B.$s)(r)}].`);let o=i.split(";")[0],s=n[o];if(void 0===s)throw Error(`The Resource at [${(0,B.$s)(r)}] has a MIME type of [${o}], but the only parsers available are for the following MIME types: [${Object.keys(n).join(", ")}].`);let a=await e.text(),l=await new Promise((e,t)=>{let n=new x;s.onError(e=>{t(Error(`Encountered an error parsing the Resource at [${(0,B.$s)(r)}] with content type [${i}]: ${e}`))}),s.onQuad(e=>{n.add(e)}),s.onComplete(()=>{e(n)}),s.parse(a,r)}),u=(0,G.CN)(Array.from(l).reduce((e,t)=>(0,F.fQ)(e,t),{graphs:{default:{}},type:"Dataset"}));return(0,G.CN)({...u,...r})}async function Q(e,t){var r,n;let i=(0,V.l)((0,V.t)(e)),o=Object.keys(null!=(r=null==t?void 0:t.parsers)?r:{}),s=o.length>0?o.join(", "):"text/turtle",a=await (null!=(n=null==t?void 0:t.fetch)?n:fetch)(i,{headers:{Accept:s}});if((0,q.BN)(a)){let e=await a.clone().text();throw new B.fk(`Fetching the Resource at [${i}] failed: [${a.status}] [${a.statusText}] ${e}.`,a,e)}return await X(a,t)}async function ee(e){let t=e.internal_changeLog.deletions.length>0?`DELETE DATA {${(await $(e.internal_changeLog.deletions.map(eo))).trim()}};`:"",r=e.internal_changeLog.additions.length>0?`INSERT DATA {${(await $(e.internal_changeLog.additions.map(eo))).trim()}};`:"";return{method:"PATCH",body:`${t} ${r}`,headers:{"Content-Type":"application/sparql-update"}}}async function et(e,t){return{method:"PUT",body:await $((0,F.Ro)(e).map(eo),t),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${A.Lq.Resource}>; rel="type"`}}}async function er(e,t,r){var n;let o=(0,V.l)((0,V.t)(e)),s=(0,J.ZU)(t),a=ei(s,o)?await ee(s):await et(s,r),l=await (null!=(n=null==r?void 0:r.fetch)?n:fetch)(o,a);if((0,q.BN)(l)){let e=ei(s,o)?`The changes that were sent to the Pod are listed below.

${function(e){if(!(0,W.NF)(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!(0,W.rg)(e)||0===e.internal_changeLog.additions.length&&0===e.internal_changeLog.deletions.length)return`## Changes compared to ${(0,B.$s)(e)}

This SolidDataset has not been modified since it was fetched from ${(0,B.$s)(e)}.
`;let t=`## Changes compared to ${(0,B.$s)(e)}
`,r=function(e){let t=Object.create(null);return e.internal_changeLog.deletions.forEach(r=>{var n,i,o;let s=(0,K.Ad)(r.subject)?(0,K.NQ)(r.subject,(0,B.$s)(e)):r.subject;if(!(0,K.Y2)(s)||!(0,K.Y2)(r.predicate))return;let a=(0,V.t)(s),l=(0,V.t)(r.predicate);null!=t[a]||(t[a]=Object.create(null)),null!=(o=t[a])[l]||(o[l]={added:[],deleted:[]}),t[a][l].deleted.push(r.object)}),e.internal_changeLog.additions.forEach(r=>{var n,i,o;let s=(0,K.Ad)(r.subject)?(0,K.NQ)(r.subject,(0,B.$s)(e)):r.subject;if(!(0,K.Y2)(s)||!(0,K.Y2)(r.predicate))return;let a=(0,V.t)(s),l=(0,V.t)(r.predicate);null!=t[a]||(t[a]=Object.create(null)),null!=(o=t[a])[l]||(o[l]={added:[],deleted:[]}),t[a][l].added.push(r.object)}),t}(e);return Object.keys(r).forEach(e=>{t+=`
### Thing: ${e}
`;let n=r[e];Object.keys(n).forEach(e=>{t+=`
Property: ${e}
`;let{deleted:r}=n[e],{added:i}=n[e];r.length>0&&(t+="- Removed:\n",t+=r.reduce((e,t)=>`${e}  - ${(0,J.e0)(t)}
`,"")),i.length>0&&(t+="- Added:\n",t+=i.reduce((e,t)=>`${e}  - ${(0,J.e0)(t)}
`,""))})}),t}(s)}`:`The SolidDataset that was sent to the Pod is listed below.

${function(e){let t="";(0,W.NF)(e)?t+=`# SolidDataset: ${(0,B.$s)(e)}
`:t+=`# SolidDataset (no URL yet)
`;let r=(0,z.eC)(e);return 0===r.length?t+="\n<empty>\n":r.forEach(r=>{t+=`
${(0,z.Y)(r)}`,(0,W.rg)(e)&&(t+=`
${function(e,t){let r=i.Ay.namedNode(t.url),n=e.internal_changeLog.additions.reduce((e,t)=>t.subject.equals(r)?e+1:e,0),o=e.internal_changeLog.deletions.reduce((e,t)=>t.subject.equals(r)?e+1:e,0),s=1===n?"1 new value added":`${n} new values added`,a=1===o?"1 value removed":`${o} values removed`;return`(${s} / ${a})`}(e,r)}
`)}),t}(s)}`,t=await l.clone().text();throw new B.fk(`Storing the Resource at [${o}] failed: [${l.status}] [${l.statusText}] ${t}.

${e}`,l,t)}let u={...(0,q.um)(l),isRawData:!1};return function(e){let t=(0,B.$s)(e),r=e.graphs.default,n=Object.keys(r).reduce((e,r)=>{let n=function(e,t){let r=Object.keys(e.predicates).reduce((e,r)=>{var n;let i=null!=(n=e[r].namedNodes)?n:[];if(i.every(e=>!(0,G.AA)(e)))return e;let o=(0,G.CN)(i.map(e=>(0,G.AA)(e)?`${t}#${(0,G.J0)(e)}`:e)),s=(0,G.CN)({...e[r],namedNodes:o});return(0,G.CN)({...e,[r]:s})},e.predicates);return(0,G.CN)({...e,predicates:r,url:(0,G.AA)(e.url)?`${t}#${(0,G.J0)(e.url)}`:e.url})}(e[r],t),i=(0,G.AA)(r)?`${t}#${(0,G.J0)(r)}`:r,o={...e};return delete o[r],o[i]=n,(0,G.CN)(o)},r),i=(0,G.CN)({...e.graphs,default:n});return(0,G.CN)({...e,graphs:i})}((0,G.CN)({...t,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:u}))}async function en(e,t){var r;let n=(0,W.NF)(e)?(0,V.t)((0,B.$s)(e)):(0,V.l)((0,V.t)(e)),i=await (null!=(r=null==t?void 0:t.fetch)?r:fetch)(n,{method:"DELETE"});if((0,q.BN)(i)){let e=await i.clone().text();throw new B.fk(`Deleting the SolidDataset at [${n}] failed: [${i.status}] [${i.statusText}] ${e}.`,i,e)}}function ei(e,t){return(0,W.rg)(e)&&(0,W.NF)(e)&&"string"==typeof e.internal_resourceInfo.sourceIri&&Z(e.internal_resourceInfo.sourceIri)===Z(t)}function eo(e){let t=(0,K.Y2)(e.subject)?es(e.subject):e.subject,r=(0,K.Y2)(e.object)?es(e.object):e.object;return i.Ay.quad(t,e.predicate,r,e.graph)}function es(e){return(0,G.AA)(e.value)?i.Ay.namedNode(`#${(0,G.J0)(e.value)}`):e}},9846:(e,t,r)=>{"use strict";let n=r(9143),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:s}=r(4039),{Buffer:a}=r(1642),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:u}=r(7894).codes;e.exports=function(e,t,r){let c,d;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,c=t[o]();else if(t&&t[s])d=!1,c=t[s]();else throw new l("iterable",["Iterable"],t);let f=new e({objectMode:!0,highWaterMark:1,...r}),h=!1;async function p(e){let t=null!=e,r="function"==typeof c.throw;if(t&&r){let{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"==typeof c.return){let{value:e}=await c.return();await e}}async function g(){for(;;){try{let{value:e,done:t}=d?await c.next():c.next();if(t)f.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw h=!1,new u;if(f.push(t))continue;h=!1}}catch(e){f.destroy(e)}break}}return f._read=function(){h||(h=!0,g())},f._destroy=function(e,t){i(p(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))},f}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(92),t(8253))),_N_E=e.O()}]);