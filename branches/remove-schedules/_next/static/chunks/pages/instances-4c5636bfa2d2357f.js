(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{1691:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(6029),s=r(7127),a=r(3417),o=r(6207),l=r(1979),i=r(8337),c=r(5729),d=r(6768),h=r(4426),u=r(2041),m=r(8117),p=r(8429),f=r(9651),w=r(8230),g=r.n(w),v=r(4e3);function x(){let e=(0,v.useRouter)(),{getService:t}=(0,c.useContext)(o.h),r=t(),{instanceUrls:w,mutate:x,isLoading:A}=function(){let e=(0,m._)(),{data:t,isLoading:r}=(0,f.A)(e.info.webId),[n,s]=(0,c.useState)([]),[a,o]=(0,c.useState)([]),[l,i]=(0,c.useState)([]),{data:w}=(0,f.A)(l),[g,v]=(0,c.useState)([]),{data:x,mutate:A,isLoading:C}=(0,d.Ay)(n,p.P),{data:y,mutate:N,isLoading:k}=(0,d.Ay)(a,p.P);return(0,c.useEffect)(()=>{if(!t)return void s([]);Promise.all(t.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>s(e)).catch(e=>console.error("Failed to fetch private type indices, error:",e)),Promise.all(t.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/2000/01/rdf-schema#seeAlso")))).then(e=>e.flat()).then(e=>i(e)).catch(e=>console.error("Failed to fetch see also references, error:",e))},[t]),(0,c.useEffect)(()=>{if(!w)return void o([]);Promise.all(w.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>o(e)).catch(e=>console.error("Failed to fetch see also private type indices, error:",e))},[w]),(0,c.useEffect)(()=>{[...null!=x?x:[],...null!=y?y:[]].map(e=>{v(h.eC(e).reduce((e,t)=>{var r,n,s,a;let{predicates:o}=t;return(null==(n=o["http://www.w3.org/ns/solid/terms#forClass"])||null==(r=n.namedNodes)?void 0:r.includes("http://antwika.com/ns/solid-memo#SolidMemoData"))?[...e,...null!=(a=null==(s=o["http://www.w3.org/ns/solid/terms#instance"])?void 0:s.namedNodes)?a:[]]:e},[]))})},[x,y]),{webIdProfileDatasets:t,privateTypeIndexDatasets:x,instanceUrls:g,mutate:()=>{A(x).catch(e=>console.error("Failed to mutate, error:",e)),N(y).catch(e=>console.error("Failed to mutate, error:",e))},isLoading:r||C||k}}();return(0,c.useEffect)(()=>{if(1===w.length){let t=w[0];void 0!==t&&(console.log("There's only one instance url, assume the user want to use that one."),e.push("/instances/".concat(encodeURIComponent(t))))}},[e,w]),(0,n.jsxs)(a.default,{children:[(0,n.jsx)(l.$n,{onClick:()=>{r.newInstance().then(()=>x()).catch(e=>console.error("Failed with error:",e))},children:"Create new instance"}),A&&(0,n.jsx)("div",{children:"Loading instances..."}),!A&&0===w.length&&(0,n.jsx)("div",{children:"No instances found"}),!A&&w.map(e=>(0,n.jsx)("div",{className:"items-center gap-2",children:(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(g(),{href:"/instances/".concat(encodeURIComponent(e)),className:"hover:underline",children:(0,n.jsxs)("div",{className:"flex gap-1",title:e,children:[(0,n.jsx)(i.A,{}),(0,n.jsx)("strong",{children:(0,n.jsx)("span",{children:(0,s.L)(e)})})," ","(Instance)"]})})})},e))]})}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(5729);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:d,...h},u)=>(0,n.createElement)("svg",{ref:u,...c,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:l("lucide",a),...!o&&!i(h)&&{"aria-hidden":"true"},...h},[...d.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(o)?o:[o]])),h=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...a},i)=>(0,n.createElement)(d,{ref:i,iconNode:t,className:l(`lucide-${s(o(e))}`,`lucide-${e}`,r),...a}));return r.displayName=o(e),r}},6449:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/instances",function(){return r(1691)}])},8337:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(5229).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9651:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(8429),s=r(6768);function a(e){let{data:t,mutate:r,isLoading:a}=(0,s.Ay)("string"==typeof e?[e]:e,n.P);return{data:t,mutate:r,isLoading:a}}}},e=>{var t=t=>e(e.s=t);e.O(0,[768,636,593,792],()=>t(6449)),_N_E=e.O()}]);