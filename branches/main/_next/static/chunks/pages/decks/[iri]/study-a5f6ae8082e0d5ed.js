(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{607:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var i=n(3343);function a(e,t){return(0,i.w)(t||e,e)}},1095:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>a,_P:()=>r,s0:()=>s,w4:()=>i});let i=864e5,a=6e4,s=36e5,r=Symbol.for("constructDateFrom")},1728:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(2041),a=n(4426),s=n(9651),r=n(281);function o(e){let{data:t,mutate:n,isLoading:o}=(0,s.A)(e),l=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,r.nt)({iri:e.url,type:(0,i.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,i.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),hasCard:(0,i.tX)(e,"http://antwika.com/ns/solid-memo#hasCard")})),c=l.reduce((e,t)=>(e[t.iri]=t,e),{});return{deckDatasets:t,decks:l,deckMap:c,mutate:n,isLoading:o}}},2271:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var i=n(607);function a(e,t){let n=(0,i.a)(e,t?.in);return n.setHours(0,0,0,0),n}},3343:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var i=n(1095);function a(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&i._P in e?e[i._P](t):e instanceof Date?new e.constructor(t):new Date(t)}},3456:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/decks/[iri]/study",function(){return n(4818)}])},4818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(6029),a=n(3417),s=n(6207),r=n(1979),o=n(4e3),l=n(5729),c=n(1728),d=n(281),m=n(9287),u=n(2271),w=n(6750),h=n(607);function p(){var e;let{getService:t,getSpacedRepetitionAlgorithm:n}=(0,l.useContext)(s.h),p=t(),{iri:f}=(0,o.useParams)(),{deckMap:v,isLoading:k}=(0,c.A)(f?[null==f?void 0:f.toString()]:[]),x=f?v[f.toString()]:void 0,{flashcardMap:D,mutate:N}=(0,m.A)(null!=(e=null==x?void 0:x.hasCard)?e:[]),j=n(),[y,I]=(0,l.useState)(!1),_=(0,l.useMemo)(()=>Object.keys(D).filter(e=>{var t;let n=D[e];if(!n)return!1;let i=(0,u.o)(null!=(t=n.lastReviewed)?t:new Date),a=n.lastReviewed?n.interval:0,s=(0,u.o)((0,w.f)(i,a)),r=(0,u.o)(new Date);return!(+(0,h.a)(s)>+(0,h.a)(r))}).map(e=>D[e]).filter(e=>void 0!==e).sort((e,t)=>(e.lastReviewed?new Date(e.lastReviewed).getTime():0)-(t.lastReviewed?new Date(t.lastReviewed).getTime():0)),[D]);if(k)return(0,i.jsx)(a.default,{children:(0,i.jsx)(r.Zp,{className:"p-2",children:(0,i.jsx)("div",{children:"Loading deck..."})})});if(!x)return(0,i.jsx)(a.default,{children:(0,i.jsx)("div",{children:"No deck found"})});let g=_[0];if(!g)return(0,i.jsx)(a.default,{children:(0,i.jsx)("div",{children:"There are no more flashcards to study in this deck!"})});let C=async(e,t)=>{console.log("Reviewed flashcard",(0,d.L)(e.iri),", answer quality",t);let n=j.compute([{...e,q:t}]);await Promise.all(n.map(e=>p.updateFlashcard(e))),await N(),I(!1)};return(0,i.jsx)(a.default,{children:(0,i.jsx)(r.Zp,{className:"p-2",children:(0,i.jsxs)("div",{className:"space-x-2 space-y-1",children:[(0,i.jsxs)("div",{children:["Reviews remaining: ",_.length]}),!y&&(0,i.jsx)(r.Zp,{className:"p-2",children:g.front}),y&&(0,i.jsx)(r.Zp,{className:"p-2",children:g.back}),!y&&(0,i.jsx)(r.$n,{onClick:()=>I(!0),children:"Display answer"}),y&&(0,i.jsx)(r.$n,{onClick:()=>C(g,0),children:"Again"}),y&&(0,i.jsx)(r.$n,{onClick:()=>C(g,2),children:"Hard"}),y&&(0,i.jsx)(r.$n,{onClick:()=>C(g,4),children:"Good"}),y&&(0,i.jsx)(r.$n,{onClick:()=>C(g,5),children:"Easy"})]})},x.iri)})}},6750:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var i=n(3343),a=n(607);function s(e,t,n){let s=(0,a.a)(e,n?.in);return isNaN(t)?(0,i.w)(n?.in||e,NaN):(t&&s.setDate(s.getDate()+t),s)}},9287:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(2041),a=n(4426),s=n(9651),r=n(281);function o(e){let{data:t,mutate:n,isLoading:o}=(0,s.A)(e),l=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,r.Ez)({iri:e.url,type:(0,i.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,i.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),isInDeck:(0,i.ID)(e,"http://antwika.com/ns/solid-memo#isInDeck"),front:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#front"),back:(0,i.NB)(e,"http://antwika.com/ns/solid-memo#back"),interval:(0,i.XU)(e,"http://antwika.com/ns/solid-memo#interval"),easeFactor:(0,i.S5)(e,"http://antwika.com/ns/solid-memo#easeFactor"),repetition:(0,i.XU)(e,"http://antwika.com/ns/solid-memo#repetition"),lastReviewed:(0,i.oq)(e,"http://antwika.com/ns/solid-memo#lastReviewed")})),c=l.reduce((e,t)=>(e[t.iri]=t,e),{});return{flashcardDatasets:t,flashcards:l,flashcardMap:c,mutate:n,isLoading:o}}},9651:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8429),a=n(6768);function s(e){let{data:t,mutate:n,isLoading:s}=(0,a.Ay)("string"==typeof e?[e]:e,i.P);return{data:t,mutate:n,isLoading:s}}}},e=>{var t=t=>e(e.s=t);e.O(0,[768,636,593,792],()=>t(3456)),_N_E=e.O()}]);