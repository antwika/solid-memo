(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{92:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(2749)}])},261:(e,t,r)=>{"use strict";let i=r(9143),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=r(7894),{Symbol:a}=r(4039),{kIsDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:d}=r(918),h=a("kDestroy"),f=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let n=!1;function o(t){if(n)return;n=!0;let o=e._readableState,s=e._writableState;p(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?i.nextTick(y,e,t):i.nextTick(m,e)}try{e._destroy(t||null,o)}catch(e){o(e)}}function y(e,t){v(e,t),m(e)}function m(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function v(e,t){let r=e._readableState,i=e._writableState;null!=i&&i.errorEmitted||null!=r&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function _(e,t,r){let n=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),r?i.nextTick(v,e,t):v(e,t))}function b(e){let t=!1;function r(r){if(t)return void _(e,null!=r?r:new o);t=!0;let n=e._readableState,s=e._writableState,a=s||n;n&&(n.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(h,r):r?_(e,r,!0):i.nextTick(w,e)}try{e._construct(e=>{i.nextTick(r,e)})}catch(e){i.nextTick(r,e)}}function w(e){e.emit(f)}function S(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function x(e){e.emit("close")}function E(e,t){e.emit("error",t),i.nextTick(x,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(f,t),e.listenerCount(f)>1||i.nextTick(b,e)},destroyer:function(e,t){!(!e||u(e))&&(t||c(e)||(t=new s),d(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?i.nextTick(E,e,t):i.nextTick(x,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){let r=this._readableState,i=this._writableState,o=i||r;return null!=i&&i.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(p(e,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),o.constructed?g(this,e,t):this.once(h,function(r){g(this,n(r,e),t)})),this},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:_}},331:(e,t,r)=>{"use strict";let{Buffer:i}=r(1642),{ObjectDefineProperty:n,ObjectKeys:o,ReflectApply:s}=r(4039),{promisify:{custom:a}}=r(6733),{streamReturningOperators:l,promiseReturningOperators:u}=r(8098),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=r(7894),d=r(3463),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:f}=r(4318),{pipeline:p}=r(927),{destroyer:g}=r(261),y=r(5791),m=r(9666),v=r(918),_=e.exports=r(5718).Stream;for(let e of(_.isDestroyed=v.isDestroyed,_.isDisturbed=v.isDisturbed,_.isErrored=v.isErrored,_.isReadable=v.isReadable,_.isWritable=v.isWritable,_.Readable=r(6261),o(l))){let t=l[e];function b(...e){if(new.target)throw c();return _.Readable.from(s(t,this,e))}n(b,"name",{__proto__:null,value:t.name}),n(b,"length",{__proto__:null,value:t.length}),n(_.Readable.prototype,e,{__proto__:null,value:b,enumerable:!1,configurable:!0,writable:!0})}for(let e of o(u)){let t=u[e];function w(...e){if(new.target)throw c();return s(t,this,e)}n(w,"name",{__proto__:null,value:t.name}),n(w,"length",{__proto__:null,value:t.length}),n(_.Readable.prototype,e,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}_.Writable=r(2661),_.Duplex=r(9667),_.Transform=r(1079),_.PassThrough=r(3185),_.pipeline=p;let{addAbortSignal:S}=r(9110);_.addAbortSignal=S,_.finished=y,_.destroy=g,_.compose=d,_.setDefaultHighWaterMark=h,_.getDefaultHighWaterMark=f,n(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>m}),n(p,a,{__proto__:null,enumerable:!0,get:()=>m.pipeline}),n(y,a,{__proto__:null,enumerable:!0,get:()=>m.finished}),_.Stream=_,_._isUint8Array=function(e){return e instanceof Uint8Array},_._uint8ArrayToBuffer=function(e){return i.from(e.buffer,e.byteOffset,e.byteLength)}},666:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let i=t.shift();if("f"===r)return i.toFixed(6);if("j"===r)return JSON.stringify(i);if("s"!==r||"object"!=typeof i)return i.toString();{let e=i.constructor!==Object?i.constructor.name:"";return`${e} {}`.trim()}}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;else if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":if(isNaN(e))return"NaN";if(Object.is(e,-0))return String(e);return e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},695:(e,t,r)=>{"use strict";r.d(t,{Ad:()=>k,EO:()=>b,K:()=>d,MR:()=>u,NQ:()=>I,OI:()=>l,PF:()=>_,QC:()=>w,QH:()=>m,ST:()=>s,Tv:()=>c,Y2:()=>S,Yp:()=>p,ZB:()=>v,c$:()=>x,g0:()=>F,ls:()=>f,tQ:()=>h,vk:()=>a,ye:()=>A});var i=r(5177),n=r(3511),o=r(8785);let s={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function a(e){return e?"true":"false"}function l(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null}function u(e){let t,r;if(e.millisecond&&(t=e.millisecond<10?`00${e.millisecond}`:e.millisecond<100?`0${e.millisecond}`:e.millisecond),"number"==typeof e.timezoneHourOffset){let t=10>Math.abs(e.timezoneHourOffset)?`0${Math.abs(e.timezoneHourOffset)}`:Math.abs(e.timezoneHourOffset);r=e.timezoneHourOffset>=0?`+${t}`:`-${t}`,e.timezoneMinuteOffset?r=`${r}:${e.timezoneMinuteOffset<10?`0${e.timezoneMinuteOffset}`:e.timezoneMinuteOffset}`:r+=":00"}return`${e.hour<10?`0${e.hour}`:e.hour}:${e.minute<10?`0${e.minute}`:e.minute}:${e.second<10?`0${e.second}`:e.second}${e.millisecond?`.${t}`:""}${r||""}`}function c(e){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]=g(e),[i,n,o]=t.split(":"),s=Number.parseInt(i,10),a=Number.parseInt(n,10),[l,u]=o.split("."),c=Number.parseInt(l,10),d=u?Number.parseInt(u,10):void 0;a>=60&&(s+=1,a-=60);let h={hour:s,minute:a,second:c};if("number"==typeof d&&(h.millisecond=d),"string"==typeof r){let[e,t]=y(r);if("number"!=typeof e||e>24||"number"!=typeof t||t>59)return null;h.timezoneHourOffset=e,h.timezoneMinuteOffset=t}return h}function d(e){return e.toISOString()}function h(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]=e.split("T"),[i,n]="-"===t.charAt(0)?[-1,t.substring(1)]:[1,t],[o,s,a]=n.split("-"),l=Number.parseInt(o,10)*i,u=Number.parseInt(s,10)-1,c=Number.parseInt(a,10),[d,h]=g(r),[f,p]="string"==typeof h?y(h):[0,0],[m,v,_]=d.split(":"),b=Number.parseInt(m,10)+f,w=Number.parseInt(v,10)+p,[S,x]=_.split("."),E=new Date(Date.UTC(l,u,c,b,w,Number.parseInt(S,10),x?Number.parseInt(x,10):0));return l>=0&&l<100&&E.setUTCFullYear(E.getUTCFullYear()-1900),E}function f(e){let t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),[,n]=g(e.toISOString());return`${t}-${String(r).padStart(2,"0")}-${String(i).padStart(2,"0")}${n}`}function p(e){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;let[t,r]="-"===e.charAt(0)?[-1,e.substring(1)]:[1,e],[i,n,o]=r.split("-"),s=o.length>2?o.substring(0,2):o,a=Number.parseInt(i,10)*t,l=Number.parseInt(n,10)-1,u=new Date(Date.UTC(a,l,Number.parseInt(s,10),12));return a>=0&&a<100&&u.setUTCFullYear(u.getUTCFullYear()-1900),u}function g(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];let t=e.split("+"),r=e.split("-");return 1===t.length&&1===r.length?[t[0],void 0]:t.length>r.length?[t[0],`+${t[1]}`]:[r[0],`-${r[1]}`]}function y(e){if("Z"===e)return[0,0];let t="+"===e.charAt(0)?1:-1,[r,i]=e.substring(1).split(":");return[Number.parseInt(r,10)*t,Number.parseInt(i,10)*t]}function m(e){return e.toString()}function v(e){let t=Number.parseFloat(e);return Number.isNaN(t)?null:t}function _(e){return e.toString()}function b(e){let t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}function w(e){return e.toLowerCase()}function S(e){return E(e)&&"NamedNode"===e.termType}function x(e){return E(e)&&"Literal"===e.termType}function E(e){return null!==e&&"object"==typeof e&&"string"==typeof e.termType&&"string"==typeof e.value&&"function"==typeof e.equals}function k(e){return S(e)&&(0,n.AA)(e.value)}function F(e){let t=(0,o.t)(e);if("function"!=typeof URL)return!0;try{return new URL(t),!0}catch(e){return!1}}function I(e,t){return i.Ay.namedNode(A((0,n.J0)(e.value),t))}function A(e,t){if("function"!=typeof URL)throw Error("The URL interface is not available, so an IRI cannot be determined.");let r=new URL(t);return r.hash=e,r.href}},918:(e,t,r)=>{"use strict";let{SymbolAsyncIterator:i,SymbolIterator:n,SymbolFor:o}=r(4039),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),u=o("nodejs.stream.writable"),c=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise");function h(e,t=!1){var r;return!!(e&&"function"==typeof e.pipe&&"function"==typeof e.on&&(!t||"function"==typeof e.pause&&"function"==typeof e.resume)&&(!e._writableState||(null==(r=e._readableState)?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function f(e){var t;return!!(e&&"function"==typeof e.write&&"function"==typeof e.on&&(!e._readableState||(null==(t=e._writableState)?void 0:t.writable)!==!1))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!!(e&&!p(e)&&"function"==typeof e.pipeThrough&&"function"==typeof e.getReader&&"function"==typeof e.cancel)}function y(e){return!!(e&&!p(e)&&"function"==typeof e.getWriter&&"function"==typeof e.abort)}function m(e){return!!(e&&!p(e)&&"object"==typeof e.readable&&"object"==typeof e.writable)}function v(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!!(e.destroyed||e[s]||null!=i&&i.destroyed)}function _(e){if(!f(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function b(e,t){if(!h(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function w(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!v(e)&&h(e)&&e.readable&&!b(e)}function S(e){return e&&null!=e[u]?e[u]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!v(e)&&f(e)&&e.writable&&!_(e)}function x(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function E(e){return"boolean"==typeof e._sent100&&x(e)}e.exports={isDestroyed:v,kIsDestroyed:s,isDisturbed:function(e){var t;return!!(e&&(null!=(t=e[c])?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,r,i,n,o,s,l,u,c,d;return!!(e&&(null!=(t=null!=(r=null!=(i=null!=(n=null!=(o=null!=(s=e[a])?s:e.readableErrored)?o:e.writableErrored)?n:null==(l=e._readableState)?void 0:l.errorEmitted)?i:null==(u=e._writableState)?void 0:u.errorEmitted)?r:null==(c=e._readableState)?void 0:c.errored)?t:null==(d=e._writableState)?void 0:d.errored))},kIsErrored:a,isReadable:w,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:o("nodejs.webstream.controllerErrorFunction"),kIsWritable:u,isClosed:function(e){if(!p(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&x(e)?e._closed:null},isDuplexNodeStream:function(e){return!!(e&&"function"==typeof e.pipe&&e._readableState&&"function"==typeof e.on&&"function"==typeof e.write)},isFinished:function(e,t){return p(e)?!!v(e)||!((null==t?void 0:t.readable)!==!1&&w(e)||(null==t?void 0:t.writable)!==!1&&S(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[i]:!1===t?"function"==typeof e[n]:"function"==typeof e[i]||"function"==typeof e[n])},isReadableNodeStream:h,isReadableStream:g,isReadableEnded:function(e){if(!h(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!!t&&!t.errored&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:b,isReadableErrored:function(e){var t,r;return p(e)?e.readableErrored?e.readableErrored:null!=(t=null==(r=e._readableState)?void 0:r.errored)?t:null:null},isNodeStream:p,isWebStream:function(e){return g(e)||y(e)||m(e)},isWritable:S,isWritableNodeStream:f,isWritableStream:y,isWritableEnded:_,isWritableFinished:function(e,t){if(!f(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return p(e)?e.writableErrored?e.writableErrored:null!=(t=null==(r=e._writableState)?void 0:r.errored)?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&(null==(t=e.req)?void 0:t.upgradeOrConnect)===void 0},isServerResponse:E,willEmitClose:function(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!i&&E(e)||!!(i&&i.autoDestroy&&i.emitClose&&!1===i.closed)},isTransformStream:m}},927:(e,t,r)=>{"use strict";let i,n,o,s=r(9143),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:u,SymbolDispose:c}=r(4039),d=r(5791),{once:h}=r(6733),f=r(261),p=r(9667),{aggregateTwoErrors:g,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:w}=r(7894),{validateFunction:S,validateAbortSignal:x}=r(1204),{isIterable:E,isReadable:k,isReadableNodeStream:F,isNodeStream:I,isTransformStream:A,isWebStream:T,isReadableStream:R,isReadableFinished:C}=r(918),P=globalThis.AbortController||r(8461).AbortController;function N(e,t,r){let i=!1;return e.on("close",()=>{i=!0}),{destroy:t=>{i||(i=!0,f.destroyer(e,t||new _("pipe")))},cleanup:d(e,{readable:t,writable:r},e=>{i=!e})}}function j(e){if(E(e))return e;if(F(e))return O(e);throw new y("val",["Readable","Iterable","AsyncIterable"],e)}async function*O(e){n||(n=r(6261)),yield*n.prototype[u].call(e)}async function L(e,t,r,{end:i}){let n,o=null,s=e=>{if(e&&(n=e),o){let e=o;o=null,e()}},a=()=>new l((e,t)=>{n?t(n):o=()=>{n?t(n):e()}});t.on("drain",s);let u=d(t,{readable:!1},s);try{for await(let r of(t.writableNeedDrain&&await a(),e))t.write(r)||await a();i&&(t.end(),await a()),r()}catch(e){r(n!==e?g(n,e):e)}finally{u(),t.off("drain",s)}}async function D(e,t,r,{end:i}){A(t)&&(t=t.writable);let n=t.getWriter();try{for await(let t of e)await n.ready,n.write(t).catch(()=>{});await n.ready,i&&await n.close(),r()}catch(e){try{await n.abort(e),r(e)}catch(e){r(e)}}}function U(e,t,n){let l,u,h,f;if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new v("streams");let g=new P,_=g.signal,S=null==n?void 0:n.signal,O=[];function U(){$(new w)}x(S,"options.signal"),o=o||r(6733).addAbortListener,S&&(l=o(S,U));let M=[],B=0;function H(e){$(e,0==--B)}function $(e,r){var i;if(e&&(!u||"ERR_STREAM_PREMATURE_CLOSE"===u.code)&&(u=e),u||r){for(;M.length;)M.shift()(u);null==(i=l)||i[c](),g.abort(),r&&(u||O.forEach(e=>e()),s.nextTick(t,u,h))}}for(let t=0;t<e.length;t++){let o=e[t],a=t<e.length-1,l=t>0,u=a||(null==n?void 0:n.end)!==!1,c=t===e.length-1;if(I(o)){if(u){let{destroy:e,cleanup:t}=N(o,a,l);M.push(e),k(o)&&c&&O.push(t)}function K(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&H(e)}o.on("error",K),k(o)&&c&&O.push(()=>{o.removeListener("error",K)})}if(0===t)if("function"==typeof o){if(!E(f=o({signal:_})))throw new m("Iterable, AsyncIterable or Stream","source",f)}else f=E(o)||F(o)||A(o)?o:p.from(o);else if("function"==typeof o){var V,W;if(f=o(f=A(f)?j(null==(V=f)?void 0:V.readable):j(f),{signal:_}),a){if(!E(f,!0))throw new m("AsyncIterable",`transform[${t-1}]`,f)}else{i||(i=r(3185));let e=new i({objectMode:!0}),t=null==(W=f)?void 0:W.then;if("function"==typeof t)B++,t.call(f,t=>{h=t,null!=t&&e.write(t),u&&e.end(),s.nextTick(H)},t=>{e.destroy(t),s.nextTick(H,t)});else if(E(f,!0))B++,L(f,e,H,{end:u});else if(R(f)||A(f)){let t=f.readable||f;B++,L(t,e,H,{end:u})}else throw new m("AsyncIterable or Promise","destination",f);let{destroy:n,cleanup:o}=N(f=e,!1,!0);M.push(n),c&&O.push(o)}}else if(I(o)){if(F(f)){B+=2;let e=function(e,t,r,{end:i}){let n=!1;if(t.on("close",()=>{n||r(new b)}),e.pipe(t,{end:!1}),i){function o(){n=!0,t.end()}C(e)?s.nextTick(o):e.once("end",o)}else r();return d(e,{readable:!0,writable:!1},t=>{let i=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(t)}),d(t,{readable:!1,writable:!0},r)}(f,o,H,{end:u});k(o)&&c&&O.push(e)}else if(A(f)||R(f)){let e=f.readable||f;B++,L(e,o,H,{end:u})}else if(E(f))B++,L(f,o,H,{end:u});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=o}else if(T(o)){if(F(f))B++,D(j(f),o,H,{end:u});else if(R(f)||E(f))B++,D(f,o,H,{end:u});else if(A(f))B++,D(f.readable,o,H,{end:u});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);f=o}else f=p.from(o)}return(null!=_&&_.aborted||null!=S&&S.aborted)&&s.nextTick(U),f}e.exports={pipelineImpl:U,pipeline:function(...e){return U(e,h((S(e[e.length-1],"streams[stream.length - 1]"),e.pop())))}}},1026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let i=r(4232);function n(e,t){let r=(0,i.useRef)(null),n=(0,i.useRef)(null);return(0,i.useCallback)(i=>{if(null===i){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=o(e,i)),t&&(n.current=o(t,i))},[e,t])}function o(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1078:(e,t,r)=>{"use strict";let i;r.d(t,{z:()=>tu}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),i={};for(let e of r)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(ti||(ti={})),(tn||(tn={})).mergeShapes=(e,t)=>({...e,...t});let n=ti.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),o=e=>{switch(typeof e){case"undefined":return n.undefined;case"string":return n.string;case"number":return isNaN(e)?n.nan:n.number;case"boolean":return n.boolean;case"function":return n.function;case"bigint":return n.bigint;case"symbol":return n.symbol;case"object":if(Array.isArray(e))return n.array;if(null===e)return n.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return n.promise;if("undefined"!=typeof Map&&e instanceof Map)return n.map;if("undefined"!=typeof Set&&e instanceof Set)return n.set;if("undefined"!=typeof Date&&e instanceof Date)return n.date;return n.object;default:return n.unknown}},s=ti.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){let r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}static assert(e){if(!(e instanceof a))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ti.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}a.create=e=>new a(e);let l=(e,t)=>{let r;switch(e.code){case s.invalid_type:r=e.received===n.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ti.jsonStringifyReplacer)}`;break;case s.unrecognized_keys:r=`Unrecognized key(s) in object: ${ti.joinValues(e.keys,", ")}`;break;case s.invalid_union:r="Invalid input";break;case s.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ti.joinValues(e.options)}`;break;case s.invalid_enum_value:r=`Invalid enum value. Expected ${ti.joinValues(e.options)}, received '${e.received}'`;break;case s.invalid_arguments:r="Invalid function arguments";break;case s.invalid_return_type:r="Invalid function return type";break;case s.invalid_date:r="Invalid date";break;case s.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ti.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.custom:r="Invalid input";break;case s.invalid_intersection_types:r="Intersection results could not be merged";break;case s.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case s.not_finite:r="Number must be finite";break;default:r=t.defaultError,ti.assertNever(e)}return{message:r}},u=l;function c(){return u}let d=e=>{let{data:t,path:r,errorMaps:i,issueData:n}=e,o=[...r,...n.path||[]],s={...n,path:o};if(void 0!==n.message)return{...n,path:o,message:n.message};let a="";for(let e of i.filter(e=>!!e).slice().reverse())a=e(s,{data:t,defaultError:a}).message;return{...n,path:o,message:a}};function h(e,t){let r=c(),i=d({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===l?void 0:l].filter(e=>!!e)});e.common.issues.push(i)}class f{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let i of t){if("aborted"===i.status)return p;"dirty"===i.status&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,i=await e.value;r.push({key:t,value:i})}return f.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let i of t){let{key:t,value:n}=i;if("aborted"===t.status||"aborted"===n.status)return p;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||i.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let p=Object.freeze({status:"aborted"}),g=e=>({status:"dirty",value:e}),y=e=>({status:"valid",value:e}),m=e=>"aborted"===e.status,v=e=>"dirty"===e.status,_=e=>"valid"===e.status,b=e=>"undefined"!=typeof Promise&&e instanceof Promise;function w(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function S(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(to||(to={}));class x{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let E=(e,t)=>{if(_(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new a(e.common.issues);return this._error=t,this._error}}};function k(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{var o,s;let{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:n.defaultError}:void 0===n.data?{message:null!=(o=null!=a?a:i)?o:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!=(s=null!=a?a:r)?s:n.defaultError}},description:n}}class F{get description(){return this._def.description}_getType(e){return o(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new f,ctx:{common:e.parent.common,data:e.data,parsedType:o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(b(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let i={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},n=this._parseSync({data:e,path:i.path,parent:i});return E(i,n)}"~validate"(e){var t,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:i});return _(t)?{value:t.value}:{issues:i.common.issues}}catch(e){(null==(r=null==(t=null==e?void 0:e.message)?void 0:t.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(e=>_(e)?{value:e.value}:{issues:i.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:o(e)},i=this._parse({data:e,path:r.path,parent:r});return E(r,await (b(i)?i:Promise.resolve(i)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,i)=>{let n=e(t),o=()=>i.addIssue({code:s.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(o(),!1)):!!n||(o(),!1)})}refinement(e,t){return this._refinement((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1))}_refinement(e){return new eb({schema:this,typeName:tl.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ew.create(this,this._def)}nullable(){return eS.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ei.create(this)}promise(){return e_.create(this,this._def)}or(e){return eo.create([this,e],this._def)}and(e){return el.create(this,e,this._def)}transform(e){return new eb({...k(this._def),schema:this,typeName:tl.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ex({...k(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:tl.ZodDefault})}brand(){return new eI({typeName:tl.ZodBranded,type:this,...k(this._def)})}catch(e){return new eE({...k(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:tl.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eA.create(this,e)}readonly(){return eT.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let I=/^c[^\s-]{8,}$/i,A=/^[0-9a-z]+$/,T=/^[0-9A-HJKMNP-TV-Z]{26}$/i,R=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,C=/^[a-z0-9_-]{21}$/i,P=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,N=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,j=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,O=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,D=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,U=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,B=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,H="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$=RegExp(`^${H}$`);function K(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function V(e){let t=`${H}T${K(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class W extends F{_parse(e){var t,r,o,a;let l;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==n.string){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.string,received:t.parsedType}),p}let u=new f;for(let n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(h(l=this._getOrReturnCtx(e,l),{code:s.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),u.dirty());else if("max"===n.kind)e.data.length>n.value&&(h(l=this._getOrReturnCtx(e,l),{code:s.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),u.dirty());else if("length"===n.kind){let t=e.data.length>n.value,r=e.data.length<n.value;(t||r)&&(l=this._getOrReturnCtx(e,l),t?h(l,{code:s.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):r&&h(l,{code:s.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),u.dirty())}else if("email"===n.kind)j.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"email",code:s.invalid_string,message:n.message}),u.dirty());else if("emoji"===n.kind)i||(i=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),i.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"emoji",code:s.invalid_string,message:n.message}),u.dirty());else if("uuid"===n.kind)R.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"uuid",code:s.invalid_string,message:n.message}),u.dirty());else if("nanoid"===n.kind)C.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"nanoid",code:s.invalid_string,message:n.message}),u.dirty());else if("cuid"===n.kind)I.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"cuid",code:s.invalid_string,message:n.message}),u.dirty());else if("cuid2"===n.kind)A.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"cuid2",code:s.invalid_string,message:n.message}),u.dirty());else if("ulid"===n.kind)T.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"ulid",code:s.invalid_string,message:n.message}),u.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(t){h(l=this._getOrReturnCtx(e,l),{validation:"url",code:s.invalid_string,message:n.message}),u.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"regex",code:s.invalid_string,message:n.message}),u.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),u.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{startsWith:n.value},message:n.message}),u.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:{endsWith:n.value},message:n.message}),u.dirty()):"datetime"===n.kind?V(n).test(e.data)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"datetime",message:n.message}),u.dirty()):"date"===n.kind?$.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"date",message:n.message}),u.dirty()):"time"===n.kind?RegExp(`^${K(n)}$`).test(e.data)||(h(l=this._getOrReturnCtx(e,l),{code:s.invalid_string,validation:"time",message:n.message}),u.dirty()):"duration"===n.kind?N.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"duration",code:s.invalid_string,message:n.message}),u.dirty()):"ip"===n.kind?(t=e.data,!(("v4"===(r=n.version)||!r)&&O.test(t)||("v6"===r||!r)&&D.test(t))&&1&&(h(l=this._getOrReturnCtx(e,l),{validation:"ip",code:s.invalid_string,message:n.message}),u.dirty())):"jwt"===n.kind?!function(e,t){if(!P.test(e))return!1;try{let[r]=e.split("."),i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(i));if("object"!=typeof n||null===n||!n.typ||!n.alg||t&&n.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,n.alg)&&(h(l=this._getOrReturnCtx(e,l),{validation:"jwt",code:s.invalid_string,message:n.message}),u.dirty()):"cidr"===n.kind?(o=e.data,!(("v4"===(a=n.version)||!a)&&L.test(o)||("v6"===a||!a)&&U.test(o))&&1&&(h(l=this._getOrReturnCtx(e,l),{validation:"cidr",code:s.invalid_string,message:n.message}),u.dirty())):"base64"===n.kind?M.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"base64",code:s.invalid_string,message:n.message}),u.dirty()):"base64url"===n.kind?B.test(e.data)||(h(l=this._getOrReturnCtx(e,l),{validation:"base64url",code:s.invalid_string,message:n.message}),u.dirty()):ti.assertNever(n);return{status:u.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.invalid_string,...to.errToObj(r)})}_addCheck(e){return new W({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...to.errToObj(e)})}url(e){return this._addCheck({kind:"url",...to.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...to.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...to.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...to.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...to.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...to.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...to.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...to.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...to.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...to.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...to.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...to.errToObj(e)})}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r,...to.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...to.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...to.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...to.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...to.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...to.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...to.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...to.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...to.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...to.errToObj(t)})}nonempty(e){return this.min(1,to.errToObj(e))}trim(){return new W({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new W({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new W({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}W.create=e=>{var t;return new W({checks:[],typeName:tl.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...k(e)})};class q extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==n.number){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.number,received:t.parsedType}),p}let r=new f;for(let i of this._def.checks)"int"===i.kind?ti.isInteger(e.data)||(h(t=this._getOrReturnCtx(e,t),{code:s.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}(e.data,i.value)&&(h(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(h(t=this._getOrReturnCtx(e,t),{code:s.not_finite,message:i.message}),r.dirty()):ti.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,to.toString(t))}gt(e,t){return this.setLimit("min",e,!1,to.toString(t))}lte(e,t){return this.setLimit("max",e,!0,to.toString(t))}lt(e,t){return this.setLimit("max",e,!1,to.toString(t))}setLimit(e,t,r,i){return new q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:to.toString(i)}]})}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:to.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:to.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:to.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:to.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:to.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:to.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:to.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:to.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:to.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&ti.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}q.create=e=>new q({checks:[],typeName:tl.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...k(e)});class z extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==n.bigint)return this._getInvalidInput(e);let r=new f;for(let i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(h(t=this._getOrReturnCtx(e,t),{code:s.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):ti.assertNever(i);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.bigint,received:t.parsedType}),p}gte(e,t){return this.setLimit("min",e,!0,to.toString(t))}gt(e,t){return this.setLimit("min",e,!1,to.toString(t))}lte(e,t){return this.setLimit("max",e,!0,to.toString(t))}lt(e,t){return this.setLimit("max",e,!1,to.toString(t))}setLimit(e,t,r,i){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:to.toString(i)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:to.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:to.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:to.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:to.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:to.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}z.create=e=>{var t;return new z({checks:[],typeName:tl.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...k(e)})};class J extends F{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==n.boolean){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.boolean,received:t.parsedType}),p}return y(e.data)}}J.create=e=>new J({typeName:tl.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...k(e)});class Z extends F{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==n.date){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.date,received:t.parsedType}),p}if(isNaN(e.data.getTime()))return h(this._getOrReturnCtx(e),{code:s.invalid_date}),p;let r=new f;for(let i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(h(t=this._getOrReturnCtx(e,t),{code:s.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ti.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:to.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:to.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Z.create=e=>new Z({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:tl.ZodDate,...k(e)});class G extends F{_parse(e){if(this._getType(e)!==n.symbol){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.symbol,received:t.parsedType}),p}return y(e.data)}}G.create=e=>new G({typeName:tl.ZodSymbol,...k(e)});class Y extends F{_parse(e){if(this._getType(e)!==n.undefined){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.undefined,received:t.parsedType}),p}return y(e.data)}}Y.create=e=>new Y({typeName:tl.ZodUndefined,...k(e)});class Q extends F{_parse(e){if(this._getType(e)!==n.null){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.null,received:t.parsedType}),p}return y(e.data)}}Q.create=e=>new Q({typeName:tl.ZodNull,...k(e)});class X extends F{constructor(){super(...arguments),this._any=!0}_parse(e){return y(e.data)}}X.create=e=>new X({typeName:tl.ZodAny,...k(e)});class ee extends F{constructor(){super(...arguments),this._unknown=!0}_parse(e){return y(e.data)}}ee.create=e=>new ee({typeName:tl.ZodUnknown,...k(e)});class et extends F{_parse(e){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.never,received:t.parsedType}),p}}et.create=e=>new et({typeName:tl.ZodNever,...k(e)});class er extends F{_parse(e){if(this._getType(e)!==n.undefined){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.void,received:t.parsedType}),p}return y(e.data)}}er.create=e=>new er({typeName:tl.ZodVoid,...k(e)});class ei extends F{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==n.array)return h(t,{code:s.invalid_type,expected:n.array,received:t.parsedType}),p;if(null!==i.exactLength){let e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&(h(t,{code:e?s.too_big:s.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(h(t,{code:s.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(h(t,{code:s.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>i.type._parseAsync(new x(t,e,t.path,r)))).then(e=>f.mergeArray(r,e));let o=[...t.data].map((e,r)=>i.type._parseSync(new x(t,e,t.path,r)));return f.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new ei({...this._def,minLength:{value:e,message:to.toString(t)}})}max(e,t){return new ei({...this._def,maxLength:{value:e,message:to.toString(t)}})}length(e,t){return new ei({...this._def,exactLength:{value:e,message:to.toString(t)}})}nonempty(e){return this.min(1,e)}}ei.create=(e,t)=>new ei({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tl.ZodArray,...k(t)});class en extends F{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=ti.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==n.object){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.object,received:t.parsedType}),p}let{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof et&&"strip"===this._def.unknownKeys))for(let e in r.data)o.includes(e)||a.push(e);let l=[];for(let e of o){let t=i[e],n=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new x(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof et){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(h(r,{code:s.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let i=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new x(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of l){let r=await t.key,i=await t.value;e.push({key:r,value:i,alwaysSet:t.alwaysSet})}return e}).then(e=>f.mergeObjectSync(t,e)):f.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return to.errToObj,new en({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,n,o,s;let a=null!=(o=null==(n=(i=this._def).errorMap)?void 0:n.call(i,t,r).message)?o:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(s=to.errToObj(e).message)?s:a}:{message:a}}}:{}})}strip(){return new en({...this._def,unknownKeys:"strip"})}passthrough(){return new en({...this._def,unknownKeys:"passthrough"})}extend(e){return new en({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new en({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tl.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new en({...this._def,catchall:e})}pick(e){let t={};return ti.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new en({...this._def,shape:()=>t})}omit(e){let t={};return ti.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new en({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof en){let r={};for(let i in t.shape){let n=t.shape[i];r[i]=ew.create(e(n))}return new en({...t._def,shape:()=>r})}if(t instanceof ei)return new ei({...t._def,type:e(t.element)});if(t instanceof ew)return ew.create(e(t.unwrap()));if(t instanceof eS)return eS.create(e(t.unwrap()));if(t instanceof eu)return eu.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return ti.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new en({...this._def,shape:()=>t})}required(e){let t={};return ti.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ew;)e=e._def.innerType;t[r]=e}}),new en({...this._def,shape:()=>t})}keyof(){return ey(ti.objectKeys(this.shape))}}en.create=(e,t)=>new en({shape:()=>e,unknownKeys:"strip",catchall:et.create(),typeName:tl.ZodObject,...k(t)}),en.strictCreate=(e,t)=>new en({shape:()=>e,unknownKeys:"strict",catchall:et.create(),typeName:tl.ZodObject,...k(t)}),en.lazycreate=(e,t)=>new en({shape:e,unknownKeys:"strip",catchall:et.create(),typeName:tl.ZodObject,...k(t)});class eo extends F{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new a(e.ctx.common.issues));return h(t,{code:s.invalid_union,unionErrors:r}),p});{let e,i=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},o=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=i.map(e=>new a(e));return h(t,{code:s.invalid_union,unionErrors:n}),p}}get options(){return this._def.options}}eo.create=(e,t)=>new eo({options:e,typeName:tl.ZodUnion,...k(t)});let es=e=>{if(e instanceof ep)return es(e.schema);if(e instanceof eb)return es(e.innerType());if(e instanceof eg)return[e.value];if(e instanceof em)return e.options;if(e instanceof ev)return ti.objectValues(e.enum);else if(e instanceof ex)return es(e._def.innerType);else if(e instanceof Y)return[void 0];else if(e instanceof Q)return[null];else if(e instanceof ew)return[void 0,...es(e.unwrap())];else if(e instanceof eS)return[null,...es(e.unwrap())];else if(e instanceof eI)return es(e.unwrap());else if(e instanceof eT)return es(e.unwrap());else if(e instanceof eE)return es(e._def.innerType);else return[]};class ea extends F{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.object)return h(t,{code:s.invalid_type,expected:n.object,received:t.parsedType}),p;let r=this.discriminator,i=t.data[r],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:s.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),p)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let i=new Map;for(let r of t){let t=es(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(i.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);i.set(n,r)}}return new ea({typeName:tl.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...k(r)})}}class el extends F{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if(m(e)||m(i))return p;let a=function e(t,r){let i=o(t),s=o(r);if(t===r)return{valid:!0,data:t};if(i===n.object&&s===n.object){let i=ti.objectKeys(r),n=ti.objectKeys(t).filter(e=>-1!==i.indexOf(e)),o={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1};o[i]=n.data}return{valid:!0,data:o}}if(i===n.array&&s===n.array){if(t.length!==r.length)return{valid:!1};let i=[];for(let n=0;n<t.length;n++){let o=e(t[n],r[n]);if(!o.valid)return{valid:!1};i.push(o.data)}return{valid:!0,data:i}}if(i===n.date&&s===n.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,i.value);return a.valid?((v(e)||v(i))&&t.dirty(),{status:t.value,value:a.data}):(h(r,{code:s.invalid_intersection_types}),p)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>i(e,t)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}el.create=(e,t,r)=>new el({left:e,right:t,typeName:tl.ZodIntersection,...k(r)});class eu extends F{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.array)return h(r,{code:s.invalid_type,expected:n.array,received:r.parsedType}),p;if(r.data.length<this._def.items.length)return h(r,{code:s.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),p;!this._def.rest&&r.data.length>this._def.items.length&&(h(r,{code:s.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...r.data].map((e,t)=>{let i=this._def.items[t]||this._def.rest;return i?i._parse(new x(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(i).then(e=>f.mergeArray(t,e)):f.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new eu({...this._def,rest:e})}}eu.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eu({items:e,typeName:tl.ZodTuple,rest:null,...k(t)})};class ec extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.object)return h(r,{code:s.invalid_type,expected:n.object,received:r.parsedType}),p;let i=[],o=this._def.keyType,a=this._def.valueType;for(let e in r.data)i.push({key:o._parse(new x(r,e,r.path,e)),value:a._parse(new x(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?f.mergeObjectAsync(t,i):f.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new ec(t instanceof F?{keyType:e,valueType:t,typeName:tl.ZodRecord,...k(r)}:{keyType:W.create(),valueType:e,typeName:tl.ZodRecord,...k(t)})}}class ed extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.map)return h(r,{code:s.invalid_type,expected:n.map,received:r.parsedType}),p;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([e,t],n)=>({key:i._parse(new x(r,e,r.path,[n,"key"])),value:o._parse(new x(r,t,r.path,[n,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return p;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return p;("dirty"===i.status||"dirty"===n.status)&&t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}ed.create=(e,t,r)=>new ed({valueType:t,keyType:e,typeName:tl.ZodMap,...k(r)});class eh extends F{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.set)return h(r,{code:s.invalid_type,expected:n.set,received:r.parsedType}),p;let i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&(h(r,{code:s.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&(h(r,{code:s.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function a(e){let r=new Set;for(let i of e){if("aborted"===i.status)return p;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}let l=[...r.data.values()].map((e,t)=>o._parse(new x(r,e,r.path,t)));return r.common.async?Promise.all(l).then(e=>a(e)):a(l)}min(e,t){return new eh({...this._def,minSize:{value:e,message:to.toString(t)}})}max(e,t){return new eh({...this._def,maxSize:{value:e,message:to.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eh.create=(e,t)=>new eh({valueType:e,minSize:null,maxSize:null,typeName:tl.ZodSet,...k(t)});class ef extends F{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.function)return h(t,{code:s.invalid_type,expected:n.function,received:t.parsedType}),p;function r(e,r){return d({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,c(),l].filter(e=>!!e),issueData:{code:s.invalid_arguments,argumentsError:r}})}function i(e,r){return d({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,c(),l].filter(e=>!!e),issueData:{code:s.invalid_return_type,returnTypeError:r}})}let o={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof e_){let e=this;return y(async function(...t){let n=new a([]),s=await e._def.args.parseAsync(t,o).catch(e=>{throw n.addIssue(r(t,e)),n}),l=await Reflect.apply(u,this,s);return await e._def.returns._def.type.parseAsync(l,o).catch(e=>{throw n.addIssue(i(l,e)),n})})}{let e=this;return y(function(...t){let n=e._def.args.safeParse(t,o);if(!n.success)throw new a([r(t,n.error)]);let s=Reflect.apply(u,this,n.data),l=e._def.returns.safeParse(s,o);if(!l.success)throw new a([i(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ef({...this._def,args:eu.create(e).rest(ee.create())})}returns(e){return new ef({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ef({args:e||eu.create([]).rest(ee.create()),returns:t||ee.create(),typeName:tl.ZodFunction,...k(r)})}}class ep extends F{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ep.create=(e,t)=>new ep({getter:e,typeName:tl.ZodLazy,...k(t)});class eg extends F{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:s.invalid_literal,expected:this._def.value}),p}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ey(e,t){return new em({values:e,typeName:tl.ZodEnum,...k(t)})}eg.create=(e,t)=>new eg({value:e,typeName:tl.ZodLiteral,...k(t)});class em extends F{constructor(){super(...arguments),ts.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{expected:ti.joinValues(r),received:t.parsedType,code:s.invalid_type}),p}if(w(this,ts,"f")||S(this,ts,new Set(this._def.values),"f"),!w(this,ts,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return h(t,{received:t.data,code:s.invalid_enum_value,options:r}),p}return y(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return em.create(e,{...this._def,...t})}exclude(e,t=this._def){return em.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ts=new WeakMap,em.create=ey;class ev extends F{constructor(){super(...arguments),ta.set(this,void 0)}_parse(e){let t=ti.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==n.string&&r.parsedType!==n.number){let e=ti.objectValues(t);return h(r,{expected:ti.joinValues(e),received:r.parsedType,code:s.invalid_type}),p}if(w(this,ta,"f")||S(this,ta,new Set(ti.getValidEnumValues(this._def.values)),"f"),!w(this,ta,"f").has(e.data)){let e=ti.objectValues(t);return h(r,{received:r.data,code:s.invalid_enum_value,options:e}),p}return y(e.data)}get enum(){return this._def.values}}ta=new WeakMap,ev.create=(e,t)=>new ev({values:e,typeName:tl.ZodNativeEnum,...k(t)});class e_ extends F{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==n.promise&&!1===t.common.async?(h(t,{code:s.invalid_type,expected:n.promise,received:t.parsedType}),p):y((t.parsedType===n.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}e_.create=(e,t)=>new e_({type:e,typeName:tl.ZodPromise,...k(t)});class eb extends F{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tl.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{h(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){let e=i.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return p;let i=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===i.status?p:"dirty"===i.status||"dirty"===t.value?g(i.value):i});{if("aborted"===t.value)return p;let i=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===i.status?p:"dirty"===i.status||"dirty"===t.value?g(i.value):i}}if("refinement"===i.type){let e=e=>{let t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?p:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?p:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}}if("transform"===i.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>_(e)?Promise.resolve(i.transform(e.value,n)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!_(e))return e;let o=i.transform(e.value,n);if(o instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}ti.assertNever(i)}}eb.create=(e,t,r)=>new eb({schema:e,typeName:tl.ZodEffects,effect:t,...k(r)}),eb.createWithPreprocess=(e,t,r)=>new eb({schema:t,effect:{type:"preprocess",transform:e},typeName:tl.ZodEffects,...k(r)});class ew extends F{_parse(e){return this._getType(e)===n.undefined?y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ew.create=(e,t)=>new ew({innerType:e,typeName:tl.ZodOptional,...k(t)});class eS extends F{_parse(e){return this._getType(e)===n.null?y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eS.create=(e,t)=>new eS({innerType:e,typeName:tl.ZodNullable,...k(t)});class ex extends F{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===n.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:tl.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...k(t)});class eE extends F{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return b(i)?i.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new a(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new a(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:tl.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...k(t)});class ek extends F{_parse(e){if(this._getType(e)!==n.nan){let t=this._getOrReturnCtx(e);return h(t,{code:s.invalid_type,expected:n.nan,received:t.parsedType}),p}return{status:"valid",value:e.data}}}ek.create=e=>new ek({typeName:tl.ZodNaN,...k(e)});let eF=Symbol("zod_brand");class eI extends F{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eA extends F{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?p:"dirty"===e.status?(t.dirty(),g(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?p:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eA({in:e,out:t,typeName:tl.ZodPipeline})}}class eT extends F{_parse(e){let t=this._def.innerType._parse(e),r=e=>(_(e)&&(e.value=Object.freeze(e.value)),e);return b(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eR(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function eC(e,t={},r){return e?X.create().superRefine((i,n)=>{var o,s;let a=e(i);if(a instanceof Promise)return a.then(e=>{var o,s;if(!e){let e=eR(t,i),a=null==(s=null!=(o=e.fatal)?o:r)||s;n.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=eR(t,i),a=null==(s=null!=(o=e.fatal)?o:r)||s;n.addIssue({code:"custom",...e,fatal:a})}}):X.create()}eT.create=(e,t)=>new eT({innerType:e,typeName:tl.ZodReadonly,...k(t)});let eP={object:en.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(tl||(tl={}));let eN=W.create,ej=q.create,eO=ek.create,eL=z.create,eD=J.create,eU=Z.create,eM=G.create,eB=Y.create,eH=Q.create,e$=X.create,eK=ee.create,eV=et.create,eW=er.create,eq=ei.create,ez=en.create,eJ=en.strictCreate,eZ=eo.create,eG=ea.create,eY=el.create,eQ=eu.create,eX=ec.create,e0=ed.create,e1=eh.create,e2=ef.create,e6=ep.create,e3=eg.create,e5=em.create,e8=ev.create,e4=e_.create,e9=eb.create,e7=ew.create,te=eS.create,tt=eb.createWithPreprocess,tr=eA.create;var ti,tn,to,ts,ta,tl,tu=Object.freeze({__proto__:null,defaultErrorMap:l,setErrorMap:function(e){u=e},getErrorMap:c,makeIssue:d,EMPTY_PATH:[],addIssueToContext:h,ParseStatus:f,INVALID:p,DIRTY:g,OK:y,isAborted:m,isDirty:v,isValid:_,isAsync:b,get util(){return ti},get objectUtil(){return tn},ZodParsedType:n,getParsedType:o,ZodType:F,datetimeRegex:V,ZodString:W,ZodNumber:q,ZodBigInt:z,ZodBoolean:J,ZodDate:Z,ZodSymbol:G,ZodUndefined:Y,ZodNull:Q,ZodAny:X,ZodUnknown:ee,ZodNever:et,ZodVoid:er,ZodArray:ei,ZodObject:en,ZodUnion:eo,ZodDiscriminatedUnion:ea,ZodIntersection:el,ZodTuple:eu,ZodRecord:ec,ZodMap:ed,ZodSet:eh,ZodFunction:ef,ZodLazy:ep,ZodLiteral:eg,ZodEnum:em,ZodNativeEnum:ev,ZodPromise:e_,ZodEffects:eb,ZodTransformer:eb,ZodOptional:ew,ZodNullable:eS,ZodDefault:ex,ZodCatch:eE,ZodNaN:ek,BRAND:eF,ZodBranded:eI,ZodPipeline:eA,ZodReadonly:eT,custom:eC,Schema:F,ZodSchema:F,late:eP,get ZodFirstPartyTypeKind(){return tl},coerce:{string:e=>W.create({...e,coerce:!0}),number:e=>q.create({...e,coerce:!0}),boolean:e=>J.create({...e,coerce:!0}),bigint:e=>z.create({...e,coerce:!0}),date:e=>Z.create({...e,coerce:!0})},any:e$,array:eq,bigint:eL,boolean:eD,date:eU,discriminatedUnion:eG,effect:e9,enum:e5,function:e2,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>eC(t=>t instanceof e,t),intersection:eY,lazy:e6,literal:e3,map:e0,nan:eO,nativeEnum:e8,never:eV,null:eH,nullable:te,number:ej,object:ez,oboolean:()=>eD().optional(),onumber:()=>ej().optional(),optional:e7,ostring:()=>eN().optional(),pipeline:tr,preprocess:tt,promise:e4,record:eX,set:e1,strictObject:eJ,string:eN,symbol:eM,transformer:e9,tuple:eQ,undefined:eB,union:eZ,unknown:eK,void:eW,NEVER:p,ZodIssueCode:s,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:a})},1079:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:i,Symbol:n}=r(4039);e.exports=u;let{ERR_METHOD_NOT_IMPLEMENTED:o}=r(7894).codes,s=r(9667),{getHighWaterMark:a}=r(4318);i(u.prototype,s.prototype),i(u,s);let l=n("kCallback");function u(e){if(!(this instanceof u))return new u(e);let t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{if(t)return void(e?e(t):this.destroy(t));null!=r&&this.push(r),this.push(null),e&&e()})}function d(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(e,t,r){throw new o("_transform()")},u.prototype._write=function(e,t,r){let i=this._readableState,n=this._writableState,o=i.length;this._transform(e,t,(e,t)=>{if(e)return void r(e);null!=t&&this.push(t),n.ended||o===i.length||i.length<i.highWaterMark?r():this[l]=r})},u.prototype._read=function(){if(this[l]){let e=this[l];this[l]=null,e()}}},1204:(e,t,r)=>{"use strict";let{ArrayIsArray:i,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:d,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:y}=r(4039),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:S}}=r(7894),{normalizeEncoding:x}=r(6733),{isAsyncFunction:E,isArrayBufferView:k}=r(6733).types,F={},I=/^[0-7]+$/,A=m((e,t,r=c,i=u)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>i)throw new w(t,`>= ${r} && <= ${i}`,e)}),T=m((e,t,r=-0x80000000,i=0x7fffffff)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>i)throw new w(t,`>= ${r} && <= ${i}`,e)}),R=m((e,t,r=!1)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!a(e))throw new w(t,"an integer",e);let i=+!!r;if(e<i||e>0xffffffff)throw new w(t,`>= ${i} && <= 4294967295`,e)});function C(e,t){if("string"!=typeof e)throw new _(t,"string",e)}let P=m((e,t,r)=>{if(!n(r,e))throw new b(t,e,"must be one of: "+o(s(r,e=>"string"==typeof e?`'${e}'`:p(e)),", "))});function N(e,t){if("boolean"!=typeof e)throw new _(t,"boolean",e)}function j(e,t,r){return null!=e&&h(e,t)?e[t]:r}let O=m((e,t,r=null)=>{let n=j(r,"allowArray",!1),o=j(r,"allowFunction",!1);if(!j(r,"nullable",!1)&&null===e||!n&&i(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new _(t,"Object",e)}),L=m((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new _(t,"a dictionary",e)}),D=m((e,t,r=0)=>{if(!i(e))throw new _(t,"Array",e);if(e.length<r)throw new b(t,e,`must be longer than ${r}`)}),U=m((e,t="buffer")=>{if(!k(e))throw new _(t,["Buffer","TypedArray","DataView"],e)}),M=m((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new _(t,"AbortSignal",e)}),B=m((e,t)=>{if("function"!=typeof e)throw new _(t,"Function",e)}),H=m((e,t)=>{if("function"!=typeof e||E(e))throw new _(t,"Function",e)}),$=m((e,t)=>{if(void 0!==e)throw new _(t,"undefined",e)}),K=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(e,t){if(void 0===e||!f(K,e))throw new b(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===f(I,e))throw new b(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return R(e,t),e},validateArray:D,validateStringArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)C(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++)N(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){D(e,t);for(let r=0;r<e.length;r++){let i=e[r],n=`${t}[${r}]`;if(null==i)throw new _(n,"AbortSignal",i);M(i,n)}},validateBoolean:N,validateBuffer:U,validateDictionary:L,validateEncoding:function(e,t){let r=x(t),i=e.length;if("hex"===r&&i%2!=0)throw new b("encoding",t,`is invalid for data of length ${i}`)},validateFunction:B,validateInt32:T,validateInteger:A,validateNumber:function(e,t,r,i){if("number"!=typeof e)throw new _(t,"number",e);if(null!=r&&e<r||null!=i&&e>i||(null!=r||null!=i)&&l(e))throw new w(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=i?" && ":""}${null!=i?`<= ${i}`:""}`,e)},validateObject:O,validateOneOf:P,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===y(e).length||+e!=e>>>0||e>65535||0===e&&!r)throw new v(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(C(e,t),void 0===F[e]){if(void 0!==F[g(e)])throw new S(e+" (signals must use all capital letters)");throw new S(e)}},validateString:C,validateUint32:R,validateUndefined:$,validateUnion:function(e,t,r){if(!n(r,e))throw new _(t,`('${o(r,"|")}')`,e)},validateAbortSignal:M,validateLinkHeaderValue:function(e){if("string"==typeof e)return V(e,"hints"),e;if(i(e)){let t=e.length,r="";if(0===t)return r;for(let i=0;i<t;i++){let n=e[i];V(n,"hints"),r+=n,i!==t-1&&(r+=", ")}return r}throw new b("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},1482:(e,t,r)=>{"use strict";function i(e){return"object"==typeof e&&"object"==typeof e.internal_resourceInfo}function n(e){return"object"==typeof e&&"object"==typeof e.internal_resourceInfo&&"object"==typeof e.internal_resourceInfo.linkedResources}function o(e){return"object"==typeof e.internal_changeLog&&Array.isArray(e.internal_changeLog.additions)&&Array.isArray(e.internal_changeLog.deletions)}r.d(t,{NF:()=>i,OG:()=>n,dT:()=>s,rg:()=>o});class s extends Error{}},1642:(e,t,r)=>{"use strict";let i=r(8983),n=r(1838),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var i=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);let r=0|p(i,n),o=s(r),l=o.write(i,n);return l!==r&&(o=o.slice(0,l)),o}if(ArrayBuffer.isView(e)){var o=e;if(D(o,Uint8Array)){let e=new Uint8Array(o);return h(e.buffer,e.byteOffset,e.byteLength)}return d(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let l=e.valueOf&&e.valueOf();if(null!=l&&l!==e)return a.from(l,t,r);let u=function(e){if(a.isBuffer(e)){let t=0|f(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|f(e))}function d(e){let t=e.length<0?0:0|f(e.length),r=s(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function h(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),i}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(n)return i?-1:j(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=U[e[i]];return n}(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":var o,s,a;return o=this,s=t,a=r,0===s&&a===o.length?i.fromByteArray(o):i.fromByteArray(o.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){var o;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r*=1)!=o&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return v(e,[t],r,i,n)}throw TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){let o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let i=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*s}else -1!==i&&(o-=o-i),i=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){let r=!0;for(let i=0;i<l;i++)if(u(e,o+i)!==u(t,i)){r=!1;break}if(r)return o}return -1}function _(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],o=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=r){let r,i,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(r=e[n+1]))==128&&(l=(31&t)<<6|63&r)>127&&(o=l);break;case 3:r=e[n+1],i=e[n+2],(192&r)==128&&(192&i)==128&&(l=(15&t)<<12|(63&r)<<6|63&i)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}var o=i;let s=o.length;if(s<=4096)return String.fromCharCode.apply(String,o);let a="",l=0;for(;l<s;)a+=String.fromCharCode.apply(String,o.slice(l,l+=4096));return a}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,i,n,o){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function S(e,t,r,i,n){R(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function x(e,t,r,i,n){R(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function E(e,t,r,i,n,o){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,i,o){return t*=1,r>>>=0,o||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function F(e,t,r,i,o){return t*=1,r>>>=0,o||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:+(i<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(D(t,Uint8Array))n+t.length>i.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else if(a.isBuffer(t))t.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return i},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?_(this,0,e):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,r,i,n){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;let o=n-i,s=r-t,l=Math.min(o,s),u=this.slice(i,n),c=e.slice(t,r);for(let e=0;e<l;++e)if(u[e]!==c[e]){o=u[e],s=c[e];break}return o<s?-1:+(s<o)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,i){var n,o,s,a,l,u,c,d;if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let f=!1;for(;;)switch(i){case"hex":return function(e,t,r,i){let n;r=Number(r)||0;let o=e.length-r;i?(i=Number(i))>o&&(i=o):i=o;let s=t.length;for(i>s/2&&(i=s/2),n=0;n<i;++n){var a;let i=parseInt(t.substr(2*n,2),16);if((a=i)!=a)break;e[r+n]=i}return n}(this,e,t,r);case"utf8":case"utf-8":return n=t,o=r,L(j(e,this.length-n),this,n,o);case"ascii":case"latin1":case"binary":return s=t,a=r,L(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return l=t,u=r,L(O(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,L(function(e,t){let r,i,n=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(e,this.length-c),this,c,d);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),a.prototype.readBigUInt64BE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let i=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],n=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),a.prototype.readBigInt64BE=M(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=M(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=M(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){let i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}let n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){let i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=M(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=M(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},a.prototype.fill=function(e,t,r,i){let n;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let o=a.isBuffer(e)?e:a.from(e,i),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%s]}return this};let I={};function A(e,t,r){I[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function T(e){let t="",r=e.length,i=+("-"===e[0]);for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function R(e,t,r,i,n,o){if(e>r||e<t){let i,n="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new I.ERR_OUT_OF_RANGE("value",i,e)}C(n,"offset"),(void 0===i[n]||void 0===i[n+o])&&P(n,i.length-(o+1))}function C(e,t){if("number"!=typeof e)throw new I.ERR_INVALID_ARG_TYPE(t,"number",e)}function P(e,t,r){if(Math.floor(e)!==e)throw C(e,r),new I.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new I.ERR_BUFFER_OUT_OF_BOUNDS;throw new I.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}A("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),A("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?n=T(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=T(n)),n+="n"),i+=` It must be ${t}. Received ${n}`},RangeError);let N=/[^+/0-9A-Za-z-_]/g;function j(e,t){let r;t=t||1/0;let i=e.length,n=null,o=[];for(let s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319||s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function O(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function M(e){return"undefined"==typeof BigInt?B:e}function B(){throw Error("BigInt not supported")}},1838:(e,t)=>{t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=r?n-1:0,h=r?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=u}return(f?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,l,u=8*o-n-1,c=(1<<u)-1,d=c>>1,h=5960464477539062e-23*(23===n),f=i?0:o-1,p=i?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,n),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*g}},1979:(e,t,r)=>{"use strict";r.d(t,{$n:()=>g,Zp:()=>b,Wu:()=>E,BT:()=>x,aR:()=>w,ZB:()=>S,pd:()=>y,JU:()=>_});var i=r(7876),n=r(4232);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function s(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...i}=e;if(n.isValidElement(r)){var s;let e,a,l=(s=r,(a=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(a=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),u=function(e,t){let r={...t};for(let i in t){let n=e[i],o=t[i];/^on[A-Z]/.test(i)?n&&o?r[i]=(...e)=>{o(...e),n(...e)}:n&&(r[i]=n):"style"===i?r[i]={...n,...o}:"className"===i&&(r[i]=[n,o].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(u.ref=t?function(...e){return t=>{let r=!1,i=e.map(e=>{let i=o(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():o(e[t],null)}}}}(t,l):l),n.cloneElement(r,u)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:o,...s}=e,a=n.Children.toArray(o),l=a.find(u);if(l){let e=l.props.children,o=a.map(t=>t!==l?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...s,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,o):null})}return(0,i.jsx)(t,{...s,ref:r,children:o})});return r.displayName=`${e}.Slot`,r}var a=s("Slot"),l=Symbol("radix.slottable");function u(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var c=r(9241);let d=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,h=c.$;var f=r(8429);let p=((e,t)=>r=>{var i;if((null==t?void 0:t.variants)==null)return h(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:o}=t,s=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],i=null==o?void 0:o[e];if(null===t)return null;let s=d(t)||d(i);return n[e][s]}),a=r&&Object.entries(r).reduce((e,t)=>{let[r,i]=t;return void 0===i||(e[r]=i),e},{});return h(e,s,null==t||null==(i=t.compoundVariants)?void 0:i.reduce((e,t)=>{let{class:r,className:i,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...a}[t]):({...o,...a})[t]===r})?[...e,r,i]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function g(e){let{className:t,variant:r,size:n,asChild:o=!1,...s}=e;return(0,i.jsx)(o?a:"button",{"data-slot":"button",className:(0,f.cn)(p({variant:r,size:n,className:t})),...s})}function y(e){let{className:t,type:r,...n}=e;return(0,i.jsx)("input",{type:r,"data-slot":"input",className:(0,f.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}r(8477);var m=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=s(`Primitive.${t}`),o=n.forwardRef((e,n)=>{let{asChild:o,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o?r:t,{...s,ref:n})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),v=n.forwardRef((e,t)=>(0,i.jsx)(m.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function _(e){let{className:t,...r}=e;return(0,i.jsx)(v,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}function b(e){let{className:t,...r}=e;return(0,i.jsx)("div",{"data-slot":"card",className:(0,f.cn)("bg-card text-card-foreground flex flex-col gap-2 rounded-xl border py-6 shadow-sm",t),...r})}function w(e){let{className:t,...r}=e;return(0,i.jsx)("div",{"data-slot":"card-header",className:(0,f.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function S(e){let{className:t,...r}=e;return(0,i.jsx)("div",{"data-slot":"card-title",className:(0,f.cn)("leading-none font-semibold",t),...r})}function x(e){let{className:t,...r}=e;return(0,i.jsx)("div",{"data-slot":"card-description",className:(0,f.cn)("text-muted-foreground text-sm",t),...r})}function E(e){let{className:t,...r}=e;return(0,i.jsx)("div",{"data-slot":"card-content",className:(0,f.cn)("px-6",t),...r})}v.displayName="Label"},2041:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>d,ID:()=>u,K9:()=>f,NB:()=>h,me:()=>p,tX:()=>c});var i=r(695),n=r(2672),o=r(2340),s=r(8785),a=r(3511),l=r(5177);function u(e,t){var r,l,u;if((0,n.xj)(e),!(0,i.g0)(t))throw new o.dU(t);let c=(0,s.t)(t),d=null!=(u=null==(l=null==(r=e.predicates[c])?void 0:r.namedNodes)?void 0:l[0])?u:null;return null===d?null:(0,a.AA)(d)?`#${(0,a.J0)(d)}`:d}function c(e,t){var r,l,u;if((0,n.xj)(e),!(0,i.g0)(t))throw new o.dU(t);let c=(0,s.t)(t);return null!=(u=null==(l=null==(r=e.predicates[c])?void 0:r.namedNodes)?void 0:l.map(e=>(0,a.AA)(e)?`#${(0,a.J0)(e)}`:e))?u:[]}let d=c;function h(e,t){return(0,n.xj)(e),function(e,t,r){var n,a,l,u;if(!(0,i.g0)(t))throw new o.dU(t);let c=(0,s.t)(t);return null!=(u=null==(l=null==(a=null==(n=e.predicates[c])?void 0:n.literals)?void 0:a[r])?void 0:l[0])?u:null}(e,t,i.ST.string)}function f(e,t){return(0,n.xj)(e),function(e,t,r){var n,a,l;if(!(0,i.g0)(t))throw new o.dU(t);let u=(0,s.t)(t);return[...null!=(l=null==(a=null==(n=e.predicates[u])?void 0:n.literals)?void 0:a[r])?l:[]]}(e,t,i.ST.string)}function p(e,t){var r,u;(0,n.xj)(e);let c=d(e,t).map(e=>l.Ay.namedNode(e)),h=function(e,t){var r,a,u,c;if((0,n.xj)(e),!(0,i.g0)(t))throw new o.dU(t);let d=(0,s.t)(t),h=[],f=null!=(a=null==(r=e.predicates[d])?void 0:r.langStrings)?a:{};for(let e of Object.keys(f)){let t=f[e].map(t=>l.Ay.literal(t,e));h=h.concat(t)}let p=null!=(c=null==(u=e.predicates[d])?void 0:u.literals)?c:{};for(let e of Object.keys(p)){let t=p[e],r=l.Ay.namedNode(e),i=t.map(e=>l.Ay.literal(e,r));h=h.concat(i)}return h}(e,t),f=(0,s.t)(t),p=(null!=(u=null==(r=e.predicates[f])?void 0:r.blankNodes)?u:[]).map(e=>{let t=(0,a.GM)(e)?(0,a.Sk)(e):void 0;return l.Ay.blankNode(t)});return c.concat(h).concat(p)}},2202:(e,t,r)=>{"use strict";function i(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return i}}),r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2340:(e,t,r)=>{"use strict";r.d(t,{lB:()=>I,dU:()=>A,fe:()=>T,D9:()=>E,vW:()=>S,B2:()=>v,eC:()=>_,TO:()=>x,ub:()=>F,rM:()=>w,xQ:()=>b,Y:()=>k});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};for(var n,o=new Uint8Array(16),s=[],a=0;a<256;++a)s.push((a+256).toString(16).slice(1));let l=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();var a=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var l=0;l<16;++l)t[r+l]=a[l];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)};var u=r(695),c=r(1482),d=r(8348),h=r(3735),f=r(2672),p=r(3511),g=r(8785),y=r(2041),m=r(5177);function v(e,t,r={}){var i;if(!(0,u.g0)(t)&&!t.match(/^_:/))throw new R(t);let n=void 0!==r.scope?(0,g.t)(r.scope):"default",o=null!=(i=e.graphs[n])?i:{},s=(0,g.t)(t),a=o[(0,p.AA)(s)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(s),(0,h.$s)(e)):s];return void 0===a?null:a}function _(e,t={acceptBlankNodes:!1}){var r;let i=void 0!==t.scope?(0,g.t)(t.scope):"default";return Object.values(null!=(r=e.graphs[i])?r:{}).filter(e=>!(0,p.GM)(e.url)||t.acceptBlankNodes)}function b(e,t){var r;let i=F(t)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(t.url),(0,h.$s)(e)):t.url,n=e.graphs.default,o=(0,p.CN)({...n,[i]:(0,p.CN)({...t,url:i})}),s=(0,p.CN)({...e.graphs,default:o}),a=m.Ay.namedNode(i),l=null==(r=e.graphs.default[i])?void 0:r.predicates,g=void 0!==l?(0,d.FP)(l,a,m.Ay.defaultGraph()):[],y=(0,d.FP)(t.predicates,a,m.Ay.defaultGraph());return(0,f.Mc)((0,f.CC)((0,p.CN)({...e,graphs:s}),g),y)}function w(e,t){var r;let i;i=(0,u.Y2)(t)?t.value:"string"==typeof t?(0,p.AA)(t)&&(0,c.OG)(e)?(0,u.ye)((0,p.J0)(t),(0,h.$s)(e)):t:F(t)?t.url:E(t);let n={...e.graphs.default};delete n[i];let o=(0,p.CN)({...e.graphs,default:(0,p.CN)(n)}),s=m.Ay.namedNode(i),a=null==(r=e.graphs.default[i])?void 0:r.predicates,l=void 0!==a?(0,d.FP)(a,s,m.Ay.defaultGraph()):[];return(0,f.CC)((0,p.CN)({...e,graphs:o}),l)}function S(e={}){var t;if(void 0!==e.url){let{url:t}=e;if(!(0,u.g0)(t))throw new R(t);return(0,p.CN)({type:"Subject",predicates:(0,p.CN)({}),url:t})}let r=null!=(t=e.name)?t:C(),i=(0,p.w$)(r);return(0,p.CN)({type:"Subject",predicates:(0,p.CN)({}),url:i})}function x(e){return"object"==typeof e&&null!==e&&"string"==typeof e.type&&"Subject"===e.type}let E=function(e,t){if(F(e)){if(void 0===t)throw Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return(0,u.ye)((0,p.J0)(e.url),t)}return e.url};function k(e){let t="";F(e)?t+=`## Thing (no URL yet  identifier: \`#${(0,p.J0)(e.url)}\`)
`:t+=`## Thing: ${e.url}
`;let r=Object.keys(e.predicates);if(0===r.length)t+="\n<empty>\n";else for(let i of r)t+=`
Property: ${i}
`,t+=(0,y.me)(e,i).reduce((e,t)=>`${e}- ${(0,f.e0)(t)}
`,"");return t}function F(e){return(0,p.AA)(e.url)}class I extends c.dT{constructor(e){super(`Expected a Thing, but received: [${e}].`),this.receivedValue=e}}class A extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL to identify a property, but received: [${t}].`),this.receivedProperty=t}}class T extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL value, but received: [${t}].`),this.receivedValue=t}}class R extends c.dT{constructor(e){let t=(0,u.Y2)(e)?e.value:e;super(`Expected a valid URL to identify a Thing, but received: [${t}].`),this.receivedValue=t}}let C=()=>l()},2439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return b}});let i=r(4252),n=r(8365),o=r(7876),s=n._(r(4232)),a=i._(r(8477)),l=i._(r(9836)),u=r(4915),c=r(6904),d=r(72);r(546);let h=r(8265),f=i._(r(3829)),p=r(1026),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/solid-memo/branches/main/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function y(e,t,r,i,n,o,s){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&n(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let i=!1,n=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>i,isPropagationStopped:()=>n,persist:()=>{},preventDefault:()=>{i=!0,t.preventDefault()},stopPropagation:()=>{n=!0,t.stopPropagation()}})}(null==i?void 0:i.current)&&i.current(e)}}))}function m(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}let v=(0,s.forwardRef)((e,t)=>{let{src:r,srcSet:i,sizes:n,height:a,width:l,decoding:u,className:c,style:d,fetchPriority:h,placeholder:f,loading:g,unoptimized:v,fill:_,onLoadRef:b,onLoadingCompleteRef:w,setBlurComplete:S,setShowAltText:x,sizesInput:E,onLoad:k,onError:F,...I}=e,A=(0,s.useCallback)(e=>{e&&(F&&(e.src=e.src),e.complete&&y(e,f,b,w,S,v,E))},[r,f,b,w,S,F,v,E]),T=(0,p.useMergedRef)(t,A);return(0,o.jsx)("img",{...I,...m(h),loading:g,width:l,height:a,decoding:u,"data-nimg":_?"fill":"1",className:c,style:d,sizes:n,srcSet:i,src:r,ref:T,onLoad:e=>{y(e.currentTarget,f,b,w,S,v,E)},onError:e=>{x(!0),"empty"!==f&&S(!0),F&&F(e)}})});function _(e){let{isAppRouter:t,imgAttributes:r}=e,i={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...m(r.fetchPriority)};return t&&a.default.preload?(a.default.preload(r.src,i),null):(0,o.jsx)(l.default,{children:(0,o.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...i},"__nimg-"+r.src+r.srcSet+r.sizes)})}let b=(0,s.forwardRef)((e,t)=>{let r=(0,s.useContext)(h.RouterContext),i=(0,s.useContext)(d.ImageConfigContext),n=(0,s.useMemo)(()=>{var e;let t=g||i||c.imageConfigDefault,r=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),n=t.deviceSizes.sort((e,t)=>e-t),o=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:r,deviceSizes:n,qualities:o}},[i]),{onLoad:a,onLoadingComplete:l}=e,p=(0,s.useRef)(a);(0,s.useEffect)(()=>{p.current=a},[a]);let y=(0,s.useRef)(l);(0,s.useEffect)(()=>{y.current=l},[l]);let[m,b]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),{props:x,meta:E}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:n,blurComplete:m,showAltText:w});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{...x,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:p,onLoadingCompleteRef:y,setBlurComplete:b,setShowAltText:S,sizesInput:e.sizes,ref:t}),E.priority?(0,o.jsx)(_,{isAppRouter:!r,imgAttributes:x}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2572:(e,t,r)=>{var i=r(1642),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=s),s.prototype=Object.create(n.prototype),o(n,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},2647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return n}});let i=""+r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function n(){let e=Object.defineProperty(Error(i),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=i,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2661:(e,t,r)=>{"use strict";let i,n=r(9143),{ArrayPrototypeSlice:o,Error:s,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:l,ObjectDefineProperties:u,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:d,Symbol:h,SymbolHasInstance:f}=r(4039);e.exports=O,O.WritableState=N;let{EventEmitter:p}=r(5978),g=r(5718).Stream,{Buffer:y}=r(1642),m=r(261),{addAbortSignal:v}=r(9110),{getHighWaterMark:_,getDefaultHighWaterMark:b}=r(4318),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:F,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:T}=r(7894).codes,{errorOrDestroy:R}=m;function C(){}c(O.prototype,g.prototype),c(O,g);let P=h("kOnFinished");function N(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(9667)),this.objectMode=!!(e&&e.objectMode),i&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?_(this,e,"writableHighWaterMark",i):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(e&&!1===e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,j(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function j(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function O(e){let t=this instanceof r(9667);if(!t&&!a(O,this))return new O(e);this._writableState=new N(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&v(e.signal,this)),g.call(this,e),m.construct(this,()=>{let e=this._writableState;e.writing||K(this,e),W(this,e)})}function L(e,t,r,i){let o,s=e._writableState;if("function"==typeof r)i=r,r=s.defaultEncoding;else{if(r){if("buffer"!==r&&!y.isEncoding(r))throw new T(r)}else r=s.defaultEncoding;"function"!=typeof i&&(i=C)}if(null===t)throw new I;if(!s.objectMode)if("string"==typeof t)!1!==s.decodeStrings&&(t=y.from(t,r),r="buffer");else if(t instanceof y)r="buffer";else if(g._isUint8Array(t))t=g._uint8ArrayToBuffer(t),r="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],t);return(s.ending?o=new A:s.destroyed&&(o=new k("write")),o)?(n.nextTick(i,o),R(e,o,!0),o):(s.pendingcb++,function(e,t,r,i,n){let o=t.objectMode?1:r.length;t.length+=o;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:i,callback:n}),t.allBuffers&&"buffer"!==i&&(t.allBuffers=!1),t.allNoop&&n!==C&&(t.allNoop=!1)):(t.writelen=o,t.writecb=n,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(e,s,t,r,i))}function D(e,t,r,i,n,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new k("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function U(e,t,r,i){--t.pendingcb,i(r),$(t),R(e,r)}function M(e,t){let r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)return void R(e,new x);r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(U,e,r,t,o):U(e,r,t,o)):(r.buffered.length>r.bufferedIndex&&K(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===o?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:o,stream:e,state:r},n.nextTick(B,r.afterWriteTickInfo)):H(e,r,1,o))}function B({stream:e,state:t,count:r,cb:i}){return t.afterWriteTickInfo=null,H(e,t,r,i)}function H(e,t,r,i){for(t.ending||e.destroyed||0!==t.length||!t.needDrain||(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,i();t.destroyed&&$(t),W(e,t)}function $(e){var t,r;if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){let{chunk:i,callback:n}=e.buffered[r],o=e.objectMode?1:i.length;e.length-=o,n(null!=(t=e.errored)?t:new k("write"))}let i=e[P].splice(0);for(let t=0;t<i.length;t++)i[t](null!=(r=e.errored)?r:new k("end"));j(e)}function K(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:i,objectMode:n}=t,s=r.length-i;if(!s)return;let a=i;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let i=t.allNoop?C:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},n=t.allNoop&&0===a?r:o(r,a);n.allBuffers=t.allBuffers,D(e,t,!0,t.length,n,"",i),j(t)}else{do{let{chunk:i,encoding:o,callback:s}=r[a];r[a++]=null,D(e,t,!1,n?1:i.length,i,o,s)}while(a<r.length&&!t.writing);a===r.length?j(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function W(e,t,r){if(V(t)){if(!t.prefinished&&!t.finalCalled)if("function"!=typeof e._final||t.destroyed)t.prefinished=!0,e.emit("prefinish");else{t.finalCalled=!0;let r=!1;function i(i){if(r)return void R(e,null!=i?i:x());if(r=!0,t.pendingcb--,i){let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e](i);R(e,i,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick((e,t)=>{V(t)?q(e,t):t.pendingcb--},e,t)):V(t)&&(t.pendingcb++,q(e,t)))}}function q(e,t){t.pendingcb--,t.finished=!0;let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}N.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},l(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(O,f,{__proto__:null,value:function(e){return!!a(this,e)||this===O&&e&&e._writableState instanceof N}}),O.prototype.pipe=function(){R(this,new E)},O.prototype.write=function(e,t,r){return!0===L(this,e,t,r)},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||K(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=d(e)),!y.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},O.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new S("_write()")},O.prototype._writev=null,O.prototype.end=function(e,t,r){let i,o=this._writableState;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){let r=L(this,e,t);r instanceof s&&(i=r)}return o.corked&&(o.corked=1,this.uncork()),i||(o.errored||o.ending?o.finished?i=new F("end"):o.destroyed&&(i=new k("end")):(o.ending=!0,W(this,o,!0),o.ended=!0)),"function"==typeof r&&(i||o.finished?n.nextTick(r,i):o[P].push(r)),this},u(O.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let z=m.destroy;function J(){return void 0===i&&(i={}),i}O.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[P].length)&&n.nextTick($,r),z.call(this,e,t),this},O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},O.fromWeb=function(e,t){return J().newStreamWritableFromWritableStream(e,t)},O.toWeb=function(e){return J().newWritableStreamFromStreamWritable(e)}},2672:(e,t,r)=>{"use strict";r.d(t,{CC:()=>c,Mc:()=>u,ZU:()=>d,e0:()=>a,xj:()=>l});var i=r(695),n=r(1482),o=r(2340),s=r(3511);function a(e){var t,r,n,o,s,a,l,u;if((0,i.Y2)(e))return`<${e.value}> (URL)`;if((0,i.c$)(e)){let c;if(!(0,i.Y2)(e.datatype))return`[${e.value}] (RDF/JS Literal of unknown type)`;switch(e.datatype.value){case i.ST.boolean:return c=null!=(r=null==(t=(0,i.OI)(e.value))?void 0:t.valueOf())?r:`Invalid data: \`${e.value}\``,`${c} (boolean)`;case i.ST.dateTime:return c=null!=(o=null==(n=(0,i.tQ)(e.value))?void 0:n.toUTCString())?o:`Invalid data: \`${e.value}\``,`${c} (datetime)`;case i.ST.decimal:return c=null!=(a=null==(s=(0,i.ZB)(e.value))?void 0:s.toString())?a:`Invalid data: \`${e.value}\``,`${c} (decimal)`;case i.ST.integer:return c=null!=(u=null==(l=(0,i.EO)(e.value))?void 0:l.toString())?u:`Invalid data: \`${e.value}\``,`${c} (integer)`;case i.ST.langString:return`"${e.value}" (${e.language} string)`;case i.ST.string:return`"${e.value}" (string)`;default:return`[${e.value}] (RDF/JS Literal of type: \`${e.datatype.value}\`)`}}return"BlankNode"===e.termType?`[${e.value}] (RDF/JS BlankNode)`:"Quad"===e.termType?"??? (nested RDF* Quad)":"Variable"===e.termType?`?${e.value} (RDF/JS Variable)`:e}function l(e){if(!(0,o.TO)(e))throw new o.lB(e)}function u(e,t){let r=(0,n.rg)(e)?e.internal_changeLog:{additions:[],deletions:[]},[i,o]=t.filter(e=>!h(e)).reduce(([e,t],r)=>void 0!==t.find(e=>e.equals(r))?[e,t.filter(e=>!e.equals(r))]:[e.concat(r),t],[r.additions,r.deletions]);return(0,s.CN)({...e,internal_changeLog:{additions:i,deletions:o}})}function c(e,t){let r=(0,n.rg)(e)?e.internal_changeLog:{additions:[],deletions:[]},[i,o]=t.filter(e=>!h(e)).reduce(([e,t],r)=>void 0!==e.find(e=>e.equals(r))?[e.filter(e=>!e.equals(r)),t]:[e,t.concat(r)],[r.additions,r.deletions]);return(0,s.CN)({...e,internal_changeLog:{additions:i,deletions:o}})}function d(e){return(0,n.rg)(e)?e:(0,s.CN)({...e,internal_changeLog:{additions:[],deletions:[]}})}function h(e){return"BlankNode"===e.subject.termType||"BlankNode"===e.object.termType}},2749:(e,t,r)=>{"use strict";let i;r.r(t),r.d(t,{default:()=>ex});var n=r(7876);r(4361);var o=r(3913),s=r.n(o);r(3021);var a=r(4232);let l=(0,a.createContext)({getRepository:()=>{throw Error("Repository not initialized")}});function u(e){let{children:t,repository:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Provider,{value:{getRepository:()=>r},children:t})})}var c=r(6836),d=r(9813),h=r(2340),f=r(2041),p=r(3735);r(7181);var g=r(3795);async function y(e,t){var r,i;let n=null!=(r=null==t?void 0:t.fetch)?r:fetch,o=null!=(i=null==t?void 0:t.webIdProfile)?i:await (0,d.aX)(e),s=(await Promise.allSettled((function(e,t){let r=(0,h.B2)(t,e);return Array.from(new Set((0,h.eC)(t).filter(e=>(0,f.Cr)(e,g.Xb.primaryTopic).length>0).map(h.D9).concat(r?(0,f.Cr)(r,g.YV.seeAlso):[]).concat(r?(0,f.Cr)(r,g.Xb.isPrimaryTopicOf):[]).filter(e=>e!==(0,p.oB)(t))))})(e,o).map(e=>(0,d.aX)(e,{fetch:n})))).filter(e=>"fulfilled"===e.status).map(e=>e.value);return{webIdProfile:o,altProfileAll:s}}var m=r(2672),v=r(695),_=r(8785),b=r(3511);let w=(e,t,r)=>{var i,n;let o;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);if(!(0,h.TO)(r)&&!(0,v.g0)(r))throw new h.fe(r);let s=(0,_.t)(t),a=null!=(i=e.predicates[s])?i:{},l=null!=(n=a.namedNodes)?n:[];o=(0,v.Y2)(r)?r.value:"string"==typeof r?r:(0,h.ub)(r)?r.url:(0,h.D9)(r);let u=(0,b.CN)(l.concat((0,_.t)(o))),c=(0,b.CN)({...a,namedNodes:u}),d=(0,b.CN)({...e.predicates,[s]:c});return(0,b.CN)({...e,predicates:d})},S=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.vk)(r),v.ST.boolean)),x=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.K)(r),v.ST.dateTime)),E=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.ls)(r),v.ST.date)),k=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.MR)(r),v.ST.time)),F=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.QH)(r),v.ST.decimal)),I=(e,t,r)=>((0,m.xj)(e),N(e,t,(0,v.PF)(r),v.ST.integer));function A(e,t,r,i){var n,o,s;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let a=(0,_.t)(t),l=(0,v.QC)(i),u=null!=(n=e.predicates[a])?n:{},c=null!=(o=u.langStrings)?o:{},d=null!=(s=c[l])?s:[],f=(0,b.CN)(d.concat(r)),p=(0,b.CN)({...c,[l]:f}),g=(0,b.CN)({...u,langStrings:p}),y=(0,b.CN)({...e.predicates,[a]:g});return(0,b.CN)({...e,predicates:y})}let T=(e,t,r)=>((0,m.xj)(e),N(e,t,r,v.ST.string));function R(e,t,r){return w(e,t,r.value)}function C(e,t,r){if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);return r.datatype.value===v.ST.langString?A(e,t,r.value,r.language):N(e,t,r.value,r.datatype.value)}function P(e,t,r){var i,n;if("NamedNode"===r.termType)return R(e,t,r);if("Literal"===r.termType)return C(e,t,r);if("BlankNode"===r.termType){if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let o=(0,_.t)(t),s=null!=(i=e.predicates[o])?i:{},a=null!=(n=s.blankNodes)?n:[],l=(0,b.CN)(a.concat((0,b.cW)(r))),u=(0,b.CN)({...s,blankNodes:l}),c=(0,b.CN)({...e.predicates,[o]:u});return(0,b.CN)({...e,predicates:c})}throw Error(`Term type [${r.termType}] is not supported by @inrupt/solid-client.`)}function N(e,t,r,i){var n,o,s;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let a=(0,_.t)(t),l=null!=(n=e.predicates[a])?n:{},u=null!=(o=l.literals)?o:{},c=null!=(s=u[i])?s:[],d=(0,b.CN)(c.concat(r)),f=(0,b.CN)({...u,[i]:d}),p=(0,b.CN)({...l,literals:f}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}function j(e,t){if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let r=(0,_.t)(t),i={...e.predicates};return delete i[r],(0,b.CN)({...e,predicates:(0,b.CN)(i)})}let O=(e,t,r)=>{var i,n,o;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let s=(0,_.t)(t);if(!(0,h.TO)(r)&&!(0,v.g0)(r))throw new h.fe(r);let a=(0,h.TO)(r)?(0,h.D9)(r):(0,_.t)(r),l=(0,b.CN)(null!=(o=null==(n=null==(i=e.predicates[s])?void 0:i.namedNodes)?void 0:n.filter(e=>e.toLowerCase()!==a.toLowerCase()))?o:[]),u=(0,b.CN)({...e.predicates[s],namedNodes:l}),c=(0,b.CN)({...e.predicates,[s]:u});return(0,b.CN)({...e,predicates:c})},L=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.boolean,e=>(0,v.OI)(e)===r)),D=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.dateTime,e=>{var t;return(null==(t=(0,v.tQ)(e))?void 0:t.getTime())===r.getTime()})),U=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.date,function(e){let t=(0,v.Yp)(e);return!!t&&t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getUTCDate()===r.getUTCDate()})),M=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.time,function(e){let t=(0,v.Tv)(e);return!!t&&t.hour===r.hour&&t.minute===r.minute&&t.second===r.second&&t.millisecond===r.millisecond&&t.timezoneHourOffset===r.timezoneHourOffset&&t.timezoneMinuteOffset===r.timezoneMinuteOffset})),B=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.decimal,e=>(0,v.ZB)(e)===r)),H=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.integer,e=>(0,v.EO)(e)===r));function $(e,t,r,i){var n,o;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let s=(0,_.t)(t),a=null!=(o=null==(n=e.predicates[s])?void 0:n.langStrings)?o:{},l=Object.keys(a).find(e=>(0,v.QC)(e)===(0,v.QC)(i)&&Array.isArray(a[e])&&a[e].length>0);if("string"!=typeof l)return e;let u=a[l],c=(0,b.CN)(u.filter(e=>e!==r)),d=(0,b.CN)({...a,[l]:c}),f=(0,b.CN)({...e.predicates[s],langStrings:d}),p=(0,b.CN)({...e.predicates,[s]:f});return(0,b.CN)({...e,predicates:p})}let K=(e,t,r)=>((0,m.xj)(e),q(e,t,v.ST.string,e=>e===r));function V(e,t,r){return O(e,t,r.value)}function W(e,t,r){var i,n,o;if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);let s=r.datatype.value;if(s===v.ST.langString)return $(e,t,r.value,r.language);let a=(0,_.t)(t),l=null!=(i=e.predicates[a])?i:{},u=null!=(n=l.literals)?n:{},c=null!=(o=u[s])?o:[],d=(0,b.CN)(c.filter(e=>e!==r.value)),f=(0,b.CN)({...u,[s]:d}),p=(0,b.CN)({...l,literals:f}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}function q(e,t,r,i){var n,o,s;if(!(0,v.g0)(t))throw new h.dU(t);let a=(0,_.t)(t),l=null!=(n=e.predicates[a])?n:{},u=null!=(o=l.literals)?o:{},c=null!=(s=u[r])?s:[],d=(0,b.CN)(c.filter(e=>!i(e))),f=(0,b.CN)({...u,[r]:d}),p=(0,b.CN)({...l,literals:f}),g=(0,b.CN)({...e.predicates,[a]:p});return(0,b.CN)({...e,predicates:g})}let z=(e,t,r)=>{if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);if(!(0,h.TO)(r)&&!(0,v.g0)(r))throw new h.fe(r);return w(j(e,t),t,r)},J=(e,t,r)=>((0,m.xj)(e),S(j(e,t),t,r)),Z=(e,t,r)=>((0,m.xj)(e),x(j(e,t),t,r)),G=(e,t,r)=>((0,m.xj)(e),E(j(e,t),t,r)),Y=(e,t,r)=>((0,m.xj)(e),k(j(e,t),t,r)),Q=(e,t,r)=>((0,m.xj)(e),F(j(e,t),t,r)),X=(e,t,r)=>((0,m.xj)(e),I(j(e,t),t,r));function ee(e,t,r,i){return(0,m.xj)(e),A(j(e,t),t,r,i)}let et=(e,t,r)=>((0,m.xj)(e),T(j(e,t),t,r));function er(e,t,r){return(0,m.xj)(e),R(j(e,t),t,r)}function ei(e,t,r){return(0,m.xj)(e),C(j(e,t),t,r)}function en(e,t,r){if((0,m.xj)(e),!(0,v.g0)(t))throw new h.dU(t);return P(j(e,t),t,r)}function eo(e=(0,h.vW)()){let t=(0,h.TO)(e)?e:(0,h.vW)(e);function r(e){return(r,i)=>(t=e(t,r,i),o)}function i(e){return(r,i)=>(t=e(t,r,i),o)}function n(e){return(r,i)=>(t=e(t,r,i),o)}let o={build:()=>t,addUrl:r(w),addIri:r(w),addBoolean:r(S),addDatetime:r(x),addDate:r(E),addTime:r(k),addDecimal:r(F),addInteger:r(I),addStringNoLocale:r(T),addStringEnglish:(e,r)=>(t=A(t,e,r,"en"),o),addStringWithLocale:(e,r,i)=>(t=A(t,e,r,i),o),addNamedNode:r(R),addLiteral:r(C),addTerm:r(P),setUrl:i(z),setIri:i(z),setBoolean:i(J),setDatetime:i(Z),setDate:i(G),setTime:i(Y),setDecimal:i(Q),setInteger:i(X),setStringNoLocale:i(et),setStringEnglish:(e,r)=>(t=ee(t,e,r,"en"),o),setStringWithLocale:(e,r,i)=>(t=ee(t,e,r,i),o),setNamedNode:i(er),setLiteral:i(ei),setTerm:i(en),removeAll:e=>(t=j(t,e),o),removeUrl:n(O),removeIri:n(O),removeBoolean:n(L),removeDatetime:n(D),removeDate:n(U),removeTime:n(M),removeDecimal:n(B),removeInteger:n(H),removeStringNoLocale:n(K),removeStringEnglish:(e,r)=>eo($(t,e,r,"en")),removeStringWithLocale:(e,r,i)=>eo($(t,e,r,i)),removeNamedNode:n(V),removeLiteral:n(W)};return o}let es={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ea=new Uint8Array(16),el=[];for(let e=0;e<256;++e)el.push((e+256).toString(16).slice(1));let eu=function(e,t,r){if(es.randomUUID&&!t&&!e)return es.randomUUID();let n=(e=e||{}).random??e.rng?.()??function(){if(!i){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(ea)}();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(el[e[t+0]]+el[e[t+1]]+el[e[t+2]]+el[e[t+3]]+"-"+el[e[t+4]]+el[e[t+5]]+"-"+el[e[t+6]]+el[e[t+7]]+"-"+el[e[t+8]]+el[e[t+9]]+"-"+el[e[t+10]]+el[e[t+11]]+el[e[t+12]]+el[e[t+13]]+el[e[t+14]]+el[e[t+15]]).toLowerCase()}(n)};var ec=r(8049);function ed(e){return e.split("#")[0]}let eh=(e,t,r)=>e.predicates[t]?.namedNodes?.includes(r);class ef{getSession(){return(0,ec._)()}isLoggedIn(){return this.getSession().info.isLoggedIn}getFetch(){return this.getSession().fetch}getWebId(){return this.getSession().info.webId}async login(e){return this.getSession().login(e)}async logout(){return this.getSession().logout({logoutType:"app"})}async handleIncomingRedirect(e){let t=this.getSession();t.events.removeAllListeners(ec.qY.SESSION_RESTORED),t.events.on(ec.qY.SESSION_RESTORED,e),await t.handleIncomingRedirect({restorePreviousSession:!0})}async findOidcIssuers(e){let t=await (0,d.aX)(e),r=(0,h.B2)(t,e);if(!r)throw Error("Failed to discover WebID");return(0,f.tX)(r,"http://www.w3.org/ns/solid/terms#oidcIssuer")}async findAllStorageIris(){let e=this.getWebId();if(!e)throw Error("Session not authenticated!");let t=await y(e,{fetch:this.getFetch()});return[(0,h.B2)(t.webIdProfile,e)].filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/pim/space#storage")).flat()}async findAllPrivateTypeIndexIrisByWebId(){let e=this.getWebId();if(!e)throw Error("Session not authenticated!");let t=await y(e,{fetch:this.getFetch()}),r=[(0,h.B2)(t.webIdProfile,e)],i=r.filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/2000/01/rdf-schema#seeAlso")).flat(),n=(await Promise.all(i.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,h.eC)(e)).flat();return[...r.filter(e=>null!==e).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")).flat(),...n.map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")).flat()]}async findAllInstanceUrls(){let e=await this.findAllPrivateTypeIndexIrisByWebId(),t=await Promise.all(e.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})));return(await Promise.all(t.map(e=>(0,h.eC)(e)))).flat().filter(e=>eh(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/ns/solid/terms#TypeRegistration")&&eh(e,"http://www.w3.org/ns/solid/terms#forClass","http://antwika.com/ns/solid-memo#SolidMemoData")).map(e=>(0,f.tX)(e,"http://www.w3.org/ns/solid/terms#instance")).flat()}async findInstances(e){let t=e??await this.findAllInstanceUrls();return(await Promise.all(t.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,h.eC)(e)).flat().filter(e=>eh(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData")).reduce((e,t)=>{let r=(0,c.LW)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),name:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#name"),hasDeck:(0,f.tX)(t,"http://antwika.com/ns/solid-memo#hasDeck"),isInPrivateTypeIndex:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInPrivateTypeIndex")});return e[r.iri]=r,e},{})}async findAllDeckUrls(e){let t=e??await this.findAllInstanceUrls();return(await Promise.all(t.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,h.eC)(e)).flat().filter(e=>eh(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData")).map(e=>(0,f.tX)(e,"http://antwika.com/ns/solid-memo#hasDeck")).flat()}async findAllFlashcardUrls(e){return Object.values(await this.findDecks(e)).map(e=>e.hasCard).flat()}async findDecks(e){let t=e??await this.findAllDeckUrls();return(await Promise.all(t.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})))).map(e=>(0,h.eC)(e)).flat().filter(e=>eh(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Deck")).reduce((e,t)=>{let r=(0,c.nt)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),name:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#name"),back:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#back"),isInSolidMemoDataInstance:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),hasCard:(0,f.tX)(t,"http://antwika.com/ns/solid-memo#hasCard")});return e[r.iri]=r,e},{})}async findFlashcards(e){let t=await Promise.all(e.map(e=>(0,d.aX)(e,{fetch:this.getFetch()})));return(await Promise.all(t.map(e=>(0,h.eC)(e).filter(e=>eh(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Flashcard"))))).flat().reduce((e,t)=>{let r=(0,c.Ez)({iri:t.url,version:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#version"),front:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#front"),back:(0,f.NB)(t,"http://antwika.com/ns/solid-memo#back"),isInDeck:(0,f.ID)(t,"http://antwika.com/ns/solid-memo#isInDeck")});return e[r.iri]=r,e},{})}async createInstance(e){let t=await this.findAllPrivateTypeIndexIrisByWebId();if(0===t.length)throw Error("No private type indexes found");if(t.length>1)throw Error("Too many private type indexes found");let r=eu().toString(),i=t[0],n=`${i}#${r}`;if(!i)throw Error("Failed to pick private type indexes iri");let o=await (0,d.aX)(i,{fetch:this.getFetch()}),s=(0,h.vW)({name:r});if(!s)throw Error("Expected typeRegistrationThing to be defined!");let a=eu().toString(),l=`${e}solid-memo/data-${eu().toString()}#${a}`,u=eo(s).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/ns/solid/terms#TypeRegistration").addUrl("http://www.w3.org/ns/solid/terms#forClass","http://antwika.com/ns/solid-memo#SolidMemoData").addUrl("http://www.w3.org/ns/solid/terms#instance",l).build(),c=(0,h.xQ)(o,u);await (0,d.cv)(i,c,{fetch:this.getFetch()});let f=(0,d.Yl)(),p=eo((0,h.vW)({name:a})).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#SolidMemoData").addUrl("http://antwika.com/ns/solid-memo#isInPrivateTypeIndex",n).addStringNoLocale("http://antwika.com/ns/solid-memo#version","1").addStringNoLocale("http://antwika.com/ns/solid-memo#name","New instance name").build(),g=(0,h.xQ)(f,p);await (0,d.cv)(l,g,{fetch:this.getFetch()})}async createDeck(e,t){let r=await (0,d.aX)(e,{fetch:this.getFetch()}),i=(0,h.B2)(r,e);if(!i)throw Error("Expected instanceThing to be defined!");let n=eu().toString(),o=`${ed(e)}#${n}`,s=eo(i).addUrl("http://antwika.com/ns/solid-memo#hasDeck",o).build(),a=(0,h.xQ)(r,s);await (0,d.cv)(e,a,{fetch:this.getFetch()});let l=await (0,d.aX)(e,{fetch:this.getFetch()}),u=eo({name:n}).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Deck").addStringNoLocale("http://antwika.com/ns/solid-memo#version",t.version).addStringNoLocale("http://antwika.com/ns/solid-memo#name",t.name).addUrl("http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance",t.isInSolidMemoDataInstance).build(),c=(0,h.xQ)(l,u);return await (0,d.cv)(e,c,{fetch:this.getFetch()}),await this.findDecks([o])}async createFlashcard(e,t,r){let i=await (0,d.aX)(t,{fetch:this.getFetch()}),n=(0,h.B2)(i,t);if(!n)throw Error("Expected deckThing to be defined!");let o=eu().toString(),s=`${ed(e)}#${o}`,a=eo(n).addUrl("http://antwika.com/ns/solid-memo#hasCard",s).build(),l=(0,h.xQ)(i,a);await (0,d.cv)(t,l,{fetch:this.getFetch()});let u=await (0,d.aX)(e,{fetch:this.getFetch()}),c=eo({name:o}).addUrl("http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://antwika.com/ns/solid-memo#Flashcard").addStringNoLocale("http://antwika.com/ns/solid-memo#version",r.version).addStringNoLocale("http://antwika.com/ns/solid-memo#front",r.front).addStringNoLocale("http://antwika.com/ns/solid-memo#back",r.back).addUrl("http://antwika.com/ns/solid-memo#isInDeck",r.isInDeck).build(),f=(0,h.xQ)(u,c);await (0,d.cv)(e,f,{fetch:this.getFetch()})}async renameInstance(e,t){let r=await (0,d.aX)(e.iri,{fetch:this.getFetch()}),i=(0,h.B2)(r,e.iri);if(!i)throw Error("Could not find instance thing");let n=(0,f.K9)(i,"http://antwika.com/ns/solid-memo#name"),o=i;for(let e of n)o=K(i,"http://antwika.com/ns/solid-memo#name",e);o=et(o,"http://antwika.com/ns/solid-memo#name",t);let s=(0,h.xQ)(r,o);await (0,d.cv)(e.iri,s,{fetch:this.getFetch()})}async renameDeck(e,t){let r=await (0,d.aX)(e.iri,{fetch:this.getFetch()}),i=(0,h.B2)(r,e.iri);if(!i)throw Error("Could not find deck thing");let n=(0,f.K9)(i,"http://antwika.com/ns/solid-memo#name"),o=i;for(let e of n)o=K(i,"http://antwika.com/ns/solid-memo#name",e);o=et(o,"http://antwika.com/ns/solid-memo#name",t);let s=(0,h.xQ)(r,o);await (0,d.cv)(e.iri,s,{fetch:this.getFetch()})}async deleteInstance(e){if(e.hasDeck.length>0)throw Error("Clear the instance before deletion");let t=e.isInPrivateTypeIndex,r=await (0,d.aX)(t,{fetch:this.getFetch()}),i=(0,h.rM)(r,e.iri);(0,h.B2)(i,t)&&(i=(0,h.rM)(i,t)),await (0,d.cv)(t,i,{fetch:this.getFetch()});let n=await (0,d.aX)(e.iri,{fetch:this.getFetch()}),o=(0,h.rM)(n,e.iri),s=await (0,d.cv)(e.iri,o,{fetch:this.getFetch()});await (0,d.X)(s,{fetch:this.getFetch()})}async deleteDeck(e){if(e.hasCard.length>0)throw Error("Clear the deck before deletion");let t=e.isInSolidMemoDataInstance,r=await (0,d.aX)(t,{fetch:this.getFetch()}),i=(0,h.rM)(r,e.iri),n=(0,h.B2)(i,t);if(n){let t=O(n,"http://antwika.com/ns/solid-memo#hasDeck",e.iri);i=(0,h.xQ)(i,t)}await (0,d.cv)(t,i,{fetch:this.getFetch()})}async deleteFlashcard(e){let t=e.isInDeck,r=await (0,d.aX)(t,{fetch:this.getFetch()}),i=(0,h.rM)(r,e.iri),n=(0,h.B2)(i,t);if(n){let t=O(n,"http://antwika.com/ns/solid-memo#hasCard",e.iri);i=(0,h.xQ)(i,t)}await (0,d.cv)(t,i,{fetch:this.getFetch()})}}var ep=r(6207),eg=r(9099),ey=r(4e3);let em=(0,a.createContext)({user:null,loading:!0}),ev=e=>{let{authService:t,children:r}=e,i=(0,ey.useRouter)(),[o,s]=(0,a.useState)(null),[l,u]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{await t.handleIncomingRedirect(e=>i.push(e));let e=t.getWebId();e&&s({name:e}),u(!1)})().then(()=>{}).catch(e=>{console.error("Failed with error:",e)})},[t,l,i]),(0,n.jsx)(em.Provider,{value:{user:o,loading:l},children:r})},e_=()=>(0,a.useContext)(em);var eb=r(3417),ew=r(1979);let eS=e=>{let{children:t}=e,{user:r,loading:i}=e_(),o=(0,eg.useRouter)();return"/login"!==o.pathname&&(i||!r)?(0,n.jsxs)(eb.default,{children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{children:"Not logged in"})}),(0,n.jsx)("div",{children:(0,n.jsx)(ew.$n,{onClick:()=>{o.push("/login").catch(e=>{console.error("Failed with error:",e)})},children:"Go to Login page"})})]}):t},ex=e=>{let{Component:t,pageProps:r}=e,i=new ef,o=new c.uR(i),a=new c.$q(i);return(0,n.jsx)("div",{className:s().className,children:(0,n.jsx)(u,{repository:i,children:(0,n.jsx)(ep.A,{authService:o,service:a,children:(0,n.jsx)(ev,{authService:o,children:(0,n.jsx)(eS,{children:(0,n.jsx)(t,{...r})})})})})})}},3021:()=>{},3185:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:i}=r(4039);e.exports=o;let n=r(1079);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i(o.prototype,n.prototype),i(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},3417:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var i=r(7876),n=r(4035),o=r(6238),s=r(6836),a=r(6207),l=r(1979),u=r(7328),c=r.n(u),d=r(4e3),h=r(4232);function f(e){let{children:t}=e,r=(0,d.useRouter)(),{getAuthService:u}=(0,h.useContext)(a.h),f=u(),{NEXT_PUBLIC_BASE_PATH:p}=(0,o._)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Solid Memo"}),(0,i.jsx)("meta",{name:"description",content:"A memorization app built using Solid"}),(0,i.jsx)("link",{rel:"icon",href:"".concat((0,s.Il)(p),"favicon.ico")})]}),(0,i.jsx)("main",{className:"bg-background text-foreground flex min-h-screen flex-col items-center",children:(0,i.jsxs)("div",{className:"container items-center justify-center gap-6 space-y-2 bg-white/80 p-6",children:[(0,i.jsx)(n.Y9,{onLogOut:()=>{f.logOut().then(()=>{r.push("/login")}).catch(e=>{console.error("Failed with error:",e)})}}),f.isLoggedIn()&&(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(l.$n,{onClick:()=>r.push("/"),children:"Home"}),(0,i.jsx)(l.$n,{onClick:()=>r.push("/instances"),children:"Instances"})]}),t]})})]})}},3463:(e,t,r)=>{"use strict";let{pipeline:i}=r(927),n=r(9667),{destroyer:o}=r(261),{isNodeStream:s,isReadable:a,isWritable:l,isWebStream:u,isTransformStream:c,isWritableStream:d,isReadableStream:h}=r(918),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(7894),y=r(5791);e.exports=function(...e){let t,r,m,v,_;if(0===e.length)throw new g("streams");if(1===e.length)return n.from(e[0]);let b=[...e];if("function"==typeof e[0]&&(e[0]=n.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=n.from(e[t])}for(let t=0;t<e.length;++t)if(s(e[t])||u(e[t])){if(t<e.length-1&&!(a(e[t])||h(e[t])||c(e[t])))throw new p(`streams[${t}]`,b[t],"must be readable");if(t>0&&!(l(e[t])||d(e[t])||c(e[t])))throw new p(`streams[${t}]`,b[t],"must be writable")}let w=e[0],S=i(e,function(e){let t=v;v=null,t?t(e):e?_.destroy(e):E||x||_.destroy()}),x=!!(l(w)||d(w)||c(w)),E=!!(a(S)||h(S)||c(S));if(_=new n({writableObjectMode:!!(null!=w&&w.writableObjectMode),readableObjectMode:!!(null!=S&&S.readableObjectMode),writable:x,readable:E}),x){if(s(w))_._write=function(e,r,i){w.write(e,r)?i():t=i},_._final=function(e){w.end(),r=e},w.on("drain",function(){if(t){let e=t;t=null,e()}});else if(u(w)){let e=(c(w)?w.writable:w).getWriter();_._write=async function(t,r,i){try{await e.ready,e.write(t).catch(()=>{}),i()}catch(e){i(e)}},_._final=async function(t){try{await e.ready,e.close().catch(()=>{}),r=t}catch(e){t(e)}}}y(c(S)?S.readable:S,()=>{if(r){let e=r;r=null,e()}})}if(E){if(s(S))S.on("readable",function(){if(m){let e=m;m=null,e()}}),S.on("end",function(){_.push(null)}),_._read=function(){for(;;){let e=S.read();if(null===e){m=_._read;return}if(!_.push(e))return}};else if(u(S)){let e=(c(S)?S.readable:S).getReader();_._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!_.push(t))return;if(r)return void _.push(null)}catch{return}}}}return _._destroy=function(e,i){e||null===v||(e=new f),m=null,t=null,r=null,null===v?i(e):(v=i,s(S)&&o(S,e))},_}},3511:(e,t,r)=>{"use strict";r.d(t,{AA:()=>o,CN:()=>n,GM:()=>l,J0:()=>s,Sk:()=>u,cW:()=>c,w$:()=>a});let i="https://inrupt.com/.well-known/sdk-local-node/",{freeze:n}=Object;function o(e){return e.substring(0,i.length)===i}function s(e){return e.substring(i.length)}function a(e){return`${i}${e}`}function l(e){return"string"==typeof e&&"_:"===e.substring(0,2)}function u(e){return e.substring(2)}function c(e){return`_:${e.value}`}},3657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return a}});let i=r(4252),n=r(4915),o=r(2439),s=i._(r(3829));function a(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/solid-memo/branches/main/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=o.Image},3735:(e,t,r)=>{"use strict";r.d(t,{fk:()=>f,gt:()=>c,oB:()=>h,$s:()=>d,ng:()=>u});class i extends Error{}let n=new URL("about:blank");function o(e,t){if(void 0!==e)try{return new URL(e,t)}catch{}}class s extends i{constructor(e,t,r,s){if(super(r,s),e.status>=200&&e.status<400)throw new i(`A ClientHttpError cannot be built from a success response, got ${e.status} ${e.statusText}`);this.errorResponse=Object.freeze({status:e.status,statusText:e.statusText,headers:e.headers,url:e.url,body:t,ok:!1}),this.details=function(e){let t,r,i,s,a;if("application/problem+json"===e.headers.get("Content-Type"))try{let n=JSON.parse(e.body),l=o(n.type,e.url);void 0!==l&&(t=l),"string"==typeof n.title&&(r=n.title),"number"==typeof n.status&&(i=n.status),"string"==typeof n.detail&&(s=n.detail);let u=o(n.instance,e.url);void 0!==u&&(a=u)}catch{}return Object.freeze({type:t??n,title:r??e.statusText,status:i??e.status,detail:s,instance:a})}(this.errorResponse)}get response(){return this.errorResponse}get problemDetails(){return this.details}}var a=r(1482),l=r(9786);function u(e,t={ignoreAuthenticationErrors:!1}){if((0,l.BN)(e)&&(!(0,l.IG)(e)||!t.ignoreAuthenticationErrors))throw new f(`Fetching the metadata of the Resource at [${e.url}] failed: [${e.status}] [${e.statusText}].`,e);return{internal_resourceInfo:(0,l.um)(e)}}function c(e){var t;return null!=(t=e.internal_resourceInfo.contentType)?t:null}function d(e){return(0,a.NF)(e)?e.internal_resourceInfo.sourceIri:null}let h=d;class f extends a.dT{constructor(e,t,r){super(e),this.response=t,"string"==typeof r?this.httpError=new s(t,r,e):this.httpError=new s(t,"",e)}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}get problemDetails(){return this.httpError.problemDetails}}},3795:(e,t,r)=>{"use strict";r.d(t,{Lq:()=>n,Xb:()=>o,YV:()=>i});let i={seeAlso:"http://www.w3.org/2000/01/rdf-schema#seeAlso"},n={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},o={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"}},3823:(e,t,r)=>{"use strict";let i=r(331),n=r(9666),o=i.Readable.destroy;e.exports=i.Readable,e.exports._uint8ArrayToBuffer=i._uint8ArrayToBuffer,e.exports._isUint8Array=i._isUint8Array,e.exports.isDisturbed=i.isDisturbed,e.exports.isErrored=i.isErrored,e.exports.isReadable=i.isReadable,e.exports.Readable=i.Readable,e.exports.Writable=i.Writable,e.exports.Duplex=i.Duplex,e.exports.Transform=i.Transform,e.exports.PassThrough=i.PassThrough,e.exports.addAbortSignal=i.addAbortSignal,e.exports.finished=i.finished,e.exports.destroy=i.destroy,e.exports.destroy=o,e.exports.pipeline=i.pipeline,e.exports.compose=i.compose,Object.defineProperty(i,"promises",{configurable:!0,enumerable:!0,get:()=>n}),e.exports.Stream=i.Stream,e.exports.default=e.exports},3829:(e,t)=>{"use strict";function r(e){var t;let{config:r,src:i,width:n,quality:o}=e,s=o||(null==(t=r.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return r.path+"?url="+encodeURIComponent(i)+"&w="+n+"&q="+s+(i.startsWith("/_next/static/media/"),"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}}),r.__next_img_default=!0;let i=r},3913:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_81940c"}},4e3:(e,t,r)=>{e.exports=r(4895)},4035:(e,t,r)=>{"use strict";r.d(t,{Y9:()=>h,QB:()=>p});var i=r(7876),n=r(6238),o=r(6207),s=r(1979),a=r(4587),l=r.n(a),u=r(6836);function c(e){let t,{size:r}=e,{NEXT_PUBLIC_BASE_PATH:o}=(0,n._)();switch(r){case"xs":t=46;break;case"sm":t=93;break;case"md":t=185;break;case"lg":t=370;break;case"xl":t=740}return(0,i.jsx)(l(),{src:"".concat((0,u.Il)(o),"sm-logo-").concat(r,".png"),width:t,height:t,alt:"Picture of the author"})}var d=r(4232);function h(e){let{onLogOut:t}=e,{getAuthService:r}=(0,d.useContext)(o.h),a=r(),{NEXT_PUBLIC_VERSION:l}=(0,n._)();return(0,i.jsxs)("div",{className:"relative flex p-4",children:[(0,i.jsxs)("div",{className:"grow",children:[(0,i.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,i.jsx)("div",{children:(0,i.jsx)(c,{size:"xs"})}),(0,i.jsx)("div",{className:"text-2xl font-extrabold",children:"Solid Memo"}),(0,i.jsxs)("div",{children:["(",l,")"]})]}),a.isLoggedIn()&&a.getWebId()&&(0,i.jsxs)("div",{className:"break-all italic opacity-50",children:["Logged in as: ",a.getWebId()]})]}),a.isLoggedIn()&&a.getWebId()&&(0,i.jsx)("div",{className:"absolute right-0",children:(0,i.jsx)(s.$n,{onClick:t,children:"Log out"})})]})}var f=r(8429);function p(e){let{className:t}=e,r=(0,d.useRef)(null),{getAuthService:a}=(0,d.useContext)(o.h),l=a();return(0,i.jsx)("div",{className:(0,f.cn)("flex flex-col gap-6",t),children:(0,i.jsxs)(s.Zp,{children:[(0,i.jsxs)(s.aR,{className:"text-center",children:[(0,i.jsx)(s.ZB,{className:"text-xl",children:"Welcome to Solid Memo"}),(0,i.jsx)(s.BT,{children:"Choose your Solid WebID provider"})]}),(0,i.jsx)(s.Wu,{children:(0,i.jsx)("form",{children:(0,i.jsxs)("div",{className:"grid gap-6",children:[(0,i.jsx)("div",{className:"flex flex-col gap-4",children:[{url:"https://login.inrupt.com",name:"Inrupt PodSpaces"},{url:"http://localhost:3000",name:"Localhost:3000"}].map(e=>(0,i.jsx)(s.$n,{className:"w-full",onClick:t=>{t.preventDefault(),void 0!==l.logInWithOidcIssuer&&l.logInWithOidcIssuer({oidcIssuer:e.url,redirectUrl:new URL((0,n._)().NEXT_PUBLIC_BASE_PATH,window.location.href).toString(),clientName:"Solid Memo"}).catch(e=>{console.error("Failed with error:",e)})},children:e.name},e.url))}),(0,i.jsx)("div",{className:"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t",children:(0,i.jsx)("span",{className:"bg-background text-muted-foreground relative z-10 px-2",children:"Or continue with"})}),(0,i.jsxs)("div",{className:"grid gap-6",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(s.JU,{htmlFor:"email",children:"Your Solid WebID"}),(0,i.jsx)(s.pd,{ref:r,id:"email",type:"email",placeholder:"https://your.pod/profile/card#me",required:!0})]}),(0,i.jsx)(s.$n,{type:"submit",className:"w-full",onClick:e=>(e.preventDefault(),r.current)?l.logInWithWebId?void l.logInWithWebId({webId:r.current.value,redirectUrl:new URL((0,n._)().NEXT_PUBLIC_BASE_PATH,window.location.href).toString(),clientName:"Solid Memo"}).catch(e=>{console.error("Failed with error:",e)}):void console.error("Failed because authService.logInWithWebId is falsy"):void console.error("Failed because inputRef.current is falsy"),children:"Login with WebID"})]}),(0,i.jsxs)("div",{className:"text-center text-sm",children:["Don't have a WebID?"," ",(0,i.jsx)("a",{href:"https://solidproject.org/for-developers#hosted-pod-services",className:"underline underline-offset-4",children:"Find a WebID provider"})]})]})})})]})})}},4039:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}
`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},4167:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return i}});let i=r(4685).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return l},redirect:function(){return a}});let i=r(8316),n=r(5318),o=void 0;function s(e,t,r){void 0===r&&(r=i.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(n.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=n.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function a(e,t){var r;throw null!=t||(t=(null==o||null==(r=o.getStore())?void 0:r.isAction)?n.RedirectType.push:n.RedirectType.replace),s(e,t,i.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=n.RedirectType.replace),s(e,t,i.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,n.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4318:(e,t,r)=>{"use strict";let{MathFloor:i,NumberIsInteger:n}=r(4039),{validateInteger:o}=r(1204),{ERR_INVALID_ARG_VALUE:s}=r(7894).codes,a=16384,l=16;function u(e){return e?l:a}e.exports={getHighWaterMark:function(e,t,r,o){let a=null!=t.highWaterMark?t.highWaterMark:o?t[r]:null;if(null!=a){if(!n(a)||a<0)throw new s(o?`options.${r}`:"options.highWaterMark",a);return i(a)}return u(e.objectMode)},getDefaultHighWaterMark:u,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:a=t}}},4361:(e,t,r)=>{r(57)},4512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ServerInsertedHTMLContext:function(){return n},useServerInsertedHTML:function(){return o}});let i=r(8365)._(r(4232)),n=i.default.createContext(null);function o(e){let t=(0,i.useContext)(n);t&&t(e)}},4587:(e,t,r)=>{e.exports=r(3657)},4681:function(e){e.exports=function(){var e=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.reset=function(){s=3,o=n},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.error.apply(o,Array.from(t))}},i(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={setInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setInterval(e,t)}),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearInterval(e)})},o=!1,s=null;t.Global=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},i(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return n}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(7),s=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw n.Log.error("MetadataService: No settings passed to MetadataService"),Error("settings");this._settings=t,this._jsonService=new r(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(n.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(n.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(t){n.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata})):(n.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then(function(r){if(n.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===r[e]){if(!0===t)return void n.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw n.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),Error("Metadata does not contain property "+e)}return r[e]})},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(n.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(t){return n.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then(function(t){if(n.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw n.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys})})},i(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&0>this._metadataUrl.indexOf(s)&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=s))),this._metadataUrl}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var i=r(0),n=r(1);t.UrlUtility=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.addQueryParam=function(e,t,r){return 0>e.indexOf("?")&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),e+="=",e+=encodeURIComponent(r)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.Global;"string"!=typeof e&&(e=r.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},l=/([^&=]+)=([^&]*)/g,u=0;s=l.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),u++>50)return i.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var c in a)return a;return{}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var i,n=r(26);t.JoseUtil=(0,((i=r(33))&&i.__esModule?i:{default:i}).default)({jws:n.jws,KeyUtil:n.KeyUtil,X509:n.X509,crypto:n.crypto,hextob64u:n.hextob64u,b64tohex:n.b64tohex,AllowedSigningAlgs:n.AllowedSigningAlgs})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(0),s=r(23),a=r(6),l=r(24),u=r(2),c=".well-known/openid-configuration";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.authority,n=t.metadataUrl,o=t.metadata,c=t.signingKeys,d=t.metadataSeed,h=t.client_id,f=t.client_secret,p=t.response_type,g=t.scope,y=t.redirect_uri,m=t.post_logout_redirect_uri,v=t.client_authentication,_=t.prompt,b=t.display,w=t.max_age,S=t.ui_locales,x=t.acr_values,E=t.resource,k=t.response_mode,F=t.filterProtocolClaims,I=t.loadUserInfo,A=t.staleStateAge,T=t.clockSkew,R=t.clockService,C=void 0===R?new s.ClockService:R,P=t.userInfoJwtIssuer,N=t.mergeClaims,j=t.stateStore,O=void 0===j?new a.WebStorageStateStore:j,L=t.ResponseValidatorCtor,D=void 0===L?l.ResponseValidator:L,U=t.MetadataServiceCtor,M=void 0===U?u.MetadataService:U,B=t.extraQueryParams,H=void 0===B?{}:B,$=t.extraTokenParams,K=void 0===$?{}:$;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._authority=r,this._metadataUrl=n,this._metadata=o,this._metadataSeed=d,this._signingKeys=c,this._client_id=h,this._client_secret=f,this._response_type=void 0===p?"id_token":p,this._scope=void 0===g?"openid":g,this._redirect_uri=y,this._post_logout_redirect_uri=m,this._client_authentication=void 0===v?"client_secret_post":v,this._prompt=_,this._display=b,this._max_age=w,this._ui_locales=S,this._acr_values=x,this._resource=E,this._response_mode=k,this._filterProtocolClaims=!!(void 0===F||F),this._loadUserInfo=!!(void 0===I||I),this._staleStateAge=void 0===A?900:A,this._clockSkew=void 0===T?300:T,this._clockService=C,this._userInfoJwtIssuer=void 0===P?"OP":P,this._mergeClaims=!!(void 0!==N&&N),this._stateStore=O,this._validator=new D(this),this._metadataService=new M(this),this._extraQueryParams="object"===(void 0===H?"undefined":i(H))?H:{},this._extraTokenParams="object"===(void 0===K?"undefined":i(K))?K:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},n(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&0>this._metadataUrl.indexOf(c)&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=c)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":i(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":i(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var i=r(0),n=r(1);t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefix,i=t.store,o=void 0===i?n.Global.localStorage:i;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._store=o,this._prefix=void 0===r?"oidc.":r}return e.prototype.set=function(e,t){return i.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){return i.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e,Promise.resolve(this._store.getItem(e))},e.prototype.remove=function(e){i.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){i.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var r=this._store.key(t);0===r.indexOf(this._prefix)&&e.push(r.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var i=r(0),n=r(1);t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.Global.XMLHttpRequest,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),i&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=i}return e.prototype.getJson=function(e,t){var r=this;if(!e)throw i.Log.error("JsonService.getJson: No url passed"),Error("url");return i.Log.debug("JsonService.getJson, url: ",e),new Promise(function(n,o){var s=new r._XMLHttpRequest;s.open("GET",e);var a=r._contentTypes,l=r._jwtHandler;s.onload=function(){if(i.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var r=a.find(function(e){if(t.startsWith(e))return!0});if("application/jwt"==r)return void l(s).then(n,o);if(r)try{return void n(JSON.parse(s.responseText))}catch(e){return i.Log.error("JsonService.getJson: Error parsing JSON response",e.message),void o(e)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){i.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(i.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()})},e.prototype.postForm=function(e,t,r){var n=this;if(!e)throw i.Log.error("JsonService.postForm: No url passed"),Error("url");return i.Log.debug("JsonService.postForm, url: ",e),new Promise(function(o,s){var a=new n._XMLHttpRequest;a.open("POST",e);var l=n._contentTypes;a.onload=function(){if(i.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(t=a.getResponseHeader("Content-Type"))&&l.find(function(e){if(t.startsWith(e))return!0}))try{var t,r=JSON.parse(a.responseText);if(r&&r.error)return i.Log.error("JsonService.postForm: Error from server: ",r.error),void s(Error(r.error))}catch(e){return i.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error(a.statusText+" ("+a.status+")"))}else{if((t=a.getResponseHeader("Content-Type"))&&l.find(function(e){if(t.startsWith(e))return!0}))try{return void o(JSON.parse(a.responseText))}catch(e){return i.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error("Invalid response Content-Type: "+t+", from URL: "+e))}},a.onerror=function(){i.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var u="";for(var c in t){var d=t[c];d&&(u.length>0&&(u+="&"),u+=encodeURIComponent(c),u+="=",u+=encodeURIComponent(d))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==r&&a.setRequestHeader("Authorization","Basic "+btoa(r)),a.send(u)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var i=r(0),n=r(3),o=r(13);t.SigninRequest=function(){function e(t){var r=t.url,s=t.client_id,a=t.redirect_uri,l=t.response_type,u=t.scope,c=t.authority,d=t.data,h=t.prompt,f=t.display,p=t.max_age,g=t.ui_locales,y=t.id_token_hint,m=t.login_hint,v=t.acr_values,_=t.resource,b=t.response_mode,w=t.request,S=t.request_uri,x=t.extraQueryParams,E=t.request_type,k=t.client_secret,F=t.extraTokenParams,I=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!r)throw i.Log.error("SigninRequest.ctor: No url passed"),Error("url");if(!s)throw i.Log.error("SigninRequest.ctor: No client_id passed"),Error("client_id");if(!a)throw i.Log.error("SigninRequest.ctor: No redirect_uri passed"),Error("redirect_uri");if(!l)throw i.Log.error("SigninRequest.ctor: No response_type passed"),Error("response_type");if(!u)throw i.Log.error("SigninRequest.ctor: No scope passed"),Error("scope");if(!c)throw i.Log.error("SigninRequest.ctor: No authority passed"),Error("authority");var A=e.isOidc(l),T=e.isCode(l);b||(b=e.isCode(l)?"query":null),this.state=new o.SigninState({nonce:A,data:d,client_id:s,authority:c,redirect_uri:a,code_verifier:T,request_type:E,response_mode:b,client_secret:k,scope:u,extraTokenParams:F,skipUserInfo:I}),r=n.UrlUtility.addQueryParam(r,"client_id",s),r=n.UrlUtility.addQueryParam(r,"redirect_uri",a),r=n.UrlUtility.addQueryParam(r,"response_type",l),r=n.UrlUtility.addQueryParam(r,"scope",u),r=n.UrlUtility.addQueryParam(r,"state",this.state.id),A&&(r=n.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),T&&(r=n.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=n.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var R={prompt:h,display:f,max_age:p,ui_locales:g,id_token_hint:y,login_hint:m,acr_values:v,resource:_,request:w,request_uri:S,response_mode:b};for(var C in R)R[C]&&(r=n.UrlUtility.addQueryParam(r,C,R[C]));for(var P in x)r=n.UrlUtility.addQueryParam(r,P,x[P]);this.url=r}return e.isOidc=function(e){return!!e.split(/\s+/g).filter(function(e){return"id_token"===e})[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter(function(e){return"token"===e})[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter(function(e){return"code"===e})[0]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var i,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(0),s=(i=r(14))&&i.__esModule?i:{default:i};t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,i=t.data,n=t.created,o=t.request_type;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._id=r||(0,s.default)(),this._data=i,this._created="number"==typeof n&&n>0?n:parseInt(Date.now()/1e3),this._request_type=o}return e.prototype.toStorageString=function(){return o.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return o.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,r){var i=Date.now()/1e3-r;return t.getAllKeys().then(function(r){o.Log.debug("State.clearStaleState: got keys",r);for(var n,s=[],a=0;a<r.length;a++)!function(a){var l=r[a];n=t.get(l).then(function(r){var n=!1;if(r)try{var s=e.fromStorageString(r);o.Log.debug("State.clearStaleState: got item from key: ",l,s.created),s.created<=i&&(n=!0)}catch(e){o.Log.error("State.clearStaleState: Error parsing state for key",l,e.message),n=!0}else o.Log.debug("State.clearStaleState: no item in storage for key: ",l),n=!0;if(n)return o.Log.debug("State.clearStaleState: removed item for key: ",l),t.remove(l)}),s.push(n)}(a);return o.Log.debug("State.clearStaleState: waiting on promise count:",s.length),Promise.all(s)})},n(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(5),s=r(12),a=r(8),l=r(34),u=r(35),c=r(36),d=r(13),h=r(9);t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.response_type,i=t.scope,o=t.redirect_uri,s=t.data,l=t.state,u=t.prompt,c=t.display,d=t.max_age,h=t.ui_locales,f=t.id_token_hint,p=t.login_hint,g=t.acr_values,y=t.resource,m=t.request,v=t.request_uri,_=t.response_mode,b=t.extraQueryParams,w=t.extraTokenParams,S=t.request_type,x=t.skipUserInfo,E=arguments[1];n.Log.debug("OidcClient.createSigninRequest");var k=this._settings.client_id;r=r||this._settings.response_type,i=i||this._settings.scope,o=o||this._settings.redirect_uri,u=u||this._settings.prompt,c=c||this._settings.display,d=d||this._settings.max_age,h=h||this._settings.ui_locales,g=g||this._settings.acr_values,y=y||this._settings.resource,_=_||this._settings.response_mode,b=b||this._settings.extraQueryParams,w=w||this._settings.extraTokenParams;var F=this._settings.authority;return a.SigninRequest.isCode(r)&&"code"!==r?Promise.reject(Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(t){n.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var I=new a.SigninRequest({url:t,client_id:k,redirect_uri:o,response_type:r,scope:i,data:s||l,authority:F,prompt:u,display:c,max_age:d,ui_locales:h,id_token_hint:f,login_hint:p,acr_values:g,resource:y,request:m,request_uri:v,extraQueryParams:b,extraTokenParams:w,request_type:S,response_mode:_,client_secret:e._settings.client_secret,skipUserInfo:x}),A=I.state;return(E=E||e._stateStore).set(A.id,A.toStorageString()).then(function(){return I})})},e.prototype.readSigninResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.Log.debug("OidcClient.readSigninResponseState");var i="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),o=new l.SigninResponse(e,i?"?":"#");return o.state?(t=t||this._stateStore,(r?t.remove.bind(t):t.get.bind(t))(o.state).then(function(e){if(!e)throw n.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),Error("No matching state found in storage");return{state:d.SigninState.fromStorageString(e),response:o}})):(n.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(Error("No state in response")))},e.prototype.processSigninResponse=function(e,t){var r=this;return n.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then(function(e){var t=e.state,i=e.response;return n.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),r._validator.validateSigninResponse(t,i)})},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id_token_hint,i=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,l=t.request_type,c=arguments[1];return n.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(t){if(!t)throw n.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),Error("no end session endpoint");n.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var d=new u.SignoutRequest({url:t,id_token_hint:r,post_logout_redirect_uri:s,data:i||o,extraQueryParams:a,request_type:l}),h=d.state;return h&&(n.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(c=c||e._stateStore).set(h.id,h.toStorageString())),d})},e.prototype.readSignoutResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.Log.debug("OidcClient.readSignoutResponseState");var i=new c.SignoutResponse(e);if(!i.state)return n.Log.debug("OidcClient.readSignoutResponseState: No state in response"),i.error?(n.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",i.error),Promise.reject(new s.ErrorResponse(i))):Promise.resolve({state:void 0,response:i});var o=i.state;return t=t||this._stateStore,(r?t.remove.bind(t):t.get.bind(t))(o).then(function(e){if(!e)throw n.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),Error("No matching state found in storage");return{state:h.State.fromStorageString(e),response:i}})},e.prototype.processSignoutResponse=function(e,t){var r=this;return n.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then(function(e){var t=e.state,i=e.response;return t?(n.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),r._validator.validateSignoutResponse(t,i)):(n.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),i)})},e.prototype.clearStaleState=function(e){return n.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,h.State.clearStaleState(e,this.settings.staleStateAge)},i(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var i=r(7),n=r(2),o=r(0);t.TokenClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.JsonService,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),Error("settings");this._settings=t,this._jsonService=new r,this._metadataService=new s(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var r=void 0,i=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=i?("client_secret_basic"==i&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(i){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(i,t,r).then(function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e})})):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var r=void 0,i=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==i&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(i){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(i,t,r).then(function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e})})):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(Error("A refresh_token is required")))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var i=r(0);t.ErrorResponse=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.error,o=r.error_description,s=r.error_uri,a=r.state,l=r.session_state;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),!n)throw i.Log.error("No error passed to ErrorResponse"),Error("error");var u=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,o||n));return u.name="ErrorResponse",u.error=n,u.error_description=o,u.error_uri=s,u.state=a,u.session_state=l,u}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var i,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(0),s=r(9),a=r(4),l=(i=r(14))&&i.__esModule?i:{default:i};t.SigninState=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.nonce,n=r.authority,o=r.client_id,s=r.redirect_uri,u=r.code_verifier,c=r.response_mode,d=r.client_secret,h=r.scope,f=r.extraTokenParams,p=r.skipUserInfo;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var g=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,arguments[0]));if(!0===i?g._nonce=(0,l.default)():i&&(g._nonce=i),!0===u?g._code_verifier=(0,l.default)()+(0,l.default)()+(0,l.default)():u&&(g._code_verifier=u),g.code_verifier){var y=a.JoseUtil.hashString(g.code_verifier,"SHA256");g._code_challenge=a.JoseUtil.hexToBase64Url(y)}return g._redirect_uri=s,g._authority=n,g._client_id=o,g._response_mode=c,g._client_secret=d,g._scope=h,g._extraTokenParams=f,g._skipUserInfo=p,g}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return o.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return o.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},n(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(s.State)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=i&&null!==i&&void 0!==i.getRandomValues?function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^i.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^16*Math.random()>>e/4).toString(16)})})().replace(/-/g,"")};var i="undefined"!=typeof window?window.crypto||window.msCrypto:null;e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.User=function(){function e(t){var r=t.id_token,i=t.session_state,n=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,l=t.profile,u=t.expires_at,c=t.state;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this.id_token=r,this.session_state=i,this.access_token=n,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=l,this.expires_at=u,this.state=c}return e.prototype.toStorageString=function(){return n.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return n.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},i(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var i=r(0),n=r(46);t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.accessTokenExpiringNotificationTime,i=t.accessTokenExpiringTimer,o=void 0===i?new n.Timer("Access token expiring"):i,s=t.accessTokenExpiredTimer,a=void 0===s?new n.Timer("Access token expired"):s;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._accessTokenExpiringNotificationTime=void 0===r?60:r,this._accessTokenExpiring=o,this._accessTokenExpired=a}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(i.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var r=t-this._accessTokenExpiringNotificationTime;r<=0&&(r=1),i.Log.debug("AccessTokenEvents.load: registering expiring timer in:",r),this._accessTokenExpiring.init(r)}else i.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var n=t+1;i.Log.debug("AccessTokenEvents.load: registering expired timer in:",n),this._accessTokenExpired.init(n)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){i.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var i=r(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex(function(t){return t===e});t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){i.Log.debug("Event: Raising event: "+this._name);for(var e,t=0;t<this._callbacks.length;t++)(e=this._callbacks)[t].apply(e,arguments)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(19),s=r(1);t.SessionMonitor=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw n.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=i,this._timer=a,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(e){e?r._start(e):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then(function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),r._start(t)}).catch(function(e){n.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)})}).catch(function(e){n.Log.error("SessionMonitor ctor: error from getUser:",e.message)}))}return e.prototype._start=function(e){var t=this,r=e.session_state;r&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,n.Log.debug("SessionMonitor._start: session_state:",r,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,n.Log.debug("SessionMonitor._start: session_state:",r,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(r):this._metadataService.getCheckSessionIframe().then(function(e){if(e){n.Log.debug("SessionMonitor._start: Initializing check session iframe");var i=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),i,e,o,s),t._checkSessionIFrame.load().then(function(){t._checkSessionIFrame.start(r)})}else n.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(e){n.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)}))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(n.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval(function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then(function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)}).catch(function(e){n.Log.error("SessionMonitor: error from querySessionStatus:",e.message)})},1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then(function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?n.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(n.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):n.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):n.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(n.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(n.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))}).catch(function(t){e._sub&&(n.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())})},i(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var i=r(0);t.CheckSessionIFrame=function(){function e(t,r,i,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this._callback=t,this._client_id=r,this._url=i,this._interval=n||2e3,this._stopOnError=o;var s=i.indexOf("/",i.indexOf("//")+2);this._frame_origin=i.substr(0,s),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=i}return e.prototype.load=function(){var e=this;return new Promise(function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)})},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(i.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(i.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):i.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){i.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var r=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};r(),this._timer=window.setInterval(r,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(i.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var i=r(0),n=r(2),o=r(1);t.TokenRevocationClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("TokenRevocationClient.ctor: No settings provided"),Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=r,this._metadataService=new s(this._settings)}return e.prototype.revoke=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw i.Log.error("TokenRevocationClient.revoke: No token provided"),Error("No token provided.");if("access_token"!==n&&"refresh_token"!=n)throw i.Log.error("TokenRevocationClient.revoke: Invalid token type"),Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(o){if(o){i.Log.debug("TokenRevocationClient.revoke: Revoking "+n);var s=r._settings.client_id,a=r._settings.client_secret;return r._revoke(o,s,a,e,n)}if(t)throw i.Log.error("TokenRevocationClient.revoke: Revocation not supported"),Error("Revocation not supported")})},e.prototype._revoke=function(e,t,r,n,o){var s=this;return new Promise(function(a,l){var u=new s._XMLHttpRequestCtor;u.open("POST",e),u.onload=function(){i.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",u.status),200===u.status?a():l(Error(u.statusText+" ("+u.status+")"))},u.onerror=function(){i.Log.debug("TokenRevocationClient.revoke: Network Error."),l("Network Error")};var c="client_id="+encodeURIComponent(t);r&&(c+="&client_secret="+encodeURIComponent(r)),c+="&token_type_hint="+encodeURIComponent(o)+"&token="+encodeURIComponent(n),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(c)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.CordovaPopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t}),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,n.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(t){return e.hasOwnProperty(t)})},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(n.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),n.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),n.Log.error(e),this._reject(Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(n.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},i(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(10),o=r(5),s=r(6),a=r(37),l=r(38),u=r(16),c=r(2),d=r(48),h=r(49),f=r(19),p=r(20),g=r(18),y=r(1),m=r(15);t.default={Version:r(50).Version,Log:i.Log,OidcClient:n.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:l.UserManager,AccessTokenEvents:u.AccessTokenEvents,MetadataService:c.MetadataService,CordovaPopupNavigator:d.CordovaPopupNavigator,CordovaIFrameNavigator:h.CordovaIFrameNavigator,CheckSessionIFrame:f.CheckSessionIFrame,TokenRevocationClient:p.TokenRevocationClient,SessionMonitor:g.SessionMonitor,Global:y.Global,User:m.User},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(0),o=r(2),s=r(25),a=r(11),l=r(12),u=r(4),c=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.JoseUtil,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw n.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),Error("settings");this._settings=t,this._metadataService=new r(this._settings),this._userInfoService=new i(this._settings),this._joseUtil=l,this._tokenClient=new c(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var r=this;return n.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then(function(t){return n.Log.debug("ResponseValidator.validateSigninResponse: state processed"),r._validateTokens(e,t).then(function(t){return n.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),r._processClaims(e,t).then(function(e){return n.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e})})})},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(n.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(Error("State does not match"))):(n.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(n.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new l.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return n.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(Error("State does not match"));if(!e.client_id)return n.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(Error("No client_id on state"));if(!e.authority)return n.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return n.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return n.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return n.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(n.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new l.ErrorResponse(t))):e.nonce&&!t.id_token?(n.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(Error("No id_token in response"))):!e.nonce&&t.id_token?(n.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(n.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(Error("No code in response"))):!e.code_verifier&&t.code?(n.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var r=this;if(t.isOpenIdConnect){if(n.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return n.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then(function(e){return n.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(n.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=r._mergeClaims(t.profile,e),n.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)});n.Log.debug("ResponseValidator._processClaims: not loading user info")}else n.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var r=Object.assign({},e);for(var n in t){var o=t[n];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];r[n]?Array.isArray(r[n])?0>r[n].indexOf(a)&&r[n].push(a):r[n]!==a&&("object"===(void 0===a?"undefined":i(a))&&this._settings.mergeClaims?r[n]=this._mergeClaims(r[n],a):r[n]=[r[n],a]):r[n]=a}}return r},e.prototype._filterProtocolClaims=function(e){n.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(c.forEach(function(e){delete t[e]}),n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):n.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(n.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(n.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(n.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(n.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var r=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===i(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then(function(i){for(var o in i)t[o]=i[o];return t.id_token?(n.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),r._validateIdTokenAttributes(e,t)):(n.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)})},e.prototype._validateIdTokenAttributes=function(e,t){var r=this;return this._metadataService.getIssuer().then(function(i){var o=e.client_id,s=r._settings.clockSkew;return n.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),r._settings.getEpochTime().then(function(a){return r._joseUtil.validateJwtAttributes(t.id_token,i,o,s,a).then(function(r){return e.nonce&&e.nonce!==r.nonce?(n.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(Error("Invalid nonce in id_token"))):r.sub?(t.profile=r,t):(n.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(Error("No sub present in id_token")))})})})},e.prototype._validateIdTokenAndAccessToken=function(e,t){var r=this;return this._validateIdToken(e,t).then(function(e){return r._validateAccessToken(e)})},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then(function(r){var i=e.header.kid;if(!r)return n.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(Error("No signing keys from metadata"));n.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(i)o=r.filter(function(e){return e.kid===i})[0];else{if((r=t._filterByAlg(r,e.header.alg)).length>1)return n.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(Error("No kid found in id_token and more than one key found in metadata"));o=r[0]}return Promise.resolve(o)})},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then(function(r){return r?Promise.resolve(r):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))})},e.prototype._validateIdToken=function(e,t){var r=this;if(!e.nonce)return n.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(Error("No nonce on state"));var i=this._joseUtil.parseJwt(t.id_token);return i&&i.header&&i.payload?e.nonce!==i.payload.nonce?(n.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(o){return n.Log.debug("ResponseValidator._validateIdToken: Received issuer"),r._getSigningKeyForJwtWithSingleRetry(i).then(function(s){if(!s)return n.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(Error("No key matching kid or alg found in signing keys"));var a=e.client_id,l=r._settings.clockSkew;return n.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",l),r._joseUtil.validateJwt(t.id_token,s,o,a,l).then(function(){return n.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),i.payload.sub?(t.profile=i.payload,t):(n.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(Error("No sub present in id_token")))})})}):(n.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",i),Promise.reject(Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return n.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];r="EC"}return n.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",r),e=e.filter(function(e){return e.kty===r}),n.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",r,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return n.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(Error("No profile loaded from id_token"));if(!e.profile.at_hash)return n.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(Error("No at_hash in id_token"));if(!e.id_token)return n.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return n.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(Error("Failed to parse id_token"));var r=t.header.alg;if(!r||5!==r.length)return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r),Promise.reject(Error("Unsupported alg: "+r));var i=r.substr(2,3);if(!i||256!==(i=parseInt(i))&&384!==i&&512!==i)return n.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,i),Promise.reject(Error("Unsupported alg: "+r));var o="sha"+i,s=this._joseUtil.hashString(e.access_token,o);if(!s)return n.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),l=this._joseUtil.hexToBase64Url(a);return l!==e.profile.at_hash?(n.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",l,e.profile.at_hash),Promise.reject(Error("Failed to validate at_hash"))):(n.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var i=r(7),n=r(2),o=r(0),s=r(4);t.UserInfoService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MetadataService,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),Error("settings");this._settings=t,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new a(this._settings),this._joseUtil=l}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then(function(r){return o.Log.debug("UserInfoService.getClaims: received userinfo url",r),t._jsonService.getJson(r,e).then(function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e})}):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(Error("A token is required")))},e.prototype._getClaimsFromJwt=function(e){var t=this;try{var r=this._joseUtil.parseJwt(e.responseText);if(!r||!r.header||!r.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",r),Promise.reject(Error("Failed to parse id_token"));var i=r.header.kid,n=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":n=this._metadataService.getIssuer();break;case"ANY":n=Promise.resolve(r.payload.iss);break;default:n=Promise.resolve(this._settings.userInfoJwtIssuer)}return n.then(function(n){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+n),t._metadataService.getSigningKeys().then(function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter(function(e){return e.kid===i})[0];else{if((s=t._filterByAlg(s,r.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(Error("No key matching kid or alg found in signing keys"));var l=t._settings.client_id,u=t._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",u),t._joseUtil.validateJwt(e.responseText,a,n,l,u,void 0,!0).then(function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),r.payload})})})}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];r="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",r),e=e.filter(function(e){return e.kty===r}),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",r,e.length),e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var i=r(27);t.jws=i.jws,t.KeyUtil=i.KEYUTIL,t.X509=i.X509,t.crypto=i.crypto,t.hextob64u=i.hextob64u,t.b64tohex=i.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,n,o,s,a,l,u,c,d,h,f,p,g,y,m,v,_,b,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S={userAgent:!1},x={},E=E||(c=Math,f=(h=(d={}).lib={}).Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=h.WordArray=f.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||y).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(o=0;o<n;o+=4)t[i+o>>>2]=r[o>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=0xffffffff<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=f.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(0x100000000*c.random()|0);return new p.init(t,e)}}),y=(g=d.enc={}).Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new p.init(r,t/2)}},m=g.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new p.init(r,t)}},v=g.Utf8={stringify:function(e){try{return decodeURIComponent(escape(m.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return m.parse(unescape(encodeURIComponent(e)))}},_=h.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=v.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,i=t.sigBytes,n=this.blockSize,o=i/(4*n),s=(o=e?c.ceil(o):c.max((0|o)-this._minBufferSize,0))*n,a=c.min(4*s,i);if(s){for(var l=0;l<s;l+=n)this._doProcessBlock(r,l);var u=r.splice(0,s);t.sigBytes-=a}return new p.init(u,a)},clone:function(){var e=f.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h.Hasher=_.extend({cfg:f.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new b.HMAC.init(e,r).finalize(t)}}}),b=d.algo={},d);I=(F=(k=E).lib).Base,A=F.WordArray,(k=k.x64={}).Word=I.extend({init:function(e,t){this.high=e,this.low=t}}),k.WordArray=I.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low)}return A.create(r,this.sigBytes)},clone:function(){for(var e=I.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}}),T=E.lib.WordArray,E.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp(),e=[];for(var n=0;n<r;n+=3)for(var o=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,s=0;4>s&&n+.75*s<r;s++)e.push(i.charAt(o>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],n=0,o=0;o<t;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<o%4*2,a=r.indexOf(e.charAt(o))>>>6-o%4*2;i[n>>>2]|=(s|a)<<24-n%4*8,n++}return T.create(i,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){for(var t,r=(n=E.lib).WordArray,i=n.Hasher,n=E.algo,o=[],s=[],a=function(e){return 0x100000000*(e-(0|e))|0},l=2,u=0;64>u;){e:{t=l;for(var c=e.sqrt(t),d=2;d<=c;d++)if(!(t%d)){t=!1;break e}t=!0}t&&(8>u&&(o[u]=a(e.pow(l,.5))),s[u]=a(e.pow(l,1/3)),u++),l++}var h=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],d=r[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var p=h[f-15],g=h[f-2];h[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+h[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+h[f-16]}p=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&c)+s[f]+h[f],g=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&n^i&o^n&o),d=c,c=u,u=l,l=a+p|0,a=o,o=n,n=i,i=p+g|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+l|0,r[5]=r[5]+u|0,r[6]=r[6]+c|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=e.floor(i/0x100000000),r[15+(n+64>>>9<<4)]=i,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),E.SHA256=i._createHelper(n),E.HmacSHA256=i._createHmacHelper(n)}(Math),function(){function e(){return r.create.apply(r,arguments)}for(var t=E.lib.Hasher,r=(n=E.x64).Word,i=n.WordArray,n=E.algo,o=[e(0x428a2f98,0xd728ae22),e(0x71374491,0x23ef65cd),e(0xb5c0fbcf,0xec4d3b2f),e(0xe9b5dba5,0x8189dbbc),e(0x3956c25b,0xf348b538),e(0x59f111f1,0xb605d019),e(0x923f82a4,0xaf194f9b),e(0xab1c5ed5,0xda6d8118),e(0xd807aa98,0xa3030242),e(0x12835b01,0x45706fbe),e(0x243185be,0x4ee4b28c),e(0x550c7dc3,0xd5ffb4e2),e(0x72be5d74,0xf27b896f),e(0x80deb1fe,0x3b1696b1),e(0x9bdc06a7,0x25c71235),e(0xc19bf174,0xcf692694),e(0xe49b69c1,0x9ef14ad2),e(0xefbe4786,0x384f25e3),e(0xfc19dc6,0x8b8cd5b5),e(0x240ca1cc,0x77ac9c65),e(0x2de92c6f,0x592b0275),e(0x4a7484aa,0x6ea6e483),e(0x5cb0a9dc,0xbd41fbd4),e(0x76f988da,0x831153b5),e(0x983e5152,0xee66dfab),e(0xa831c66d,0x2db43210),e(0xb00327c8,0x98fb213f),e(0xbf597fc7,0xbeef0ee4),e(0xc6e00bf3,0x3da88fc2),e(0xd5a79147,0x930aa725),e(0x6ca6351,0xe003826f),e(0x14292967,0xa0e6e70),e(0x27b70a85,0x46d22ffc),e(0x2e1b2138,0x5c26c926),e(0x4d2c6dfc,0x5ac42aed),e(0x53380d13,0x9d95b3df),e(0x650a7354,0x8baf63de),e(0x766a0abb,0x3c77b2a8),e(0x81c2c92e,0x47edaee6),e(0x92722c85,0x1482353b),e(0xa2bfe8a1,0x4cf10364),e(0xa81a664b,0xbc423001),e(0xc24b8b70,0xd0f89791),e(0xc76c51a3,0x654be30),e(0xd192e819,0xd6ef5218),e(0xd6990624,0x5565a910),e(0xf40e3585,0x5771202a),e(0x106aa070,0x32bbd1b8),e(0x19a4c116,0xb8d2d0c8),e(0x1e376c08,0x5141ab53),e(0x2748774c,0xdf8eeb99),e(0x34b0bcb5,0xe19b48a8),e(0x391c0cb3,0xc5c95a63),e(0x4ed8aa4a,0xe3418acb),e(0x5b9cca4f,0x7763e373),e(0x682e6ff3,0xd6b2b8a3),e(0x748f82ee,0x5defb2fc),e(0x78a5636f,0x43172f60),e(0x84c87814,0xa1f0ab72),e(0x8cc70208,0x1a6439ec),e(0x90befffa,0x23631e28),e(0xa4506ceb,0xde82bde9),e(0xbef9a3f7,0xb2c67915),e(0xc67178f2,0xe372532b),e(0xca273ece,0xea26619c),e(0xd186b8c7,0x21c0c207),e(0xeada7dd6,0xcde0eb1e),e(0xf57d4f7f,0xee6ed178),e(0x6f067aa,0x72176fba),e(0xa637dc5,0xa2c898a6),e(0x113f9804,0xbef90dae),e(0x1b710b35,0x131c471b),e(0x28db77f5,0x23047d84),e(0x32caab7b,0x40c72493),e(0x3c9ebe0a,0x15c9bebc),e(0x431d67c4,0x9c100d4c),e(0x4cc5d4be,0xcb3e42b6),e(0x597f299c,0xfc657e2a),e(0x5fcb6fab,0x3ad6faec),e(0x6c44198c,0x4a475817)],s=[],a=0;80>a;a++)s[a]=e();n=n.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new r.init(0x6a09e667,0xf3bcc908),new r.init(0xbb67ae85,0x84caa73b),new r.init(0x3c6ef372,0xfe94f82b),new r.init(0xa54ff53a,0x5f1d36f1),new r.init(0x510e527f,0xade682d1),new r.init(0x9b05688c,0x2b3e6c1f),new r.init(0x1f83d9ab,0xfb41bd6b),new r.init(0x5be0cd19,0x137e2179)])},_doProcessBlock:function(e,t){for(var r=(d=this._hash.words)[0],i=d[1],n=d[2],a=d[3],l=d[4],u=d[5],c=d[6],d=d[7],h=r.high,f=r.low,p=i.high,g=i.low,y=n.high,m=n.low,v=a.high,_=a.low,b=l.high,w=l.low,S=u.high,x=u.low,E=c.high,k=c.low,F=d.high,I=d.low,A=h,T=f,R=p,C=g,P=y,N=m,j=v,O=_,L=b,D=w,U=S,M=x,B=E,H=k,$=F,K=I,V=0;80>V;V++){var W=s[V];if(16>V)var q=W.high=0|e[t+2*V],z=W.low=0|e[t+2*V+1];else{q=((z=(q=s[V-15]).high)>>>1|(J=q.low)<<31)^(z>>>8|J<<24)^z>>>7;var J=(J>>>1|z<<31)^(J>>>8|z<<24)^(J>>>7|z<<25),Z=((z=(Z=s[V-2]).high)>>>19|(G=Z.low)<<13)^(z<<3|G>>>29)^z>>>6,G=(G>>>19|z<<13)^(G<<3|z>>>29)^(G>>>6|z<<26),Y=(z=s[V-7]).high,Q=(X=s[V-16]).high,X=X.low;q=(q=(q=q+Y+ +((z=J+z.low)>>>0<J>>>0))+Z+ +((z+=G)>>>0<G>>>0))+Q+ +((z+=X)>>>0<X>>>0),W.high=q,W.low=z}Y=L&U^~L&B,X=D&M^~D&H,W=A&R^A&P^R&P;var ee=T&C^T&N^C&N,et=(J=(A>>>28|T<<4)^(A<<30|T>>>2)^(A<<25|T>>>7),Z=(T>>>28|A<<4)^(T<<30|A>>>2)^(T<<25|A>>>7),(G=o[V]).high),er=G.low;Q=$+((L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9))+ +((G=K+((D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9)))>>>0<K>>>0),$=B,K=H,B=U,H=M,U=L,M=D,L=j+(Q=(Q=(Q=Q+Y+ +((G+=X)>>>0<X>>>0))+et+ +((G+=er)>>>0<er>>>0))+q+ +((G+=z)>>>0<z>>>0))+ +((D=O+G|0)>>>0<O>>>0)|0,j=P,O=N,P=R,N=C,R=A,C=T,A=Q+(W=J+W+ +((z=Z+ee)>>>0<Z>>>0))+ +((T=G+z|0)>>>0<G>>>0)|0}f=r.low=f+T,r.high=h+A+ +(f>>>0<T>>>0),g=i.low=g+C,i.high=p+R+ +(g>>>0<C>>>0),m=n.low=m+N,n.high=y+P+ +(m>>>0<N>>>0),_=a.low=_+O,a.high=v+j+ +(_>>>0<O>>>0),w=l.low=w+D,l.high=b+L+ +(w>>>0<D>>>0),x=u.low=x+M,u.high=S+U+ +(x>>>0<M>>>0),k=c.low=k+H,c.high=E+B+ +(k>>>0<H>>>0),I=d.low=I+K,d.high=F+$+ +(I>>>0<K>>>0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/0x100000000),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),E.SHA512=t._createHelper(n),E.HmacSHA512=t._createHmacHelper(n)}(),R=(N=E.x64).Word,C=N.WordArray,P=(N=E.algo).SHA512,N=N.SHA384=P.extend({_doReset:function(){this._hash=new C.init([new R.init(0xcbbb9d5d,0xc1059ed8),new R.init(0x629a292a,0x367cd507),new R.init(0x9159015a,0x3070dd17),new R.init(0x152fecd8,0xf70e5939),new R.init(0x67332667,0xffc00b31),new R.init(0x8eb44a87,0x68581511),new R.init(0xdb0c2e0d,0x64f98fa7),new R.init(0x47b5481d,0xbefa4fa4)])},_doFinalize:function(){var e=P._doFinalize.call(this);return e.sigBytes-=16,e}}),E.SHA384=P._createHelper(N),E.HmacSHA384=P._createHmacHelper(N);var k,F,I,A,T,R,C,P,N,j,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function L(e){var t,r,i="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),i+=O.charAt(r>>6)+O.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),i+=O.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),i+=O.charAt(r>>2)+O.charAt((3&r)<<4));(3&i.length)>0;)i+="=";return i}function D(e){var t,r,i,n="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(i=O.indexOf(e.charAt(t)))<0||(0==o?(n+=V(i>>2),r=3&i,o=1):1==o?(n+=V(r<<2|i>>4),r=15&i,o=2):2==o?(n+=V(r),n+=V(i>>2),r=3&i,o=3):(n+=V(r<<2|i>>4),n+=V(15&i),o=0));return 1==o&&(n+=V(r<<2)),n}function U(e){var t,r=D(e),i=[];for(t=0;2*t<r.length;++t)i[t]=parseInt(r.substring(2*t,2*t+2),16);return i}function M(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function B(){return new M(null)}"Microsoft Internet Explorer"==S.appName?(M.prototype.am=function(e,t,r,i,n,o){for(var s=32767&t,a=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,c=a*l+u*s;n=((l=s*l+((32767&c)<<15)+r[i]+(0x3fffffff&n))>>>30)+(c>>>15)+a*u+(n>>>30),r[i++]=0x3fffffff&l}return n},j=30):"Netscape"!=S.appName?(M.prototype.am=function(e,t,r,i,n,o){for(;--o>=0;){var s=t*this[e++]+r[i]+n;n=Math.floor(s/0x4000000),r[i++]=0x3ffffff&s}return n},j=26):(M.prototype.am=function(e,t,r,i,n,o){for(var s=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,c=a*l+u*s;n=((l=s*l+((16383&c)<<14)+r[i]+n)>>28)+(c>>14)+a*u,r[i++]=0xfffffff&l}return n},j=28),M.prototype.DB=j,M.prototype.DM=(1<<j)-1,M.prototype.DV=1<<j,M.prototype.FV=0x10000000000000,M.prototype.F1=52-j,M.prototype.F2=2*j-52;var H,$,K=[];for(H=48,$=0;$<=9;++$)K[H++]=$;for(H=97,$=10;$<36;++$)K[H++]=$;for(H=65,$=10;$<36;++$)K[H++]=$;function V(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function W(e,t){var r=K[e.charCodeAt(t)];return null==r?-1:r}function q(e){var t=B();return t.fromInt(e),t}function z(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function J(e){this.m=e}function Z(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function G(e,t){return e&t}function Y(e,t){return e|t}function Q(e,t){return e^t}function X(e,t){return e&~t}function ee(){}function et(e){return e}function er(e){this.r2=B(),this.q3=B(),M.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}J.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},J.prototype.revert=function(e){return e},J.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},J.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},J.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Z.prototype.convert=function(e){var t=B();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(M.ZERO)>0&&this.m.subTo(t,t),t},Z.prototype.revert=function(e){var t=B();return e.copyTo(t),this.reduce(t),t},Z.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Z.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Z.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},M.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},M.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},M.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,n=!1,o=0;--i>=0;){var s=8==r?255&e[i]:W(e,i);s<0?"-"==e.charAt(i)&&(n=!0):(n=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&M.ZERO.subTo(this,this)},M.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},M.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},M.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},M.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,o=(1<<n)-1,s=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>n|a,a=(this[r]&o)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},M.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,o=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<n,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&o)<<n),t.t=this.t-r,t.clamp()}},M.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},M.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),n=r.t;for(t.t=n+i.t;--n>=0;)t[n]=0;for(n=0;n<i.t;++n)t[n+r.t]=r.am(0,i[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&M.ZERO.subTo(t,t)},M.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},M.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=B());var o=B(),s=this.s,a=e.s,l=this.DB-z(i[i.t-1]);l>0?(i.lShiftTo(l,o),n.lShiftTo(l,r)):(i.copyTo(o),n.copyTo(r));var u=o.t,c=o[u-1];if(0!=c){var d=c*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),h=this.FV/d,f=(1<<this.F1)/d,p=1<<this.F2,g=r.t,y=g-u,m=null==t?B():t;for(o.dlShiftTo(y,m),r.compareTo(m)>=0&&(r[r.t++]=1,r.subTo(m,r)),M.ONE.dlShiftTo(u,m),m.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--y>=0;){var v=r[--g]==c?this.DM:Math.floor(r[g]*h+(r[g-1]+p)*f);if((r[g]+=o.am(0,v,r,y,0,u))<v)for(o.dlShiftTo(y,m),r.subTo(m,r);r[g]<--v;)r.subTo(m,r)}null!=t&&(r.drShiftTo(u,t),s!=a&&M.ZERO.subTo(t,t)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),s<0&&M.ZERO.subTo(r,r)}}},M.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},M.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},M.prototype.exp=function(e,t){if(e>0xffffffff||e<1)return M.ONE;var r=B(),i=B(),n=t.convert(this),o=z(e)-1;for(n.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,n,r);else{var s=r;r=i,i=s}return t.revert(r)},M.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var t,r,i=(1<<t)-1,n=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(n=!0,o=V(r));s>=0;)a<t?r=(this[s]&(1<<a)-1)<<t-a|this[--s]>>(a+=this.DB-t):(r=this[s]>>(a-=t)&i,a<=0&&(a+=this.DB,--s)),r>0&&(n=!0),n&&(o+=V(r));return n?o:"0"},M.prototype.negate=function(){var e=B();return M.ZERO.subTo(this,e),e},M.prototype.abs=function(){return this.s<0?this.negate():this},M.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},M.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+z(this[this.t-1]^this.s&this.DM)},M.prototype.mod=function(e){var t=B();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(M.ZERO)>0&&e.subTo(t,t),t},M.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new J(t):new Z(t),this.exp(e,r)},M.ZERO=q(0),M.ONE=q(1),ee.prototype.convert=et,ee.prototype.revert=et,ee.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},ee.prototype.sqrTo=function(e,t){e.squareTo(t)},er.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=B();return e.copyTo(t),this.reduce(t),t},er.prototype.revert=function(e){return e},er.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},er.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},er.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var ei=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],en=0x4000000/ei[ei.length-1];function eo(){this.i=0,this.j=0,this.S=[]}function es(){var e;e=(new Date).getTime(),e_[eb++]^=255&e,e_[eb++]^=e>>8&255,e_[eb++]^=e>>16&255,e_[eb++]^=e>>24&255,eb>=256&&(eb-=256)}if(M.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},M.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=q(r),n=B(),o=B(),s="";for(this.divRemTo(i,n,o);n.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,n.divRemTo(i,n,o);return o.intValue().toString(e)+s},M.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),n=!1,o=0,s=0,a=0;a<e.length;++a){var l=W(e,a);l<0?"-"==e.charAt(a)&&0==this.signum()&&(n=!0):(s=t*s+l,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),n&&M.ZERO.subTo(this,this)},M.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(M.ONE.shiftLeft(e-1),Y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(M.ONE.shiftLeft(e-1),this);else{var i=[],n=7&e;i.length=1+(e>>3),t.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}},M.prototype.bitwiseTo=function(e,t,r){var i,n,o=Math.min(e.t,this.t);for(i=0;i<o;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=o;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},M.prototype.changeBit=function(e,t){var r=M.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},M.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},M.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},M.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},M.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},M.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},M.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r},M.prototype.millerRabin=function(e){var t=this.subtract(M.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>ei.length&&(e=ei.length);for(var n=B(),o=0;o<e;++o){n.fromInt(ei[Math.floor(Math.random()*ei.length)]);var s=n.modPow(i,this);if(0!=s.compareTo(M.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(M.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},M.prototype.clone=function(){var e=B();return this.copyTo(e),e},M.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},M.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},M.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},M.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},M.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?r=(this[e]&(1<<i)-1)<<8-i|this[--e]>>(i+=this.DB-8):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},M.prototype.equals=function(e){return 0==this.compareTo(e)},M.prototype.min=function(e){return 0>this.compareTo(e)?this:e},M.prototype.max=function(e){return this.compareTo(e)>0?this:e},M.prototype.and=function(e){var t=B();return this.bitwiseTo(e,G,t),t},M.prototype.or=function(e){var t=B();return this.bitwiseTo(e,Y,t),t},M.prototype.xor=function(e){var t=B();return this.bitwiseTo(e,Q,t),t},M.prototype.andNot=function(e){var t=B();return this.bitwiseTo(e,X,t),t},M.prototype.not=function(){for(var e=B(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},M.prototype.shiftLeft=function(e){var t=B();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},M.prototype.shiftRight=function(e){var t=B();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},M.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return -1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},M.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},M.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},M.prototype.setBit=function(e){return this.changeBit(e,Y)},M.prototype.clearBit=function(e){return this.changeBit(e,X)},M.prototype.flipBit=function(e){return this.changeBit(e,Q)},M.prototype.add=function(e){var t=B();return this.addTo(e,t),t},M.prototype.subtract=function(e){var t=B();return this.subTo(e,t),t},M.prototype.multiply=function(e){var t=B();return this.multiplyTo(e,t),t},M.prototype.divide=function(e){var t=B();return this.divRemTo(e,t,null),t},M.prototype.remainder=function(e){var t=B();return this.divRemTo(e,null,t),t},M.prototype.divideAndRemainder=function(e){var t=B(),r=B();return this.divRemTo(e,t,r),[t,r]},M.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),o=q(1);if(n<=0)return o;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new J(t):t.isEven()?new er(t):new Z(t);var s=[],a=3,l=r-1,u=(1<<r)-1;if(s[1]=i.convert(this),r>1){var c=B();for(i.sqrTo(s[1],c);a<=u;)s[a]=B(),i.mulTo(c,s[a-2],s[a]),a+=2}var d,h,f=e.t-1,p=!0,g=B();for(n=z(e[f])-1;f>=0;){for(n>=l?d=e[f]>>n-l&u:(d=(e[f]&(1<<n+1)-1)<<l-n,f>0&&(d|=e[f-1]>>this.DB+n-l)),a=r;0==(1&d);)d>>=1,--a;if((n-=a)<0&&(n+=this.DB,--f),p)s[d].copyTo(o),p=!1;else{for(;a>1;)i.sqrTo(o,g),i.sqrTo(g,o),a-=2;a>0?i.sqrTo(o,g):(h=o,o=g,g=h),i.mulTo(g,s[d],o)}for(;f>=0&&0==(e[f]&1<<n);)i.sqrTo(o,g),h=o,o=g,g=h,--n<0&&(n=this.DB-1,--f)}return i.revert(o)},M.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return M.ZERO;for(var r=e.clone(),i=this.clone(),n=q(1),o=q(0),s=q(0),a=q(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(e,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),t&&n.subTo(s,n),o.subTo(a,o)):(i.subTo(r,i),t&&s.subTo(n,s),a.subTo(o,a))}return 0!=i.compareTo(M.ONE)?M.ZERO:a.compareTo(e)>=0?a.subtract(e):0>a.signum()?(a.addTo(e,a),0>a.signum()?a.add(e):a):a},M.prototype.pow=function(e){return this.exp(e,new ee)},M.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(0>t.compareTo(r)){var i=t;t=r,r=i}var n=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(n<o&&(o=n),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},M.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=ei[ei.length-1]){for(t=0;t<ei.length;++t)if(r[0]==ei[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<ei.length;){for(var i=ei[t],n=t+1;n<ei.length&&i<en;)i*=ei[n++];for(i=r.modInt(i);t<n;)if(i%ei[t++]==0)return!1}return r.millerRabin(e)},M.prototype.square=function(){var e=B();return this.squareTo(e),e},eo.prototype.init=function(e){var t,r,i;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[r],this.S[r]=i;this.i=0,this.j=0},eo.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==e_){if(e_=[],eb=0,void 0!==x&&(void 0!==x.crypto||void 0!==x.msCrypto)){var ea=x.crypto||x.msCrypto;if(ea.getRandomValues){var el=new Uint8Array(32);for(ea.getRandomValues(el),ew=0;ew<32;++ew)e_[eb++]=el[ew]}else if("Netscape"==S.appName&&S.appVersion<"5"){var eu=x.crypto.random(32);for(ew=0;ew<eu.length;++ew)e_[eb++]=255&eu.charCodeAt(ew)}}for(;eb<256;)ew=Math.floor(65536*Math.random()),e_[eb++]=ew>>>8,e_[eb++]=255&ew;eb=0,es()}function ec(){}function ed(e,t){return new M(e,t)}function eh(e,t,r){for(var i="",n=0;i.length<t;)i+=r(String.fromCharCode.apply(String,e.concat([(0xff000000&n)>>24,(0xff0000&n)>>16,(65280&n)>>8,255&n]))),n+=1;return i}function ef(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ep(e,t){this.x=t,this.q=e}function eg(e,t,r,i){this.curve=e,this.x=t,this.y=r,this.z=null==i?M.ONE:i,this.zinv=null}function ey(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new eg(this,null,null)}ec.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=function(){if(null==ev){for(es(),(ev=new eo).init(e_),eb=0;eb<e_.length;++eb)e_[eb]=0;eb=0}return ev.next()}()},ef.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ef.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=ed(e,16),this.e=parseInt(t,16)}},ef.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=[],i=e.length-1;i>=0&&t>0;){var n=e.charCodeAt(i--);n<128?r[--t]=n:n>127&&n<2048?(r[--t]=63&n|128,r[--t]=n>>6|192):(r[--t]=63&n|128,r[--t]=n>>6&63|128,r[--t]=n>>12|224)}r[--t]=0;for(var o=new ec,s=[];t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new M(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i},ef.prototype.encryptOAEP=function(e,t,r){var i=function(e,t,r,i){var n=eS.crypto.MessageDigest,o=eS.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=n.getCanonicalAlgName(r),i=n.getHashLength(s),r=function(e){return eL(o.hashHex(eD(e),s))}),e.length+2*i+2>t)throw"Message too long for RSA";var a,l="";for(a=0;a<t-e.length-2*i-2;a+=1)l+="\0";var u=r("")+l+"\x01"+e,c=Array(i);(new ec).nextBytes(c);var d=eh(c,u.length,r),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^d.charCodeAt(a);var f=eh(h,c.length,r),p=[0];for(a=0;a<c.length;a+=1)p[a+1]=c[a]^f.charCodeAt(a);return new M(p.concat(h))}(e,this.n.bitLength()+7>>3,t,r);if(null==i)return null;var n=this.doPublic(i);if(null==n)return null;var o=n.toString(16);return 0==(1&o.length)?o:"0"+o},ef.prototype.type="RSA",ep.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ep.prototype.toBigInteger=function(){return this.x},ep.prototype.negate=function(){return new ep(this.q,this.x.negate().mod(this.q))},ep.prototype.add=function(e){return new ep(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ep.prototype.subtract=function(e){return new ep(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ep.prototype.multiply=function(e){return new ep(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ep.prototype.square=function(){return new ep(this.q,this.x.square().mod(this.q))},ep.prototype.divide=function(e){return new ep(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},eg.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},eg.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},eg.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(M.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(M.ZERO))},eg.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(M.ZERO)&&!this.y.toBigInteger().equals(M.ZERO)},eg.prototype.negate=function(){return new eg(this.curve,this.x,this.y.negate(),this.z)},eg.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(M.ZERO.equals(r))return M.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new M("3"),n=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),a=s.multiply(r),l=n.multiply(s),u=t.square().multiply(this.z),c=u.subtract(l.shiftLeft(1)).multiply(e.z).subtract(a).multiply(r).mod(this.curve.q),d=l.multiply(i).multiply(t).subtract(o.multiply(a)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),h=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new eg(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(d),h)},eg.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new M("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),i=r.multiply(this.z),n=i.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);M.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(n)).shiftLeft(1).multiply(i).mod(this.curve.q),l=s.multiply(e).multiply(t).subtract(n.shiftLeft(1)).shiftLeft(2).multiply(n).subtract(s.square().multiply(s)).mod(this.curve.q),u=i.square().multiply(i).shiftLeft(3).mod(this.curve.q);return new eg(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(l),u)},eg.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e.multiply(new M("3")),i=this.negate(),n=this,o=this.curve.q.subtract(e),s=o.multiply(new M("3")),a=new eg(this.curve,this.x,this.y),l=a.negate();for(t=r.bitLength()-2;t>0;--t){n=n.twice();var u=r.testBit(t);u!=e.testBit(t)&&(n=n.add(u?this:i))}for(t=s.bitLength()-2;t>0;--t){a=a.twice();var c=s.testBit(t);c!=o.testBit(t)&&(a=a.add(c?a:l))}return n},eg.prototype.multiplyTwo=function(e,t,r){var i;i=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var n=this.curve.getInfinity(),o=this.add(t);i>=0;)n=n.twice(),e.testBit(i)?n=r.testBit(i)?n.add(o):n.add(this):r.testBit(i)&&(n=n.add(t)),--i;return n},ey.prototype.getQ=function(){return this.q},ey.prototype.getA=function(){return this.a},ey.prototype.getB=function(){return this.b},ey.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ey.prototype.getInfinity=function(){return this.infinity},ey.prototype.fromBigInteger=function(e){return new ep(this.q,e)},ey.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),i=e.substr(t+2,t);return new eg(this,this.fromBigInteger(new M(r,16)),this.fromBigInteger(new M(i,16)))}},ep.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},eg.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),i=this.getY().toBigInteger(),n=t(r,32);return e?i.isEven()?n.unshift(2):n.unshift(3):(n.unshift(4),n=n.concat(t(i,32))),n},eg.decodeFrom=function(e,t){t[0];var r=t.length-1,i=t.slice(1,1+r/2),n=t.slice(1+r/2,1+r);i.unshift(0),n.unshift(0);var o=new M(i),s=new M(n);return new eg(e,e.fromBigInteger(o),e.fromBigInteger(s))},eg.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,i=t.substr(2,r/2),n=t.substr(2+r/2,r/2),o=new M(i,16),s=new M(n,16);return new eg(e,e.fromBigInteger(o),e.fromBigInteger(s))},eg.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),i=r.square().subtract(this.x).subtract(e.x),n=r.multiply(this.x.subtract(i)).subtract(this.y);return new eg(this.curve,i,n)},eg.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(M.valueOf(2)),t=this.curve.fromBigInteger(M.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),i=r.square().subtract(this.x.multiply(e)),n=r.multiply(this.x.subtract(i)).subtract(this.y);return new eg(this.curve,i,n)},eg.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e.multiply(new M("3")),i=this.negate(),n=this;for(t=r.bitLength()-2;t>0;--t){n=n.twice();var o=r.testBit(t);o!=e.testBit(t)&&(n=n.add2D(o?this:i))}return n},eg.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),i=this.curve.getB().toBigInteger(),n=this.curve.getQ(),o=t.multiply(t).mod(n),s=e.multiply(e).multiply(e).add(r.multiply(e)).add(i).mod(n);return o.equals(s)},eg.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},eg.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(0>t.compareTo(M.ONE)||t.compareTo(e.subtract(M.ONE))>0)throw Error("x coordinate out of bounds");if(0>r.compareTo(M.ONE)||r.compareTo(e.subtract(M.ONE))>0)throw Error("y coordinate out of bounds");if(!this.isOnCurve())throw Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw Error("Point is not a scalar multiple of G.");return!0};var em=function(){var e=RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function i(e,t,i){return t?r[t]:String.fromCharCode(parseInt(i,16))}var n=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,l,u,c=r.match(e),d=c[0],h=!1;"{"===d?l={}:"["===d?l=[]:(l=[],h=!0);for(var f=[l],p=1-h,g=c.length;p<g;++p)switch((d=c[p]).charCodeAt(0)){default:(a=f[0])[u||a.length]=+d,u=void 0;break;case 34:if(-1!==(d=d.substring(1,d.length-1)).indexOf("\\")&&(d=d.replace(t,i)),a=f[0],!u){if(!(a instanceof Array)){u=d||n;break}u=a.length}a[u]=d,u=void 0;break;case 91:a=f[0],f.unshift(a[u||a.length]=[]),u=void 0;break;case 93:case 125:f.shift();break;case 102:(a=f[0])[u||a.length]=!1,u=void 0;break;case 110:(a=f[0])[u||a.length]=null,u=void 0;break;case 116:(a=f[0])[u||a.length]=!0,u=void 0;break;case 123:a=f[0],f.unshift(a[u||a.length]={}),u=void 0}if(h){if(1!==f.length)throw Error();l=l[0]}else if(f.length)throw Error();return s&&(l=function e(t,r){var i=t[r];if(i&&"object"===(void 0===i?"undefined":w(i))){var n=null;for(var a in i)if(o.call(i,a)&&i!==t){var l=e(i,a);void 0!==l?i[a]=l:(n||(n=[]),n.push(a))}if(n)for(var u=n.length;--u>=0;)delete i[n[u]]}return s.call(t,r,i)}({"":l},"")),l}}();void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.asn1&&eS.asn1||(eS.asn1={}),eS.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var i="",n=0;n<r;n++)i+="f";t=new M(i,16).xor(e).add(M.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return eB(e,t)},this.newObject=function(e){var t=eS.asn1,r=t.ASN1Object,i=t.DERBoolean,n=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,l=t.DERObjectIdentifier,u=t.DEREnumerated,c=t.DERUTF8String,d=t.DERNumericString,h=t.DERPrintableString,f=t.DERTeletexString,p=t.DERIA5String,g=t.DERUTCTime,y=t.DERGeneralizedTime,m=t.DERVisibleString,v=t.DERBMPString,_=t.DERSequence,b=t.DERSet,w=t.DERTaggedObject,S=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var x=Object.keys(e);if(1!=x.length)throw Error("key of param shall be only one.");var E=x[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":"))throw Error("undefined key: "+E);if("bool"==E)return new i(e[E]);if("int"==E)return new n(e[E]);if("bitstr"==E)return new o(e[E]);if("octstr"==E)return new s(e[E]);if("null"==E)return new a(e[E]);if("oid"==E)return new l(e[E]);if("enum"==E)return new u(e[E]);if("utf8str"==E)return new c(e[E]);if("numstr"==E)return new d(e[E]);if("prnstr"==E)return new h(e[E]);if("telstr"==E)return new f(e[E]);if("ia5str"==E)return new p(e[E]);if("utctime"==E)return new g(e[E]);if("gentime"==E)return new y(e[E]);if("visstr"==E)return new m(e[E]);if("bmpstr"==E)return new v(e[E]);if("asn1"==E)return new r(e[E]);if("seq"==E){for(var k=e[E],F=[],I=0;I<k.length;I++){var A=S(k[I]);F.push(A)}return new _({array:F})}if("set"==E){for(k=e[E],F=[],I=0;I<k.length;I++)A=S(k[I]),F.push(A);return new b({array:F})}if("tag"==E){var T=e[E];if("[object Array]"===Object.prototype.toString.call(T)&&3==T.length){var R=S(T[2]);return new w({tag:T[0],explicit:T[1],obj:R})}return new w(T)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},eS.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),i=(t=Math.floor(r/40)+"."+r%40,""),n=2;n<e.length;n+=2){var o=("00000000"+parseInt(e.substr(n,2),16).toString(2)).slice(-8);i+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new M(i,2).toString(10),i="")}return t},eS.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split(".");r+=t(40*parseInt(i[0])+parseInt(i[1])),i.splice(0,2);for(var n=0;n<i.length;n++)r+=function(e){var r="",i=new M(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(s=0,i=o+i;s<i.length-1;s+=7){var a=i.substr(s,7);s!=i.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(i[n]);return r},eS.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw Error("this.hV is null or undefined");if(this.hV.length%2==1)throw Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},eS.asn1.DERAbstractString=function(e){eS.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ej(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},e0(eS.asn1.DERAbstractString,eS.asn1.ASN1Object),eS.asn1.DERAbstractTime=function(e){eS.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},this.formatDate=function(e,t,r){var i=this.zeroPadding,n=this.localDateToUTC(e),o=String(n.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+i(String(n.getMonth()+1),2)+i(String(n.getDate()),2)+i(String(n.getHours()),2)+i(String(n.getMinutes()),2)+i(String(n.getSeconds()),2);if(!0===r){var a=n.getMilliseconds();if(0!=a){var l=i(String(a),3);s=s+"."+(l=l.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=eT(e)},this.setByDateValue=function(e,t,r,i,n,o){var s=new Date(Date.UTC(e,t-1,r,i,n,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},e0(eS.asn1.DERAbstractTime,eS.asn1.ASN1Object),eS.asn1.DERAbstractStructured=function(e){eS.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=[],void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},e0(eS.asn1.DERAbstractStructured,eS.asn1.ASN1Object),eS.asn1.DERBoolean=function(e){eS.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},e0(eS.asn1.DERBoolean,eS.asn1.ASN1Object),eS.asn1.DERInteger=function(e){eS.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=eS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new M(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},e0(eS.asn1.DERInteger,eS.asn1.ASN1Object),eS.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=eS.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}eS.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;this.hTLV=null,this.isModified=!0,this.hV="0"+e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var i="";for(r=0;r<e.length-1;r+=8){var n=parseInt(e.substr(r,8),2).toString(16);1==n.length&&(n="0"+n),i+=n}this.hTLV=null,this.isModified=!0,this.hV="0"+t+i},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},e0(eS.asn1.DERBitString,eS.asn1.ASN1Object),eS.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=eS.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}eS.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},e0(eS.asn1.DEROctetString,eS.asn1.DERAbstractString),eS.asn1.DERNull=function(){eS.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},e0(eS.asn1.DERNull,eS.asn1.ASN1Object),eS.asn1.DERObjectIdentifier=function(e){eS.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t};try{if(!e.match(/^[0-9.]+$/))return null;var r="",i=e.split("."),n=40*parseInt(i[0],10)+parseInt(i[1],10);r+=t(n),i.splice(0,2);for(var o=0;o<i.length;o++)r+=function(e){var r="",i=parseInt(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var o="",s=0;s<n;s++)o+="0";for(s=0,i=o+i;s<i.length-1;s+=7){var a=i.substr(s,7);s!=i.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(i[o]);return r}catch(e){return null}}(e);if(null==t)throw Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=eS.asn1.x509.OID.name2oid(e);if(""===t)throw Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},e0(eS.asn1.DERObjectIdentifier,eS.asn1.ASN1Object),eS.asn1.DEREnumerated=function(e){eS.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=eS.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new M(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},e0(eS.asn1.DEREnumerated,eS.asn1.ASN1Object),eS.asn1.DERUTF8String=function(e){eS.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},e0(eS.asn1.DERUTF8String,eS.asn1.DERAbstractString),eS.asn1.DERNumericString=function(e){eS.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},e0(eS.asn1.DERNumericString,eS.asn1.DERAbstractString),eS.asn1.DERPrintableString=function(e){eS.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},e0(eS.asn1.DERPrintableString,eS.asn1.DERAbstractString),eS.asn1.DERTeletexString=function(e){eS.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},e0(eS.asn1.DERTeletexString,eS.asn1.DERAbstractString),eS.asn1.DERIA5String=function(e){eS.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},e0(eS.asn1.DERIA5String,eS.asn1.DERAbstractString),eS.asn1.DERVisibleString=function(e){eS.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},e0(eS.asn1.DERVisibleString,eS.asn1.DERAbstractString),eS.asn1.DERBMPString=function(e){eS.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},e0(eS.asn1.DERBMPString,eS.asn1.DERAbstractString),eS.asn1.DERUTCTime=function(e){eS.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=eT(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=eT(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},e0(eS.asn1.DERUTCTime,eS.asn1.DERAbstractTime),eS.asn1.DERGeneralizedTime=function(e){eS.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=eT(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=eT(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},e0(eS.asn1.DERGeneralizedTime,eS.asn1.DERAbstractTime),eS.asn1.DERSequence=function(e){eS.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},e0(eS.asn1.DERSequence,eS.asn1.DERAbstractStructured),eS.asn1.DERSet=function(e){eS.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=[],t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},e0(eS.asn1.DERSet,eS.asn1.DERAbstractStructured),eS.asn1.DERTaggedObject=function(e){eS.asn1.DERTaggedObject.superclass.constructor.call(this);var t=eS.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==w(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},e0(eS.asn1.DERTaggedObject,eS.asn1.ASN1Object);var ev,e_,eb,ew,eS,ex,eE,ek=new function(){};function eF(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function eI(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function eA(e){for(var t="",r=0;r<e.length;r++){var i=e[r].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function eT(e){return eA(eF(e))}function eR(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function eC(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function eP(e){return e.length%2==1&&(e="0"+e),eR(L(e))}function eN(e){return D(eC(e))}function ej(e){return eV(eG(e))}function eO(e){return decodeURIComponent(eW(e))}function eL(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function eD(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function eU(e){return L(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function eM(e){return D(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function eB(e,t){return"-----BEGIN "+t+"-----\r\n"+eU(e)+"\r\n-----END "+t+"-----\r\n"}function eH(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return eM(e=void 0!==t?(e=e.replace(RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function e$(e){var t,r,i,n,o,s,a,l,u,c;if(c=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return t=parseInt(l=c[1]),2===l.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(c[2])-1,i=parseInt(c[3]),n=parseInt(c[4]),o=parseInt(c[5]),s=parseInt(c[6]),a=0,""!==(u=c[7])&&(a=parseInt((u.substr(1)+"00").substr(0,3))),Date.UTC(t,r,i,n,o,s,a);throw"unsupported zulu format: "+e}function eK(e){return~~(e$(e)/1e3)}function eV(e){return e.replace(/%/g,"")}function eW(e){return e.replace(/(..)/g,"%$1")}function eq(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var i=":".repeat(7-r+2),n=(e=e.replace("::",i)).split(":");if(8!=n.length)throw t;for(var o=0;o<8;o++)n[o]=("0000"+n[o]).slice(-4);return n.join("")}function ez(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var i=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===i)return e.slice(1,-1);var n="";for(r=0;r<i.length;r++)i[r].length>n.length&&(n=i[r]);return(e=e.replace(n,"::")).slice(1,-1)}function eJ(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?ez(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function eZ(e){return e.match(/.{4}/g).map(function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var i=128|63&r;return eO((192|(7&t)<<3|(192&r)>>6).toString(16)+i.toString(16))}return i=128|(15&t)<<2|(192&r)>>6,eO((224|(240&t)>>4).toString(16)+i.toString(16)+(128|63&r).toString(16))}).join("")}function eG(e){for(var t=encodeURIComponent(e),r="",i=0;i<t.length;i++)"%"==t[i]?(r+=t.substr(i,3),i+=2):r=r+"%"+eT(t[i]);return r}function eY(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function eQ(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}ek.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},ek.getL=function(e,t){var r=ek.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},ek.getVblen=function(e,t){var r;return""==(r=ek.getL(e,t))?-1:("8"===r.substr(0,1)?new M(r.substr(2),16):new M(r,16)).intValue()},ek.getVidx=function(e,t){var r=ek.getLblen(e,t);return r<0?r:t+2*(r+1)},ek.getV=function(e,t){var r=ek.getVidx(e,t),i=ek.getVblen(e,t);return e.substr(r,2*i)},ek.getTLV=function(e,t){return e.substr(t,2)+ek.getL(e,t)+ek.getV(e,t)},ek.getTLVblen=function(e,t){return 2+2*ek.getLblen(e,t)+2*ek.getVblen(e,t)},ek.getNextSiblingIdx=function(e,t){return ek.getVidx(e,t)+2*ek.getVblen(e,t)},ek.getChildIdx=function(e,t){var r,i,n,o=[];r=ek.getVidx(e,t),i=2*ek.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,i-=2),n=0;for(var s=r;n<=i;){var a=ek.getTLVblen(e,s);if((n+=a)<=i&&o.push(s),s+=a,n>=i)break}return o},ek.getNthChildIdx=function(e,t,r){return ek.getChildIdx(e,t)[r]},ek.getIdxbyList=function(e,t,r,i){var n,o;return 0==r.length?void 0!==i&&e.substr(t,2)!==i?-1:t:(n=r.shift())>=(o=ek.getChildIdx(e,t)).length?-1:ek.getIdxbyList(e,o[n],r,i)},ek.getIdxbyListEx=function(e,t,r,i){var n,o;if(0==r.length)return void 0!==i&&e.substr(t,2)!==i?-1:t;n=r.shift(),o=ek.getChildIdx(e,t);for(var s=0,a=0;a<o.length;a++){var l=e.substr(o[a],2);if("number"==typeof n&&!ek.isContextTag(l)&&s==n||"string"==typeof n&&ek.isContextTag(l,n))return ek.getIdxbyListEx(e,o[a],r,i);ek.isContextTag(l)||s++}return -1},ek.getTLVbyList=function(e,t,r,i){var n=ek.getIdxbyList(e,t,r,i);return -1==n||n>=e.length?null:ek.getTLV(e,n)},ek.getTLVbyListEx=function(e,t,r,i){var n=ek.getIdxbyListEx(e,t,r,i);return -1==n?null:ek.getTLV(e,n)},ek.getVbyList=function(e,t,r,i,n){var o,s;return -1==(o=ek.getIdxbyList(e,t,r,i))||o>=e.length?null:(s=ek.getV(e,o),!0===n&&(s=s.substr(2)),s)},ek.getVbyListEx=function(e,t,r,i,n){var o,s;return -1==(o=ek.getIdxbyListEx(e,t,r,i))?null:(s=ek.getV(e,o),"03"==e.substr(o,2)&&!1!==n&&(s=s.substr(2)),s)},ek.getInt=function(e,t,r){null==r&&(r=-1);try{var i=e.substr(t,2);if("02"!=i&&"03"!=i)return r;var n=ek.getV(e,t);return"02"==i?parseInt(n,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16),i=e.substr(2),n=parseInt(i,16).toString(2);return"0"==n&&(n="00000000"),n=n.slice(0,0-r),parseInt(n,2)}catch(e){return -1}}(n)}catch(e){return r}},ek.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:function(e){if(!eY(e))return null;try{var t=[],r=e.substr(0,2),i=parseInt(r,16);t[0]=new String(Math.floor(i/40)),t[1]=new String(i%40);for(var n=e.substr(2),o=[],s=0;s<n.length/2;s++)o.push(parseInt(n.substr(2*s,2),16));var a=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=eX((127&o[s]).toString(2),7):(l+=eX((127&o[s]).toString(2),7),a.push(new String(parseInt(l,2))),l="");var u=t.join(".");return a.length>0&&(u=u+"."+a.join(".")),u}catch(e){return null}}(ek.getV(e,t))}catch(e){return r}},ek.getOIDName=function(e,t,r){null==r&&(r=null);try{var i=ek.getOID(e,t,r);if(i==r)return r;var n=eS.asn1.x509.OID.oid2name(i);return""==n?i:n}catch(e){return r}},ek.getString=function(e,t,r){null==r&&(r=null);try{return eL(ek.getV(e,t))}catch(e){return r}},ek.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:Array(t-e.length+1).join("0")+e},r=[],i=parseInt(e.substr(0,2),16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var n=e.substr(2),o=[],s=0;s<n.length/2;s++)o.push(parseInt(n.substr(2*s,2),16));var a=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=t((127&o[s]).toString(2),7):(a.push(new String(parseInt(l+=t((127&o[s]).toString(2),7),2))),l="");var u=r.join(".");return a.length>0&&(u=u+"."+a.join(".")),u},ek.dump=function(e,t,r,i){var n=ek.getV,o=ek.dump,s=ek.getChildIdx,a=e;e instanceof eS.asn1.ASN1Object&&(a=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===i&&(i="");var u,c=t.ommit_long_octet;if("01"==(u=a.substr(r,2)))return"00"==(d=n(a,r))?i+"BOOLEAN FALSE\n":i+"BOOLEAN TRUE\n";if("02"==u)return i+"INTEGER "+l(d=n(a,r),c)+"\n";if("03"==u){var d=n(a,r);if(ek.isASN1HEX(d.substr(2))){var h=i+"BITSTRING, encapsulates\n";return h+o(d.substr(2),t,0,i+"  ")}return i+"BITSTRING "+l(d,c)+"\n"}if("04"==u)return(d=n(a,r),ek.isASN1HEX(d))?(h=i+"OCTETSTRING, encapsulates\n")+o(d,t,0,i+"  "):i+"OCTETSTRING "+l(d,c)+"\n";if("05"==u)return i+"NULL\n";if("06"==u){var f=n(a,r),p=eS.asn1.ASN1Util.oidHexToInt(f),g=eS.asn1.x509.OID.oid2name(p),y=p.replace(/\./g," ");return""!=g?i+"ObjectIdentifier "+g+" ("+y+")\n":i+"ObjectIdentifier ("+y+")\n"}if("0a"==u)return i+"ENUMERATED "+parseInt(n(a,r))+"\n";if("0c"==u)return i+"UTF8String '"+eO(n(a,r))+"'\n";if("13"==u)return i+"PrintableString '"+eO(n(a,r))+"'\n";if("14"==u)return i+"TeletexString '"+eO(n(a,r))+"'\n";if("16"==u)return i+"IA5String '"+eO(n(a,r))+"'\n";if("17"==u)return i+"UTCTime "+eO(n(a,r))+"\n";if("18"==u)return i+"GeneralizedTime "+eO(n(a,r))+"\n";if("1a"==u)return i+"VisualString '"+eO(n(a,r))+"'\n";if("1e"==u)return i+"BMPString '"+eZ(n(a,r))+"'\n";if("30"==u){if("3000"==a.substr(r,4))return i+"SEQUENCE {}\n";h=i+"SEQUENCE\n";var m=t;if((2==(b=s(a,r)).length||3==b.length)&&"06"==a.substr(b[0],2)&&"04"==a.substr(b[b.length-1],2)){g=ek.oidname(n(a,b[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=g,m=v}for(var _=0;_<b.length;_++)h+=o(a,m,b[_],i+"  ");return h}if("31"==u){h=i+"SET\n";var b=s(a,r);for(_=0;_<b.length;_++)h+=o(a,t,b[_],i+"  ");return h}if(0!=(128&(u=parseInt(u,16)))){var w=31&u;if(0!=(32&u)){for(h=i+"["+w+"]\n",b=s(a,r),_=0;_<b.length;_++)h+=o(a,t,b[_],i+"  ");return h}if(d=n(a,r),ek.isASN1HEX(d)){var h=i+"["+w+"]\n";return h+o(d,t,0,i+"  ")}return("68747470"==d.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==w)&&(d=eO(d)),h=i+"["+w+"] "+d+"\n"}return i+"UNKNOWN("+u+") "+n(a,r)+"\n"},ek.isContextTag=function(e,t){var r,i;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return -1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((i=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==i}catch(e){return!1}},ek.isASN1HEX=function(e){if(e.length%2==1)return!1;var t=ek.getVblen(e,0),r=e.substr(0,2),i=ek.getL(e,0);return e.length-r.length-i.length==2*t},ek.checkStrictDER=function(e,t,r,i,n){if(void 0===r){if("string"!=typeof e||(e=e.toLowerCase(),!eS.lang.String.isHex(e)))throw Error("not hex string");r=e.length,n=(i=e.length/2)<128?1:Math.ceil(i.toString(16))+1}if(ek.getL(e,t).length>2*n)throw Error("L of TLV too long: idx="+t);var o=ek.getVblen(e,t);if(o>i)throw Error("value of L too long than hex: idx="+t);var s=ek.getTLV(e,t),a=s.length-2-ek.getL(e,t).length;if(a!==2*o)throw Error("V string length and L's value not the same:"+a+"/"+2*o);if(0===t&&e.length!=s.length)throw Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var l=e.substr(t,2);if("02"===l){var u=ek.getVidx(e,t);if("00"==e.substr(u,2)&&56>e.charCodeAt(u+2))throw Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var c=ek.getVblen(e,t),d=0,h=ek.getChildIdx(e,t),f=0;f<h.length;f++)d+=ek.getTLV(e,h[f]).length,ek.checkStrictDER(e,h[f],r,i,n);if(2*c!=d)throw Error("sum of children's TLV length and L unmatch: "+2*c+"!="+d)}},ek.oidname=function(e){var t=eS.asn1;eS.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.lang&&eS.lang||(eS.lang={}),eS.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=ex=function(t){return eR(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=eE=function(t){return e.from(eC(t),"base64").toString("utf8")}):(t.utf8tob64u=ex=function(e){return eP(eV(eG(e)))},t.b64utoutf8=eE=function(e){return decodeURIComponent(eW(eN(e)))}),eS.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},eS.lang.String.isHex=function(e){return eY(e)},eS.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},eS.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=eC(e),eS.lang.String.isBase64(e))},eS.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},eS.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},eS.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},eS.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var eX=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:Array(t-e.length+1).join(r)+e};function e0(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:E.algo.MD5,sha1:E.algo.SHA1,sha224:E.algo.SHA224,sha256:E.algo.SHA256,sha384:E.algo.SHA384,sha512:E.algo.SHA512,ripemd160:E.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var i=this.getDigestInfoHex(e,t),n=r/4;if(i.length+22>n)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",s="00"+i,a="",l=n-o.length-s.length,u=0;u<l;u+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new eS.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new eS.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ef||e instanceof eS.crypto.DSA||e instanceof eS.crypto.ECDSA}},eS.crypto.Util.md5=function(e){return new eS.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},eS.crypto.Util.ripemd160=function(e){return new eS.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},eS.crypto.Util.SECURERANDOMGEN=new ec,eS.crypto.Util.getRandomHexOfNbytes=function(e){var t=Array(e);return eS.crypto.Util.SECURERANDOMGEN.nextBytes(t),eA(t)},eS.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new M(eS.crypto.Util.getRandomHexOfNbytes(e),16)},eS.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=Array((e-t)/8+1);return eS.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],eA(r)},eS.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new M(eS.crypto.Util.getRandomHexOfNbits(e),16)},eS.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=eS.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},eS.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var i=t.subtract(e);return eS.crypto.Util.getRandomBigIntegerZeroToMax(i).add(e)},eS.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=eS.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=eS.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=eS.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=E.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(E.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},eS.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},eS.crypto.MessageDigest.getHashLength=function(e){var t=eS.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},eS.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},eS.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=eS.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var i=eS.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=E.algo.HMAC.create(i,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=E.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(E.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=eD(e)),void(this.pass=E.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":w(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=ej(e.utf8)),void 0!==e.rstr&&(t=eD(e.rstr)),void 0!==e.b64&&(t=D(e.b64)),void 0!==e.b64u&&(t=eN(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=E.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},eS.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new eS.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?e1.getKey(e):e1.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==eS.crypto.ECDSA&&(this.prvKey=new eS.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ef&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ef&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof eS.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof eS.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==eS.crypto.ECDSA&&(this.pubKey=new eS.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ef&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ef&&"rsa"===this.pubkeyAlgName||void 0!==eS.crypto.ECDSA&&this.pubKey instanceof eS.crypto.ECDSA||void 0!==eS.crypto.DSA&&this.pubKey instanceof eS.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=eS.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=e1.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},eS.crypto.Cipher=function(e){},eS.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof ef&&t.isPublic){var i=eS.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===i)return t.encrypt(e);if("RSAOAEP"===i)return t.encryptOAEP(e,"sha1");var n=i.match(/^RSAOAEP(\d+)$/);if(null!==n)return t.encryptOAEP(e,"sha"+n[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},eS.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof ef&&t.isPrivate){var i=eS.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===i)return t.decrypt(e);if("RSAOAEP"===i)return t.decryptOAEP(e,"sha1");var n=i.match(/^RSAOAEP(\d+)$/);if(null!==n)return t.decryptOAEP(e,"sha"+n[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},eS.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ef){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},eS.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.ECDSA=function(e){var t=Error,r=eS.crypto.ECDSA,i=eS.crypto.ECParameterDB,n=r.getName,o=ek.getVbyListEx,s=ek.isASN1HEX,a=new ec;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new M(e.bitLength(),a).mod(e.subtract(M.ONE)).add(M.ONE)},this.setNamedCurve=function(e){this.ecparams=i.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.G.multiply(t),i=r.getX().toBigInteger(),n=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+i.toString(16)).slice(-o)+("0000000000"+n.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var i=new M(t,16),n=this.ecparams.n,o=new M(e.substring(0,this.ecparams.keylen/4),16);do var s=this.getBigRandom(n),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(n);while(0>=a.compareTo(M.ZERO));var l=s.modInverse(n).multiply(o.add(i.multiply(a))).mod(n);return r.biRSSigToASN1Sig(a,l)},this.sign=function(e,t){var r=this.ecparams.n,i=M.fromByteArrayUnsigned(e);do var n=this.getBigRandom(r),o=this.ecparams.G.multiply(n).getX().toBigInteger().mod(r);while(0>=o.compareTo(M.ZERO));var s=n.modInverse(r).multiply(i.add(t.multiply(o))).mod(r);return this.serializeSig(o,s)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,i){try{var n,o,s=r.parseSigHex(t);n=s.r,o=s.s;var a=eg.decodeFromHex(this.ecparams.curve,i),l=new M(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,n,o,a)}catch(e){return!1}},this.verify=function(e,t,r){if(Bitcoin.Util.isArray(t)){var i,n,o,s=this.parseSig(t);i=s.r,n=s.s}else{if("object"!==(void 0===t?"undefined":w(t))||!t.r||!t.s)throw"Invalid value for signature";i=t.r,n=t.s}if(r instanceof eg)o=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";o=eg.decodeFrom(this.ecparams.curve,r)}var a=M.fromByteArrayUnsigned(e);return this.verifyRaw(a,i,n,o)},this.verifyRaw=function(e,t,r,i){var n=this.ecparams.n,o=this.ecparams.G;if(0>t.compareTo(M.ONE)||t.compareTo(n)>=0||0>r.compareTo(M.ONE)||r.compareTo(n)>=0)return!1;var s=r.modInverse(n),a=e.multiply(s).mod(n),l=t.multiply(s).mod(n);return o.multiply(a).add(i.multiply(l)).getX().toBigInteger().mod(n).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),i=t.toByteArraySigned(),n=[];return n.push(2),n.push(r.length),(n=n.concat(r)).push(2),n.push(i.length),(n=n.concat(i)).unshift(n.length),n.unshift(48),n},this.parseSig=function(e){if(48!=e[0])throw Error("Signature not a valid DERSequence");if(2!=e[t=2])throw Error("First element in signature must be a DERInteger");var t,r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:M.fromByteArrayUnsigned(r),s:M.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var r=this.ecparams.n;return{r:M.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:M.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,r,i;if(!1===s(e))throw Error("not ASN.1 hex string");try{t=o(e,0,["[0]",0],"06"),r=o(e,0,[1],"04");try{i=o(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=n(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var r,i,a;if(!1===s(e))throw new t("not ASN.1 hex string");try{o(e,0,[1,0],"06"),r=o(e,0,[1,1],"06"),i=o(e,0,[2,0,1],"04");try{a=o(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=n(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(a),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var r,i;if(!1===s(e))throw new t("not ASN.1 hex string");try{o(e,0,[0,0],"06"),r=o(e,0,[0,1],"06"),i=o(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=n(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},this.readCertPubKeyHex=function(e,r){var i,a;if(!1===s(e))throw new t("not ASN.1 hex string");try{i=o(e,0,[0,5,0,1],"06"),a=o(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=n(i),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(a)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},eS.crypto.ECDSA.parseSigHex=function(e){var t=eS.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new M(t.r,16),s:new M(t.s,16)}},eS.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ek.getChildIdx,r=ek.getV;if(ek.checkStrictDER(e,0),"30"!=e.substr(0,2))throw Error("signature is not a ASN.1 sequence");var i=t(e,0);if(2!=i.length)throw Error("signature shall have two elements");var n=i[0],o=i[1];if("02"!=e.substr(n,2))throw Error("1st item not ASN.1 integer");if("02"!=e.substr(o,2))throw Error("2nd item not ASN.1 integer");return{r:r(e,n),s:r(e,o)}},eS.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=eS.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,i=t.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),r.length%32==30&&(r="00"+r),i.length%32==30&&(i="00"+i),r.length%32!=0)throw"unknown ECDSA sig r length error";if(i.length%32!=0)throw"unknown ECDSA sig s length error";return r+i},eS.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return eS.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},eS.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new M(e,16),i=new M(t,16);return eS.crypto.ECDSA.biRSSigToASN1Sig(r,i)},eS.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=eS.asn1,i=new r.DERInteger({bigint:e}),n=new r.DERInteger({bigint:t});return new r.DERSequence({array:[i,n]}).getEncodedHex()},eS.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.crypto&&eS.crypto||(eS.crypto={}),eS.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new M(e,16)}this.getByName=function(r){var i=r;if(void 0!==t[i]&&(i=t[r]),void 0!==e[i])return e[i];throw"unregistered EC curve name: "+i},this.regist=function(i,n,o,s,a,l,u,c,d,h,f,p){e[i]={};var g=r(o),y=r(s),m=r(a),v=r(l),_=r(u),b=new ey(g,y,m),w=b.decodePointHex("04"+c+d);e[i].name=i,e[i].keylen=n,e[i].curve=b,e[i].G=w,e[i].n=v,e[i].h=_,e[i].oid=f,e[i].info=p;for(var S=0;S<h.length;S++)t[h[S]]=i}},eS.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),eS.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),eS.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),eS.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),eS.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),eS.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),eS.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),eS.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),eS.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),eS.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var e1=(r=function(e,t,r){return i(E.AES,e,t,r)},i=function(e,t,r,i){var n=E.enc.Hex.parse(t),o=E.enc.Hex.parse(r),s=E.enc.Hex.parse(i),a={};a.key=o,a.iv=s,a.ciphertext=n;var l=e.decrypt(a,o,{iv:s});return E.enc.Hex.stringify(l)},n=function(e,t,r){return o(E.AES,e,t,r)},o=function(e,t,r,i){var n=E.enc.Hex.parse(t),o=E.enc.Hex.parse(r),s=E.enc.Hex.parse(i),a=e.encrypt(n,o,{iv:s}),l=E.enc.Hex.parse(a.toString());return E.enc.Base64.stringify(l)},s={"AES-256-CBC":{proc:r,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:r,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:r,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,t,r){return i(E.TripleDES,e,t,r)},eproc:function(e,t,r){return o(E.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,t,r){return i(E.DES,e,t,r)},eproc:function(e,t,r){return o(E.DES,e,t,r)},keylen:8,ivlen:8}},a=function(e){var t={},r=e.match(RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var i=e.match(RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));i&&(t.type=i[1]);var n=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(n=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(n=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=n&&-1!=s){var a=e.substring(n+2*o,s-o);t.data=a=a.replace(/\s+/g,"")}return t},l=function(e,t,r){for(var i=r.substring(0,16),n=E.enc.Hex.parse(i),o=E.enc.Utf8.parse(t),a=s[e].keylen+s[e].ivlen,l="",u=null;;){var c=E.algo.MD5.create();if(null!=u&&c.update(u),c.update(o),c.update(n),u=c.finalize(),(l+=E.enc.Hex.stringify(u)).length>=2*a)break}var d={};return d.keyhex=l.substr(0,2*s[e].keylen),d.ivhex=l.substr(2*s[e].keylen,2*s[e].ivlen),d},u=function(e,t,r,i){var n=E.enc.Base64.parse(e),o=E.enc.Hex.stringify(n);return(0,s[t].proc)(o,r,i)},{version:"1.0.0",parsePKCS5PEM:function(e){return a(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return l(e,t,r)},decryptKeyB64:function(e,t,r,i){return u(e,t,r,i)},getDecryptedKeyHex:function(e,t){var r=a(e),i=(r.type,r.cipher),n=r.ivsalt,o=r.data,s=l(i,t,n).keyhex;return u(o,i,s,n)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,i,n){var o,a,u,c,d,h="";if(void 0!==i&&null!=i||(i="AES-256-CBC"),void 0===s[i])throw Error("KEYUTIL unsupported algorithm: "+i);void 0!==n&&null!=n||(n=(o=s[i].ivlen,a=E.lib.WordArray.random(o),E.enc.Hex.stringify(a)).toUpperCase());var f=(u=i,c=l(i,r,n).keyhex,d=n,(0,s[u].eproc)(t,c,d));return"-----BEGIN "+e+" PRIVATE KEY-----\r\nProc-Type: 4,ENCRYPTED\r\n"+("DEK-Info: "+i+","+n+"\r\n")+"\r\n"+f.replace(/(.{64})/g,"$1\r\n")+("\r\n-----END "+e+" PRIVATE KEY-----\r\n")},parseHexOfEncryptedPKCS8:function(e){var t=ek.getChildIdx,r=ek.getV,i={},n=t(e,0);if(2!=n.length)throw Error("malformed format: SEQUENCE(0).items != 2: "+n.length);i.ciphertext=r(e,n[1]);var o=t(e,n[0]);if(2!=o.length)throw Error("malformed format: SEQUENCE(0.0).items != 2: "+o.length);if("2a864886f70d01050d"!=r(e,o[0]))throw Error("this only supports pkcs5PBES2");var s=t(e,o[1]);if(2!=o.length)throw Error("malformed format: SEQUENCE(0.0.1).items != 2: "+s.length);var a=t(e,s[1]);if(2!=a.length)throw Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+a.length);if("2a864886f70d0307"!=r(e,a[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=r(e,a[1]);var l=t(e,s[0]);if(2!=l.length)throw Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length);if("2a864886f70d01050c"!=r(e,l[0]))throw Error("this only supports pkcs5PBKDF2");var u=t(e,l[1]);if(u.length<2)throw Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length);i.pbkdf2Salt=r(e,u[0]);var c=r(e,u[1]);try{i.pbkdf2Iter=parseInt(c,16)}catch(e){throw Error("malformed format pbkdf2Iter: "+c)}return i},getPBKDF2KeyHexFromParam:function(e,t){var r=E.enc.Hex.parse(e.pbkdf2Salt),i=e.pbkdf2Iter,n=E.PBKDF2(t,r,{keySize:6,iterations:i});return E.enc.Hex.stringify(n)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=eH(e,"ENCRYPTED PRIVATE KEY"),i=this.parseHexOfEncryptedPKCS8(r),n=e1.getPBKDF2KeyHexFromParam(i,t),o={};o.ciphertext=E.enc.Hex.parse(i.ciphertext);var s=E.enc.Hex.parse(n),a=E.enc.Hex.parse(i.encryptionSchemeIV),l=E.TripleDES.decrypt(o,s,{iv:a});return E.enc.Hex.stringify(l)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=ek.getChildIdx,r=ek.getV,i={algparam:null};if("30"!=e.substr(0,2))throw Error("malformed plain PKCS8 private key(code:001)");var n=t(e,0);if(n.length<3)throw Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(n[1],2))throw Error("malformed PKCS8 private key(code:003)");var o=t(e,n[1]);if(2!=o.length)throw Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(o[0],2))throw Error("malformed PKCS8 private key(code:005)");if(i.algoid=r(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=r(e,o[1])),"04"!=e.substr(n[2],2))throw Error("malformed PKCS8 private key(code:006)");return i.keyidx=ek.getVidx(e,n[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=eH(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new ef;else if("2a8648ce380401"==r.algoid)t=new eS.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw Error("unsupported private key algorithm");t=new eS.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=ek.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new ef;else if("2a8648ce380401"===r)t=new eS.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw Error("unsupported PKCS#8 public key hex");t=new eS.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ek.getChildIdx,r=ek.getV,i={};if("30"!=e.substr(0,2))throw Error("malformed RSA key(code:001)");var n=t(e,0);if(2!=n.length)throw Error("malformed RSA key(code:002)");if("02"!=e.substr(n[0],2))throw Error("malformed RSA key(code:003)");if(i.n=r(e,n[0]),"02"!=e.substr(n[1],2))throw Error("malformed RSA key(code:004)");return i.e=r(e,n[1]),i},parsePublicPKCS8Hex:function(e){var t=ek.getChildIdx,r=ek.getV,i={algparam:null},n=t(e,0);if(2!=n.length)throw Error("outer DERSequence shall have 2 elements: "+n.length);var o=n[0];if("30"!=e.substr(o,2))throw Error("malformed PKCS8 public key(code:001)");var s=t(e,o);if(2!=s.length)throw Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(s[0],2))throw Error("malformed PKCS8 public key(code:003)");if(i.algoid=r(e,s[0]),"06"==e.substr(s[1],2)?i.algparam=r(e,s[1]):"30"==e.substr(s[1],2)&&(i.algparam={},i.algparam.p=ek.getVbyList(e,s[1],[0],"02"),i.algparam.q=ek.getVbyList(e,s[1],[1],"02"),i.algparam.g=ek.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(n[1],2))throw Error("malformed PKCS8 public key(code:004)");return i.key=r(e,n[1]).substr(2),i}});function e2(e,t){for(var r="",i=t/4-e.length,n=0;n<i;n++)r+="0";return r+e}function e6(e,t,r){for(var i="",n=0;i.length<t;)i+=eL(r(eD(e+String.fromCharCode.apply(String,[(0xff000000&n)>>24,(0xff0000&n)>>16,(65280&n)>>8,255&n])))),n+=1;return i}function e3(e){for(var t in eS.crypto.Util.DIGESTINFOHEAD){var r=eS.crypto.Util.DIGESTINFOHEAD[t],i=r.length;if(e.substring(0,i)==r)return[t,e.substring(i)]}return[]}function e5(e){var t,r=ek.getChildIdx,i=ek.getV,n=ek.getTLV,o=ek.getVbyList,s=ek.getVbyListEx,a=ek.getTLVbyList,l=ek.getTLVbyListEx,u=ek.getIdxbyList,c=ek.getIdxbyListEx,d=ek.getVidx,h=ek.getInt,f=ek.oidname,p=ek.hextooidstr;try{t=eS.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=a(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=h(a(e,0,[0]),0);if(t<0||2<t)throw Error("malformed version field");return this.version=t+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return s(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return f(s(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return a(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return a(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=o(this.hex,0,[0,4+this.foffset,0]);return decodeURIComponent(e=e.replace(/(..)/g,"%$1"))},this.getNotAfter=function(){var e=o(this.hex,0,[0,4+this.foffset,1]);return decodeURIComponent(e=e.replace(/(..)/g,"%$1"))},this.getPublicKeyHex=function(){return ek.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return u(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return e1.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=a(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),i=a(this.hex,0,[0],"30"),n=new eS.crypto.Signature({alg:t});return n.init(e),n.updateHex(i),n.verify(r)},this.parseExt=function(e){var t,n,s;if(void 0===e){if(s=this.hex,3!==this.version)return -1;t=u(s,0,[0,7,0],"30"),n=r(s,t)}else{var a=u(s=eH(e),0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(s,a))return void(this.aExtInfo=[]);t=u(s,0,[0,3,0,1,0],"30"),n=r(s,t),this.hex=s}this.aExtInfo=[];for(var l=0;l<n.length;l++){var c={critical:!1},h=0;3===r(s,n[l]).length&&(c.critical=!0,h=1),c.oid=ek.hextooidstr(o(s,n[l],[0],"06"));var f=u(s,n[l],[1+h]);c.vidx=d(s,f),this.aExtInfo.push(c)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=eS.asn1.x509.OID.name2oid(e)),""!==r){for(var i=0;i<t.length;i++)if(t[i].oid===r)return t[i]}},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=n(this.hex,r.vidx),t=r.critical}var o={extname:"basicConstraints"};if(t&&(o.critical=!0),"3000"===e)return o;if("30030101ff"===e)return o.cA=!0,o;if("30060101ff02"===e.substr(0,12)){var s=parseInt(i(e,10),16);return o.cA=!0,o.pathLen=s,o}throw Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=n(this.hex,r.vidx),t=r.critical}var i={extname:"keyUsage"};return t&&(i.critical=!0),i.names=this.getExtKeyUsageString(e).split(","),i},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=n(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=[],i=0;i<t.length;i++)"1"==t.substr(i,1)&&r.push(e5.KEYUSAGE_NAME[i]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=n(this.hex,r.vidx),t=r.critical}var o={extname:"subjectKeyIdentifier"};return t&&(o.critical=!0),o.kid={hex:i(e,0)},o},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var o=this.getExtInfo("authorityKeyIdentifier");if(void 0===o)return;e=n(this.hex,o.vidx),t=o.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=r(e,0),l=0;l<a.length;l++){var u=e.substr(a[l],2);if("80"===u&&(s.kid={hex:i(e,a[l])}),"a1"===u){var c=n(e,a[l]);s.issuer=this.getGeneralNames(c)[0].dn}"82"===u&&(s.sn={hex:i(e,a[l])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var o=this.getExtInfo("extKeyUsage");if(void 0===o)return;e=n(this.hex,o.vidx),t=o.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=r(e,0),l=0;l<a.length;l++)s.array.push(f(i(e,a[l])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=[],o=n(this.hex,e.vidx);if(""===o)return t;for(var s=r(o,0),a=0;a<s.length;a++)t.push(f(i(o,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=n(this.hex,r.vidx),t=r.critical}var i={extname:"subjectAltName",array:[]};return t&&(i.critical=!0),i.array=this.getGeneralNames(e),i},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=n(this.hex,r.vidx),t=r.critical}var i={extname:"issuerAltName",array:[]};return t&&(i.critical=!0),i.array=this.getGeneralNames(e),i},this.getGeneralNames=function(e){for(var t=r(e,0),i=[],o=0;o<t.length;o++){var s=this.getGeneralName(n(e,t[o]));void 0!==s&&i.push(s)}return i},this.getGeneralName=function(e){var t=e.substr(0,2),r=i(e,0),n=eL(r);return"81"==t?{rfc822:n}:"82"==t?{dns:n}:"86"==t?{uri:n}:"87"==t?{ip:eJ(r)}:"a4"==t?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var e,t,o,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=[],l=n(this.hex,s.vidx),u=r(l,0),c=0;c<u.length;c++)o=l.substr(u[c],2),e=i(l,u[c]),"81"===o&&a.push(["MAIL",t=eO(e)]),"82"===o&&a.push(["DNS",t=eO(e)]),"84"===o&&a.push(["DN",t=e5.hex2dn(e,0)]),"86"===o&&a.push(["URI",t=eO(e)]),"87"===o&&a.push(["IP",t=eJ(e)]);return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var i=this.getExtInfo("cRLDistributionPoints");if(void 0===i)return;e=n(this.hex,i.vidx),t=i.critical}var o={extname:"cRLDistributionPoints",array:[]};t&&(o.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var l=n(e,s[a]);o.array.push(this.getDistributionPoint(l))}return o},this.getDistributionPoint=function(e){for(var t={},i=r(e,0),o=0;o<i.length;o++){var s=e.substr(i[o],2),a=n(e,i[o]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},i=r(e,0),o=0;o<i.length;o++){var s=e.substr(i[o],2),a=n(e,i[o]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=[],i=r(this.hex,e.vidx),n=0;n<i.length;n++)try{var s=eO(o(this.hex,i[n],[0,0,0],"86"));t.push(s)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},i=r(this.hex,e.vidx),n=0;n<i.length;n++){var s=o(this.hex,i[n],[0],"06"),a=o(this.hex,i[n],[1],"86");"2b06010505073001"===s&&t.ocsp.push(eO(a)),"2b06010505073002"===s&&t.caissuer.push(eO(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var i=this.getExtInfo("authorityInfoAccess");if(void 0===i)return;e=n(this.hex,i.vidx),t=i.critical}var a={extname:"authorityInfoAccess",array:[]};t&&(a.critical=!0);for(var l=r(e,0),u=0;u<l.length;u++){var c=s(e,l[u],[0],"06"),d=eO(o(e,l[u],[1],"86"));if("2b06010505073001"==c)a.array.push({ocsp:d});else{if("2b06010505073002"!=c)throw Error("unknown method: "+c);a.array.push({caissuer:d})}}return a},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var i=this.getExtInfo("certificatePolicies");if(void 0===i)return;e=n(this.hex,i.vidx),t=i.critical}var o={extname:"certificatePolicies",array:[]};t&&(o.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var l=n(e,s[a]),u=this.getPolicyInformation(l);o.array.push(u)}return o},this.getPolicyInformation=function(e){var t={};t.policyoid=f(o(e,0,[0],"06"));var i=c(e,0,[1],"30");if(-1!=i){t.array=[];for(var s=r(e,i),a=0;a<s.length;a++){var l=n(e,s[a]),u=this.getPolicyQualifierInfo(l);t.array.push(u)}}return t},this.getPolicyQualifierInfo=function(e){var t={},r=o(e,0,[0],"06");if("2b06010505070201"===r)t.cps=eL(s(e,0,[1],"16"));else if("2b06010505070202"===r){var i=a(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},i=r(e,0),o=0;o<i.length;o++){var s=n(e,i[o]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type=({"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"})[e.substr(0,2)],t.str=eL(i(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:i(e,0)},r;throw Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(i(e,0),16),r;throw Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};return t&&(r.critical=!0),r.hex=i(e,0),r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var i=this.getExtInfo("adobeTimeStamp");if(void 0===i)return;e=n(this.hex,i.vidx),t=i.critical}var o={extname:"adobeTimeStamp"};t&&(o.critical=!0);var s=r(e,0);if(s.length>1){var a=n(e,s[1]),l=this.getGeneralName(a);null!=l.uri&&(o.uri=l.uri)}if(s.length>2){var u=n(e,s[2]);"0101ff"==u&&(o.reqauth=!0),"010100"==u&&(o.reqauth=!1)}return o},this.getX500NameRule=function(e){for(var t=null,r=[],i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.length;o++)r.push(n[o]);for(i=0;i<r.length;i++){var s=r[i],a=s.ds,l=s.value,u=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=u)return"mixed";if(eS.lang.String.isMail(l))continue;return"mixed"}if("C"==u){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],i=r(e,0),o=0;o<i.length;o++)t.push(this.getRDN(n(e,i[o])));return t},this.getRDN=function(e){for(var t=[],i=r(e,0),o=0;o<i.length;o++)t.push(this.getAttrTypeAndValue(n(e,i[o])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},i=r(e,0),n=o(e,i[0],[],"06"),s=o(e,i[1],[]),a=eS.asn1.ASN1Util.oidHexToInt(n);return t.type=eS.asn1.x509.OID.oid2atype(a),t.ds=this.HEX2STAG[e.substr(i[1],2)],"bmp"!=t.ds?t.value=eO(s):t.value=eZ(s),t},this.readCertPEM=function(e){this.readCertHex(eH(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{u(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=eB(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=c(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30"));for(var t=[],i=r(e,0),o=0;o<i.length;o++){var s=n(e,i[o]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw Error("wrong number elements in Extension: "+t+" "+e);var i=p(o(e,0,[0],"06")),n=!1;3==t&&"0101ff"==a(e,0,[1])&&(n=!0);var s=a(e,0,[t-1,0]),l=void 0;if("2.5.29.14"==i?l=this.getExtSubjectKeyIdentifier(s,n):"2.5.29.15"==i?l=this.getExtKeyUsage(s,n):"2.5.29.17"==i?l=this.getExtSubjectAltName(s,n):"2.5.29.18"==i?l=this.getExtIssuerAltName(s,n):"2.5.29.19"==i?l=this.getExtBasicConstraints(s,n):"2.5.29.31"==i?l=this.getExtCRLDistributionPoints(s,n):"2.5.29.32"==i?l=this.getExtCertificatePolicies(s,n):"2.5.29.35"==i?l=this.getExtAuthorityKeyIdentifier(s,n):"2.5.29.37"==i?l=this.getExtExtKeyUsage(s,n):"1.3.6.1.5.5.7.1.1"==i?l=this.getExtAuthorityInfoAccess(s,n):"2.5.29.20"==i?l=this.getExtCRLNumber(s,n):"2.5.29.21"==i?l=this.getExtCRLReason(s,n):"1.3.6.1.5.5.7.48.1.2"==i?l=this.getExtOcspNonce(s,n):"1.3.6.1.5.5.7.48.1.5"==i?l=this.getExtOcspNoCheck(s,n):"1.2.840.113583.1.1.9.1"==i&&(l=this.getExtAdobeTimeStamp(s,n)),null!=l)return l;var u={extname:i,extn:s};return n&&(u.critical=!0),u},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array){for(var i=r.array,n=0;n<i.length;n++)if(null!=i[n].dpname&&null!=i[n].dpname.full)for(var o=i[n].dpname.full,s=0;s<o.length;s++){var a=o[n];null!=a.uri&&(a.uri=t)}}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var i=r.array,n=0;n<i.length;n++)null!=i[n].ocsp&&(i[n].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var i=r.array,n=0;n<i.length;n++)null!=i[n].caissuer&&(i[n].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map(function(e){return e.map(function(e){return(e.type+"="+e.value).replace(/\+/,"\\+")}).join("+").replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var e,t,r;if(e="Basic Fields\n  serial number: "+this.getSerialNumberHex()+"\n"+("  signature algorithm: "+this.getSignatureAlgorithmField())+"\n"+("  issuer: "+this.getIssuerString())+"\n"+("  notBefore: "+this.getNotBefore())+"\n"+("  notAfter: "+this.getNotAfter())+"\n"+("  subject: "+this.getSubjectString())+"\n  subject public key info: \n"+("    key algorithm: "+(t=this.getPublicKey()).type)+"\n","RSA"===t.type&&(e+="    n="+eQ(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+eQ(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var i=0;i<r.length;i++){var n=r[i],o=eS.asn1.x509.OID.oid2name(n.oid);""===o&&(o=n.oid);var s="";if(!0===n.critical&&(s="CRITICAL"),e+="  "+o+" "+s+":\n","basicConstraints"===o){var a=this.getExtBasicConstraints();void 0===a.cA?e+="    {}\n":(e+="    cA=true",void 0!==a.pathLen&&(e+=", pathLen="+a.pathLen),e+="\n")}else if("keyUsage"===o)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===o)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===o){var l=this.getExtAuthorityKeyIdentifier();void 0!==l.kid&&(e+="    kid="+l.kid.hex+"\n")}else"extKeyUsage"===o?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===o?e+="    "+JSON.stringify(this.getExtSubjectAltName().array).replace(/[\[\]\{\}\"]/g,"")+"\n":"cRLDistributionPoints"===o?e+=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];try{void 0!==n.dpname.full[0].uri&&(t+="    "+n.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==n.dname.full[0].dn.hex&&(t+="    "+e5.hex2dn(n.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t}(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===o?e+=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];void 0!==n.caissuer&&(t+="    caissuer: "+n.caissuer+"\n"),void 0!==n.ocsp&&(t+="    ocsp: "+n.ocsp+"\n")}return t}(this.getExtAuthorityInfoAccess()):"certificatePolicies"===o&&(e+=function(e){for(var t="",r=e.array,i=0;i<r.length;i++){var n=r[i];if(t+="    policy oid: "+n.policyoid+"\n",void 0!==n.array)for(var o=0;o<n.array.length;o++){var s=n.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t}(this.getExtCertificatePolicies()))}}return e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",e+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):eS.lang.String.isHex(e)&&this.readCertHex(e))}e1.getKey=function(e,t,r){var i,n=(f=ek).getChildIdx,o=(f.getV,f.getVbyList),s=eS.crypto,a=s.ECDSA,l=s.DSA;if(void 0!==ef&&e instanceof ef||void 0!==a&&e instanceof a||void 0!==l&&e instanceof l)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new ef).setPublic(e.n,e.e),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(E=new ef).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(E=new ef).setPrivate(e.n,e.e,e.d),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(E=new l).setPublic(e.p,e.q,e.g,e.y),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(E=new l).setPrivate(e.p,e.q,e.g,e.y,e.x),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new ef).setPublic(eN(e.n),eN(e.e)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(E=new ef).setPrivateEx(eN(e.n),eN(e.e),eN(e.d),eN(e.p),eN(e.q),eN(e.dp),eN(e.dq),eN(e.qi)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(E=new ef).setPrivate(eN(e.n),eN(e.e),eN(e.d)),E;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var u=(x=new a({curve:e.crv})).ecparams.keylen/4,c="04"+("0000000000"+eN(e.x)).slice(-u)+("0000000000"+eN(e.y)).slice(-u);return x.setPublicKeyHex(c),x}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){u=(x=new a({curve:e.crv})).ecparams.keylen/4,c="04"+("0000000000"+eN(e.x)).slice(-u)+("0000000000"+eN(e.y)).slice(-u);var d=("0000000000"+eN(e.d)).slice(-u);return x.setPublicKeyHex(c),x.setPrivateKeyHex(d),x}if("pkcs5prv"===r){var h,f=ek;if(9===(h=n(e,0)).length)(E=new ef).readPKCS5PrvKeyHex(e);else if(6===h.length)(E=new l).readPKCS5PrvKeyHex(e);else{if(!(h.length>2&&"04"===e.substr(h[1],2)))throw Error("unsupported PKCS#1/5 hexadecimal key");(E=new a).readPKCS5PrvKeyHex(e)}return E}if("pkcs8prv"===r)return e1.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return e1._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return e5.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return e5.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var p=eH(e,"PUBLIC KEY");return e1._getKeyFromPublicPKCS8Hex(p)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var g=eH(e,"RSA PRIVATE KEY");return e1.getKey(g,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var y=o(i=eH(e,"DSA PRIVATE KEY"),0,[1],"02"),m=o(i,0,[2],"02"),v=o(i,0,[3],"02"),_=o(i,0,[4],"02"),b=o(i,0,[5],"02");return(E=new l).setPrivate(new M(y,16),new M(m,16),new M(v,16),new M(_,16),new M(b,16)),E}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return g=eH(e,"EC PRIVATE KEY"),e1.getKey(g,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return e1.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var w=e1.getDecryptedKeyHex(e,t),S=new ef;return S.readPKCS5PrvKeyHex(w),S}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var x,E=o(i=e1.getDecryptedKeyHex(e,t),0,[1],"04"),k=o(i,0,[2,0],"06"),F=o(i,0,[3,0],"03").substr(2);if(void 0===eS.crypto.OID.oidhex2name[k])throw Error("undefined OID(hex) in KJUR.crypto.OID: "+k);return(x=new a({curve:eS.crypto.OID.oidhex2name[k]})).setPublicKeyHex(F),x.setPrivateKeyHex(E),x.isPublic=!1,x}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return y=o(i=e1.getDecryptedKeyHex(e,t),0,[1],"02"),m=o(i,0,[2],"02"),v=o(i,0,[3],"02"),_=o(i,0,[4],"02"),b=o(i,0,[5],"02"),(E=new l).setPrivate(new M(y,16),new M(m,16),new M(v,16),new M(_,16),new M(b,16)),E;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return e1.getKeyFromEncryptedPKCS8PEM(e,t);throw Error("not supported argument")},e1.generateKeypair=function(e,t){if("RSA"==e){(o=new ef).generate(t,"10001"),o.isPrivate=!0,o.isPublic=!0;var r=new ef,i=o.n.toString(16),n=o.e.toString(16);return r.setPublic(i,n),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}if("EC"==e){var o,s,a=new eS.crypto.ECDSA({curve:t}).generateKeyPairHex();return(o=new eS.crypto.ECDSA({curve:t})).setPublicKeyHex(a.ecpubhex),o.setPrivateKeyHex(a.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(r=new eS.crypto.ECDSA({curve:t})).setPublicKeyHex(a.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=r,s}throw Error("unknown algorithm: "+e)},e1.getPEM=function(e,t,r,i,n,o){var s=eS,a=s.asn1,l=a.DERObjectIdentifier,u=a.DERInteger,c=a.ASN1Util.newObject,d=a.x509.SubjectPublicKeyInfo,h=s.crypto,f=h.DSA,p=h.ECDSA;function g(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function m(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==ef&&e instanceof ef||void 0!==f&&e instanceof f||void 0!==p&&e instanceof p)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return eB(w=new d(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==ef&&e instanceof ef&&(void 0===r||null==r)&&1==e.isPrivate)return eB(w=g(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===r||null==r)&&1==e.isPrivate){var v=new l({name:e.curveName}).getEncodedHex(),_=y(e).getEncodedHex(),b="";return b+=eB(v,"EC PARAMETERS"),b+=eB(_,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===r||null==r)&&1==e.isPrivate)return eB(w=m(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==ef&&e instanceof ef&&void 0!==r&&null!=r&&1==e.isPrivate){var w=g(e).getEncodedHex();return void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,r,i,o)}if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==r&&null!=r&&1==e.isPrivate)return w=y(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,r,i,o);if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==r&&null!=r&&1==e.isPrivate)return w=m(e).getEncodedHex(),void 0===i&&(i="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,r,i,o);var S=function(e,t){var r=x(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},x=function(e,t){var r=E.lib.WordArray.random(8),i=E.lib.WordArray.random(8),n=E.PBKDF2(t,r,{keySize:6,iterations:100}),o=E.enc.Hex.parse(e),s=E.TripleDES.encrypt(o,n,{iv:i})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=E.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=E.enc.Hex.stringify(i),a};if("PKCS8PRV"==t&&null!=ef&&e instanceof ef&&1==e.isPrivate){var k=g(e).getEncodedHex();return w=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(_=S(w,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return k=new c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(_=S(w,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return k=new u({bigint:e.x}).getEncodedHex(),w=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:k}}]}).getEncodedHex(),void 0===r||null==r?eB(w,"PRIVATE KEY"):eB(_=S(w,r),"ENCRYPTED PRIVATE KEY");throw Error("unsupported object nor format")},e1.getKeyFromCSRPEM=function(e){var t=eH(e,"CERTIFICATE REQUEST");return e1.getKeyFromCSRHex(t)},e1.getKeyFromCSRHex=function(e){var t=e1.parseCSRHex(e);return e1.getKey(t.p8pubkeyhex,null,"pkcs8pub")},e1.parseCSRHex=function(e){var t=ek.getChildIdx,r=ek.getTLV,i={};if("30"!=e.substr(0,2))throw Error("malformed CSR(code:001)");var n=t(e,0);if(n.length<1)throw Error("malformed CSR(code:002)");if("30"!=e.substr(n[0],2))throw Error("malformed CSR(code:003)");var o=t(e,n[0]);if(o.length<3)throw Error("malformed CSR(code:004)");return i.p8pubkeyhex=r(e,o[2]),i},e1.getKeyID=function(e){"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=e1.getKey(e));var t=eH(e1.getPEM(e)),r=ek.getIdxbyList(t,0,[1]),i=ek.getV(t,r).substring(2);return eS.crypto.Util.hashHex(i,"sha1")},e1.getJWKFromKey=function(e){var t,r={};if(e instanceof ef&&e.isPrivate)return r.kty="RSA",r.n=eP(e.n.toString(16)),r.e=eP(e.e.toString(16)),r.d=eP(e.d.toString(16)),r.p=eP(e.p.toString(16)),r.q=eP(e.q.toString(16)),r.dp=eP(e.dmp1.toString(16)),r.dq=eP(e.dmq1.toString(16)),r.qi=eP(e.coeff.toString(16)),r;if(e instanceof ef&&e.isPublic)return r.kty="RSA",r.n=eP(e.n.toString(16)),r.e=eP(e.e.toString(16)),r;if(e instanceof eS.crypto.ECDSA&&e.isPrivate){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw Error("unsupported curve name for JWT: "+t);var i=e.getPublicKeyXYHex();return r.kty="EC",r.crv=t,r.x=eP(i.x),r.y=eP(i.y),r.d=eP(e.prvKeyHex),r}if(e instanceof eS.crypto.ECDSA&&e.isPublic){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw Error("unsupported curve name for JWT: "+t);return i=e.getPublicKeyXYHex(),r.kty="EC",r.crv=t,r.x=eP(i.x),r.y=eP(i.y),r}throw Error("not supported key object")},ef.getPosArrayOfChildrenFromHex=function(e){return ek.getChildIdx(e,0)},ef.getHexValueArrayOfChildrenFromHex=function(e){var t,r=ek.getV,i=r(e,(t=ef.getPosArrayOfChildrenFromHex(e))[0]),n=r(e,t[1]),o=r(e,t[2]),s=r(e,t[3]),a=r(e,t[4]),l=r(e,t[5]),u=r(e,t[6]),c=r(e,t[7]),d=r(e,t[8]);return(t=[]).push(i,n,o,s,a,l,u,c,d),t},ef.prototype.readPrivateKeyFromPEMString=function(e){var t=eH(e),r=ef.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},ef.prototype.readPKCS5PrvKeyHex=function(e){var t=ef.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ef.prototype.readPKCS8PrvKeyHex=function(e){var t,r,i,n,o,s,a,l,u=ek.getVbyListEx;if(!1===ek.isASN1HEX(e))throw Error("not ASN.1 hex string");try{t=u(e,0,[2,0,1],"02"),r=u(e,0,[2,0,2],"02"),i=u(e,0,[2,0,3],"02"),n=u(e,0,[2,0,4],"02"),o=u(e,0,[2,0,5],"02"),s=u(e,0,[2,0,6],"02"),a=u(e,0,[2,0,7],"02"),l=u(e,0,[2,0,8],"02")}catch(e){throw Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,i,n,o,s,a,l)},ef.prototype.readPKCS5PubKeyHex=function(e){var t=ek.getV;if(!1===ek.isASN1HEX(e))throw Error("keyHex is not ASN.1 hex string");var r=ek.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw Error("wrong hex for PKCS#5 public key");var i=t(e,r[0]),n=t(e,r[1]);this.setPublic(i,n)},ef.prototype.readPKCS8PubKeyHex=function(e){if(!1===ek.isASN1HEX(e))throw Error("not ASN.1 hex string");if("06092a864886f70d010101"!==ek.getTLVbyListEx(e,0,[0,0]))throw Error("not PKCS8 RSA public key");var t=ek.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(t)},ef.prototype.readCertPubKeyHex=function(e,t){var r,i;(r=new e5).readCertHex(e),i=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)},RegExp("[^0-9a-f]","gi"),ef.prototype.sign=function(e,t){var r=eS.crypto.Util.hashString(e,t);return this.signWithMessageHash(r,t)},ef.prototype.signWithMessageHash=function(e,t){var r=ed(eS.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return e2(this.doPrivate(r).toString(16),this.n.bitLength())},ef.prototype.signPSS=function(e,t,r){var i,n=(i=eD(e),eS.crypto.Util.hashHex(i,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(n,t,r)},ef.prototype.signWithMessageHashPSS=function(e,t,r){var i,n=eL(e),o=n.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),l=function(e){return eS.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw Error("invalid salt length");if(a<o+r+2)throw Error("data too long");var u="";r>0&&(u=Array(r),(new ec).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=eL(l(eD("\0\0\0\0\0\0\0\0"+n+u))),d=[];for(i=0;i<a-r-o-2;i+=1)d[i]=0;var h=String.fromCharCode.apply(String,d)+"\x01"+u,f=e6(c,h.length,l),p=[];for(i=0;i<h.length;i+=1)p[i]=h.charCodeAt(i)^f.charCodeAt(i);for(p[0]&=~(65280>>8*a-s&255),i=0;i<o;i++)p.push(c.charCodeAt(i));return p.push(188),e2(this.doPrivate(new M(p)).toString(16),this.n.bitLength())},ef.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=ed(t,16),i=this.n.bitLength();if(r.bitLength()>i)return!1;var n=this.doPublic(r).toString(16);if(n.length+3!=i/4)return!1;var o=e3(n.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==eS.crypto.Util.hashString(e,s)},ef.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=ed(t,16);if(r.bitLength()>this.n.bitLength())return 0;var i=e3(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=i.length&&(i[0],i[1]==e)},ef.prototype.verifyPSS=function(e,t,r,i){var n,o=(n=eD(e),eS.crypto.Util.hashHex(n,r));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(o,t,r,i)},ef.prototype.verifyWithMessageHashPSS=function(e,t,r,i){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n,o=new M(t,16),s=function(e){return eS.crypto.Util.hashHex(e,r)},a=eL(e),l=a.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===i||void 0===i)i=l;else if(-2===i)i=c-l-2;else if(i<-2)throw Error("invalid salt length");if(c<l+i+2)throw Error("data too long");var d=this.doPublic(o).toByteArray();for(n=0;n<d.length;n+=1)d[n]&=255;for(;d.length<c;)d.unshift(0);if(188!==d[c-1])throw Error("encoded message does not end in 0xbc");var h=(d=String.fromCharCode.apply(String,d)).substr(0,c-l-1),f=d.substr(h.length,l),p=65280>>8*c-u&255;if(0!=(h.charCodeAt(0)&p))throw Error("bits beyond keysize not zero");var g=e6(f,h.length,s),y=[];for(n=0;n<h.length;n+=1)y[n]=h.charCodeAt(n)^g.charCodeAt(n);y[0]&=~p;var m=c-l-i-2;for(n=0;n<m;n+=1)if(0!==y[n])throw Error("leftmost octets not zero");if(1!==y[m])throw Error("0x01 marker not found");return f===eL(s(eD("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-i)))))},ef.SALT_LEN_HLEN=-1,ef.SALT_LEN_MAX=-2,ef.SALT_LEN_RECOVER=-2,e5.hex2dn=function(e,t){void 0===t&&(t=0);var r=new e5;return ek.getTLV(e,t),r.getX500Name(e).str},e5.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw Error("malformed RDN");for(var r=[],i=ek.getChildIdx(e,t),n=0;n<i.length;n++)r.push(e5.hex2attrTypeValue(e,i[n]));return(r=r.map(function(e){return e.replace("+","\\+")})).join("+")},e5.hex2attrTypeValue=function(e,t){var r=ek.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw Error("malformed attribute type and value");var i=ek.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var n=r(e,i[0]),o=eS.asn1.ASN1Util.oidHexToInt(n);return eS.asn1.x509.OID.oid2atype(o)+"="+eL(r(e,i[1]))},e5.getPublicKeyFromCertHex=function(e){var t=new e5;return t.readCertHex(e),t.getPublicKey()},e5.getPublicKeyFromCertPEM=function(e){var t=new e5;return t.readCertPEM(e),t.getPublicKey()},e5.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,i=ek.getVbyList,n={};return n.algparam=null,(t=new e5).readCertPEM(e),n.keyhex=i(r=t.getPublicKeyHex(),0,[1],"03").substr(2),n.algoid=i(r,0,[0,0],"06"),"2a8648ce3d0201"===n.algoid&&(n.algparam=i(r,0,[0,1],"06")),n},e5.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==eS&&eS||(t.KJUR=eS={}),void 0!==eS.jws&&eS.jws||(eS.jws={}),eS.jws.JWS=function(){var e=eS.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var i=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var n=i[1],o=i[2],s=i[3],a=n+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=n,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var l=eN(s),u=ed(l,16);this.parsedJWS.sigvalH=l,this.parsedJWS.sigvalBI=u}var c=eE(n),d=eE(o);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=d,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},eS.jws.JWS.sign=function(e,t,r,i,n){var o,s,a,l,u=eS,c=u.jws.JWS,d=c.readSafeJSONString,h=c.isSafeJSONString,f=u.crypto,p=(f.ECDSA,f.Mac),g=f.Signature,y=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":w(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":w(t))&&(a=t,s=y.stringify(a)),"string"==typeof t){if(!h(s=t))throw"JWS Head is not safe JSON string: "+s;a=d(s)}if(l=r,"object"==(void 0===r?"undefined":w(r))&&(l=y.stringify(r)),""!=e&&null!=e||void 0===a.alg||(e=a.alg),""!=e&&null!=e&&void 0===a.alg&&(a.alg=e,s=y.stringify(a)),e!==a.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+a.alg;var m=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;m=c.jwsalg2sigalg[e];var v=ex(s)+"."+ex(l),_="";if("Hmac"==m.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var b=new p({alg:m,prov:"cryptojs",pass:i});b.updateString(v),_=b.doFinal()}else if(-1!=m.indexOf("withECDSA")){(o=new g({alg:m})).init(i,n),o.updateString(v);var S=o.sign();_=eS.crypto.ECDSA.asn1SigToConcatSig(S)}else"none"!=m&&((o=new g({alg:m})).init(i,n),o.updateString(v),_=o.sign());return v+"."+eP(_)},eS.jws.JWS.verify=function(e,t,r){var i,n=eS,o=n.jws.JWS,s=o.readSafeJSONString,a=n.crypto,l=a.ECDSA,u=a.Mac,c=a.Signature;void 0!==w(ef)&&(i=ef);var d=e.split(".");if(3!==d.length)return!1;var h=d[0]+"."+d[1],f=eN(d[2]),p=s(eE(d[0])),g=null,y=null;if(void 0===p.alg)throw"algorithm not specified in header";if(y=(g=p.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=e1.getKey(t)),!("RS"!=y&&"PS"!=y||t instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==y&&!(t instanceof l))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===o.jwsalg2sigalg[p.alg])throw"unsupported alg name: "+g;if("none"==(m=o.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var v=new u({alg:m,pass:t});return v.updateString(h),f==v.doFinal()}if(-1!=m.indexOf("withECDSA")){var _,b=null;try{b=l.concatSigToASN1Sig(f)}catch(e){return!1}return(_=new c({alg:m})).init(t),_.updateString(h),_.verify(b)}return(_=new c({alg:m})).init(t),_.updateString(h),_.verify(f)},eS.jws.JWS.parse=function(e){var t,r,i,n=e.split("."),o={};if(2!=n.length&&3!=n.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=n[0],r=n[1],3==n.length&&(i=n[2]),o.headerObj=eS.jws.JWS.readSafeJSONString(eE(t)),o.payloadObj=eS.jws.JWS.readSafeJSONString(eE(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=eE(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==i&&(o.sigHex=eN(i)),o},eS.jws.JWS.verifyJWT=function(e,t,r){var i=eS.jws,n=i.JWS,o=n.readSafeJSONString,s=n.inArray,a=n.includedArray,l=e.split("."),u=l[0],c=l[1],d=(eN(l[2]),o(eE(u))),h=o(eE(c));if(void 0===d.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(d.alg,r.alg)||void 0!==h.iss&&"object"===w(r.iss)&&!s(h.iss,r.iss)||void 0!==h.sub&&"object"===w(r.sub)&&!s(h.sub,r.sub))return!1;if(void 0!==h.aud&&"object"===w(r.aud)){if("string"==typeof h.aud){if(!s(h.aud,r.aud))return!1}else if("object"==w(h.aud)&&!a(h.aud,r.aud))return!1}var f=i.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(f=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+r.gracePeriod<f)&&!(void 0!==h.nbf&&"number"==typeof h.nbf&&f<h.nbf-r.gracePeriod)&&!(void 0!==h.iat&&"number"==typeof h.iat&&f<h.iat-r.gracePeriod)&&(void 0===h.jti||void 0===r.jti||h.jti===r.jti)&&!!n.verify(e,t,r.alg)},eS.jws.JWS.includedArray=function(e,t){var r=eS.jws.JWS.inArray;if(null===e||"object"!==(void 0===e?"undefined":w(e))||"number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t))return!1;return!0},eS.jws.JWS.inArray=function(e,t){if(null===t||"object"!==(void 0===t?"undefined":w(t))||"number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},eS.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},eS.jws.JWS.isSafeJSONString=function(e,t,r){var i=null;try{return"object"!=(void 0===(i=em(e))?"undefined":w(i))||i.constructor===Array?0:(t&&(t[r]=i),1)}catch(e){return 0}},eS.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=em(e))?"undefined":w(t))||t.constructor===Array?null:t}catch(e){return null}},eS.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},eS.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",'+('"kty":"'+e.kty)+'",'+('"n":"'+e.n)+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",'+('"kty":"'+e.kty)+'",'+('"x":"'+e.x)+'",'+('"y":"'+e.y)+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",'+('"k":"'+e.k)+'"}'}var r=eD(t);return eP(eS.crypto.Util.hashHex(r,"sha256"))},eS.jws.IntDate={},eS.jws.IntDate.get=function(e){var t=eS.jws.IntDate,r=t.getNow,i=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return i(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},eS.jws.IntDate.getZulu=function(e){return eK(e)},eS.jws.IntDate.getNow=function(){return~~(new Date/1e3)},eS.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},eS.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=ec,t.rng_seed_time=es,t.BigInteger=M,t.RSAKey=ef,t.EDSA=eS.crypto.EDSA,t.DSA=eS.crypto.DSA,t.Signature=eS.crypto.Signature,t.MessageDigest=eS.crypto.MessageDigest,t.Mac=eS.crypto.Mac,t.Cipher=eS.crypto.Cipher,t.KEYUTIL=e1,t.ASN1HEX=ek,t.X509=e5,t.CryptoJS=E,t.b64tohex=D,t.b64toBA=U,t.stoBA=eF,t.BAtos=eI,t.BAtohex=eA,t.stohex=eT,t.stob64=function(e){return L(eT(e))},t.stob64u=function(e){return eR(L(eT(e)))},t.b64utos=function(e){return eI(U(eC(e)))},t.b64tob64u=eR,t.b64utob64=eC,t.hex2b64=L,t.hextob64u=eP,t.b64utohex=eN,t.utf8tob64u=ex,t.b64utoutf8=eE,t.utf8tob64=function(e){return L(eV(eG(e)))},t.b64toutf8=function(e){return decodeURIComponent(eW(D(e)))},t.utf8tohex=ej,t.hextoutf8=eO,t.hextorstr=eL,t.rstrtohex=eD,t.hextob64=function(e){return L(e)},t.hextob64nl=eU,t.b64nltohex=eM,t.hextopem=eB,t.pemtohex=eH,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),i=0;i<e.length/2;i++)r.setUint8(i,parseInt(e.substr(2*i,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",r=new DataView(e),i=0;i<e.byteLength;i++)t+=("00"+r.getUint8(i).toString(16)).slice(-2);return t},t.zulutomsec=e$,t.zulutosec=eK,t.zulutodate=function(e){return new Date(e$(e))},t.datetozulu=function(e,t,r){var i,n=e.getUTCFullYear();if(t){if(n<1950||2049<n)throw"not proper year for UTCTime: "+n;i=(""+n).slice(-2)}else i=("000"+n).slice(-4);if(i+=("0"+(e.getUTCMonth()+1)).slice(-2),i+=("0"+e.getUTCDate()).slice(-2),i+=("0"+e.getUTCHours()).slice(-2),i+=("0"+e.getUTCMinutes()).slice(-2),i+=("0"+e.getUTCSeconds()).slice(-2),r){var o=e.getUTCMilliseconds();0!==o&&(i+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return i+"Z"},t.uricmptohex=eV,t.hextouricmp=eW,t.ipv6tohex=eq,t.hextoipv6=ez,t.hextoip=eJ,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return eq(e);throw t}var r=e.split(".");if(4!==r.length)throw t;var i="";try{for(var n=0;n<4;n++)i+=("0"+parseInt(r[n]).toString(16)).slice(-2);return i}catch(e){throw t}},t.encodeURIComponentAll=eG,t.newline_toUnix=function(e){return e=e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=eQ,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(e,t,r){var i=parseInt(e);if(i<0||255<i)throw"integer not in range 0-255";return("00"+i.toString(16)).slice(-2)}).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var i=0;i<r;i++)if(e.charCodeAt(i)!=t.charCodeAt(i))return i;return e.length!=t.length?r:-1},t.KJUR=eS,t.crypto=eS.crypto,t.asn1=eS.asn1,t.jws=eS.jws,t.lang=eS.lang}).call(this,r(28).Buffer)},function(e,t,r){"use strict";(function(e){var i=r(30),n=r(31),o=r(32);function s(){return l.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff}function a(e,t){if(s()<t)throw RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,r)}function u(e,t,r,i){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t),e}(e,t,r,i):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=a(e,i)).write(t,r);return n!==i&&(e=e.slice(0,n)),e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r,i=0|f(t.length);return 0===(e=a(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=a(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|f(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=s())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(i)return R(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var n,o,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i,n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",s=t;s<r;++s){o+=(i=e[s])<16?"0"+i.toString(16):i.toString(16)}return o}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":return n=this,o=t,s=r,0===o&&s===n.length?i.fromByteArray(n):i.fromByteArray(n.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function y(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),isNaN(r*=1)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;s=2,a/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var c=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else -1!==c&&(o-=o-c),c=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var d=!0,h=0;h<l;h++)if(u(e,o+h)!==u(t,h)){d=!1;break}if(d)return o}return -1}function _(e,t,r,i){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function b(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,s,a,l,u=e[n],c=null,d=u>239?4:u>223?3:u>191?2:1;if(n+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[n+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[n+1],s=e[n+2],a=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),n+=d}var h=i.length;if(h<=w)return String.fromCharCode.apply(String,i);for(var f="",p=0;p<h;)f+=String.fromCharCode.apply(String,i.slice(p,p+=w));return f}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return c(e),e<=0?a(null,e):void 0!==t?"string"==typeof r?a(null,e).fill(t,r):a(null,e).fill(t):a(null,e)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:+(i<r)},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var r,i=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!l.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?b(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,i,n){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(i,n),c=e.slice(t,r),d=0;d<a;++d)if(u[d]!==c[d]){o=u[d],s=c[d];break}return o<s?-1:+(s<o)},l.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n,o,s,a,l,u,c=this.length-t;if((void 0===r||r>c)&&(r=c),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var d=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))break;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return n=t,o=r,P(R(e,this.length-n),this,n,o);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return s=t,a=r,P(C(e),this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,u=r,P(function(e,t){for(var r,i,n=[],o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(e,this.length-l),this,l,u);default:if(d)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),d=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function x(e,t,r,i,n,o){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function E(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function k(e,t,r,i){t<0&&(t=0xffffffff+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function F(e,t,r,i,n,o){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,i,o){return o||F(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function A(e,t,r,i,o){return o||F(e,0,r,8),n.write(e,t,r,i,52,8),r+8}l.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;r=new l(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||S(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt16BE=function(e,t){t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,i){e*=1,t|=0,r|=0,i||x(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,i){e*=1,t|=0,r|=0,i||x(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0xffffffff,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0xffffffff,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t|=0,!i){var n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t|=0,!i){var n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e*=1,t|=0,r||x(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n,o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var s=l.isBuffer(e)?e:R(new l(e,i).toString()),a=s.length;for(n=0;n<r-t;++n)this[n+t]=s[n%a]}return this};var T=/[^+\/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319||s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function C(e){return i.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(29))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=u(e),s=i[0],a=i[1],l=new o(3*(s+a)/4-a),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],s=0,a=r-n;s<a;s+=16383)o.push(function(e,t,r){for(var n,o=[],s=t;s<r;s+=3)o.push(i[(n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?o.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&o.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),o.join("")};for(var i=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],n[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return -1===r&&(r=t),[r,r===t?0:4-r%4]}n[45]=62,n[95]=63},function(e,t){t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,u=l>>1,c=-7,d=r?n-1:0,h=r?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=u}return(f?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,l,u=8*o-n-1,c=(1<<u)-1,d=c>>1,h=5960464477539062e-23*(23===n),f=i?0:o-1,p=i?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*l-1)*Math.pow(2,n),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(s=s<<n|a,u+=n;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,r=e.KeyUtil,n=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,l=e.AllowedSigningAlgs;function u(){if(!(this instanceof u))throw TypeError("Cannot call a class as a function")}return u.parseJwt=function(e){i.Log.debug("JoseUtil.parseJwt");try{var r=t.JWS.parse(e);return{header:r.headerObj,payload:r.payloadObj}}catch(e){i.Log.error(e)}},u.validateJwt=function(e,t,o,s,l,c,d){i.Log.debug("JoseUtil.validateJwt");try{if("RSA"===t.kty)if(t.e&&t.n)t=r.getKey(t);else{if(!t.x5c||!t.x5c.length)return i.Log.error("JoseUtil.validateJwt: RSA key missing key material",t),Promise.reject(Error("RSA key missing key material"));var h=a(t.x5c[0]);t=n.getPublicKeyFromCertHex(h)}else{if("EC"!==t.kty)return i.Log.error("JoseUtil.validateJwt: Unsupported key type",t&&t.kty),Promise.reject(Error(t.kty));if(!(t.crv&&t.x&&t.y))return i.Log.error("JoseUtil.validateJwt: EC key missing key material",t),Promise.reject(Error("EC key missing key material"));t=r.getKey(t)}return u._validateJwt(e,t,o,s,l,c,d)}catch(e){return i.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},u.validateJwtAttributes=function(e,t,r,n,o,s){n||(n=0),o||(o=parseInt(Date.now()/1e3));var a=u.parseJwt(e).payload;if(!a.iss)return i.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(Error("issuer was not provided"));if(a.iss!==t)return i.Log.error("JoseUtil._validateJwt: Invalid issuer in token",a.iss),Promise.reject(Error("Invalid issuer in token: "+a.iss));if(!a.aud)return i.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(Error("aud was not provided"));if(!(a.aud===r||Array.isArray(a.aud)&&a.aud.indexOf(r)>=0))return i.Log.error("JoseUtil._validateJwt: Invalid audience in token",a.aud),Promise.reject(Error("Invalid audience in token: "+a.aud));if(a.azp&&a.azp!==r)return i.Log.error("JoseUtil._validateJwt: Invalid azp in token",a.azp),Promise.reject(Error("Invalid azp in token: "+a.azp));if(!s){var l=o+n,c=o-n;if(!a.iat)return i.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(Error("iat was not provided"));if(l<a.iat)return i.Log.error("JoseUtil._validateJwt: iat is in the future",a.iat),Promise.reject(Error("iat is in the future: "+a.iat));if(a.nbf&&l<a.nbf)return i.Log.error("JoseUtil._validateJwt: nbf is in the future",a.nbf),Promise.reject(Error("nbf is in the future: "+a.nbf));if(!a.exp)return i.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(Error("exp was not provided"));if(a.exp<c)return i.Log.error("JoseUtil._validateJwt: exp is in the past",a.exp),Promise.reject(Error("exp is in the past:"+a.exp))}return Promise.resolve(a)},u._validateJwt=function(e,r,n,o,s,a,c){return u.validateJwtAttributes(e,n,o,s,a,c).then(function(n){try{return t.JWS.verify(e,r,l)?n:(i.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(Error("signature validation failed")))}catch(e){return i.Log.error(e&&e.message||e),Promise.reject(Error("signature validation failed"))}})},u.hashString=function(e,t){try{return o.Util.hashString(e,t)}catch(e){i.Log.error(e)}},u.hexToBase64Url=function(e){try{return s(e)}catch(e){i.Log.error(e)}},u};var i=r(0);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(3);t.SigninResponse=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";if(!(this instanceof e))throw TypeError("Cannot call a class as a function");var i=n.UrlUtility.parseUrlFragment(t,r);this.error=i.error,this.error_description=i.error_description,this.error_uri=i.error_uri,this.code=i.code,this.state=i.state,this.id_token=i.id_token,this.session_state=i.session_state,this.access_token=i.access_token,this.token_type=i.token_type,this.scope=i.scope,this.profile=void 0,this.expires_in=i.expires_in}return i(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var i=r(0),n=r(3),o=r(9);t.SignoutRequest=function e(t){var r=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,l=t.data,u=t.extraQueryParams,c=t.request_type;if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!r)throw i.Log.error("SignoutRequest.ctor: No url passed"),Error("url");for(var d in s&&(r=n.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=n.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),l&&(this.state=new o.State({data:l,request_type:c}),r=n.UrlUtility.addQueryParam(r,"state",this.state.id))),u)r=n.UrlUtility.addQueryParam(r,d,u[d]);this.url=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var i=r(3);t.SignoutResponse=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");var r=i.UrlUtility.parseUrlFragment(t,"?");this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.state=r.state}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return n.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){n.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){n.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},i(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(10),s=r(39),a=r(15),l=r(45),u=r(47),c=r(18),d=r(8),h=r(20),f=r(11),p=r(4);t.UserManager=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.TokenRevocationClient,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TokenClient,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.JoseUtil;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var y=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return y._events=new l.UserManagerEvents(r),y._silentRenewService=new i(y),y.settings.automaticSilentRenew&&(n.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),y.startSilentRenew()),y.settings.monitorSession&&(n.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),y._sessionMonitor=new o(y)),y._tokenRevocationClient=new a(y._settings),y._tokenClient=new d(y._settings),y._joseUtil=g,y}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then(function(t){return t?(n.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(n.Log.info("UserManager.getUser: user not found in storage"),null)})},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then(function(){n.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()})},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then(function(){n.Log.info("UserManager.signinRedirect: successful")})},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then(function(e){return e.profile&&e.profile.sub?n.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinRedirectCallback: no sub"),e})},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinPopup: no sub")),e})):(n.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinPopupCallback: no sub")),e}).catch(function(e){n.Log.error(e.message)})},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then(function(r){return r&&r.refresh_token?(t.refresh_token=r.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&r&&r.id_token,r&&e._settings.validateSubOnSilentRenew&&(n.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",r.profile.sub),t.current_sub=r.profile.sub),e._signinSilentIframe(t))})},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then(function(t){return t?t.access_token?e._loadUser().then(function(r){if(r){var i=Promise.resolve();return t.id_token&&(i=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),i.then(function(){return n.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then(function(){return e._events.load(r),r})})}return null}):(n.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(n.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var r=this;return this._metadataService.getIssuer().then(function(i){return r.settings.getEpochTime().then(function(o){return r._joseUtil.validateJwtAttributes(t,i,r._settings.client_id,r._settings.clockSkew,o).then(function(t){return t?t.sub!==e.sub?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(Error("azp not in id_token, but present in original id_token"))):void 0:(n.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(Error("Failed to validate id_token")))})})})},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinSilent: no sub")),e})):(n.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then(function(e){return e&&(e.profile&&e.profile.sub?n.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):n.Log.info("UserManager.signinSilentCallback: no sub")),e})},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then(function(r){var i=r.state;return r.response,"si:r"===i.request_type?t.signinRedirectCallback(e):"si:p"===i.request_type?t.signinPopupCallback(e):"si:s"===i.request_type?t.signinSilentCallback(e):Promise.reject(Error("invalid response_type in state"))})},t.prototype.signoutCallback=function(e,t){var r=this;return this.readSignoutResponseState(e).then(function(i){var n=i.state,o=i.response;return n?"so:r"===n.request_type?r.signoutRedirectCallback(e):"so:p"===n.request_type?r.signoutPopupCallback(e,t):Promise.reject(Error("invalid response_type in state")):o})},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var r=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(t.redirect_uri=r,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:r,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(t){return e.processSigninResponse(t.url).then(function(e){if(n.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return n.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};n.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return n.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t})})):(n.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,i).then(function(t){return r._signinEnd(t.url,e)})},t.prototype._signinStart=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(i).then(function(t){return n.Log.debug("UserManager._signinStart: got navigator window handle"),r.createSigninRequest(e).then(function(e){return n.Log.debug("UserManager._signinStart: got signin request"),i.url=e.url,i.id=e.state.id,t.navigate(i)}).catch(function(e){throw t.close&&(n.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e})})},t.prototype._signinEnd=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then(function(e){n.Log.debug("UserManager._signinEnd: got signin response");var i=new a.User(e);if(r.current_sub){if(r.current_sub!==i.profile.sub)return n.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",i.profile.sub),Promise.reject(Error("login_required"));n.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(i).then(function(){return n.Log.debug("UserManager._signinEnd: user stored"),t._events.load(i),i})})},t.prototype._signinCallback=function(e,t){n.Log.debug("UserManager._signinCallback");var r="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,r)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,r).then(function(){n.Log.info("UserManager.signoutRedirect: successful")})},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then(function(e){return n.Log.info("UserManager.signoutRedirectCallback: successful"),e})},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){n.Log.info("UserManager.signoutPopup: successful")})},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then(function(){n.Log.info("UserManager.signoutPopupCallback: successful")})},t.prototype._signout=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,i).then(function(e){return r._signoutEnd(e.url)})},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(i).then(function(r){return n.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then(function(o){return n.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then(function(){var s=e.id_token_hint||o&&o.id_token;return s&&(n.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then(function(){return n.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then(function(e){return n.Log.debug("UserManager._signoutStart: got signout request"),i.url=e.url,e.state&&(i.id=e.state.id),r.navigate(i)})})})}).catch(function(e){throw r.close&&(n.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e})})},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then(function(e){return n.Log.debug("UserManager._signoutEnd: got signout response"),e})},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then(function(t){return e._revokeInternal(t,!0).then(function(r){if(r)return n.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then(function(){n.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)})})}).then(function(){n.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},t.prototype._revokeInternal=function(e,t){var r=this;if(e){var i=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(i,t).then(function(e){return r._revokeRefreshTokenInternal(o,t).then(function(t){return e||t||n.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t})})}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then(function(){return!0})},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(e){return e?(n.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(n.Log.debug("UserManager._loadUser: no user storageString"),null)})},t.prototype.storeUser=function(e){if(e){n.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return n.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},i(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=(r(0),r(5)),o=r(40),s=r(41),a=r(43),l=r(6),u=r(1),c=r(8);t.UserManagerSettings=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.popup_redirect_uri,n=r.popup_post_logout_redirect_uri,d=r.popupWindowFeatures,h=r.popupWindowTarget,f=r.silent_redirect_uri,p=r.silentRequestTimeout,g=r.automaticSilentRenew,y=r.validateSubOnSilentRenew,m=r.includeIdTokenInSilentRenew,v=r.monitorSession,_=r.monitorAnonymousSession,b=r.checkSessionInterval,w=r.stopCheckSessionOnError,S=r.query_status_response_type,x=r.revokeAccessTokenOnSignout,E=r.accessTokenExpiringNotificationTime,k=r.redirectNavigator,F=void 0===k?new o.RedirectNavigator:k,I=r.popupNavigator,A=void 0===I?new s.PopupNavigator:I,T=r.iframeNavigator,R=void 0===T?new a.IFrameNavigator:T,C=r.userStore,P=void 0===C?new l.WebStorageStateStore({store:u.Global.sessionStorage}):C;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var N=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,arguments[0]));return N._popup_redirect_uri=i,N._popup_post_logout_redirect_uri=n,N._popupWindowFeatures=d,N._popupWindowTarget=h,N._silent_redirect_uri=f,N._silentRequestTimeout=p,N._automaticSilentRenew=void 0!==g&&g,N._validateSubOnSilentRenew=void 0!==y&&y,N._includeIdTokenInSilentRenew=void 0===m||m,N._accessTokenExpiringNotificationTime=void 0===E?60:E,N._monitorSession=void 0===v||v,N._monitorAnonymousSession=void 0!==_&&_,N._checkSessionInterval=void 0===b?2e3:b,N._stopCheckSessionOnError=void 0===w||w,S?N._query_status_response_type=S:arguments[0]&&arguments[0].response_type?N._query_status_response_type=c.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":N._query_status_response_type="id_token",N._revokeAccessTokenOnSignout=void 0!==x&&x,N._redirectNavigator=F,N._popupNavigator=A,N._iframeNavigator=R,N._userStore=P,N}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(n.OidcClientSettings)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.RedirectNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(n.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(Error("No url provided")))},i(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var i=r(0),n=r(42);t.PopupNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new n.PopupWindow(e))},e.prototype.callback=function(e,t,r){i.Log.debug("PopupNavigator.callback");try{return n.PopupWindow.notifyOpener(e,t,r),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(3);t.PopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t});var i=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",i,o),this._popup&&(n.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(n.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){n.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){n.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){n.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(n.Log.debug("PopupWindow.callback success"),this._success({url:e})):(n.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,r){if(window.opener){if(e=e||window.location.href){var i=o.UrlUtility.parseUrlFragment(e,r);if(i.state){var s="popupCallback_"+i.state,a=window.opener[s];a?(n.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):n.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else n.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else n.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},i(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var i=r(0),n=r(44);t.IFrameNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new n.IFrameWindow(e))},e.prototype.callback=function(e){i.Log.debug("IFrameNavigator.callback");try{return n.IFrameWindow.notifyParent(e),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0);t.IFrameWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;n.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),n.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),n.Log.error(e),this._reject(Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(n.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){n.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(n.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){n.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(n.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},i(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var i=r(0),n=r(16),o=r(17);t.UserManagerEvents=function(e){function t(r){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var i=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return i._userLoaded=new o.Event("User loaded"),i._userUnloaded=new o.Event("User unloaded"),i._silentRenewError=new o.Event("Silent renew error"),i._userSignedIn=new o.Event("User signed in"),i._userSignedOut=new o.Event("User signed out"),i._userSessionChanged=new o.Event("User session changed"),i}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),r&&this._userLoaded.raise(t)},t.prototype.unload=function(){i.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){i.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){i.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){i.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){i.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(n.AccessTokenEvents)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=r(0),o=r(1);t.Timer=function(e){function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var s=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,e.call(this,r));return s._timer=i,s._nowFunc=n||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)n.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),n.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var r=5;e<5&&(r=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*r)}},t.prototype.cancel=function(){this._timerHandle&&(n.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;n.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},i(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(r(17).Event)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var i=r(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(e){}).catch(function(e){i.Log.error("SilentRenewService.start: Error from getUser:",e.message)}))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then(function(e){i.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(t){i.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)})},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var i=r(21);t.CordovaPopupNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return Promise.resolve(new i.CordovaPopupWindow(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var i=r(21);t.CordovaIFrameNavigator=function(){function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return e.prototype.prepare=function(e){return e.popupWindowFeatures="hidden=yes",Promise.resolve(new i.CordovaPopupWindow(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.6"}],t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,(function(t){return e[t]}).bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}()},4685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,n.isNextRouterError)(t)||(0,i.isBailoutToCSRError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let i=r(5346),n=r(1670);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return p},usePathname:function(){return h},useRouter:function(){return f},useSearchParams:function(){return d},useSelectedLayoutSegment:function(){return y},useSelectedLayoutSegments:function(){return g},useServerInsertedHTML:function(){return u.useServerInsertedHTML}});let i=r(4232),n=r(2875),o=r(6394),s=r(5172),a=r(2835),l=r(6382),u=r(4512),c=void 0;function d(){let e=(0,i.useContext)(o.SearchParamsContext);return(0,i.useMemo)(()=>e?new l.ReadonlyURLSearchParams(e):null,[e])}function h(){return null==c||c("usePathname()"),(0,i.useContext)(o.PathnameContext)}function f(){let e=(0,i.useContext)(n.AppRouterContext);if(null===e)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return e}function p(){return null==c||c("useParams()"),(0,i.useContext)(o.PathParamsContext)}function g(e){void 0===e&&(e="children"),null==c||c("useSelectedLayoutSegments()");let t=(0,i.useContext)(n.LayoutRouterContext);return t?function e(t,r,i,n){let o;if(void 0===i&&(i=!0),void 0===n&&(n=[]),i)o=t[1][r];else{var l;let e=t[1];o=null!=(l=e.children)?l:Object.values(e)[0]}if(!o)return n;let u=o[0],c=(0,s.getSegmentValue)(u);return!c||c.startsWith(a.PAGE_SEGMENT_KEY)?n:(n.push(c),e(o,r,!1,n))}(t.parentTree,e):null}function y(e){void 0===e&&(e="children"),null==c||c("useSelectedLayoutSegment()");let t=g(e);if(!t||0===t.length)return null;let r="children"===e?t[0]:t[t.length-1];return r===a.DEFAULT_SEGMENT_KEY?null:r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return l}}),r(546);let i=r(5284),n=r(6904),o=["-moz-initial","fill","none","scale-down",void 0];function s(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function l(e,t){var r,l;let u,c,d,{src:h,sizes:f,unoptimized:p=!1,priority:g=!1,loading:y,className:m,quality:v,width:_,height:b,fill:w=!1,style:S,overrideSrc:x,onLoad:E,onLoadingComplete:k,placeholder:F="empty",blurDataURL:I,fetchPriority:A,decoding:T="async",layout:R,objectFit:C,objectPosition:P,lazyBoundary:N,lazyRoot:j,...O}=e,{imgConf:L,showAltText:D,blurComplete:U,defaultLoader:M}=t,B=L||n.imageConfigDefault;if("allSizes"in B)u=B;else{let e=[...B.deviceSizes,...B.imageSizes].sort((e,t)=>e-t),t=B.deviceSizes.sort((e,t)=>e-t),i=null==(r=B.qualities)?void 0:r.sort((e,t)=>e-t);u={...B,allSizes:e,deviceSizes:t,qualities:i}}if(void 0===M)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let H=O.loader||M;delete O.loader,delete O.srcSet;let $="__next_img_default"in H;if($){if("custom"===u.loader)throw Object.defineProperty(Error('Image with src "'+h+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=H;H=t=>{let{config:r,...i}=t;return e(i)}}if(R){"fill"===R&&(w=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[R];e&&(S={...S,...e});let t={responsive:"100vw",fill:"100vw"}[R];t&&!f&&(f=t)}let K="",V=a(_),W=a(b);if((l=h)&&"object"==typeof l&&(s(l)||void 0!==l.src)){let e=s(h)?h.default:h;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,d=e.blurHeight,I=I||e.blurDataURL,K=e.src,!w)if(V||W){if(V&&!W){let t=V/e.width;W=Math.round(e.height*t)}else if(!V&&W){let t=W/e.height;V=Math.round(e.width*t)}}else V=e.width,W=e.height}let q=!g&&("lazy"===y||void 0===y);(!(h="string"==typeof h?h:K)||h.startsWith("data:")||h.startsWith("blob:"))&&(p=!0,q=!1),u.unoptimized&&(p=!0),$&&!u.dangerouslyAllowSVG&&h.split("?",1)[0].endsWith(".svg")&&(p=!0);let z=a(v),J=Object.assign(w?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:P}:{},D?{}:{color:"transparent"},S),Z=U||"empty"===F?null:"blur"===F?'url("data:image/svg+xml;charset=utf-8,'+(0,i.getImageBlurSvg)({widthInt:V,heightInt:W,blurWidth:c,blurHeight:d,blurDataURL:I||"",objectFit:J.objectFit})+'")':'url("'+F+'")',G=o.includes(J.objectFit)?"fill"===J.objectFit?"100% 100%":"cover":J.objectFit,Y=Z?{backgroundSize:G,backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Z}:{},Q=function(e){let{config:t,src:r,unoptimized:i,width:n,quality:o,sizes:s,loader:a}=e;if(i)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,r){let{deviceSizes:i,allSizes:n}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let i;i=e.exec(r);)t.push(parseInt(i[2]));if(t.length){let e=.01*Math.min(...t);return{widths:n.filter(t=>t>=i[0]*e),kind:"w"}}return{widths:n,kind:"w"}}return"number"!=typeof t?{widths:i,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>n.find(t=>t>=e)||n[n.length-1]))],kind:"x"}}(t,n,s),c=l.length-1;return{sizes:s||"w"!==u?s:"100vw",srcSet:l.map((e,i)=>a({config:t,src:r,quality:o,width:e})+" "+("w"===u?e:i+1)+u).join(", "),src:a({config:t,src:r,quality:o,width:l[c]})}}({config:u,src:h,unoptimized:p,width:V,quality:z,sizes:f,loader:H});return{props:{...O,loading:q?"lazy":y,fetchPriority:A,width:V,height:W,decoding:T,className:m,style:{...J,...Y},sizes:Q.sizes,srcSet:Q.srcSet,src:x||Q.src},meta:{unoptimized:p,priority:g,placeholder:F,fill:w}}}},5172:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5177:(e,t,r)=>{"use strict";let i;r.d(t,{Ay:()=>l,FL:()=>function e(t,r){if("string"==typeof t)return t;if(t instanceof u&&"Quad"!==t.termType)return t.id;if(!t)return i.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==o.string?`^^${t.datatype.value}`:""}`;case"Quad":let n=[e(t.subject,!0),e(t.predicate,!0),e(t.object,!0)];return t.graph&&"DefaultGraph"!==t.graph.termType&&n.push(e(t.graph,!0)),r?n:JSON.stringify(n);default:throw Error(`Unexpected termType: ${t.termType}`)}},iN:()=>function e(t,r,i){if(r=r||a,!t)return r.defaultGraph();switch(t[0]){case"?":return r.variable(t.substr(1));case"_":return r.blankNode(t.substr(2));case'"':if(r===a)return new d(t);if('"'===t[t.length-1])return r.literal(t.substr(1,t.length-2));let n=t.lastIndexOf('"',t.length-1);return r.literal(t.substr(1,n-1),"@"===t[n+1]?t.substr(n+2):r.namedNode(t.substr(n+3)));case"[":t=JSON.parse(t);break;default:if(!i||!Array.isArray(t))return r.namedNode(t)}return r.quad(e(t[0],r,!0),e(t[1],r,!0),e(t[2],r,!0),t[3]&&e(t[3],r,!0))},x1:()=>u});let{rdf:n,xsd:o}=r(7105).A,s=0,a={namedNode:y,blankNode:m,variable:_,literal:v,defaultGraph:function(){return i},quad:b,triple:b,fromTerm:w,fromQuad:S},l=a;class u{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof u?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class c extends u{get termType(){return"NamedNode"}}class d extends u{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){let e=this.id,t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new c(this.datatypeString)}get datatypeString(){let e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return"^"===r?e.substr(t+2):"@"!==r?o.string:n.langString}equals(e){return e instanceof d?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class h extends u{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class f extends u{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class p extends u{constructor(){return super(""),i||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}i=new p;class g extends u{constructor(e,t,r,n){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=n||i}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function y(e){return new c(e)}function m(e){return new h(e||`n3-${s++}`)}function v(e,t){if("string"==typeof t)return new d(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return""===r&&("boolean"==typeof e?r=o.boolean:"number"==typeof e&&(Number.isFinite(e)?r=Number.isInteger(e)?o.integer:o.double:(r=o.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),new d(""===r||r===o.string?`"${e}"`:`"${e}"^^${r}`)}function _(e){return new f(e)}function b(e,t,r,i){return new g(e,t,r,i)}function w(e){if(e instanceof u)return e;switch(e.termType){case"NamedNode":return y(e.value);case"BlankNode":return m(e.value);case"Variable":return _(e.value);case"DefaultGraph":return i;case"Literal":return v(e.value,e.language||e.datatype);case"Quad":return S(e);default:throw Error(`Unexpected termType: ${e.termType}`)}}function S(e){if(e instanceof g)return e;if("Quad"!==e.termType)throw Error(`Unexpected termType: ${e.termType}`);return b(w(e.subject),w(e.predicate),w(e.object),w(e.graph))}},5284:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:i,blurHeight:n,blurDataURL:o,objectFit:s}=e,a=i?40*i:t,l=n?40*n:r,u=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(u?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+o+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},5652:(e,t,r)=>{"use strict";var i=r(2572).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:this.write=h,this.end=f;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=s(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=s(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=s(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},5718:(e,t,r)=>{"use strict";let{ArrayIsArray:i,ObjectSetPrototypeOf:n}=r(4039),{EventEmitter:o}=r(5978);function s(e){o.call(this,e)}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}n(s.prototype,o.prototype),n(s,o),s.prototype.pipe=function(e,t){let r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function n(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",n),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",u));let s=!1;function l(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",i),e.removeListener("drain",n),r.removeListener("end",l),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return a(r,"error",c),a(e,"error",c),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},e.exports={Stream:s,prependListener:a}},5791:(e,t,r)=>{"use strict";let i,n=r(9143),{AbortError:o,codes:s}=r(7894),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:l}=s,{kEmptyObject:u,once:c}=r(6733),{validateAbortSignal:d,validateFunction:h,validateObject:f,validateBoolean:p}=r(1204),{Promise:g,PromisePrototypeThen:y,SymbolDispose:m}=r(4039),{isClosed:v,isReadable:_,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:S,isReadableErrored:x,isWritable:E,isWritableNodeStream:k,isWritableStream:F,isWritableFinished:I,isWritableErrored:A,isNodeStream:T,willEmitClose:R,kIsClosedPromise:C}=r(918),P=()=>{};function N(e,t,s){var p,g;if(2==arguments.length?(s=t,t=u):null==t?t=u:f(t,"options"),h(s,"callback"),d(t.signal,"options.signal"),s=c(s),w(e)||F(e))return function(e,t,s){let a=!1,l=P;if(t.signal)if(l=()=>{a=!0,s.call(e,new o(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(l);else{let n=(i=i||r(6733).addAbortListener)(t.signal,l),o=s;s=c((...t)=>{n[m](),o.apply(e,t)})}let u=(...t)=>{a||n.nextTick(()=>s.apply(e,t))};return y(e[C].promise,u,u),P}(e,t,s);if(!T(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);let N=null!=(p=t.readable)?p:b(e),j=null!=(g=t.writable)?g:k(e),O=e._writableState,L=e._readableState,D=()=>{e.writable||B()},U=R(e)&&b(e)===N&&k(e)===j,M=I(e,!1),B=()=>{M=!0,e.destroyed&&(U=!1),U&&(!e.readable||N)||(!N||H)&&s.call(e)},H=S(e,!1),$=()=>{H=!0,e.destroyed&&(U=!1),U&&(!e.writable||j)||(!j||M)&&s.call(e)},K=t=>{s.call(e,t)},V=v(e),W=()=>{V=!0;let t=A(e)||x(e);return t&&"boolean"!=typeof t?s.call(e,t):N&&!H&&b(e,!0)&&!S(e,!1)||j&&!M&&!I(e,!1)?s.call(e,new l):void s.call(e)},q=()=>{V=!0;let t=A(e)||x(e);if(t&&"boolean"!=typeof t)return s.call(e,t);s.call(e)},z=()=>{e.req.on("finish",B)};e.setHeader&&"function"==typeof e.abort?(e.on("complete",B),U||e.on("abort",W),e.req?z():e.on("request",z)):j&&!O&&(e.on("end",D),e.on("close",D)),U||"boolean"!=typeof e.aborted||e.on("aborted",W),e.on("end",$),e.on("finish",B),!1!==t.error&&e.on("error",K),e.on("close",W),V?n.nextTick(W):null!=O&&O.errorEmitted||null!=L&&L.errorEmitted?U||n.nextTick(q):!N&&(!U||_(e))&&(M||!1===E(e))||!j&&(!U||E(e))&&(H||!1===_(e))?n.nextTick(q):L&&e.req&&e.aborted&&n.nextTick(q);let J=()=>{s=P,e.removeListener("aborted",W),e.removeListener("complete",B),e.removeListener("abort",W),e.removeListener("request",z),e.req&&e.req.removeListener("finish",B),e.removeListener("end",D),e.removeListener("close",D),e.removeListener("finish",B),e.removeListener("end",$),e.removeListener("error",K),e.removeListener("close",W)};if(t.signal&&!V){let a=()=>{let r=s;J(),r.call(e,new o(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(a);else{let n=(i=i||r(6733).addAbortListener)(t.signal,a),o=s;s=c((...t)=>{n[m](),o.apply(e,t)})}}return J}e.exports=N,e.exports.finished=function(e,t){var r;let i=!1;return null===t&&(t=u),null!=(r=t)&&r.cleanup&&(p(t.cleanup,"cleanup"),i=t.cleanup),new g((r,n)=>{let o=N(e,t,e=>{i&&o(),e?n(e):r()})})}},5978:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,i){var n,o,s;function a(r){e.removeListener(t,l),i(r)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}g(e,t,l,{once:!0}),"error"!==t&&(n=e,o=a,s={once:!0},"function"==typeof n.on&&g(n,"error",o,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,i){if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=l(e))>0&&s.length>n&&!s.warned){s.warned=!0;var n,o,s,u=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=c.bind(i);return n.listener=r,i.wrapFn=n,n}function h(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(o){i.once&&e.removeEventListener(t,n),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,a=Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else for(var u=l.length,c=p(l,u),r=0;r<u;++r)i(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,o,s;if(a(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},6207:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,h:()=>n});var i=r(7876);let n=(0,r(4232).createContext)({isInitializing:!0,getAuthService:()=>({}),getService:()=>{throw Error("Service not initialized")}});function o(e){let{children:t,authService:r,service:o}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Provider,{value:{isInitializing:!1,getAuthService:()=>r,getService:()=>o},children:t})})}},6238:(e,t,r)=>{"use strict";r.d(t,{_:()=>u});var i=r(9143);function n(e,t){if(e instanceof Promise)throw Error(t)}var o=r(9143),s=r(1078),a=r(9143);let l={server:{NODE_ENV:()=>s.z.enum(["development","test","production"])},client:{NEXT_PUBLIC_BASE_PATH:()=>s.z.string().default("/"),NEXT_PUBLIC_VERSION:()=>s.z.string()}},u=()=>(function(e){let t="object"==typeof e.client?e.client:{},r="object"==typeof e.server?e.server:{},s=e.shared,a=e.runtimeEnv?e.runtimeEnv:{...o.env,...e.experimental__runtimeEnv};return function(e){let t=e.runtimeEnvStrict??e.runtimeEnv??i.env;if(e.emptyStringAsUndefined)for(let[e,r]of Object.entries(t))""===r&&delete t[e];if(e.skipValidation)return t;let r="object"==typeof e.client?e.client:{},o="object"==typeof e.server?e.server:{},s="object"==typeof e.shared?e.shared:{},a=e.isServer??("undefined"==typeof window||"Deno"in window),l=a?{...o,...s,...r}:{...r,...s},u=e.createFinalSchema?.(l,a)["~standard"].validate(t)??function(e,t){let r={},i=[];for(let o in e){let s=e[o]["~standard"].validate(t[o]);if(n(s,`Validation must be synchronous, but ${o} returned a Promise.`),s.issues){i.push(...s.issues.map(e=>({...e,path:[o,...e.path??[]]})));continue}r[o]=s.value}return i.length?{issues:i}:{value:r}}(l,t);n(u,"Validation must be synchronous");let c=e.onValidationError??(e=>{throw console.error(" Invalid environment variables:",e),Error("Invalid environment variables")}),d=e.onInvalidAccess??(()=>{throw Error(" Attempted to access a server-side environment variable on the client")});if(u.issues)return c(u.issues);let h=t=>!e.clientPrefix||!t.startsWith(e.clientPrefix)&&!(t in s),f=e=>a||!h(e),p=e=>"__esModule"===e||"$$typeof"===e;return new Proxy(Object.assign((e.extends??[]).reduce((e,t)=>Object.assign(e,t),{}),u.value),{get(e,t){if("string"==typeof t&&!p(t))return f(t)?Reflect.get(e,t):d(t)}})}({...e,shared:s,client:t,server:r,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:a})})({server:{NODE_ENV:l.server.NODE_ENV()},client:{NEXT_PUBLIC_BASE_PATH:l.client.NEXT_PUBLIC_BASE_PATH(),NEXT_PUBLIC_VERSION:l.client.NEXT_PUBLIC_VERSION()},runtimeEnv:{NODE_ENV:"production",NEXT_PUBLIC_BASE_PATH:"/solid-memo/branches/main",NEXT_PUBLIC_VERSION:"main"},skipValidation:!!a.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})},6261:(e,t,r)=>{"use strict";let i,n=r(9143),{ArrayPrototypeIndexOf:o,NumberIsInteger:s,NumberIsNaN:a,NumberParseInt:l,ObjectDefineProperties:u,ObjectKeys:c,ObjectSetPrototypeOf:d,Promise:h,SafeSet:f,SymbolAsyncDispose:p,SymbolAsyncIterator:g,Symbol:y}=r(4039);e.exports=K,K.ReadableState=$;let{EventEmitter:m}=r(5978),{Stream:v,prependListener:_}=r(5718),{Buffer:b}=r(1642),{addAbortSignal:w}=r(9110),S=r(5791),x=r(6733).debuglog("stream",e=>{x=e}),E=r(9520),k=r(261),{getHighWaterMark:F,getDefaultHighWaterMark:I}=r(4318),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:j}=r(7894),{validateObject:O}=r(1204),L=y("kPaused"),{StringDecoder:D}=r(5652),U=r(9846);d(K.prototype,v.prototype),d(K,v);let M=()=>{},{errorOrDestroy:B}=k;function H(e){return{enumerable:!1,get(){return(this.state&e)!=0},set(t){t?this.state|=e:this.state&=~e}}}function $(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(9667)),this.state=6192,e&&e.objectMode&&(this.state|=1),i&&e&&e.readableObjectMode&&(this.state|=1),this.highWaterMark=e?F(this,e,"readableHighWaterMark",i):I(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[L]=null,e&&!1===e.emitClose&&(this.state&=-2049),e&&!1===e.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new D(e.encoding),this.encoding=e.encoding)}function K(e){if(!(this instanceof K))return new K(e);let t=this instanceof r(9667);this._readableState=new $(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),v.call(this,e),k.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}function V(e,t,r,i){let n;x("readableAddChunk",t);let o=e._readableState;if((1&o.state)==0&&("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(i&&o.encoding?t=b.from(t,r).toString(o.encoding):(t=b.from(t,r),r=""))):t instanceof b?r="":v._isUint8Array(t)?(t=v._uint8ArrayToBuffer(t),r=""):null!=t&&(n=new T("chunk",["string","Buffer","Uint8Array"],t))),n)B(e,n);else if(null===t)o.state&=-9,function(e,t){if(x("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?z(e):(t.needReadable=!1,t.emittedReadable=!0,J(e))}}(e,o);else if((1&o.state)!=0||t&&t.length>0)if(i)if((4&o.state)!=0)B(e,new N);else{if(o.destroyed||o.errored)return!1;W(e,o,t,!0)}else if(o.ended)B(e,new P);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?W(e,o,t,!1):Z(e,o)):W(e,o,t,!1)}else i||(o.state&=-9,Z(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function W(e,t,r,i){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?((65536&t.state)!=0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),(64&t.state)!=0&&z(e)),Z(e,t)}function q(e,t){return e<=0||0===t.length&&t.ended?0:(1&t.state)!=0?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function z(e){let t=e._readableState;x("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(J,e))}function J(e){let t=e._readableState;x("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ee(e)}function Z(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(G,e,t))}function G(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(x("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function Y(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[L]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Q(e){x("readable nexttick read 0"),e.read(0)}function X(e,t){x("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ee(e),t.flowing&&!t.reading&&e.read(0)}function ee(e){let t=e._readableState;for(x("flow",t.flowing);t.flowing&&null!==e.read(););}function et(e,t){"function"!=typeof e.read&&(e=K.wrap(e,{objectMode:!0}));let r=er(e,t);return r.stream=e,r}async function*er(e,t){let r,i=M;function n(t){this===e?(i(),i=M):i=t}e.on("readable",n);let o=S(e,{writable:!1},e=>{r=e?A(r,e):null,i(),i=M});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else if(r)throw r;else{if(null===r)return;await new h(n)}}}catch(e){throw r=A(r,e)}finally{(r||(null==t?void 0:t.destroyOnReturn)!==!1)&&(void 0===r||e._readableState.autoDestroy)?k.destroyer(e,null):(e.off("readable",n),o())}}function ei(e,t){let r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function en(e){let t=e._readableState;x("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(eo,t,e))}function eo(e,t){if(x("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length){if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(es,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}}function es(e){!e.writable||e.writableEnded||e.destroyed||e.end()}function ea(){return void 0===i&&(i={}),i}u($.prototype,{objectMode:H(1),ended:H(2),endEmitted:H(4),reading:H(8),constructed:H(16),sync:H(32),needReadable:H(64),emittedReadable:H(128),readableListening:H(256),resumeScheduled:H(512),errorEmitted:H(1024),emitClose:H(2048),autoDestroy:H(4096),destroyed:H(8192),closed:H(16384),closeEmitted:H(32768),multiAwaitDrain:H(65536),readingMore:H(131072),dataEmitted:H(262144)}),K.prototype.destroy=k.destroy,K.prototype._undestroy=k.undestroy,K.prototype._destroy=function(e,t){t(e)},K.prototype[m.captureRejectionSymbol]=function(e){this.destroy(e)},K.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new j,this.destroy(e)),new h((t,r)=>S(this,i=>i&&i!==e?r(i):t(null)))},K.prototype.push=function(e,t){return V(this,e,t,!1)},K.prototype.unshift=function(e,t){return V(this,e,t,!0)},K.prototype.isPaused=function(){let e=this._readableState;return!0===e[L]||!1===e.flowing},K.prototype.setEncoding=function(e){let t=new D(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,i="";for(let e of r)i+=t.write(e);return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this},K.prototype.read=function(e){let t;x("read",e),void 0===e?e=NaN:s(e)||(e=l(e,10));let r=this._readableState,i=e;if(e>r.highWaterMark&&(r.highWaterMark=function(e){if(e>0x40000000)throw new C("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(r.state&=-129),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return x("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?en(this):z(this),null;if(0===(e=q(e,r))&&r.ended)return 0===r.length&&en(this),null;let n=(64&r.state)!=0;if(x("need readable",n),(0===r.length||r.length-e<r.highWaterMark)&&x("length less than watermark",n=!0),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)x("reading, ended or constructing",n=!1);else if(n){x("do read"),r.state|=40,0===r.length&&(r.state|=64);try{this._read(r.highWaterMark)}catch(e){B(this,e)}r.state&=-33,r.reading||(e=q(i,r))}return null===(t=e>0?ei(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&en(this)),null===t||r.errorEmitted||r.closeEmitted||(r.dataEmitted=!0,this.emit("data",t)),t},K.prototype._read=function(e){throw new R("_read()")},K.prototype.pipe=function(e,t){let r,i=this,o=this._readableState;1!==o.pipes.length||o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new f(o.awaitDrainWriters?[o.awaitDrainWriters]:[])),o.pipes.push(e),x("pipe count=%d opts=%j",o.pipes.length,t);let s=t&&!1===t.end||e===n.stdout||e===n.stderr?g:a;function a(){x("onend"),e.end()}o.endEmitted?n.nextTick(s):i.once("end",s),e.on("unpipe",function t(n,s){x("onunpipe"),n===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,x("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),r&&e.removeListener("drain",r),e.removeListener("error",d),e.removeListener("unpipe",t),i.removeListener("end",a),i.removeListener("end",g),i.removeListener("data",c),l=!0,r&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&r())});let l=!1;function u(){var t,n;l||(1===o.pipes.length&&o.pipes[0]===e?(x("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(x("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),i.pause()),r||(t=i,n=e,r=function(){let e=t._readableState;e.awaitDrainWriters===n?(x("pipeOnDrain",1),e.awaitDrainWriters=null):e.multiAwaitDrain&&(x("pipeOnDrain",e.awaitDrainWriters.size),e.awaitDrainWriters.delete(n)),(!e.awaitDrainWriters||0===e.awaitDrainWriters.size)&&t.listenerCount("data")&&t.resume()},e.on("drain",r))}function c(t){x("ondata");let r=e.write(t);x("dest.write",r),!1===r&&u()}function d(t){if(x("onerror",t),g(),e.removeListener("error",d),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?B(e,t):e.emit("error",t)}}function h(){e.removeListener("finish",p),g()}function p(){x("onfinish"),e.removeListener("close",h),g()}function g(){x("unpipe"),i.unpipe(e)}return i.on("data",c),_(e,"error",d),e.once("close",h),e.once("finish",p),e.emit("pipe",i),!0===e.writableNeedDrain?u():o.flowing||(x("pipe resume"),i.resume()),e},K.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=o(t.pipes,e);return -1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},K.prototype.on=function(e,t){let r=v.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,x("on readable",i.length,i.reading),i.length?z(this):i.reading||n.nextTick(Q,this)),r},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(e,t){let r=v.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(Y,this),r},K.prototype.off=K.prototype.removeListener,K.prototype.removeAllListeners=function(e){let t=v.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(Y,this),t},K.prototype.resume=function(){var e,t;let r=this._readableState;return r.flowing||(x("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,n.nextTick(X,e,t))),r[L]=!1,this},K.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[L]=!0,this},K.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{B(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=c(e);for(let t=1;t<r.length;t++){let i=r[t];void 0===this[i]&&"function"==typeof e[i]&&(this[i]=e[i].bind(e))}return this},K.prototype[g]=function(){return et(this)},K.prototype.iterator=function(e){return void 0!==e&&O(e,"options"),et(this,e)},u(K.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),u($.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[L]},set(e){this[L]=!!e}}}),K._fromList=ei,K.from=function(e,t){return U(K,e,t)},K.fromWeb=function(e,t){return ea().newStreamReadableFromReadableStream(e,t)},K.toWeb=function(e,t){return ea().newReadableStreamFromStreamReadable(e,t)},K.wrap=function(e,t){var r,i;return new K({objectMode:null==(r=null!=(i=e.readableObjectMode)?i:e.objectMode)||r,...t,destroy(t,r){k.destroyer(e,t),r(t)}}).wrap(e)}},6382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return n.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect},unauthorized:function(){return a.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let i=r(4269),n=r(5318),o=r(2647),s=r(2202),a=r(8475),l=r(4167);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6733:(e,t,r)=>{"use strict";let i=r(1642),{format:n,inspect:o}=r(666),{codes:{ERR_INVALID_ARG_TYPE:s}}=r(7894),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:u}=r(4039),AbortSignal=globalThis.AbortSignal||r(8461).AbortSignal,c=globalThis.AbortController||r(8461).AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||i.Blob,f=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new s(t,"AbortSignal",e)},p=(e,t)=>{if("function"!=typeof e)throw new s(t,"Function",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...i)=>e?r(e):t(...i))}),debuglog:()=>function(){},format:n,inspect:o,types:{isAsyncFunction:e=>e instanceof d,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:void 0!==h?function(e){return e instanceof h}:function(e){return!1},deprecate:(e,t)=>e,addAbortListener:r(5978).addAbortListener||function(e,t){let r;if(void 0===e)throw new s("signal","AbortSignal",e);return f(e,"signal"),p(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[u](){var e;null==(e=r)||e()}}},AbortSignalAny:AbortSignal.any||function(e){if(1===e.length)return e[0];let t=new c,r=()=>t.abort();return e.forEach(e=>{f(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},6836:(e,t,r)=>{"use strict";r.d(t,{uR:()=>c,$q:()=>d,Il:()=>f,nt:()=>o,Ez:()=>a,LW:()=>u,L:()=>h});var i=r(1078);let n=i.z.object({iri:i.z.string(),version:i.z.string(),name:i.z.string(),hasCard:i.z.array(i.z.string()),isInSolidMemoDataInstance:i.z.string()});function o(e){return n.parse(e)}let s=i.z.object({version:i.z.string(),iri:i.z.string(),front:i.z.string(),back:i.z.string(),isInDeck:i.z.string()});function a(e){return s.parse(e)}let l=i.z.object({iri:i.z.string(),version:i.z.string(),name:i.z.string(),hasDeck:i.z.array(i.z.string()),isInPrivateTypeIndex:i.z.string()});function u(e){return l.parse(e)}class c{repository;constructor(e){this.repository=e}isLoggedIn(){return this.repository.isLoggedIn()}getWebId(){return this.repository.getWebId()}getFetch(){return this.repository.getFetch()}async logInWithOidcIssuer({oidcIssuer:e,redirectUrl:t,clientName:r}){return this.repository.login({oidcIssuer:e,redirectUrl:t,clientName:r})}async logInWithWebId({webId:e,redirectUrl:t,clientName:r}){let i=await this.repository.findOidcIssuers(e);if(i.length>1)throw Error("Too many oidc issuers found in WebID");let n=i[0];if(!n)throw Error("Failed to discover oidc issuer of WebID");return this.repository.login({oidcIssuer:n,redirectUrl:t,clientName:r})}async logOut(){return this.repository.logout()}async handleIncomingRedirect(e){await this.repository.handleIncomingRedirect(e)}}class d{repository;constructor(e){this.repository=e}async discoverEverything(){let e=await this.repository.findAllInstanceUrls(),t=await this.repository.findAllDeckUrls(e),r=await this.repository.findAllFlashcardUrls(t);return{instanceUrls:e,deckUrls:t,flashcardUrls:r}}async discoverInstanceUrls(){return this.repository.findAllInstanceUrls()}async newInstance(){let e=await this.repository.findAllStorageIris();if(0===e.length)throw Error("No storage iris found");if(e.length>1)throw Error("Too many storage iris found");let t=e[0];if("string"!=typeof t)throw Error("Failed to discover storage to put instance in");await this.repository.createInstance(t);let r=await this.repository.findAllInstanceUrls(),i=await this.repository.findInstances(r);return{instanceUrls:r,instances:i}}async newDeck(e){return{decks:await this.repository.createDeck(e.isInSolidMemoDataInstance,e)}}async newFlashcard(e,t){return await this.repository.createFlashcard(e,t.isInDeck,t),{decks:await this.repository.findDecks([t.isInDeck])}}async getInstance(e){return this.repository.findInstances([e])}async getDeck(e){return this.repository.findDecks([e])}async getFlashcard(e){return this.repository.findFlashcards([e])}async renameInstance(e,t){await this.repository.renameInstance(e,t)}async renameDeck(e,t){await this.repository.renameDeck(e,t)}async removeInstance(e){await this.repository.deleteInstance(e);let t=await this.repository.findAllInstanceUrls(),r=await this.repository.findInstances(t);return{instanceUrls:t,instances:r}}async removeDeck(e){await this.repository.deleteDeck(e);let t=await this.repository.findAllInstanceUrls(),r=await this.repository.findInstances(t),i=await this.repository.findAllDeckUrls([e.isInSolidMemoDataInstance]),n=await this.repository.findDecks(i);return{instances:r,deckUrls:i,decks:n}}async removeFlashcard(e){await this.repository.deleteFlashcard(e);let t=await this.repository.findDecks([e.isInDeck]),r=await this.repository.findAllFlashcardUrls([e.isInDeck]),i=await this.repository.findFlashcards(r);return{deck:t[0],flashcardUrls:r,flashcards:i}}}function h(e){let t=new URL(e).hash.substring(1);return""!==t?t:e}function f(e){return e.endsWith("/")?e:e+"/"}},7105:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n="http://www.w3.org/2001/XMLSchema#",o="http://www.w3.org/2000/10/swap/",s={xsd:{decimal:`${n}decimal`,boolean:`${n}boolean`,double:`${n}double`,integer:`${n}integer`,string:`${n}string`},rdf:{type:`${i}type`,nil:`${i}nil`,first:`${i}first`,rest:`${i}rest`,langString:`${i}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${o}reify#forSome`,forAll:`${o}reify#forAll`},log:{implies:`${o}log#implies`,isImpliedBy:`${o}log#isImpliedBy`}}},7181:(e,t,r)=>{"use strict";var i=r(1642).Buffer,n=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,l=/[;,"]/,u=/[;,"]|\s/,c=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,d={IDLE:1,URI:2,ATTR:4};function h(e){return e.replace(o,"")}function f(e){return s.test(e)}function p(e){return u.test(e)||!c.test(e)}class g{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var t=[],r=e.toLowerCase(),i=0;i<this.refs.length;i++)"string"==typeof this.refs[i].rel&&this.refs[i].rel.toLowerCase()===r&&t.push(this.refs[i]);return t}get(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var r=[],i=0;i<this.refs.length;i++)"string"==typeof this.refs[i][e]&&this.refs[i][e].toLowerCase()===t&&r.push(this.refs[i]);return r}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some(t=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>r in e&&t[r]===e[r]))||this.refs.push(e),this}has(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var r=0;r<this.refs.length;r++)if("string"==typeof this.refs[r][e]&&this.refs[r][e].toLowerCase()===t)return!0;return!1}parse(e,t){e=h(e=(t=t||0)?e.slice(t):e).replace(a,"");for(var r=d.IDLE,i=e.length,t=0,n=null;t<i;)if(r===d.IDLE){if(f(e[t])){t++;continue}if("<"===e[t]){null!=n&&(null!=n.rel?this.refs.push(...g.expandRelations(n)):this.refs.push(n));var o=e.indexOf(">",t);if(-1===o)throw Error("Expected end of URI delimiter at offset "+t);n={uri:e.slice(t+1,o)},t=o,r=d.URI}else throw Error('Unexpected character "'+e[t]+'" at offset '+t);t++}else if(r===d.URI)if(f(e[t])){t++;continue}else if(";"===e[t])r=d.ATTR,t++;else if(","===e[t])r=d.IDLE,t++;else throw Error('Unexpected character "'+e[t]+'" at offset '+t);else if(r===d.ATTR){if(";"===e[t]||f(e[t])){t++;continue}var o=e.indexOf("=",t);-1===o&&(o=e.indexOf(";",t)),-1===o&&(o=e.length);var s=h(e.slice(t,o)).toLowerCase(),u="";if(t=function(e,t){for(;f(e[t]);)t++;return t}(e,t=o+1),'"'===e[t])for(t++;t<i;){if('"'===e[t]){t++;break}"\\"===e[t]&&t++,u+=e[t],t++}else{for(var o=t+1;!l.test(e[o])&&o<i;)o++;u=e.slice(t,o),t=o}switch(n[s]&&g.isSingleOccurenceAttr(s)||("*"===s[s.length-1]?n[s]=g.parseExtendedValue(u):(u="type"===s?u.toLowerCase():u,null!=n[s]?Array.isArray(n[s])?n[s].push(u):n[s]=[n[s],u]:n[s]=u)),e[t]){case",":r=d.IDLE;break;case";":r=d.ATTR}t++}else throw Error('Unknown parser state "'+r+'"');return null!=n&&(null!=n.rel?this.refs.push(...g.expandRelations(n)):this.refs.push(n)),n=null,this}toString(){for(var e=[],t="",r=null,i=0;i<this.refs.length;i++)r=this.refs[i],e.push(t=Object.keys(this.refs[i]).reduce(function(e,t){return"uri"===t?e:e+"; "+g.formatAttribute(t,r[t])},"<"+r.uri+">"));return e.join(", ")}}g.isCompatibleEncoding=function(e){return n.test(e)},g.parse=function(e,t){return new g().parse(e,t)},g.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},g.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},g.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},g.expandRelations=function(e){return e.rel.split(" ").map(function(t){var r=Object.assign({},e);return r.rel=t,r})},g.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:g.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:g.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},g.formatExtendedAttribute=function(e,t){var r=(t.encoding||"utf-8").toUpperCase(),n=t.language||"en",o="";return o=i.isBuffer(t.value)&&g.isCompatibleEncoding(r)?t.value.toString(r):i.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value),e+"="+r+"'"+n+"'"+o},g.formatAttribute=function(e,t){return Array.isArray(t)?t.map(t=>g.formatAttribute(e,t)).join("; "):"*"===e[e.length-1]||"string"!=typeof t?g.formatExtendedAttribute(e,t):(g.isTokenAttr(e)?t=p(t)?'"'+g.escapeQuotes(t)+'"':g.escapeQuotes(t):p(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t)},e.exports=g},7211:(e,t,r)=>{"use strict";let i=r(9143),n=r(1642),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:l,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:d,isReadableStream:h,isWritableStream:f}=r(918),p=r(5791),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:m}}=r(7894),{destroyer:v}=r(261),_=r(9667),b=r(6261),w=r(2661),{createDeferredPromise:S}=r(6733),x=r(9846),E=globalThis.Blob||n.Blob,k=void 0!==E?function(e){return e instanceof E}:function(e){return!1},F=globalThis.AbortController||r(8461).AbortController,{FunctionPrototypeCall:I}=r(4039);class A extends _{constructor(e){super(e),(null==e?void 0:e.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==e?void 0:e.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(e){let t,r,i,n,a,l=e.readable&&"function"!=typeof e.readable.read?b.wrap(e.readable):e.readable,u=e.writable,c=!!o(l),d=!!s(u);function h(e){let t=n;n=null,t?t(e):e&&a.destroy(e)}return a=new A({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=u&&u.writableObjectMode),readable:c,writable:d}),d&&(p(u,e=>{d=!1,e&&v(l,e),h(e)}),a._write=function(e,r,i){u.write(e,r)?i():t=i},a._final=function(e){u.end(),r=e},u.on("drain",function(){if(t){let e=t;t=null,e()}}),u.on("finish",function(){if(r){let e=r;r=null,e()}})),c&&(p(l,e=>{c=!1,e&&v(l,e),h(e)}),l.on("readable",function(){if(i){let e=i;i=null,e()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let e=l.read();if(null===e){i=a._read;return}if(!a.push(e))return}}),a._destroy=function(e,o){e||null===n||(e=new g),i=null,t=null,r=null,null===n?o(e):(n=o,v(u,e),v(l,e))},a}e.exports=function e(t,r){if(d(t))return t;if(u(t))return T({readable:t});if(c(t))return T({writable:t});if(l(t))return T({writable:!1,readable:!1});if(h(t))return T({readable:b.fromWeb(t)});if(f(t))return T({writable:w.fromWeb(t)});if("function"==typeof t){let{value:e,write:n,final:o,destroy:s}=function(e){let{promise:t,resolve:r}=S(),n=new F,o=n.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:n,done:s,cb:a}=await e;if(i.nextTick(a),s)return;if(o.aborted)throw new g(void 0,{cause:o.reason});({promise:t,resolve:r}=S()),yield n}}(),{signal:o}),write(e,t,i){let n=r;r=null,n({chunk:e,done:!1,cb:i})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){n.abort(),t(e)}}}(t);if(a(e))return x(A,e,{objectMode:!0,write:n,final:o,destroy:s});let l=null==e?void 0:e.then;if("function"==typeof l){let t,r=I(l,e,e=>{if(null!=e)throw new m("nully","body",e)},e=>{v(t,e)});return t=new A({objectMode:!0,readable:!1,write:n,final(e){o(async()=>{try{await r,i.nextTick(e,null)}catch(t){i.nextTick(e,t)}})},destroy:s})}throw new m("Iterable, AsyncIterable or AsyncFunction",r,e)}if(k(t))return e(t.arrayBuffer());if(a(t))return x(A,t,{objectMode:!0,writable:!1});if(h(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return A.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return T({readable:null!=t&&t.readable?u(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});let n=null==t?void 0:t.then;if("function"==typeof n){let e;return I(n,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{v(e,t)}),e=new A({objectMode:!0,writable:!1,read(){}})}throw new y(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},7328:(e,t,r)=>{e.exports=r(9836)},7894:(e,t,r)=>{"use strict";let{format:i,inspect:n}=r(666),{AggregateError:o}=r(4039),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c={};function d(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",r=e.length,i=+("-"===e[0]);for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class n extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return d(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let n=(t.match(/%[dfijoOs]/g)||[]).length;return(d(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),0===r.length)?t:i(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[a]=!0,c[e]=n}function p(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,r)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let i="The ";e.endsWith(" argument")?i+=`${e} `:i+=`"${e}" ${e.includes(".")?"property":"argument"} `,i+="must be ";let o=[],s=[],a=[];for(let e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):u.test(e)?s.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){let e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:i+=`of type ${o[0]}`;break;case 2:i+=`one of type ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();i+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(i+=" or ")}if(s.length>0){switch(s.length){case 1:i+=`an instance of ${s[0]}`;break;case 2:i+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();i+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(i+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(i+="an "),i+=`${a[0]}`;break;case 2:i+=`one of ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();i+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)i+=`. Received ${r}`;else if("function"==typeof r&&r.name)i+=`. Received function ${r.name}`;else if("object"==typeof r){var c;if(null!=(c=r.constructor)&&c.name)i+=`. Received an instance of ${r.constructor.name}`;else{let e=n(r,{depth:-1});i+=`. Received ${e}`}}else{let e=n(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),i+=`. Received type ${typeof r} (${e})`}return i},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let i=n(t);i.length>128&&(i=i.slice(0,128)+"...");let o=e.includes(".")?"property":"argument";return`The ${o} '${e}' ${r}. Received ${i}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var i;let n=null!=r&&null!=(i=r.constructor)&&i.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${n}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");let r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,r)=>{let i;if(d(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>0x100000000)i=h(String(r));else if("bigint"==typeof r){i=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(i=h(i)),i+="n"}else i=n(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${i}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new s([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:p,codes:c}},8049:(e,t,r)=>{"use strict";let i,n,o,s,a,l;r.d(t,{qY:()=>e$,_:()=>tW});let u=new TextEncoder,c=new TextDecoder;function d(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}let h=e=>{let t=e;"string"==typeof t&&(t=u.encode(t));let r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))},f=e=>h(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),p=e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},g=e=>{let t=e;t instanceof Uint8Array&&(t=c.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return p(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}};class y extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}y.code="ERR_JOSE_GENERIC";class m extends y{constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=i,this.payload=t}}m.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class v extends y{constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=i,this.payload=t}}v.code="ERR_JWT_EXPIRED";class _ extends y{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}_.code="ERR_JOSE_ALG_NOT_ALLOWED";class b extends y{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}b.code="ERR_JOSE_NOT_SUPPORTED";class w extends y{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}w.code="ERR_JWE_DECRYPTION_FAILED";class S extends y{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}S.code="ERR_JWE_INVALID";class x extends y{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}x.code="ERR_JWS_INVALID";class E extends y{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}E.code="ERR_JWT_INVALID";class k extends y{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}k.code="ERR_JWK_INVALID";class F extends y{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}F.code="ERR_JWKS_INVALID";class I extends y{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}I.code="ERR_JWKS_NO_MATCHING_KEY";class A extends y{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Symbol.asyncIterator,A.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class T extends y{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}T.code="ERR_JWKS_TIMEOUT";class R extends y{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function C(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new b(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}R.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";let P=crypto,N=e=>e instanceof CryptoKey,j=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function O(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function L(e,t){return e.name===t}function D(e){return parseInt(e.name.slice(4),10)}function U(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let M=(e,...t)=>U("Key must be ",e,...t);function B(e,t,...r){return U(`Key for the ${e} algorithm must be `,t,...r)}let H=e=>!!N(e)||e?.[Symbol.toStringTag]==="KeyObject",$=["CryptoKey"];function K(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function V(e){return K(e)&&"string"==typeof e.kty}let W=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new b('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),i=[t,e.ext??!1,e.key_ops??r],n={...e};return delete n.alg,delete n.use,P.subtle.importKey("jwk",n,...i)},q=e=>g(e),z=e=>e?.[Symbol.toStringTag]==="KeyObject",J=async(e,t,r,i,n=!1)=>{let o=e.get(t);if(o?.[i])return o[i];let s=await W({...r,alg:i});return n&&Object.freeze(t),o?o[i]=s:e.set(t,{[i]:s}),s},Z={normalizePublicKey:(e,t)=>{if(z(e)){let r=e.export({format:"jwk"});return(delete r.d,delete r.dp,delete r.dq,delete r.p,delete r.q,delete r.qi,r.k)?q(r.k):(n||(n=new WeakMap),J(n,e,r,t))}return V(e)?e.k?g(e.k):(n||(n=new WeakMap),J(n,e,e,t,!0)):e},normalizePrivateKey:(e,t)=>{if(z(e)){let r=e.export({format:"jwk"});return r.k?q(r.k):(i||(i=new WeakMap),J(i,e,r,t))}return V(e)?e.k?g(e.k):(i||(i=new WeakMap),J(i,e,e,t,!0)):e}};async function G(e,t,r){if("sign"===r&&(t=await Z.normalizePrivateKey(t,e)),"verify"===r&&(t=await Z.normalizePublicKey(t,e)),N(t))return!function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!L(e.algorithm,"HMAC"))throw O("HMAC");let r=parseInt(t.slice(2),10);if(D(e.algorithm.hash)!==r)throw O(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!L(e.algorithm,"RSASSA-PKCS1-v1_5"))throw O("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(D(e.algorithm.hash)!==r)throw O(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!L(e.algorithm,"RSA-PSS"))throw O("RSA-PSS");let r=parseInt(t.slice(2),10);if(D(e.algorithm.hash)!==r)throw O(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw O("Ed25519 or Ed448");break;case"Ed25519":if(!L(e.algorithm,"Ed25519"))throw O("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!L(e.algorithm,"ECDSA"))throw O("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw O(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}var i=e,n=r;if(n.length&&!n.some(e=>i.usages.includes(e))){let e="CryptoKey does not support this operation, its usages must include ";if(n.length>2){let t=n.pop();e+=`one of ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of ${n[0]} or ${n[1]}.`:e+=`${n[0]}.`;throw TypeError(e)}}(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(M(t,...$));return P.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw TypeError(M(t,...$,"Uint8Array","JSON Web Key"))}let Y=async(e,t,r,i)=>{let n=await G(e,t,"verify");j(e,n);let o=C(e,n.algorithm);try{return await P.subtle.verify(o,n,r,i)}catch{return!1}},Q=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},X=e=>e?.[Symbol.toStringTag],ee=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},et=(e,t,r,i)=>{if(!(t instanceof Uint8Array)){if(i&&V(t)){if(function(e){return V(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&ee(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!H(t))throw TypeError(B(e,t,...$,"Uint8Array",i?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${X(t)} instances for symmetric algorithms must be of type "secret"`)}},er=(e,t,r,i)=>{if(i&&V(t))switch(r){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&ee(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&ee(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!H(t))throw TypeError(B(e,t,...$,i?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${X(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${X(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${X(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${X(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${X(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function ei(e,t,r,i){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?et(t,r,i,e):er(t,r,i,e)}ei.bind(void 0,!1);let en=ei.bind(void 0,!0),eo=function(e,t,r,i,n){let o;if(void 0!==n.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!o.has(s))throw new b(`Extension Header Parameter "${s}" is not recognized`);if(void 0===n[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===i[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)},es=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function ea(e,t){if(!K(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return g(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new b('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return W({...e,alg:t});default:throw new b('Unsupported "kty" (Key Type) Parameter value')}}async function el(e,t,r){let i,n;if(!K(e))throw new x("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new x('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new x("JWS Protected Header incorrect type");if(void 0===e.payload)throw new x("JWS Payload missing");if("string"!=typeof e.signature)throw new x("JWS Signature missing or incorrect type");if(void 0!==e.header&&!K(e.header))throw new x("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let t=g(e.protected);o=JSON.parse(c.decode(t))}catch{throw new x("JWS Protected Header is invalid")}if(!Q(o,e.header))throw new x("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let s={...o,...e.header},a=eo(x,new Map([["b64",!0]]),r?.crit,o,s),l=!0;if(a.has("b64")&&"boolean"!=typeof(l=o.b64))throw new x('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:h}=s;if("string"!=typeof h||!h)throw new x('JWS "alg" (Algorithm) Header Parameter missing or invalid');let f=r&&es("algorithms",r.algorithms);if(f&&!f.has(h))throw new _('"alg" (Algorithm) Header Parameter value not allowed');if(l){if("string"!=typeof e.payload)throw new x("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new x("JWS Payload must be a string or an Uint8Array instance");let p=!1;"function"==typeof t?(t=await t(o,e),p=!0,en(h,t,"verify"),V(t)&&(t=await ea(t,h))):en(h,t,"verify");let y=d(u.encode(e.protected??""),u.encode("."),"string"==typeof e.payload?u.encode(e.payload):e.payload);try{i=g(e.signature)}catch{throw new x("Failed to base64url decode the signature")}if(!await Y(h,t,i,y))throw new R;if(l)try{n=g(e.payload)}catch{throw new x("Failed to base64url decode the payload")}else n="string"==typeof e.payload?u.encode(e.payload):e.payload;let m={payload:n};return(void 0!==e.protected&&(m.protectedHeader=o),void 0!==e.header&&(m.unprotectedHeader=e.header),p)?{...m,key:t}:m}async function eu(e,t,r){if(e instanceof Uint8Array&&(e=c.decode(e)),"string"!=typeof e)throw new x("Compact JWS must be a string or Uint8Array");let{0:i,1:n,2:o,length:s}=e.split(".");if(3!==s)throw new x("Invalid Compact JWS");let a=await el({payload:n,protected:i,signature:o},t,r),l={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...l,key:a.key}:l}let ec=e=>Math.floor(e.getTime()/1e3),ed=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,eh=e=>{let t,r=ed.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let i=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*i);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*i);break;case"day":case"days":case"d":t=Math.round(86400*i);break;case"week":case"weeks":case"w":t=Math.round(604800*i);break;default:t=Math.round(0x1e187e0*i)}return"-"===r[1]||"ago"===r[4]?-t:t},ef=e=>e.toLowerCase().replace(/^application\//,""),ep=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e))),eg=(e,t,r={})=>{let i,n;try{i=JSON.parse(c.decode(t))}catch{}if(!K(i))throw new E("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||ef(e.typ)!==ef(o)))throw new m('unexpected "typ" JWT header value',i,"typ","check_failed");let{requiredClaims:s=[],issuer:a,subject:l,audience:u,maxTokenAge:d}=r,h=[...s];for(let e of(void 0!==d&&h.push("iat"),void 0!==u&&h.push("aud"),void 0!==l&&h.push("sub"),void 0!==a&&h.push("iss"),new Set(h.reverse())))if(!(e in i))throw new m(`missing required "${e}" claim`,i,e,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(i.iss))throw new m('unexpected "iss" claim value',i,"iss","check_failed");if(l&&i.sub!==l)throw new m('unexpected "sub" claim value',i,"sub","check_failed");if(u&&!ep(i.aud,"string"==typeof u?[u]:u))throw new m('unexpected "aud" claim value',i,"aud","check_failed");switch(typeof r.clockTolerance){case"string":n=eh(r.clockTolerance);break;case"number":n=r.clockTolerance;break;case"undefined":n=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,p=ec(f||new Date);if((void 0!==i.iat||d)&&"number"!=typeof i.iat)throw new m('"iat" claim must be a number',i,"iat","invalid");if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new m('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>p+n)throw new m('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new m('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=p-n)throw new v('"exp" claim timestamp check failed',i,"exp","check_failed")}if(d){let e=p-i.iat;if(e-n>("number"==typeof d?d:eh(d)))throw new v('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(e<0-n)throw new m('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i};async function ey(e,t,r){let i=await eu(e,t,r);if(i.protectedHeader.crit?.includes("b64")&&!1===i.protectedHeader.b64)throw new E("JWTs MUST NOT use unencoded payload");let n={payload:eg(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"==typeof t?{...n,key:i.key}:n}let em=async(e,t,r)=>{let i,n,o=!1;"function"==typeof AbortController&&(i=new AbortController,n=setTimeout(()=>{o=!0,i.abort()},t));let s=await fetch(e.href,{signal:i?i.signal:void 0,redirect:"manual",headers:r.headers}).catch(e=>{if(o)throw new T;throw e});if(void 0!==n&&clearTimeout(n),200!==s.status)throw new y("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new y("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function ev(e){return K(e)}function e_(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class eb{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(ev)}(e))throw new F("JSON Web Key Set malformed");this._jwks=e_(e)}async getKey(e,t){let{alg:r,kid:i}={...e,...t?.header},n=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new b('Unsupported "alg" value for a JSON Web Key Set')}}(r),o=this._jwks.keys.filter(e=>{let t=n===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:s,length:a}=o;if(0===a)throw new I;if(1!==a){let e=new A,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of o)try{yield await ew(t,e,r)}catch{}},e}return ew(this._cached,s,r)}}async function ew(e,t,r){let i=e.get(t)||e.set(t,{}).get(t);if(void 0===i[r]){let e=await ea({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new F("JSON Web Key Set members must be public keys");i[r]=e}return i[r]}function eS(e){let t=new eb(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>e_(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(o="jose/v5.10.0");let ex=Symbol();class eE{constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[ex]!==void 0&&(this._cache=t?.[ex],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!K(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,K)}(t?.[ex],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=eS(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof I&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);o&&!e.has("User-Agent")&&(e.set("User-Agent",o),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=em(this._url,this._timeoutDuration,this._options).then(e=>{this._local=eS(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}let ek=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:f(e)};if(!N(e))throw TypeError(M(e,...$,"Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:i,use:n,...o}=await P.subtle.exportKey("jwk",e);return o};async function eF(e){return ek(e)}let eI=async(e,t,r)=>{let i=await G(e,t,"sign");return j(e,i),new Uint8Array(await P.subtle.sign(C(e,i.algorithm),i,r))};class eA{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new x("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Q(this._protectedHeader,this._unprotectedHeader))throw new x("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...this._protectedHeader,...this._unprotectedHeader},n=eo(x,new Map([["b64",!0]]),t?.crit,this._protectedHeader,i),o=!0;if(n.has("b64")&&"boolean"!=typeof(o=this._protectedHeader.b64))throw new x('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=i;if("string"!=typeof s||!s)throw new x('JWS "alg" (Algorithm) Header Parameter missing or invalid');en(s,e,"sign");let a=this._payload;o&&(a=u.encode(f(a)));let l=d(r=this._protectedHeader?u.encode(f(JSON.stringify(this._protectedHeader))):u.encode(""),u.encode("."),a),h={signature:f(await eI(s,e,l)),payload:""};return o&&(h.payload=c.decode(a)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=c.decode(r)),h}}class eT{constructor(e){this._flattened=new eA(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}function eR(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class eC{constructor(e={}){if(!K(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:eR("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:eR("setNotBefore",ec(e))}:this._payload={...this._payload,nbf:ec(new Date)+eh(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:eR("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:eR("setExpirationTime",ec(e))}:this._payload={...this._payload,exp:ec(new Date)+eh(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:ec(new Date)}:e instanceof Date?this._payload={...this._payload,iat:eR("setIssuedAt",ec(e))}:"string"==typeof e?this._payload={...this._payload,iat:eR("setIssuedAt",ec(new Date)+eh(e))}:this._payload={...this._payload,iat:eR("setIssuedAt",e)},this}}class eP extends eC{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new eT(u.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new E("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}function eN(e){let t=e?.modulusLength??2048;if("number"!=typeof t||t<2048)throw new b("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function ej(e,t){let r,i;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eN(t)},i=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eN(t)},i=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:eN(t)},i=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"];break;case"Ed25519":r={name:"Ed25519"},i=["sign","verify"];break;case"EdDSA":{i=["sign","verify"];let e=t?.crv??"Ed25519";switch(e){case"Ed25519":case"Ed448":r={name:e};break;default:throw new b("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{i=["deriveKey","deriveBits"];let e=t?.crv??"P-256";switch(e){case"P-256":case"P-384":case"P-521":r={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":r={name:e};break;default:throw new b("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new b('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return P.subtle.generateKey(r,t?.extractable??!1,i)}async function eO(e,t){return ej(e,t)}let eL={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},eD=new Uint8Array(16),eU=[];for(let e=0;e<256;++e)eU.push((e+256).toString(16).slice(1));let eM=function(e,t,r){if(eL.randomUUID&&!t&&!e)return eL.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(eD)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=i[e];return t}return function(e,t=0){return(eU[e[t+0]]+eU[e[t+1]]+eU[e[t+2]]+eU[e[t+3]]+"-"+eU[e[t+4]]+eU[e[t+5]]+"-"+eU[e[t+6]]+eU[e[t+7]]+"-"+eU[e[t+8]]+eU[e[t+9]]+"-"+eU[e[t+10]]+eU[e[t+11]]+eU[e[t+12]]+eU[e[t+13]]+eU[e[t+14]]+eU[e[t+15]]).toLowerCase()}(i)},eB="solidClientAuthn:",eH=["ES256","RS256"],e$={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",NEW_TOKENS:"newTokens",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},eK="openid offline_access webid";class eV{handleables;constructor(e){this.handleables=e,this.handleables=e}async getProperHandler(e){let t=await Promise.all(this.handleables.map(t=>t.canHandle(...e)));for(let e=0;e<t.length;e+=1)if(t[e])return this.handleables[e];return null}async canHandle(...e){return await this.getProperHandler(e)!==null}async handle(...e){let t=await this.getProperHandler(e);if(t)return t.handle(...e);throw Error(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map(e=>{try{return JSON.stringify(e)}catch(t){return e.toString()}}).join(", ")}`)}}async function eW(e,t,r,i){let n,o;try{let{payload:o}=await ey(e,function(e,t){let r=new eE(e,void 0),i=async(e,t)=>r.getKey(e,t);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}(new URL(t)),{issuer:r,audience:i});n=o}catch(e){throw Error(`Token verification failed: ${e.stack}`)}if("string"==typeof n.azp&&(o=n.azp),"string"==typeof n.webid)return{webId:n.webid,clientId:o};if("string"!=typeof n.sub)throw Error(`The token ${JSON.stringify(n)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(n.sub),{webId:n.sub,clientId:o}}catch(e){throw Error(`The token has no 'webid' claim, and its 'sub' claim of [${n.sub}] is invalid as a URL - error [${e}].`)}}function eq(e){try{let t=new URL(e),r=!t.searchParams.has("code")&&!t.searchParams.has("state"),i=""===t.hash;return r&&i}catch(e){return!1}}function ez(e){let t=new URL(e);return t.searchParams.delete("state"),t.searchParams.delete("code"),t.searchParams.delete("error"),t.searchParams.delete("error_description"),t.searchParams.delete("iss"),t}class eJ{storageUtility;redirector;constructor(e,t){this.storageUtility=e,this.redirector=t,this.storageUtility=e,this.redirector=t}parametersGuard=e=>void 0!==e.issuerConfiguration.grantTypesSupported&&e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1&&void 0!==e.redirectUrl;async canHandle(e){return this.parametersGuard(e)}async handleRedirect({oidcLoginOptions:e,state:t,codeVerifier:r,targetUrl:i}){var n;if(!this.parametersGuard(e))throw Error("The authorization code grant requires a redirectUrl.");await Promise.all([this.storageUtility.setForUser(t,{sessionId:e.sessionId}),this.storageUtility.setForUser(e.sessionId,{codeVerifier:r,issuer:e.issuer.toString(),redirectUrl:e.redirectUrl,dpop:(!!e.dpop).toString(),keepAlive:(n=e.keepAlive,"boolean"!=typeof n||!!n).toString()})]),this.redirector.redirect(i,{handleRedirect:e.handleRedirect})}}class eZ{sessionInfoManager;constructor(e){this.sessionInfoManager=e,this.sessionInfoManager=e}async canHandle(){return!0}async handle(e){await this.sessionInfoManager.clear(e)}}class eG{redirector;constructor(e){this.redirector=e,this.redirector=e}async canHandle(e,t){return t?.logoutType==="idp"}async handle(e,t){if(t?.logoutType!=="idp")throw Error("Attempting to call idp logout handler to perform app logout");if(void 0===t.toLogoutUrl)throw Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(t.toLogoutUrl(t),{handleRedirect:t.handleRedirect})}}class eY{handlers;constructor(e,t){this.handlers=[new eZ(e),new eG(t)]}async canHandle(){return!0}async handle(e,t){for(let r of this.handlers)await r.canHandle(e,t)&&await r.handle(e,t)}}function eQ(){return{isLoggedIn:!1,sessionId:eM(),fetch:(...e)=>fetch(...e)}}async function eX(e,t){await Promise.all([t.deleteAllUserData(e,{secure:!1}),t.deleteAllUserData(e,{secure:!0})])}class e0{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}update(e,t){throw Error("Not Implemented")}set(e,t){throw Error("Not Implemented")}get(e){throw Error("Not implemented")}async getAll(){throw Error("Not implemented")}async clear(e){return eX(e,this.storageUtility)}async register(e){throw Error("Not implemented")}async getRegisteredSessionIdAll(){throw Error("Not implemented")}async clearAll(){throw Error("Not implemented")}}function e1(e){try{return new URL(e),!0}catch{return!1}}async function e2(e,t,r,i){let n;if(t.scopesSupported.includes("webid")&&void 0!==e.clientId&&e1(e.clientId))n={clientId:e.clientId,clientName:e.clientName,clientType:"solid-oidc"};else{if(void 0===e.clientId||e1(e.clientId))return i.getClient({sessionId:e.sessionId,clientName:e.clientName,redirectUrl:e.redirectUrl},t);n={clientId:e.clientId,clientSecret:e.clientSecret,clientName:e.clientName,clientType:"static"}}let o={clientId:n.clientId,clientType:n.clientType};return"static"===n.clientType&&(o.clientSecret=n.clientSecret),n.clientName&&(o.clientName=n.clientName),await r.setForUser(e.sessionId,o),n}let e6=(e,t)=>fetch(e,t);class e3{loginHandler;redirectHandler;logoutHandler;sessionInfoManager;issuerConfigFetcher;boundLogout;constructor(e,t,r,i,n){this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=i,this.issuerConfigFetcher=n,this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=i,this.issuerConfigFetcher=n}fetch=e6;logout=async(e,t)=>{await this.logoutHandler.handle(e,t?.logoutType==="idp"?{...t,toLogoutUrl:this.boundLogout}:t),this.fetch=e6,delete this.boundLogout};getSessionInfo=async e=>this.sessionInfoManager.get(e);getAllSessionInfo=async()=>this.sessionInfoManager.getAll()}async function e5(e,t,r){try{let[i,n,o,s,a]=await Promise.all([t.getForUser(e,"issuer",{errorIfNull:!0}),t.getForUser(e,"codeVerifier"),t.getForUser(e,"redirectUrl"),t.getForUser(e,"dpop",{errorIfNull:!0}),t.getForUser(e,"keepAlive")]);await t.deleteForUser(e,"codeVerifier");let l=await r.fetchConfig(i);return{codeVerifier:n,redirectUrl:o,issuerConfig:l,dpop:"true"===s,keepAlive:"string"!=typeof a||"true"===a}}catch(t){throw Error(`Failed to retrieve OIDC context from storage associated with session [${e}]: ${t}`)}}async function e8(e,t,r,i,n,o,s,a){void 0!==o&&await e.setForUser(t,{refreshToken:o},{secure:s}),void 0!==r&&await e.setForUser(t,{webId:r},{secure:s}),void 0!==i&&await e.setForUser(t,{clientId:i},{secure:s}),void 0!==n&&await e.setForUser(t,{isLoggedIn:n},{secure:s}),void 0!==a&&await e.setForUser(t,{publicKey:JSON.stringify(a.publicKey),privateKey:JSON.stringify(await eF(a.privateKey))},{secure:s})}class e4{secureStorage;insecureStorage;constructor(e,t){this.secureStorage=e,this.insecureStorage=t,this.secureStorage=e,this.insecureStorage=t}getKey(e){return`solidClientAuthenticationUser:${e}`}async getUserData(e,t){let r=await (t?this.secureStorage:this.insecureStorage).get(this.getKey(e));if(void 0===r)return{};try{return JSON.parse(r)}catch(i){throw Error(`Data for user [${e}] in [${t?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${r}`)}}async setUserData(e,t,r){await (r?this.secureStorage:this.insecureStorage).set(this.getKey(e),JSON.stringify(t))}async get(e,t){let r=await (t?.secure?this.secureStorage:this.insecureStorage).get(e);if(void 0===r&&t?.errorIfNull)throw Error(`[${e}] is not stored`);return r}async set(e,t,r){return(r?.secure?this.secureStorage:this.insecureStorage).set(e,t)}async delete(e,t){return(t?.secure?this.secureStorage:this.insecureStorage).delete(e)}async getForUser(e,t,r){let i,n=await this.getUserData(e,r?.secure);if(n&&n[t]||(i=void 0),void 0===(i=n[t])&&r?.errorIfNull)throw Error(`Field [${t}] for user [${e}] is not stored`);return i||void 0}async setForUser(e,t,r){let i;try{i=await this.getUserData(e,r?.secure)}catch{i={}}await this.setUserData(e,{...i,...t},r?.secure)}async deleteForUser(e,t,r){let i=await this.getUserData(e,r?.secure);delete i[t],await this.setUserData(e,i,r?.secure)}async deleteAllUserData(e,t){await (t?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(e))}}class e9{map={};async get(e){return this.map[e]||void 0}async set(e,t){this.map[e]=t}async delete(e){delete this.map[e]}}class e7 extends Error{constructor(e){super(e)}}class te extends Error{missingFields;constructor(e){super(`Invalid response from OIDC provider: missing fields ${e}`),this.missingFields=e}}class tt extends Error{error;errorDescription;constructor(e,t,r){super(e),this.error=t,this.errorDescription=r}}async function tr(e,t,r){return new eP({htu:function(e){let t=new URL(e);return new URL(t.pathname,t.origin).toString()}(e),htm:t.toUpperCase(),jti:eM()}).setProtectedHeader({alg:eH[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{})}async function ti(){let{privateKey:e,publicKey:t}=await eO(eH[0]),r={privateKey:e,publicKey:await eF(t)};return[r.publicKey.alg]=eH,r}async function tn(e,t,r,i){let n=new Headers(i?.headers);return n.set("Authorization",`DPoP ${t}`),n.set("DPoP",await tr(e,i?.method??"get",r)),{...i,headers:n}}async function to(e,t,r,i){if(void 0!==r)return tn(e,t,r,i);let n=new Headers(i?.headers);return n.set("Authorization",`Bearer ${t}`),{...i,headers:n}}async function ts(e,t,r,i){return fetch(t,await to(t.toString(),e,i,r))}async function ta(e,t,r){let i=await e.tokenRefresher.refresh(e.sessionId,e.refreshToken,t);return r?.emit(e$.SESSION_EXTENDED,i.expiresIn??600),{accessToken:i.accessToken,refreshToken:i.refreshToken,expiresIn:i.expiresIn}}let tl=e=>void 0!==e?e-5>0?e-5:e:600,tu={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},tc=new Uint8Array(16),td=[];for(let e=0;e<256;++e)td.push((e+256).toString(16).slice(1));let th=function(e,t,r){if(tu.randomUUID&&!t&&!e)return tu.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!a){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(tc)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=i[e];return t}return function(e,t=0){return(td[e[t+0]]+td[e[t+1]]+td[e[t+2]]+td[e[t+3]]+"-"+td[e[t+4]]+td[e[t+5]]+"-"+td[e[t+6]]+td[e[t+7]]+"-"+td[e[t+8]]+td[e[t+9]]+"-"+td[e[t+10]]+td[e[t+11]]+td[e[t+12]]+td[e[t+13]]+td[e[t+14]]+td[e[t+15]]).toLowerCase()}(i)};var tf=r(5978),tp=r(4681);async function tg(e,t){var r;if(!t.registrationEndpoint)throw Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");let i=(r=t.idTokenSigningAlgValuesSupported,eH.find(e=>r.includes(e))??null),n={client_name:e.clientName,application_type:"web",redirect_uris:[e.redirectUrl?.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:i,grant_types:["authorization_code","refresh_token"]},o=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(o.ok){let t=await o.json();return!function(e,t){var r;if("string"!=typeof e.client_id)throw Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&Array.isArray((r=e).redirect_uris)&&r.redirect_uris.every(e=>"string"==typeof e)&&e.redirect_uris[0]!==t.redirectUrl.toString())throw Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}(t,e),{clientId:t.client_id,clientSecret:t.client_secret,expiresAt:t.client_secret_expires_at,idTokenSignedResponseAlg:t.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===o.status&&function(e,t){if("invalid_redirect_uri"===e.error)throw Error(`Dynamic client registration failed: the provided redirect uri [${t.redirectUrl?.toString()}] is invalid - ${e.error_description??""}`);if("invalid_client_metadata"===e.error)throw Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${e.error_description??""}`);throw Error(`Dynamic client registration failed: ${e.error} - ${e.error_description??""}`)}(await o.json(),e),Error(`Dynamic client registration failed: the server returned ${o.status} ${o.statusText} - ${await o.text()}`)}function ty(e){return void 0!==e.error_description&&"string"==typeof e.error_description}function tm(e,t){if(void 0!==e.error&&"string"==typeof e.error)throw new tt(`Token endpoint returned error [${e.error}]${ty(e)?`: ${e.error_description}`:""}${void 0!==e.error_uri&&"string"==typeof e.error_uri?` (see ${e.error_uri})`:""}`,e.error,ty(e)?e.error_description:void 0);if(void 0===e.access_token||"string"!=typeof e.access_token)throw new te(["access_token"]);if(void 0===e.id_token||"string"!=typeof e.id_token)throw new te(["id_token"]);if(void 0===e.token_type||"string"!=typeof e.token_type)throw new te(["token_type"]);if(void 0!==e.expires_in&&"number"!=typeof e.expires_in)throw new te(["expires_in"]);if(!t&&"bearer"!==e.token_type.toLowerCase())throw Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function tv(e,t,r,i){let n;if(r.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(r.grantType)))throw Error(`The issuer [${e.issuer}] does not support the [${r.grantType}] grant`);if(!e.tokenEndpoint)throw Error(`This issuer [${e.issuer}] does not have a token endpoint`);let o={"content-type":"application/x-www-form-urlencoded"};i&&(n=await ti(),o.DPoP=await tr(e.tokenEndpoint,"POST",n)),t.clientSecret&&(o.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);let s={method:"POST",headers:o,body:new URLSearchParams({grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId}).toString()},a=await fetch(e.tokenEndpoint,s),l=tm(await a.json(),i),{webId:u,clientId:c}=await eW(l.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:l.access_token,idToken:l.id_token,refreshToken:void 0!==l.refresh_token&&"string"==typeof l.refresh_token?l.refresh_token:void 0,webId:u,clientId:c,dpopKey:n,expiresIn:l.expires_in}}let t_=e=>{try{return new URL(e),!0}catch{return!1}};async function tb(e,t,r,i){let n;if(void 0===r.clientId)throw Error("No client ID available when trying to refresh the access token.");let o={grant_type:"refresh_token",refresh_token:e,scope:eK},s={};void 0!==i&&(s={DPoP:await tr(t.tokenEndpoint,"POST",i)});let a={};void 0!==r.clientSecret?a={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:t_(r.clientId)&&(o.client_id=r.clientId);let l=await fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...s,...a,"Content-Type":"application/x-www-form-urlencoded"}});try{n=await l.json()}catch(e){throw Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}let u=tm(n,void 0!==i),{webId:c}=await eW(u.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:u.access_token,idToken:u.id_token,refreshToken:"string"==typeof u.refresh_token?u.refresh_token:void 0,webId:c,dpopKey:i,expiresIn:u.expires_in}}async function tw(){let e=new tp.OidcClient({response_mode:"query"});await e.clearStaleState(new tp.WebStorageStateStore({}));let t=window.localStorage,r=[];for(let e=0;e<=t.length;e+=1){let i=t.key(e);i&&(i.match(/^oidc\..+$/)||i.match(/^solidClientAuthenticationUser:.+$/))&&r.push(i)}r.forEach(e=>t.removeItem(e))}class tS extends e4{constructor(e,t){super(e,t)}}class tx extends e3{login=async(e,t)=>{"none"!==e.prompt&&await this.sessionInfoManager.clear(e.sessionId);let r=e.redirectUrl??function(e){let t=ez(e);return(t.hash="",e.includes(`${t.origin}/`))?t.href:`${t.origin}${t.href.substring(t.origin.length+1)}`}(window.location.href);if(!eq(r))throw Error(`${r} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...e,redirectUrl:r,clientName:e.clientName??e.clientId,eventEmitter:t})};validateCurrentSession=async e=>{let t=await this.sessionInfoManager.get(e);return void 0===t||void 0===t.clientAppId||void 0===t.issuer?null:t};handleIncomingRedirect=async(e,t)=>{try{let r=await this.redirectHandler.handle(e,t,void 0);return this.fetch=r.fetch.bind(window),this.boundLogout=r.getLogoutUrl,await this.cleanUrlAfterRedirect(e),{isLoggedIn:r.isLoggedIn,webId:r.webId,sessionId:r.sessionId,expirationDate:r.expirationDate,clientAppId:r.clientAppId}}catch(r){await this.cleanUrlAfterRedirect(e),t.emit(e$.ERROR,"redirect",r);return}};async cleanUrlAfterRedirect(e){let t=ez(e).href;for(window.history.replaceState(null,"",t);window.location.href!==t;)await new Promise(e=>{setTimeout(()=>e(),1)})}}function tE(e){return"string"==typeof e.oidcIssuer}function tk(e){return"string"==typeof e.redirectUrl}class tF{storageUtility;oidcHandler;issuerConfigFetcher;clientRegistrar;constructor(e,t,r,i){this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=i}async canHandle(e){return tE(e)&&tk(e)}async handle(e){if(!tE(e))throw new e7(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(e)}`);if(!tk(e))throw new e7(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(e)}`);let t=await this.issuerConfigFetcher.fetchConfig(e.oidcIssuer),r=await e2(e,t,this.storageUtility,this.clientRegistrar),i={issuer:t.issuer,dpop:"dpop"===e.tokenType.toLowerCase(),...e,issuerConfiguration:t,client:r};return this.oidcHandler.handle(i)}}class tI extends eJ{async handle(e){let t={authority:e.issuer.toString(),client_id:e.client.clientId,client_secret:e.client.clientSecret,redirect_uri:e.redirectUrl,response_type:"code",scope:eK,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:e.prompt??"consent"},r=new tp.OidcClient(t);try{let t=await r.createSigninRequest();return await this.handleRedirect({oidcLoginOptions:e,state:t.state._id,codeVerifier:t.state._code_verifier,targetUrl:t.url.toString()})}catch(e){console.error(e)}}}let tA={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class tT{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}static getLocalStorageKey(e){return`issuerConfig:${e}`}async fetchConfig(e){let t,r=new URL(".well-known/openid-configuration",e.endsWith("/")?e:`${e}/`).href,i=await fetch(r);try{t=function(e){let t={};return Object.keys(e).forEach(r=>{tA[r]&&(t[tA[r].toKey]=e[r])}),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}(await i.json())}catch(t){throw new e7(`[${e.toString()}] has an invalid configuration: ${t.message}`)}return await this.storageUtility.set(tT.getLocalStorageKey(e),JSON.stringify(t)),t}}async function tR(e,t){await eX(e,t),await tw()}class tC extends e0{async get(e){let[t,r,i,n,o,s,a,l]=await Promise.all([this.storageUtility.getForUser(e,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(e,"webId",{secure:!0}),this.storageUtility.getForUser(e,"clientId",{secure:!1}),this.storageUtility.getForUser(e,"clientSecret",{secure:!1}),this.storageUtility.getForUser(e,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(e,"refreshToken",{secure:!0}),this.storageUtility.getForUser(e,"issuer",{secure:!1}),this.storageUtility.getForUser(e,"tokenType",{secure:!1})]);if("string"==typeof o&&!eq(o))return void await Promise.all([this.storageUtility.deleteAllUserData(e,{secure:!1}),this.storageUtility.deleteAllUserData(e,{secure:!0})]);if(void 0!==l&&!("string"==typeof l&&["DPoP","Bearer"].includes(l)))throw Error(`Tokens of type [${l}] are not supported.`);if(void 0!==i||void 0!==t||void 0!==r||void 0!==s)return{sessionId:e,webId:r,isLoggedIn:"true"===t,redirectUrl:o,refreshToken:s,issuer:a,clientAppId:i,clientAppSecret:n,tokenType:l??"DPoP"}}async clear(e){return tR(e,this.storageUtility)}}class tP{async canHandle(e){try{return new URL(e),!0}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e){return eQ()}}class tN{storageUtility;sessionInfoManager;issuerConfigFetcher;clientRegistrar;tokerRefresher;constructor(e,t,r,i,n){this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.tokerRefresher=n,this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.tokerRefresher=n}async canHandle(e){try{let t=new URL(e);return null!==t.searchParams.get("code")&&null!==t.searchParams.get("state")}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){let r;if(!await this.canHandle(e))throw Error(`AuthCodeRedirectHandler cannot handle [${e}]: it is missing one of [code, state].`);let i=new URL(e),n=i.searchParams.get("state"),o=await this.storageUtility.getForUser(n,"sessionId",{errorIfNull:!0}),{issuerConfig:s,codeVerifier:a,redirectUrl:l,dpop:u}=await e5(o,this.storageUtility,this.issuerConfigFetcher),c=i.searchParams.get("iss");if("string"==typeof c&&c!==s.issuer)throw Error(`The value of the iss parameter (${c}) does not match the issuer identifier of the authorization server (${s.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(void 0===a)throw Error(`The code verifier for session ${o} is missing from storage.`);if(void 0===l)throw Error(`The redirect URL for session ${o} is missing from storage.`);let d=await this.clientRegistrar.getClient({sessionId:o},s),h=Date.now(),f=await tv(s,d,{grantType:"authorization_code",code:i.searchParams.get("code"),codeVerifier:a,redirectUrl:l},u);window.localStorage.removeItem(`oidc.${n}`),void 0!==f.refreshToken&&(r={sessionId:o,refreshToken:f.refreshToken,tokenRefresher:this.tokerRefresher});let p=function(e,t){let r,i=e,n=t?.refreshOptions;if(void 0!==n){let e=async()=>{try{let{accessToken:o,refreshToken:s,expiresIn:a}=await ta(n,t.dpopKey,t.eventEmitter);i=o,void 0!==s&&(n.refreshToken=s),clearTimeout(r),r=setTimeout(e,1e3*tl(a)),t.eventEmitter?.emit(e$.TIMEOUT_SET,r)}catch(e){e instanceof tt&&(t?.eventEmitter?.emit(e$.ERROR,e.error,e.errorDescription),t?.eventEmitter?.emit(e$.SESSION_EXPIRED)),e instanceof te&&e.missingFields.includes("access_token")&&t?.eventEmitter?.emit(e$.SESSION_EXPIRED)}};r=setTimeout(e,1e3*tl(t.expiresIn)),t.eventEmitter?.emit(e$.TIMEOUT_SET,r)}else if(void 0!==t&&void 0!==t.eventEmitter){let e=setTimeout(()=>{t.eventEmitter.emit(e$.SESSION_EXPIRED)},1e3*tl(t.expiresIn));t.eventEmitter.emit(e$.TIMEOUT_SET,e)}return async(e,r)=>{let n=await ts(i,e,r,t?.dpopKey),o=!n.ok&&![401,403].includes(n.status);return n.ok||o||n.url!==e&&t?.dpopKey!==void 0&&(n=await ts(i,n.url,r,t.dpopKey)),n}}(f.accessToken,{dpopKey:f.dpopKey,refreshOptions:r,eventEmitter:t,expiresIn:f.expiresIn});await e8(this.storageUtility,o,f.webId,f.clientId,"true",void 0,!0);let g=await this.sessionInfoManager.get(o);if(!g)throw Error(`Could not retrieve session: [${o}].`);return Object.assign(g,{fetch:p,getLogoutUrl:function({endSessionEndpoint:e,idTokenHint:t}){if(void 0!==e)return function({state:r,postLogoutUrl:i}){return function({endSessionEndpoint:e,idTokenHint:t,postLogoutRedirectUri:r,state:i}){let n=new URL(e);return void 0!==t&&n.searchParams.append("id_token_hint",t),void 0!==r&&(n.searchParams.append("post_logout_redirect_uri",r),void 0!==i&&n.searchParams.append("state",i)),n.toString()}({endSessionEndpoint:e,idTokenHint:t,state:r,postLogoutRedirectUri:i})}}({idTokenHint:f.idToken,endSessionEndpoint:s.endSessionEndpoint}),expirationDate:"number"==typeof f.expiresIn?h+1e3*f.expiresIn:void 0})}}class tj extends eV{constructor(e){super(e)}}class tO{get storage(){return window.localStorage}async get(e){return this.storage.getItem(e)||void 0}async set(e,t){this.storage.setItem(e,t)}async delete(e){this.storage.removeItem(e)}}class tL{redirect(e,t){t&&t.handleRedirect?t.handleRedirect(e):t&&t.redirectByReplacingState?window.history.replaceState({},"",e):window.location.href=e}}class tD{storageUtility;constructor(e){this.storageUtility=e,this.storageUtility=e}async getClient(e,t){var r;let[i,n,o,s,a]=await Promise.all([this.storageUtility.getForUser(e.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"expiresAt",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientName",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientType",{secure:!1})]),l=void 0!==o?Number.parseInt(o,10):-1,u=void 0!==n&&Math.floor(Date.now()/1e3)>l;if(i&&"string"==typeof(r=a)&&["dynamic","static","solid-oidc"].includes(r)&&!u)return void 0!==n?{clientId:i,clientSecret:n,clientName:s,clientType:"dynamic",expiresAt:l}:{clientId:i,clientName:s,clientType:a};try{let r=await tg(e,t),i={clientId:r.clientId,clientType:"dynamic"};return void 0!==r.clientSecret&&(i.clientSecret=r.clientSecret,i.expiresAt=String(r.expiresAt)),r.idTokenSignedResponseAlg&&(i.idTokenSignedResponseAlg=r.idTokenSignedResponseAlg),await this.storageUtility.setForUser(e.sessionId,i,{secure:!1}),r}catch(e){throw Error("Client registration failed.",{cause:e})}}}class tU{async canHandle(e){try{return new URL(e).searchParams.has("error")}catch(t){throw Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){if(void 0!==t){let r=new URL(e),i=r.searchParams.get("error"),n=r.searchParams.get("error_description");t.emit(e$.ERROR,i,n)}return eQ()}}class tM{storageUtility;issuerConfigFetcher;clientRegistrar;constructor(e,t,r){this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r,this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r}async refresh(e,t,r,i){let n=await e5(e,this.storageUtility,this.issuerConfigFetcher),o=await this.clientRegistrar.getClient({sessionId:e},n.issuerConfig);if(void 0===t)throw Error(`Session [${e}] has no refresh token to allow it to refresh its access token.`);if(n.dpop&&void 0===r)throw Error(`For session [${e}], the key bound to the DPoP access token must be provided to refresh said access token.`);let s=await tb(t,n.issuerConfig,o,r);return void 0!==s.refreshToken&&i?.emit(e$.NEW_REFRESH_TOKEN,s.refreshToken),s}}function tB(e){let t=new e9,r=new tS(e.secureStorage||t,e.insecureStorage||new tO),i=new tT(r),n=new tD(r),o=new tC(r),s=new tM(r,i,n),a=new tL;return new tx(new tF(r,new tI(r,a),i,n),new tj([new tU,new tN(r,o,i,n,s),new tP]),new eY(o,a),o,i)}let tH=`${eB}currentSession`,t$=`${eB}currentUrl`;async function tK(e,t,r){let i=await t.validateCurrentSession(e);return null!==i&&(window.localStorage.setItem(t$,window.location.href),await t.login({sessionId:e,prompt:"none",oidcIssuer:i.issuer,redirectUrl:i.redirectUrl,clientId:i.clientAppId,clientSecret:i.clientAppSecret,tokenType:i.tokenType??"DPoP"},r.events),!0)}class tV{info;events;clientAuthentication;tokenRequestInProgress=!1;constructor(e={},t){this.events=new tf,e.clientAuthentication?this.clientAuthentication=e.clientAuthentication:e.secureStorage&&e.insecureStorage?this.clientAuthentication=tB({secureStorage:e.secureStorage,insecureStorage:e.insecureStorage}):this.clientAuthentication=tB({}),e.sessionInfo?this.info={sessionId:e.sessionInfo.sessionId,isLoggedIn:!1,webId:e.sessionInfo.webId,clientAppId:e.sessionInfo.clientAppId}:this.info={sessionId:t??th(),isLoggedIn:!1},this.events.on(e$.LOGIN,()=>window.localStorage.setItem(tH,this.info.sessionId)),this.events.on(e$.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(e$.ERROR,()=>this.internalLogout(!1))}login=async e=>(await this.clientAuthentication.login({sessionId:this.info.sessionId,...e,tokenType:e.tokenType??"DPoP"},this.events),new Promise(()=>{}));fetch=(e,t)=>this.clientAuthentication.fetch(e,t);internalLogout=async(e,t)=>{window.localStorage.removeItem(tH),await this.clientAuthentication.logout(this.info.sessionId,t),this.info.isLoggedIn=!1,e&&this.events.emit(e$.LOGOUT)};logout=async e=>this.internalLogout(!0,e);handleIncomingRedirect=async(e={})=>{if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;let t="string"==typeof e?{url:e}:e,r=t.url??window.location.href;this.tokenRequestInProgress=!0;let i=await this.clientAuthentication.handleIncomingRedirect(r,this.events);if(i?.isLoggedIn){this.setSessionInfo(i);let e=window.localStorage.getItem(t$);null===e?this.events.emit(e$.LOGIN):(window.localStorage.removeItem(t$),this.events.emit(e$.SESSION_RESTORED,e))}else if(!0===t.restorePreviousSession){let e=window.localStorage.getItem(tH);if(null!==e&&await tK(e,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,i};setSessionInfo(e){this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.clientAppId=e.clientAppId,this.info.expirationDate=e.expirationDate,this.events.on(e$.SESSION_EXTENDED,e=>{this.info.expirationDate=Date.now()+1e3*e})}}function tW(){return void 0===l&&(l=new tV),l}},8098:(e,t,r)=>{"use strict";let i=globalThis.AbortController||r(8461).AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:l}=r(7894),{validateAbortSignal:u,validateInteger:c,validateObject:d}=r(1204),h=r(4039).Symbol("kWeak"),f=r(4039).Symbol("kResistStopPropagation"),{finished:p}=r(5791),g=r(3463),{addAbortSignalNoValidate:y}=r(9110),{isWritable:m,isNodeStream:v}=r(918),{deprecate:_}=r(6733),{ArrayPrototypePush:b,Boolean:w,MathFloor:S,Number:x,NumberIsNaN:E,Promise:k,PromiseReject:F,PromiseResolve:I,PromisePrototypeThen:A,Symbol:T}=r(4039),R=T("kEmpty"),C=T("kEof");function P(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal");let i=1;(null==t?void 0:t.concurrency)!=null&&(i=S(t.concurrency));let n=i-1;return(null==t?void 0:t.highWaterMark)!=null&&(n=S(t.highWaterMark)),c(i,"options.concurrency",1),c(n,"options.highWaterMark",0),n+=i,(async function*(){let o,s,a=r(6733).AbortSignalAny([null==t?void 0:t.signal].filter(w)),u=this,c=[],d={signal:a},h=!1,f=0;function p(){h=!0,g()}function g(){f-=1,y()}function y(){s&&!h&&f<i&&c.length<n&&(s(),s=null)}!async function(){try{for await(let t of u){if(h)return;if(a.aborted)throw new l;try{if((t=e(t,d))===R)continue;t=I(t)}catch(e){t=F(e)}f+=1,A(t,g,p),c.push(t),o&&(o(),o=null),!h&&(c.length>=n||f>=i)&&await new k(e=>{s=e})}c.push(C)}catch(t){let e=F(t);A(e,g,p),c.push(e)}finally{h=!0,o&&(o(),o=null)}}();try{for(;;){for(;c.length>0;){let e=await c[0];if(e===C)return;if(a.aborted)throw new l;e!==R&&(yield e),c.shift(),y()}await new k(e=>{o=e})}}finally{h=!0,s&&(s(),s=null)}}).call(this)}async function N(e,t){for await(let r of D.call(this,e,t))return!0;return!1}async function j(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await N.call(this,async(...t)=>!await e(...t),t)}async function O(e,t){for await(let r of D.call(this,e,t))return r}async function L(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r),R}for await(let e of P.call(this,r,t));}function D(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);async function r(t,r){return await e(t,r)?t:R}return P.call(this,r,t)}class U extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function M(e,t,r){var n,s;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=r&&d(r,"options"),(null==r?void 0:r.signal)!=null&&u(r.signal,"options.signal");let a=arguments.length>1;if(null!=r&&null!=(n=r.signal)&&n.aborted){let e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}let c=new i,g=c.signal;null!=r&&r.signal&&r.signal.addEventListener("abort",()=>c.abort(),{once:!0,[h]:this,[f]:!0});let y=!1;try{for await(let i of this){if(y=!0,null!=r&&null!=(s=r.signal)&&s.aborted)throw new l;a?t=await e(t,i,{signal:g}):(t=i,a=!0)}if(!y&&!a)throw new U}finally{c.abort()}return t}async function B(e){null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&u(e.signal,"options.signal");let t=[];for await(let i of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l(void 0,{cause:e.signal.reason});b(t,i)}return t}function H(e){if(E(e=x(e)))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:_(function(e){return null!=e&&d(e,"options"),(null==e?void 0:e.signal)!=null&&u(e.signal,"options.signal"),(async function*(){let t=0;for await(let i of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,i]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),e=H(e),(async function*(){var r,i;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(i=t.signal)&&i.aborted)throw new l;e--<=0&&(yield r)}}).call(this)},filter:D,flatMap:function(e,t){let r=P.call(this,e,t);return(async function*(){for await(let e of r)yield*e}).call(this)},map:P,take:function(e,t){return null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),e=H(e),(async function*(){var r,i;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!=(i=t.signal)&&i.aborted)throw new l;if(e-- >0&&(yield r),e<=0)return}}).call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),(null==t?void 0:t.signal)!=null&&u(t.signal,"options.signal"),v(e)&&!m(e))throw new n("stream",e,"must be writable");let r=g(this,e);return null!=t&&t.signal&&y(t.signal,r),r}},e.exports.promiseReturningOperators={every:j,forEach:L,reduce:M,toArray:B,some:N,find:O}},8348:(e,t,r)=>{"use strict";r.d(t,{FP:()=>l,Ro:()=>a,fQ:()=>s});var i=r(5177),n=r(3511),o=r(695);function s(e,t){var r;if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw Error(`Cannot parse Quads with nodes of type [${t.graph.termType}] as their Graph node.`);let i="DefaultGraph"===t.graph.termType?"default":t.graph.value,s=null!=(r=e.graphs[i])?r:{};return(0,n.CN)({...e,graphs:(0,n.CN)({...e.graphs,[i]:function(e,t){var r,i,s;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw Error(`Cannot parse Quads with nodes of type [${t.subject.termType}] as their Subject node.`);let a="BlankNode"===t.subject.termType?`_:${t.subject.value}`:t.subject.value,l=null!=(r=e[a])?r:{type:"Subject",url:a,predicates:{}};return(0,n.CN)({...e,[a]:(i=l,s=t,(0,n.CN)({...i,predicates:function(e,t){var r;if(!["NamedNode"].includes(t.predicate.termType))throw Error(`Cannot parse Quads with nodes of type [${t.predicate.termType}] as their Predicate node.`);let i=t.predicate.value,s=null!=(r=e[i])?r:{};return(0,n.CN)({...e,[i]:function(e,t){var r,i,s,a,l,u,c,d;if("NamedNode"===t.object.termType){let i=(0,n.CN)([...null!=(r=e.namedNodes)?r:[],t.object.value]);return(0,n.CN)({...e,namedNodes:i})}if("Literal"===t.object.termType){if(t.object.datatype.value===o.ST.langString){let r=t.object.language.toLowerCase(),o=(0,n.CN)([...null!=(s=null==(i=e.langStrings)?void 0:i[r])?s:[],t.object.value]),l=(0,n.CN)({...null!=(a=e.langStrings)?a:{},[r]:o});return(0,n.CN)({...e,langStrings:l})}let r=(0,n.CN)([...null!=(u=null==(l=e.literals)?void 0:l[t.object.datatype.value])?u:[],t.object.value]),d=(0,n.CN)({...null!=(c=e.literals)?c:{},[t.object.datatype.value]:r});return(0,n.CN)({...e,literals:d})}if("BlankNode"===t.object.termType){let r=(0,n.CN)([...null!=(d=e.blankNodes)?d:[],(0,n.cW)(t.object)]);return(0,n.CN)({...e,blankNodes:r})}throw Error(`Objects of type [${t.object.termType}] are not supported.`)}(s,t)})}(i.predicates,s)}))})}(s,t)})})}function a(e,t={}){var r;let o=[],s=null!=(r=t.dataFactory)?r:i.Ay;return Object.keys(e.graphs).forEach(r=>{let i=e.graphs[r],a="default"===r?s.defaultGraph():s.namedNode(r);Object.keys(i).forEach(e=>{let{predicates:r}=i[e],u=(0,n.GM)(e)?s.blankNode((0,n.Sk)(e)):s.namedNode(e);o.push(...l(r,u,a,t))})}),o}function l(e,t,r,o={}){var s;let a=[],u=null!=(s=o.dataFactory)?s:i.Ay;return Object.keys(e).forEach(i=>{var o,s,c,d;let h=u.namedNode(i),f=null!=(o=e[i].langStrings)?o:{},p=null!=(s=e[i].namedNodes)?s:[],g=null!=(c=e[i].literals)?c:{},y=null!=(d=e[i].blankNodes)?d:[];Object.keys(g).forEach(e=>{let i=u.namedNode(e);g[e].forEach(e=>{let n=u.literal(e,i);a.push(u.quad(t,h,n,r))})}),Object.keys(f).forEach(e=>{f[e].forEach(i=>{let n=u.literal(i,e);a.push(u.quad(t,h,n,r))})}),p.forEach(e=>{let i=u.namedNode(e);a.push(u.quad(t,h,i,r))}),y.forEach(e=>{if((0,n.GM)(e)){let i=u.blankNode((0,n.Sk)(e));a.push(u.quad(t,h,i,r))}else{let i=u.blankNode(),n=u.quad(t,h,i,r),o=l(e,i,r);a.push(n),a.push(...o)}})}),a}},8429:(e,t,r)=>{"use strict";r.d(t,{cn:()=>ef,P:()=>eg});var i=r(9813),n=r(8049),o=r(9241);let s=e=>{let t=c(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),a(r,t)||u(e)},getConflictingClassGroupIds:(e,t)=>{let n=r[e]||[];return t&&i[e]?[...n,...i[e]]:n}}},a=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],i=t.nextPart.get(r),n=i?a(e.slice(1),i):void 0;if(n)return n;if(0===t.validators.length)return;let o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},l=/^\[(.+)\]$/,u=e=>{if(l.test(e)){let t=l.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},c=e=>{let{theme:t,classGroups:r}=e,i={nextPart:new Map,validators:[]};for(let e in r)d(r[e],i,e,t);return i},d=(e,t,r,i)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:h(t,e)).classGroupId=r;return}if("function"==typeof e)return f(e)?void d(e(i),t,r,i):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,n])=>{d(n,h(t,e),r,i)})})},h=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},f=e=>e.isThemeGetter,p=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,i=new Map,n=(n,o)=>{r.set(n,o),++t>e&&(t=0,i=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},g=e=>{let{prefix:t,experimentalParseClassName:r}=e,i=e=>{let t,r=[],i=0,n=0,o=0;for(let s=0;s<e.length;s++){let a=e[s];if(0===i&&0===n){if(":"===a){r.push(e.slice(o,s)),o=s+1;continue}if("/"===a){t=s;continue}}"["===a?i++:"]"===a?i--:"("===a?n++:")"===a&&n--}let s=0===r.length?e:e.substring(o),a=y(s);return{modifiers:r,hasImportantModifier:a!==s,baseClassName:a,maybePostfixModifierPosition:t&&t>o?t-o:void 0}};if(t){let e=t+":",r=i;i=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){let e=i;i=t=>r({className:t,parseClassName:e})}return i},y=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,m=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let r=[],i=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...i.sort(),e),i=[]):i.push(e)}),r.push(...i.sort()),r}},v=e=>({cache:p(e.cacheSize),parseClassName:g(e),sortModifiers:m(e),...s(e)}),_=/\s+/,b=(e,t)=>{let{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:n,sortModifiers:o}=t,s=[],a=e.trim().split(_),l="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{isExternal:u,modifiers:c,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=r(t);if(u){l=t+(l.length>0?" "+l:l);continue}let p=!!f,g=i(p?h.substring(0,f):h);if(!g){if(!p||!(g=i(h))){l=t+(l.length>0?" "+l:l);continue}p=!1}let y=o(c).join(":"),m=d?y+"!":y,v=m+g;if(s.includes(v))continue;s.push(v);let _=n(g,p);for(let e=0;e<_.length;++e){let t=_[e];s.push(m+t)}l=t+(l.length>0?" "+l:l)}return l};function w(){let e,t,r=0,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=S(e))&&(i&&(i+=" "),i+=t);return i}let S=e=>{let t;if("string"==typeof e)return e;let r="";for(let i=0;i<e.length;i++)e[i]&&(t=S(e[i]))&&(r&&(r+=" "),r+=t);return r},x=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},E=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,k=/^\((?:(\w[\w-]*):)?(.+)\)$/i,F=/^\d+\/\d+$/,I=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,A=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,P=e=>F.test(e),N=e=>!!e&&!Number.isNaN(Number(e)),j=e=>!!e&&Number.isInteger(Number(e)),O=e=>e.endsWith("%")&&N(e.slice(0,-1)),L=e=>I.test(e),D=()=>!0,U=e=>A.test(e)&&!T.test(e),M=()=>!1,B=e=>R.test(e),H=e=>C.test(e),$=e=>!V(e)&&!G(e),K=e=>ei(e,ea,M),V=e=>E.test(e),W=e=>ei(e,el,U),q=e=>ei(e,eu,N),z=e=>ei(e,eo,M),J=e=>ei(e,es,H),Z=e=>ei(e,ed,B),G=e=>k.test(e),Y=e=>en(e,el),Q=e=>en(e,ec),X=e=>en(e,eo),ee=e=>en(e,ea),et=e=>en(e,es),er=e=>en(e,ed,!0),ei=(e,t,r)=>{let i=E.exec(e);return!!i&&(i[1]?t(i[1]):r(i[2]))},en=(e,t,r=!1)=>{let i=k.exec(e);return!!i&&(i[1]?t(i[1]):r)},eo=e=>"position"===e||"percentage"===e,es=e=>"image"===e||"url"===e,ea=e=>"length"===e||"size"===e||"bg-size"===e,el=e=>"length"===e,eu=e=>"number"===e,ec=e=>"family-name"===e,ed=e=>"shadow"===e;Symbol.toStringTag;let eh=function(e,...t){let r,i,n,o=function(a){return i=(r=v(t.reduce((e,t)=>t(e),e()))).cache.get,n=r.cache.set,o=s,s(a)};function s(e){let t=i(e);if(t)return t;let o=b(e,r);return n(e,o),o}return function(){return o(w.apply(null,arguments))}}(()=>{let e=x("color"),t=x("font"),r=x("text"),i=x("font-weight"),n=x("tracking"),o=x("leading"),s=x("breakpoint"),a=x("container"),l=x("spacing"),u=x("radius"),c=x("shadow"),d=x("inset-shadow"),h=x("text-shadow"),f=x("drop-shadow"),p=x("blur"),g=x("perspective"),y=x("aspect"),m=x("ease"),v=x("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...b(),G,V],S=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],k=()=>[G,V,l],F=()=>[P,"full","auto",...k()],I=()=>[j,"none","subgrid",G,V],A=()=>["auto",{span:["full",j,G,V]},j,G,V],T=()=>[j,"auto",G,V],R=()=>["auto","min","max","fr",G,V],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...k()],B=()=>[P,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],H=()=>[e,G,V],ei=()=>[...b(),X,z,{position:[G,V]}],en=()=>["no-repeat",{repeat:["","x","y","space","round"]}],eo=()=>["auto","cover","contain",ee,K,{size:[G,V]}],es=()=>[O,Y,W],ea=()=>["","none","full",u,G,V],el=()=>["",N,Y,W],eu=()=>["solid","dashed","dotted","double"],ec=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ed=()=>[N,O,X,z],eh=()=>["","none",p,G,V],ef=()=>["none",N,G,V],ep=()=>["none",N,G,V],eg=()=>[N,G,V],ey=()=>[P,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[L],breakpoint:[L],color:[D],container:[L],"drop-shadow":[L],ease:["in","out","in-out"],font:[$],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[L],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[L],shadow:[L],spacing:["px",N],text:[L],"text-shadow":[L],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",P,V,G,y]}],container:["container"],columns:[{columns:[N,V,G,a]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[j,"auto",G,V]}],basis:[{basis:[P,"full","auto",a,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[N,P,"auto","initial","none",V]}],grow:[{grow:["",N,G,V]}],shrink:[{shrink:["",N,G,V]}],order:[{order:[j,"first","last","none",G,V]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[a,"screen",...B()]}],"min-w":[{"min-w":[a,"screen","none",...B()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...B()]}],h:[{h:["screen",...B()]}],"min-h":[{"min-h":["screen","none",...B()]}],"max-h":[{"max-h":["screen",...B()]}],"font-size":[{text:["base",r,Y,W]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,G,q]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",O,V]}],"font-family":[{font:[Q,V,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,G,V]}],"line-clamp":[{"line-clamp":[N,"none",G,q]}],leading:[{leading:[o,...k()]}],"list-image":[{"list-image":["none",G,V]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",G,V]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...eu(),"wavy"]}],"text-decoration-thickness":[{decoration:[N,"from-font","auto",G,W]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[N,"auto",G,V]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",G,V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",G,V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ei()}],"bg-repeat":[{bg:en()}],"bg-size":[{bg:eo()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},j,G,V],radial:["",G,V],conic:[j,G,V]},et,J]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:es()}],"gradient-via-pos":[{via:es()}],"gradient-to-pos":[{to:es()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:ea()}],"rounded-s":[{"rounded-s":ea()}],"rounded-e":[{"rounded-e":ea()}],"rounded-t":[{"rounded-t":ea()}],"rounded-r":[{"rounded-r":ea()}],"rounded-b":[{"rounded-b":ea()}],"rounded-l":[{"rounded-l":ea()}],"rounded-ss":[{"rounded-ss":ea()}],"rounded-se":[{"rounded-se":ea()}],"rounded-ee":[{"rounded-ee":ea()}],"rounded-es":[{"rounded-es":ea()}],"rounded-tl":[{"rounded-tl":ea()}],"rounded-tr":[{"rounded-tr":ea()}],"rounded-br":[{"rounded-br":ea()}],"rounded-bl":[{"rounded-bl":ea()}],"border-w":[{border:el()}],"border-w-x":[{"border-x":el()}],"border-w-y":[{"border-y":el()}],"border-w-s":[{"border-s":el()}],"border-w-e":[{"border-e":el()}],"border-w-t":[{"border-t":el()}],"border-w-r":[{"border-r":el()}],"border-w-b":[{"border-b":el()}],"border-w-l":[{"border-l":el()}],"divide-x":[{"divide-x":el()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":el()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...eu(),"hidden","none"]}],"divide-style":[{divide:[...eu(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...eu(),"none","hidden"]}],"outline-offset":[{"outline-offset":[N,G,V]}],"outline-w":[{outline:["",N,Y,W]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",c,er,Z]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",d,er,Z]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:el()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[N,W]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":el()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",h,er,Z]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[N,G,V]}],"mix-blend":[{"mix-blend":[...ec(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ec()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[N]}],"mask-image-linear-from-pos":[{"mask-linear-from":ed()}],"mask-image-linear-to-pos":[{"mask-linear-to":ed()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":ed()}],"mask-image-t-to-pos":[{"mask-t-to":ed()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":ed()}],"mask-image-r-to-pos":[{"mask-r-to":ed()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":ed()}],"mask-image-b-to-pos":[{"mask-b-to":ed()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":ed()}],"mask-image-l-to-pos":[{"mask-l-to":ed()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":ed()}],"mask-image-x-to-pos":[{"mask-x-to":ed()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":ed()}],"mask-image-y-to-pos":[{"mask-y-to":ed()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[G,V]}],"mask-image-radial-from-pos":[{"mask-radial-from":ed()}],"mask-image-radial-to-pos":[{"mask-radial-to":ed()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[N]}],"mask-image-conic-from-pos":[{"mask-conic-from":ed()}],"mask-image-conic-to-pos":[{"mask-conic-to":ed()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ei()}],"mask-repeat":[{mask:en()}],"mask-size":[{mask:eo()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",G,V]}],filter:[{filter:["","none",G,V]}],blur:[{blur:eh()}],brightness:[{brightness:[N,G,V]}],contrast:[{contrast:[N,G,V]}],"drop-shadow":[{"drop-shadow":["","none",f,er,Z]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",N,G,V]}],"hue-rotate":[{"hue-rotate":[N,G,V]}],invert:[{invert:["",N,G,V]}],saturate:[{saturate:[N,G,V]}],sepia:[{sepia:["",N,G,V]}],"backdrop-filter":[{"backdrop-filter":["","none",G,V]}],"backdrop-blur":[{"backdrop-blur":eh()}],"backdrop-brightness":[{"backdrop-brightness":[N,G,V]}],"backdrop-contrast":[{"backdrop-contrast":[N,G,V]}],"backdrop-grayscale":[{"backdrop-grayscale":["",N,G,V]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[N,G,V]}],"backdrop-invert":[{"backdrop-invert":["",N,G,V]}],"backdrop-opacity":[{"backdrop-opacity":[N,G,V]}],"backdrop-saturate":[{"backdrop-saturate":[N,G,V]}],"backdrop-sepia":[{"backdrop-sepia":["",N,G,V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",G,V]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[N,"initial",G,V]}],ease:[{ease:["linear","initial",m,G,V]}],delay:[{delay:[N,G,V]}],animate:[{animate:["none",v,G,V]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,G,V]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:ef()}],"rotate-x":[{"rotate-x":ef()}],"rotate-y":[{"rotate-y":ef()}],"rotate-z":[{"rotate-z":ef()}],scale:[{scale:ep()}],"scale-x":[{"scale-x":ep()}],"scale-y":[{"scale-y":ep()}],"scale-z":[{"scale-z":ep()}],"scale-3d":["scale-3d"],skew:[{skew:eg()}],"skew-x":[{"skew-x":eg()}],"skew-y":[{"skew-y":eg()}],transform:[{transform:[G,V,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ey()}],"translate-x":[{"translate-x":ey()}],"translate-y":[{"translate-y":ey()}],"translate-z":[{"translate-z":ey()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",G,V]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",G,V]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[N,Y,W,q]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ef(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return eh((0,o.$)(t))}async function ep(e){let t=(0,n._)(),r=await t.fetch(e);return(0,i.wI)(r)}async function eg(e){return Promise.all(e.map(e=>ep(e))).then(e=>e.filter(e=>void 0!==e))}},8461:e=>{"use strict";let{AbortController:t,AbortSignal}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=AbortSignal,e.exports.default=t},8475:(e,t,r)=>{"use strict";function i(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return i}}),r(3794).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8785:(e,t,r)=>{"use strict";function i(e){return"string"==typeof e?e:e.value}function n(e,t={}){let r=new URL(e);return r.pathname=r.pathname.replace(/\/\/+/g,"/"),!1===t.trailingSlash&&"/"===r.pathname.slice(-1)&&(r.pathname=r.pathname.slice(0,r.pathname.length-1)),!0===t.trailingSlash&&"/"!==r.pathname.slice(-1)&&(r.pathname=`${r.pathname}/`),r.href}r.d(t,{l:()=>n,t:()=>i})},8983:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,o=l(e),s=o[0],a=o[1],u=new n((s+a)*3/4-a),c=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=0,a=i-n;s<a;s+=16383)o.push(function(e,t,i){for(var n,o=[],s=t;s<i;s+=3)n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?o.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&o.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},9099:(e,t,r)=>{e.exports=r(8253)},9110:(e,t,r)=>{"use strict";let i,{SymbolDispose:n}=r(4039),{AbortError:o,codes:s}=r(7894),{isNodeStream:a,isWebStream:l,kControllerErrorFunction:u}=r(918),c=r(5791),{ERR_INVALID_ARG_TYPE:d}=s,h=(e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new d(t,"AbortSignal",e)};e.exports.addAbortSignal=function(t,r){if(h(t,"signal"),!a(r)&&!l(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let s=a(t)?()=>{t.destroy(new o(void 0,{cause:e.reason}))}:()=>{t[u](new o(void 0,{cause:e.reason}))};return e.aborted?s():c(t,(i=i||r(6733).addAbortListener)(e,s)[n]),t}},9241:(e,t,r)=>{"use strict";function i(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}(e))&&(i&&(i+=" "),i+=t);return i}r.d(t,{$:()=>i})},9520:(e,t,r)=>{"use strict";let{StringPrototypeSlice:i,SymbolIterator:n,TypedArrayPrototypeSet:o,Uint8Array:s}=r(4039),{Buffer:a}=r(1642),{inspect:l}=r(6733);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);let t=a.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)o(t,r.data,i),i+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[n](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{let o=r.data;if(e>o.length)t+=o,e-=o.length;else{e===o.length?(t+=o,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=i(o,0,e),this.head=r,r.data=i(o,e));break}++n}while(null!==(r=r.next));return this.length-=n,t}_getBuffer(e){let t=a.allocUnsafe(e),r=e,i=this.head,n=0;do{let a=i.data;if(e>a.length)o(t,a,r-e),e-=a.length;else{e===a.length?(o(t,a,r-e),++n,i.next?this.head=i.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),r-e),this.head=i,i.data=a.slice(e));break}++n}while(null!==(i=i.next));return this.length-=n,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},9666:(e,t,r)=>{"use strict";let{ArrayPrototypePop:i,Promise:n}=r(4039),{isIterable:o,isNodeStream:s,isWebStream:a}=r(918),{pipelineImpl:l}=r(927),{finished:u}=r(5791);r(331),e.exports={finished:u,pipeline:function(...e){return new n((t,r)=>{let n,u,c=e[e.length-1];if(c&&"object"==typeof c&&!s(c)&&!o(c)&&!a(c)){let t=i(e);n=t.signal,u=t.end}l(e,(e,i)=>{e?r(e):t(i)},{signal:n,end:u})})}}},9667:(e,t,r)=>{"use strict";let i,n,{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:s,ObjectKeys:a,ObjectSetPrototypeOf:l}=r(4039);e.exports=d;let u=r(6261),c=r(2661);l(d.prototype,u.prototype),l(d,u);{let e=a(c.prototype);for(let t=0;t<e.length;t++){let r=e[t];d.prototype[r]||(d.prototype[r]=c.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);u.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function h(){return void 0===i&&(i={}),i}o(d.prototype,{writable:{__proto__:null,...s(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...s(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...s(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...s(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...s(c.prototype,"writableLength")},writableFinished:{__proto__:null,...s(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...s(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...s(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...s(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},d.from=function(e){return n||(n=r(7211)),n(e,"body")}},9786:(e,t,r)=>{"use strict";r.d(t,{BN:()=>o,IG:()=>s,um:()=>n});var i=r(7181);function n(e){var t,r,n,o,s;let a=null!=(r=null==(t=e.headers.get("Content-Type"))?void 0:t.split(";"))?r:[],l=a.length>0&&["text/turtle","application/ld+json"].includes(a[0]),u={sourceIri:e.url,isRawData:!l,contentLocation:null!=(n=e.headers.get("Content-Location"))?n:void 0,contentType:null!=(o=e.headers.get("Content-Type"))?o:void 0,linkedResources:{},location:null!=(s=e.headers.get("Location"))?s:void 0},c=e.headers.get("Link");if(c){let e=i.parse(c),t=e.get("rel","acl");1===t.length&&(u.aclUrl=new URL(t[0].uri,u.sourceIri).href),u.linkedResources=e.refs.reduce((e,t)=>{var r,i;return null!=e[i=t.rel]||(e[i]=[]),e[t.rel].push(new URL(t.uri,u.sourceIri).href),e},u.linkedResources)}let d=e.headers.get("WAC-Allow");return d&&(u.permissions=function(e){function t(e){let t=e.split(" ");return t.includes("write")?{read:t.includes("read"),append:!0,write:!0,control:t.includes("control")}:{read:t.includes("read"),append:t.includes("append"),write:!1,control:t.includes("control")}}function r(e,t){let r=e.split(",").map(e=>e.split("=")).filter(e=>2===e.length&&e[0].trim()===t);if(1!==r.length)return"";let i=r[0][1].trim();return'"'!==i.charAt(0)||'"'!==i.charAt(i.length-1)?"":i.substring(1,i.length-1)}return{user:t(r(e,"user")),public:t(r(e,"public"))}}(d)),u}function o(e){return!e.ok}function s(e){return 401===e.status||403===e.status}},9813:(e,t,r)=>{"use strict";r.d(t,{Yl:()=>Y,X:()=>ei,aX:()=>X,wI:()=>Q,cv:()=>er});var i=r(3823),n=r(5177),o=r(7105);function s(e){return!!e&&"DefaultGraph"===e.termType}function a(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}let l=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,u=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/;class c{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=Array(e.length+1)}static supports(e){return!l.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!c.supports(this.base))return this._baseMatcher=/.^/;let e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",a(e)],r=[],i=[],n=/[^/?#]*([/?#])/y,o,s=0,l=0,u=n.lastIndex=e.length;for(;!s&&!l&&(o=n.exec(this.base));)"#"===o[1]?l=n.lastIndex-1:(t.push(a(o[0]),"(?:"),r.push(")?"),"?"!==o[1]?i.push(u=n.lastIndex):(s=u=n.lastIndex,l=this.base.indexOf("#",s),this._pathReplacements[s]="?"));for(let e=0;e<i.length;e++)this._pathReplacements[i[e]]="../".repeat(i.length-e-1);return this._pathReplacements[i[i.length-1]]="./",this._baseLength=l>0?l:this.base.length,t.push(a(this.base.substring(u,this._baseLength)),s?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...r].join(""))}toRelative(e){let t=this._getBaseMatcher().exec(e);if(!t)return e;let r=t[0].length;if(r===this._baseLength&&r===e.length)return"";let i=this._pathReplacements[r];if(i){let t=e.substring(r);return"?"===i||u.test(t)?"./"===i&&/^[^?#]/.test(t)?t:i+t:e}return e.substring(r-1)}}let d=n.Ay.defaultGraph(),{rdf:h,xsd:f}=o.A,p=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,g=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,y={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class m extends n.x1{equals(e){return e===this}}class v{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,r,i){e+=t,i&&i()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=d,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new c(t.baseIRI)))}get _inDefaultGraph(){return d.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,r,i,n){try{i.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(d.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,n):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,n)}catch(e){n&&n(e)}}_writeQuadLine(e,t,r,i,n){delete this._prefixMatch,this._write(this.quadToString(e,t,r,i),n)}quadToString(e,t,r,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:" .\n"}`}quadsToString(e){let t="";for(let r of e)t+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return t}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),p.test(t)&&(t=t.replace(g,_));let r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(p.test(t)&&(t=t.replace(g,_)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===f.string)return`"${t}"`}else switch(e.datatype.value){case f.string:return`"${t}"`;case f.boolean:if("true"===t||"false"===t)return t;break;case f.integer:if(/^[+-]?\d+$/.test(t))return t;break;case f.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case f.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===h.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:r,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(r)}${s(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw Error("Cannot write because the writer has been closed.")}addQuad(e,t,r,i,n){void 0===r?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof i?this._writeQuad(e,t,r,d,i):this._writeQuad(e,t,r,i||d,n)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,r){let i={};i[e]=t,this.addPrefixes(i,r)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let r=!1;for(let t in e){let i=e[t];"string"!=typeof i&&(i=i.value),r=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[i]=t+=":",this._write(`@prefix ${t} <${i}>.
`)}if(r){let e="",t="";for(let r in this._prefixIRIs)e+=e?`|${r}`:r,t+=(t?"|":"")+this._prefixIRIs[r];e=a(e,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=RegExp(`^(?:${t})[^/]*$|^(${e})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?"\n":"",t)}blank(e,t){let r=e,i,n;switch(void 0===e?r=[]:e.termType?r=[{predicate:e,object:t}]:!("length"in e)&&(r=[e]),n=r.length){case 0:return new m("[]");case 1:if(!((i=r[0]).object instanceof m))return new m(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let o="[";for(let t=0;t<n;t++)(i=r[t]).predicate.equals(e)?o+=`, ${this._encodeObject(i.object)}`:(o+=`${(t?";\n  ":"\n  ")+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new m(`${o}
]`)}}list(e){let t=e&&e.length||0,r=Array(t);for(let i=0;i<t;i++)r[i]=this._encodeObject(e[i]);return new m(`(${r.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((r,i)=>{t=null,e(r,i)});if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}}function _(e){let t=y[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}let b=Symbol("iter");function w(e,t,r=4){if(0===r)return Object.assign(e,t);for(let i in t)e[i]=w(e[i]||Object.create(null),t[i],r-1);return e}class S{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||n.Ay}_termFromId(e){if("."===e[0]){let t=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(t[r[1]]),this._termFromId(t[r[2]]),this._termFromId(t[r[3]]),r[4]&&this._termFromId(t[r[4]]))}return(0,n.iN)(e,this._factory)}_termToNumericId(e){if("Quad"===e.termType){let t,r=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),n=this._termToNumericId(e.object);return r&&i&&n&&(s(e.graph)||(t=this._termToNumericId(e.graph)))&&this._ids[t?`.${r}.${i}.${n}.${t}`:`.${r}.${i}.${n}`]}return this._ids[(0,n.FL)(e)]}_termToNewNumericId(e){let t=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${s(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:(0,n.FL)(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}createBlankNode(e){let t,r;if(e)for(t=e=`_:${e}`,r=1;this._ids[t];)t=e+r++;else do t=`_:b${this._blankNodeIndex++}`;while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}}class x{constructor(e,t){this._size=0,this._graphs=Object.create(null),t||!e||e[0]||"function"==typeof e.match||(t=e,e=null),t=t||{},this._factory=t.factory||n.Ay,this._entityIndex=t.entityIndex||new S({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e,t,r=this._size;if(null!==r)return r;r=0;let i=this._graphs;for(let n in i)for(let o in e=i[n].subjects)for(let i in t=e[o])r+=Object.keys(t[i]).length;return this._size=r}_addToIndex(e,t,r,i){let n=e[t]||(e[t]={}),o=n[r]||(n[r]={}),s=i in o;return s||(o[i]=null),!s}_removeFromIndex(e,t,r,i){let n=e[t],o=n[r];for(let e in delete o[i],o)return;for(let e in delete n[r],n)return;delete e[t]}*_findInIndex(e,t,r,i,n,o,s,a){let l,u,c,d=this._entities,h=this._termFromId(d[a]),f={subject:null,predicate:null,object:null};for(let a in t&&((l=e,e={})[t]=l[t]),e)if(u=e[a]){for(let e in f[n]=this._termFromId(d[a]),r&&((l=u,u={})[r]=l[r]),u)if(c=u[e]){f[o]=this._termFromId(d[e]);let t=i?i in c?[i]:[]:Object.keys(c);for(let e=0;e<t.length;e++)f[s]=this._termFromId(d[t[e]]),yield this._factory.quad(f.subject,f.predicate,f.object,h)}}}_loop(e,t){for(let r in e)t(r)}_loopByKey0(e,t,r){let i,n;if(i=e[t])for(n in i)r(n)}_loopByKey1(e,t,r){let i;for(i in e)e[i][t]&&r(i)}_loopBy2Keys(e,t,r,i){let n,o,s;if((n=e[t])&&(o=n[r]))for(s in o)i(s)}_countInIndex(e,t,r,i){let n=0,o,s,a;for(let l in t&&((o=e,e={})[t]=o[t]),e)if(s=e[l])for(let e in r&&((o=s,s={})[r]=o[r]),s)(a=s[e])&&(i?i in a&&n++:n+=Object.keys(a).length);return n}_getGraphs(e){return"number"!=typeof(e=""===e?1:e&&(this._termToNumericId(e)||-1))?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){let t=Object.create(null);return r=>{r in t||(t[r]=!0,e(this._termFromId(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,r,i){t||(i=e.graph,r=e.object,t=e.predicate,e=e.subject),i=i?this._termToNewNumericId(i):1;let n=this._graphs[i];return n||Object.freeze(n=this._graphs[i]={subjects:{},predicates:{},objects:{}}),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),r=this._termToNewNumericId(r),!!this._addToIndex(n.subjects,e,t,r)&&(this._addToIndex(n.predicates,t,r,e),this._addToIndex(n.objects,r,e,t),this._size=null,!0)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,r,i){return e&&e.subject&&({subject:e,predicate:t,object:r,graph:i}=e),!this.readQuads(e,t,r,i).next().done}import(e){return e.on("data",e=>{this.addQuad(e)}),e}removeQuad(e,t,r,i){let n,o,s;t||({subject:e,predicate:t,object:r,graph:i}=e),i=i?this._termToNumericId(i):1;let a=this._graphs;if(!(e=e&&this._termToNumericId(e))||!(t=t&&this._termToNumericId(t))||!(r=r&&this._termToNumericId(r))||!(n=a[i])||!(o=n.subjects[e])||!(s=o[t])||!(r in s))return!1;for(e in this._removeFromIndex(n.subjects,e,t,r),this._removeFromIndex(n.predicates,t,r,e),this._removeFromIndex(n.objects,r,e,t),null!==this._size&&this._size--,n.subjects)return!0;return delete a[i],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",e=>{this.removeQuad(e)}),e}removeMatches(e,t,r,n){let o=new i.Readable({objectMode:!0}),s=this.readQuads(e,t,r,n);return o._read=e=>{for(;--e>=0;){let{done:e,value:t}=s.next();if(e)return void o.push(null);o.push(t)}},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,r,i){return[...this.readQuads(e,t,r,i)]}*readQuads(e,t,r,i){let n,o,s,a,l=this._getGraphs(i);if((!e||(o=this._termToNumericId(e)))&&(!t||(s=this._termToNumericId(t)))&&(!r||(a=this._termToNumericId(r))))for(let e in l)(n=l[e])&&(o?a?yield*this._findInIndex(n.objects,a,o,s,"object","subject","predicate",e):yield*this._findInIndex(n.subjects,o,s,null,"subject","predicate","object",e):s?yield*this._findInIndex(n.predicates,s,a,null,"predicate","object","subject",e):a?yield*this._findInIndex(n.objects,a,null,null,"object","subject","predicate",e):yield*this._findInIndex(n.subjects,null,null,null,"subject","predicate","object",e))}match(e,t,r,i){return new k(this,e,t,r,i,{entityIndex:this._entityIndex})}countQuads(e,t,r,i){let n=this._getGraphs(i),o=0,s,a,l,u;if(e&&!(a=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||r&&!(u=this._termToNumericId(r)))return 0;for(let i in n)(s=n[i])&&(e?r?o+=this._countInIndex(s.objects,u,a,l):o+=this._countInIndex(s.subjects,a,l,u):t?o+=this._countInIndex(s.predicates,l,u,a):o+=this._countInIndex(s.objects,u,a,l));return o}forEach(e,t,r,i,n){this.some(t=>(e(t,this),!1),t,r,i,n)}every(e,t,r,i,n){return!this.some(t=>!e(t,this),t,r,i,n)}some(e,t,r,i,n){for(let o of this.readQuads(t,r,i,n))if(e(o,this))return!0;return!1}getSubjects(e,t,r){let i=[];return this.forSubjects(e=>{i.push(e)},e,t,r),i}forSubjects(e,t,r,i){let n,o,s,a=this._getGraphs(i);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(i in a)(n=a[i])&&(o?s?this._loopBy2Keys(n.predicates,o,s,e):this._loopByKey1(n.subjects,o,e):s?this._loopByKey0(n.objects,s,e):this._loop(n.subjects,e))}getPredicates(e,t,r){let i=[];return this.forPredicates(e=>{i.push(e)},e,t,r),i}forPredicates(e,t,r,i){let n,o,s,a=this._getGraphs(i);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(i in a)(n=a[i])&&(o?s?this._loopBy2Keys(n.objects,s,o,e):this._loopByKey0(n.subjects,o,e):s?this._loopByKey1(n.predicates,s,e):this._loop(n.predicates,e))}getObjects(e,t,r){let i=[];return this.forObjects(e=>{i.push(e)},e,t,r),i}forObjects(e,t,r,i){let n,o,s,a=this._getGraphs(i);if(e=this._uniqueEntities(e),(!t||(o=this._termToNumericId(t)))&&(!r||(s=this._termToNumericId(r))))for(i in a)(n=a[i])&&(o?s?this._loopBy2Keys(n.subjects,o,s,e):this._loopByKey1(n.objects,o,e):s?this._loopByKey0(n.predicates,s,e):this._loop(n.objects,e))}getGraphs(e,t,r){let i=[];return this.forGraphs(e=>{i.push(e)},e,t,r),i}forGraphs(e,t,r,i){for(let n in this._graphs)this.some(t=>(e(t.graph),!0),t,r,i,this._termFromId(this._entities[n]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){let r={},i=t?()=>!0:(e,t)=>{throw Error(`${e.value} ${t}`)},n=this.getQuads(null,o.A.rdf.rest,o.A.rdf.nil,null),s=e?[...n]:[];return n.forEach(t=>{let n,a,l=[],u=!1,c=t.graph,d=t.subject;for(;d&&!u;){let e=this.getQuads(null,null,d,null),t=this.getQuads(d,null,null,null),r,h=null,f=null,p=null;for(let l=0;l<t.length&&!u;l++)(r=t[l]).graph.equals(c)?n?u=i(d,"has non-list arcs out"):r.predicate.value===o.A.rdf.first?h?u=i(d,"has multiple rdf:first arcs"):s.push(h=r):r.predicate.value===o.A.rdf.rest?f?u=i(d,"has multiple rdf:rest arcs"):s.push(f=r):e.length?u=i(d,"can't be subject and object"):(n=r,a="subject"):u=i(d,"not confined to single graph");for(let t=0;t<e.length&&!u;++t)r=e[t],n?u=i(d,"can't have coreferences"):r.predicate.value===o.A.rdf.rest?p?u=i(d,"has incoming rdf:rest arcs"):p=r:(n=r,a="object");h?l.unshift(h.object):u=i(d,"has no list head"),d=p&&p.subject}u?e=!1:n&&(r[n[a].value]=l)}),e&&this.removeQuads(s),r}addAll(e){if(e instanceof k&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof x&&e._entityIndex===this._entityIndex)0!==e._size&&(this._graphs=w(this._graphs,e._graphs),this._size=null);else for(let t of e)this.add(t);return this}contains(e){let t,r,i,n,o;if(e instanceof k&&(e=e.filtered),e===this)return!0;if(!(e instanceof x)||this._entityIndex!==e._entityIndex)return e.every(e=>this.has(e));let s=this._graphs,a=e._graphs;for(let e in a){if(!(t=s[e]))return!1;for(let s in t=t.subjects,r=a[e].subjects){if(!(i=t[s]))return!1;for(let e in n=r[s]){if(!(o=i[e]))return!1;for(let t in n[e])if(!(t in o))return!1}}}return!0}deleteMatches(e,t,r,i){for(let n of this.match(e,t,r,i))this.removeQuad(n);return this}difference(e){if(e&&e instanceof k&&(e=e.filtered),e===this)return new x({entityIndex:this._entityIndex});if(e instanceof x&&e._entityIndex===this._entityIndex){let t=new x({entityIndex:this._entityIndex}),r=function e(t,r,i=4){let n=!1;for(let o in t)if(o in r){if(0!==i){let s=e(t[o],r[o],i-1);if(!1!==s)(n=n||Object.create(null))[o]=s;else if(3===i)return!1}}else(n=n||Object.create(null))[o]=0===i?null:w({},t[o],i-1);return n}(this._graphs,e._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>!e.has(t))}equals(e){return e instanceof k&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){let t=new x({entityIndex:this._entityIndex});for(let r of this)e(r,this)&&t.add(r);return t}intersection(e){if(e instanceof k&&(e=e.filtered),e===this){let e=new x({entityIndex:this._entityIndex});return e._graphs=w(Object.create(null),this._graphs),e._size=this._size,e}if(e instanceof x&&this._entityIndex===e._entityIndex){let t=new x({entityIndex:this._entityIndex}),r=function e(t,r,i=4){let n=!1;for(let o in t)if(o in r){let s=0===i?null:e(t[o],r[o],i-1);if(!1!==s)(n=n||Object.create(null))[o]=s;else if(3===i)return!1}return n}(e._graphs,this._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>e.has(t))}map(e){let t=new x({entityIndex:this._entityIndex});for(let r of this)t.add(e(r,this));return t}reduce(e,t){let r=this.readQuads(),i=void 0===t?r.next().value:t;for(let t of r)i=e(i,t,this);return i}toArray(){return this.getQuads()}toCanonical(){throw Error("not implemented")}toStream(){return this.match()}toString(){return new v().quadsToString(this)}union(e){let t=new x({entityIndex:this._entityIndex});return t._graphs=w(Object.create(null),this._graphs),t._size=this._size,t.addAll(e),t}*[Symbol.iterator](){yield*this.readQuads()}}function E(e,t,r=0){let i=t[r];if(i&&!(i in e))return!1;let n=!1;for(let o in i?{[i]:e[i]}:e){let i=2===r?null:E(e[o],t,r+1);!1!==i&&((n=n||Object.create(null))[o]=i)}return n}class k extends i.Readable{constructor(e,t,r,i,n,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:r,object:i,graph:n,options:o})}get filtered(){if(!this._filtered){let e,t,r,{n3Store:i,graph:n,object:o,predicate:s,subject:a}=this,l=this._filtered=new x({factory:i._factory,entityIndex:this.options.entityIndex});if(a&&!(e=l._termToNumericId(a))||s&&!(t=l._termToNumericId(s))||o&&!(r=l._termToNumericId(o)))return l;let u=i._getGraphs(n);for(let i in u){let n,o,s,a;(a=u[i])&&(!e&&t?(o=E(a.predicates,[t,r,e]))&&(n=E(a.subjects,[e,t,r]),s=E(a.objects,[r,e,t])):r?(s=E(a.objects,[r,e,t]))&&(n=E(a.subjects,[e,t,r]),o=E(a.predicates,[t,r,e])):(n=E(a.subjects,[e,t,r]))&&(o=E(a.predicates,[t,r,e]),s=E(a.objects,[r,e,t])),n&&(l._graphs[i]={subjects:n,predicates:o,objects:s}))}l._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[b]&&(this[b]=this[Symbol.iterator]());let t=this[b];for(;--e>=0;){let{done:e,value:r}=t.next();if(e)return void this.push(null);this.push(r)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,t,r,i){return this.filtered.deleteMatches(e,t,r,i)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,t,r,i,n){return this.filtered.every(e,t,r,i,n)}filter(e){return this.filtered.filter(e)}forEach(e,t,r,i,n){return this.filtered.forEach(e,t,r,i,n)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,t,r,i,n){return this.filtered.some(e,t,r,i,n)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,t){return this.filtered.reduce(e,t)}toString(){return new v().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,r,i){return new k(this.filtered,e,t,r,i,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var F=r(8348),I=r(3795),A=r(1642);let{xsd:T}=o.A,R=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,C={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},P=/[\x00-\x20<>\\"\{\}\|\^\`]/,N={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},j=/$0^/;class O{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode)for(let e in this._n3Mode=!1,this)!(e in N)&&this[e]instanceof RegExp&&(this[e]=j);else this._n3Mode=!1!==e.n3;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,i=r.length;for(;;){let e,s;for(;e=this._newline.exec(r);)this.comments&&(s=this._comment.exec(e[0]))&&n("comment",s[1],"",this._line,e[0].length),i=(r=r.substr(e[0].length,r.length)).length,this._line++;if(!e&&(e=this._whitespace.exec(r))&&(r=r.substr(e[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(s=this._comment.exec(r))&&n("comment",s[1],"",this._line,r.length),r=null,n("eof","","",this._line,0)),this._input=r;let a=this._line,l=r[0],u="",c="",d="",h=null,f=0,p=!1;switch(l){case"^":if(r.length<3)break;if("^"===r[1]){if(this._previousMarker="^^","<"!==(r=r.substr(2))[0]){p=!0;break}}else{this._n3Mode&&(f=1,u="^");break}case"<":if(h=this._unescapedIri.exec(r))u="IRI",c=h[1];else if(h=this._iri.exec(r)){if(null===(c=this._unescape(h[1]))||P.test(c))return o(this);u="IRI"}else r.length>1&&"<"===r[1]?(u="<<",f=2):this._n3Mode&&r.length>1&&"="===r[1]&&(f=2,this._isImpliedBy?(u="abbreviation",c="<"):(u="inverse",c=">"));break;case">":r.length>1&&">"===r[1]&&(u=">>",f=2);break;case"_":((h=this._blank.exec(r))||t&&(h=this._blank.exec(`${r} `)))&&(u="blank",d="_",c=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(r))c=h[1];else if({value:c,matchLength:f}=this._parseLiteral(r),null===c)return o(this);(null!==h||0!==f)&&(u="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(r))c=h[1];else if({value:c,matchLength:f}=this._parseLiteral(r),null===c)return o(this);(null!==h||0!==f)&&(u="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(r))&&(u="var",c=h[0]);break;case"@":"literal"===this._previousMarker&&(h=this._langcode.exec(r))?(u="langcode",c=h[1]):(h=this._keyword.exec(r))&&(u=h[0]);break;case".":if(1===r.length?t:r[1]<"0"||r[1]>"9"){u=".",f=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(r)||t&&(h=this._number.exec(`${r} `)))&&(u="literal",c=h[0],d="string"==typeof h[1]?T.double:"string"==typeof h[2]?T.decimal:T.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(r))?u=h[0].toUpperCase():p=!0;break;case"f":case"t":(h=this._boolean.exec(r))?(u="literal",c=h[0],d=T.boolean):p=!0;break;case"a":(h=this._shortPredicates.exec(r))?(u="abbreviation",c="a"):p=!0;break;case"=":this._n3Mode&&r.length>1&&(u="abbreviation",">"!==r[1]?(f=1,c="="):(f=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(f=1,u=l);break;case"{":!this._lineMode&&r.length>=2&&("|"===r[1]?(u="{|",f=2):(u=l,f=1));break;case"|":r.length>=2&&"}"===r[1]&&(u="|}",f=2);break;default:p=!0}if(p&&(("@prefix"===this._previousMarker||"PREFIX"===this._previousMarker)&&(h=this._prefix.exec(r))?(u="prefix",c=h[1]||""):((h=this._prefixed.exec(r))||t&&(h=this._prefixed.exec(`${r} `)))&&(u="prefixed",d=h[1]||"",c=this._unescape(h[2]))),"^^"===this._previousMarker)switch(u){case"prefixed":u="type";break;case"IRI":u="typeIRI";break;default:u=""}if(!u)if(t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r))return o(this);else return this._input=r;let g=f||h[0].length,y=n(u,c,d,a,g);this.previousToken=y,this._previousMarker=u,r=r.substr(g,r.length)}function n(t,n,o,s,a){let l=r?i-r.length:i,u={type:t,value:n,prefix:o,line:s,start:l,end:l+a};return e(null,u),u}function o(t){e(t._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1,r=e.replace(R,(e,r,i,n)=>{if("string"==typeof r)return String.fromCharCode(Number.parseInt(r,16));if("string"==typeof i){let e=Number.parseInt(i,16);return e<=65535?String.fromCharCode(Number.parseInt(i,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return n in C?C[n]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){let t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length,i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(t,i))>0;){let t=0;for(;"\\"===e[i-t-1];)t++;if(t%2==0){let t=e.substring(r,i),n=t.split(/\r\n|\r|\n/).length-1,o=i+r;if(1===r&&0!==n||3===r&&this._lineMode)break;return this._line+=n,{value:this._unescape(t),matchLength:o}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;let t=Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e)if(this._input=this._readStartingBom(e),"function"==typeof t)queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{let e,t=[];if(this._tokenizeToEnd((r,i)=>r?e=r:t.push(i),!0),e)throw e;return t}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=A.Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}let L=0;class D{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&M(this,e.factory);let t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),i=/trig/.test(t),n=/triple/.test(t),o=/quad/.test(t),s=this._n3Mode=/n3/.test(t),a=n||o;(this._supportsNamedGraphs=!(r||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||n||s),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=""===t||/star|\*$/.test(t),a&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new O({lineMode:a,n3:s,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){L=0}_setBase(e){if(e){let t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=0>e.indexOf("/")?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,r,i,n){let o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:n,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){let r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":if(null!==this._graph)return this._error("Unclosed graph",e);return delete this._prefixes._,this._callback(null,null,this._prefixes);case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":let i=this._resolveIRI(e.value);if(null===i)return this._error("Invalid IRI",e);r=this._factory.namedNode(i);break;case"type":case"prefixed":let n=this._prefixes[e.prefix];if(void 0===n)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(n+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject;case"}":return this._readPunctuation(e);case"@forSome":if(!this._n3Mode)return this._error('Unexpected "@forSome"',e);return this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList;case"@forAll":if(!this._n3Mode)return this._error('Unexpected "@forAll"',e);return this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList;case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);return this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject;default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){let t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":if(null===this._predicate)return this._error(`Unexpected ${t}`,e);return this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e);case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject;case"<<":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);return this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject;default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);let t=null===this._predicate;return(this._restoreContext("blank",e),null!==this._object)?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,i=this._readListItem,n=this._subject,o=this._contextStack,s=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":if(!this._n3Mode)return this._error("Unexpected graph",e);return this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject;default:if(void 0===(t=this._readEntity(e)))return}if(null===r&&(this._subject=r=this._factory.blankNode()),null===n?null===s.predicate?s.subject=r:s.object=r:this._emit(n,this.RDF_REST,r,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":let r=this._readEntity(e);if(void 0===r)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){let r=this._completeLiteral(e);if(r)return(this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token)?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph,i=this._subject,n=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,n&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);let o=this._predicate,s=this._object;this._subject=this._factory.quad(i,o,s,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==i){let e=this._predicate,t=this._object;n?this._emit(t,e,i,r):this._emit(i,e,t,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);let t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){let t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:let t=this._contextStack,r=t.length&&t[t.length-1];if(r&&"item"===r.type){let t=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r,i=this._factory.blankNode();if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=i):(t=this._object,this._object=i),this._emit(t,r,i,this._graph),this._readPath}_readBackwardPath(e){let t,r,i=this._factory.blankNode();if(void 0!==(t=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(i,t,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);let t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return(this._restoreContext("<<",e),null===this._subject)?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){let e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,i){this._callback(null,this._factory.quad(e,t,r,i||this.DEFAULTGRAPH))}_error(e,t){let r=Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=U}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;let t=e.length,r="",i=-1,n=-1,o=0,s="/";for(;i<t;){switch(s){case":":if(n<0&&"/"===e[++i]&&"/"===e[++i])for(;(n=i+1)<t&&"/"!==e[n];)i=n;break;case"?":case"#":i=t;break;case"/":if("."===e[i+1])switch(s=e[++i+1]){case"/":r+=e.substring(o,i-1),o=i+1;break;case void 0:case"?":case"#":return r+e.substring(o,i)+e.substr(i+1);case".":if(void 0===(s=e[++i+1])||"/"===s||"?"===s||"#"===s){if(r+=e.substring(o,i-2),(o=r.lastIndexOf("/"))>=n&&(r=r.substr(0,o)),"/"!==s)return`${r}/${e.substr(i+1)}`;o=i+1}}}s=e[++i]}return r+e.substring(o)}parse(e,t,r){let i,n,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(i=t.onQuad,n=t.onPrefix,o=t.onComment):(i=t,n=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L++}_`,this._prefixCallback=n||U,this._inversePredicate=!1,this._quantified=Object.create(null),!i){let t,r=[];if(this._callback=(e,i)=>{e?t=e:i&&r.push(i)},this._lexer.tokenize(e).every(e=>this._readCallback=this._readCallback(e)),t)throw t;return r}let s=(e,t)=>{null!==e?(this._callback(e),this._callback=U):this._readCallback&&(this._readCallback=this._readCallback(t))};o&&(this._lexer.comments=!0,s=(e,t)=>{null!==e?(this._callback(e),this._callback=U):this._readCallback&&("comment"===t.type?o(t.value):this._readCallback=this._readCallback(t))}),this._callback=i,this._lexer.tokenize(e,s)}}function U(){}function M(e,t){e._factory=t,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=t.namedNode(o.A.rdf.first),e.RDF_REST=t.namedNode(o.A.rdf.rest),e.RDF_NIL=t.namedNode(o.A.rdf.nil),e.N3_FORALL=t.namedNode(o.A.r.forAll),e.N3_FORSOME=t.namedNode(o.A.r.forSome),e.ABBREVIATIONS={a:t.namedNode(o.A.rdf.type),"=":t.namedNode(o.A.owl.sameAs),">":t.namedNode(o.A.log.implies),"<":t.namedNode(o.A.log.isImpliedBy)},e.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}M(D.prototype,n.Ay);var B=r(3735);let H=()=>{let e=[],t=[],r=[];return{onQuad:t=>{e.push(t)},onError:e=>{r.push(e)},onComplete:e=>{t.push(e)},parse:(i,n)=>{new D({format:"text/turtle",baseIRI:(0,B.$s)(n)}).parse(i,(i,n)=>{i?r.forEach(e=>e(i)):n?e.forEach(e=>e(n)):t.forEach(e=>e())})}}};async function $(e,t){let r=new v({format:"text/turtle",prefixes:null==t?void 0:t.prefixes}),i=e.map(e=>n.Ay.quad(e.subject,e.predicate,e.object,void 0));r.addQuads(i);let o=new Promise((e,t)=>{r.end((r,i)=>{r?t(r):e(i)})});return await o}var K=r(695),V=r(1482),W=r(8785),q=r(9786),z=r(2340),J=r(2672);function Z(e){let t=new URL(e);return t.hash="",t.href}var G=r(3511);function Y(){return(0,G.CN)({type:"Dataset",graphs:{default:{}}})}async function Q(e,t={}){if((0,q.BN)(e)){let t=await e.clone().text();throw new B.fk(`Fetching the SolidDataset at [${e.url}] failed: [${e.status}] [${e.statusText}] ${t}.`,e,t)}let r=(0,B.ng)(e),i={"text/turtle":H(),...t.parsers},n=(0,B.gt)(r);if(null===n)throw Error(`Could not determine the content type of the Resource at [${(0,B.$s)(r)}].`);let o=n.split(";")[0],s=i[o];if(void 0===s)throw Error(`The Resource at [${(0,B.$s)(r)}] has a MIME type of [${o}], but the only parsers available are for the following MIME types: [${Object.keys(i).join(", ")}].`);let a=await e.text(),l=await new Promise((e,t)=>{let i=new x;s.onError(e=>{t(Error(`Encountered an error parsing the Resource at [${(0,B.$s)(r)}] with content type [${n}]: ${e}`))}),s.onQuad(e=>{i.add(e)}),s.onComplete(()=>{e(i)}),s.parse(a,r)}),u=(0,G.CN)(Array.from(l).reduce((e,t)=>(0,F.fQ)(e,t),{graphs:{default:{}},type:"Dataset"}));return(0,G.CN)({...u,...r})}async function X(e,t){var r,i;let n=(0,W.l)((0,W.t)(e)),o=Object.keys(null!=(r=null==t?void 0:t.parsers)?r:{}),s=o.length>0?o.join(", "):"text/turtle",a=await (null!=(i=null==t?void 0:t.fetch)?i:fetch)(n,{headers:{Accept:s}});if((0,q.BN)(a)){let e=await a.clone().text();throw new B.fk(`Fetching the Resource at [${n}] failed: [${a.status}] [${a.statusText}] ${e}.`,a,e)}return await Q(a,t)}async function ee(e){let t=e.internal_changeLog.deletions.length>0?`DELETE DATA {${(await $(e.internal_changeLog.deletions.map(eo))).trim()}};`:"",r=e.internal_changeLog.additions.length>0?`INSERT DATA {${(await $(e.internal_changeLog.additions.map(eo))).trim()}};`:"";return{method:"PATCH",body:`${t} ${r}`,headers:{"Content-Type":"application/sparql-update"}}}async function et(e,t){return{method:"PUT",body:await $((0,F.Ro)(e).map(eo),t),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${I.Lq.Resource}>; rel="type"`}}}async function er(e,t,r){var i;let o=(0,W.l)((0,W.t)(e)),s=(0,J.ZU)(t),a=en(s,o)?await ee(s):await et(s,r),l=await (null!=(i=null==r?void 0:r.fetch)?i:fetch)(o,a);if((0,q.BN)(l)){let e=en(s,o)?`The changes that were sent to the Pod are listed below.

${function(e){if(!(0,V.NF)(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!(0,V.rg)(e)||0===e.internal_changeLog.additions.length&&0===e.internal_changeLog.deletions.length)return`## Changes compared to ${(0,B.$s)(e)}

This SolidDataset has not been modified since it was fetched from ${(0,B.$s)(e)}.
`;let t=`## Changes compared to ${(0,B.$s)(e)}
`,r=function(e){let t=Object.create(null);return e.internal_changeLog.deletions.forEach(r=>{var i,n,o;let s=(0,K.Ad)(r.subject)?(0,K.NQ)(r.subject,(0,B.$s)(e)):r.subject;if(!(0,K.Y2)(s)||!(0,K.Y2)(r.predicate))return;let a=(0,W.t)(s),l=(0,W.t)(r.predicate);null!=t[a]||(t[a]=Object.create(null)),null!=(o=t[a])[l]||(o[l]={added:[],deleted:[]}),t[a][l].deleted.push(r.object)}),e.internal_changeLog.additions.forEach(r=>{var i,n,o;let s=(0,K.Ad)(r.subject)?(0,K.NQ)(r.subject,(0,B.$s)(e)):r.subject;if(!(0,K.Y2)(s)||!(0,K.Y2)(r.predicate))return;let a=(0,W.t)(s),l=(0,W.t)(r.predicate);null!=t[a]||(t[a]=Object.create(null)),null!=(o=t[a])[l]||(o[l]={added:[],deleted:[]}),t[a][l].added.push(r.object)}),t}(e);return Object.keys(r).forEach(e=>{t+=`
### Thing: ${e}
`;let i=r[e];Object.keys(i).forEach(e=>{t+=`
Property: ${e}
`;let{deleted:r}=i[e],{added:n}=i[e];r.length>0&&(t+="- Removed:\n",t+=r.reduce((e,t)=>`${e}  - ${(0,J.e0)(t)}
`,"")),n.length>0&&(t+="- Added:\n",t+=n.reduce((e,t)=>`${e}  - ${(0,J.e0)(t)}
`,""))})}),t}(s)}`:`The SolidDataset that was sent to the Pod is listed below.

${function(e){let t="";(0,V.NF)(e)?t+=`# SolidDataset: ${(0,B.$s)(e)}
`:t+=`# SolidDataset (no URL yet)
`;let r=(0,z.eC)(e);return 0===r.length?t+="\n<empty>\n":r.forEach(r=>{t+=`
${(0,z.Y)(r)}`,(0,V.rg)(e)&&(t+=`
${function(e,t){let r=n.Ay.namedNode(t.url),i=e.internal_changeLog.additions.reduce((e,t)=>t.subject.equals(r)?e+1:e,0),o=e.internal_changeLog.deletions.reduce((e,t)=>t.subject.equals(r)?e+1:e,0),s=1===i?"1 new value added":`${i} new values added`,a=1===o?"1 value removed":`${o} values removed`;return`(${s} / ${a})`}(e,r)}
`)}),t}(s)}`,t=await l.clone().text();throw new B.fk(`Storing the Resource at [${o}] failed: [${l.status}] [${l.statusText}] ${t}.

${e}`,l,t)}let u={...(0,q.um)(l),isRawData:!1};return function(e){let t=(0,B.$s)(e),r=e.graphs.default,i=Object.keys(r).reduce((e,r)=>{let i=function(e,t){let r=Object.keys(e.predicates).reduce((e,r)=>{var i;let n=null!=(i=e[r].namedNodes)?i:[];if(n.every(e=>!(0,G.AA)(e)))return e;let o=(0,G.CN)(n.map(e=>(0,G.AA)(e)?`${t}#${(0,G.J0)(e)}`:e)),s=(0,G.CN)({...e[r],namedNodes:o});return(0,G.CN)({...e,[r]:s})},e.predicates);return(0,G.CN)({...e,predicates:r,url:(0,G.AA)(e.url)?`${t}#${(0,G.J0)(e.url)}`:e.url})}(e[r],t),n=(0,G.AA)(r)?`${t}#${(0,G.J0)(r)}`:r,o={...e};return delete o[r],o[n]=i,(0,G.CN)(o)},r),n=(0,G.CN)({...e.graphs,default:i});return(0,G.CN)({...e,graphs:n})}((0,G.CN)({...t,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:u}))}async function ei(e,t){var r;let i=(0,V.NF)(e)?(0,W.t)((0,B.$s)(e)):(0,W.l)((0,W.t)(e)),n=await (null!=(r=null==t?void 0:t.fetch)?r:fetch)(i,{method:"DELETE"});if((0,q.BN)(n)){let e=await n.clone().text();throw new B.fk(`Deleting the SolidDataset at [${i}] failed: [${n.status}] [${n.statusText}] ${e}.`,n,e)}}function en(e,t){return(0,V.rg)(e)&&(0,V.NF)(e)&&"string"==typeof e.internal_resourceInfo.sourceIri&&Z(e.internal_resourceInfo.sourceIri)===Z(t)}function eo(e){let t=(0,K.Y2)(e.subject)?es(e.subject):e.subject,r=(0,K.Y2)(e.object)?es(e.object):e.object;return n.Ay.quad(t,e.predicate,r,e.graph)}function es(e){return(0,G.AA)(e.value)?n.Ay.namedNode(`#${(0,G.J0)(e.value)}`):e}},9846:(e,t,r)=>{"use strict";let i=r(9143),{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:s}=r(4039),{Buffer:a}=r(1642),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:u}=r(7894).codes;e.exports=function(e,t,r){let c,d;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,c=t[o]();else if(t&&t[s])d=!1,c=t[s]();else throw new l("iterable",["Iterable"],t);let h=new e({objectMode:!0,highWaterMark:1,...r}),f=!1;async function p(e){let t=null!=e,r="function"==typeof c.throw;if(t&&r){let{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"==typeof c.return){let{value:e}=await c.return();await e}}async function g(){for(;;){try{let{value:e,done:t}=d?await c.next():c.next();if(t)h.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new u;if(h.push(t))continue;f=!1}}catch(e){h.destroy(e)}break}}return h._read=function(){f||(f=!0,g())},h._destroy=function(e,t){n(p(e),()=>i.nextTick(t,e),r=>i.nextTick(t,r||e))},h}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(92),t(8253))),_N_E=e.O()}]);