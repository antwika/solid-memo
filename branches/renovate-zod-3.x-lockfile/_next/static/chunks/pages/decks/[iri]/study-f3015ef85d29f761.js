(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{607:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var s=n(3343);function a(e,t){return(0,s.w)(t||e,e)}},1095:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>a,_P:()=>r,s0:()=>i,w4:()=>s});let s=864e5,a=6e4,i=36e5,r=Symbol.for("constructDateFrom")},1728:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(2041),a=n(4426),i=n(9651),r=n(7127);function l(e){let{data:t,mutate:n,isLoading:l}=(0,i.A)(e),o=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,r.nt)({iri:e.url,type:(0,s.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),hasCard:(0,s.tX)(e,"http://antwika.com/ns/solid-memo#hasCard")})),c=o.reduce((e,t)=>(e[t.iri]=t,e),{});return{deckDatasets:t,decks:o,deckMap:c,mutate:n,isLoading:l}}},2271:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var s=n(607);function a(e,t){let n=(0,s.a)(e,t?.in);return n.setHours(0,0,0,0),n}},3343:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var s=n(1095);function a(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&s._P in e?e[s._P](t):e instanceof Date?new e.constructor(t):new Date(t)}},3456:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/decks/[iri]/study",function(){return n(8673)}])},5229:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var s=n(5729);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),r=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:r,iconNode:d,...m},u)=>(0,s.createElement)("svg",{ref:u,...c,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:l("lucide",i),...!r&&!o(m)&&{"aria-hidden":"true"},...m},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(r)?r:[r]])),m=(e,t)=>{let n=(0,s.forwardRef)(({className:n,...i},o)=>(0,s.createElement)(d,{ref:o,iconNode:t,className:l(`lucide-${a(r(e))}`,`lucide-${e}`,n),...i}));return n.displayName=r(e),n}},6750:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var s=n(3343),a=n(607);function i(e,t,n){let i=(0,a.a)(e,n?.in);return isNaN(t)?(0,s.w)(n?.in||e,NaN):(t&&i.setDate(i.getDate()+t),i)}},8673:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var s=n(6029),a=n(333),i=n(6207),r=n(1979),l=n(4e3),o=n(5729),c=n(1728),d=n(7127),m=n(9287),u=n(2271),h=n(6750),f=n(607);let w=(0,n(5229).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var p=n(8230),v=n.n(p);function k(){var e;let{getService:t,getSpacedRepetitionAlgorithm:n}=(0,o.useContext)(i.h),p=t(),{iri:k}=(0,l.useParams)(),{deckMap:x,isLoading:g}=(0,c.A)(k?[null==k?void 0:k.toString()]:[]),N=k?x[k.toString()]:void 0,{flashcardMap:j,mutate:y}=(0,m.A)(null!=(e=null==N?void 0:N.hasCard)?e:[]),D=n(),[C,b]=(0,o.useState)(!1),I=(0,o.useMemo)(()=>Object.keys(j).filter(e=>{var t;let n=j[e];if(!n)return!1;let s=(0,u.o)(null!=(t=n.lastReviewed)?t:new Date),a=n.lastReviewed?n.interval:0,i=(0,u.o)((0,h.f)(s,a)),r=(0,u.o)(new Date);return!(+(0,f.a)(i)>+(0,f.a)(r))}).map(e=>j[e]).filter(e=>void 0!==e).sort((e,t)=>(e.lastReviewed?new Date(e.lastReviewed).getTime():0)-(t.lastReviewed?new Date(t.lastReviewed).getTime():0)),[j]);if(g)return(0,s.jsx)(a.default,{children:(0,s.jsx)(r.Zp,{className:"p-2",children:(0,s.jsx)("div",{children:"Loading deck..."})})});if(!N)return(0,s.jsx)(a.default,{children:(0,s.jsx)("div",{children:"No deck found"})});let A=(0,s.jsxs)("div",{className:"flex text-foreground font-semibold",children:[(0,s.jsx)("span",{children:(0,s.jsxs)(v(),{className:"flex items-center",href:"/instances/".concat(encodeURIComponent(N.isInSolidMemoDataInstance)),children:[(0,s.jsx)(w,{})," Back"]})}),(0,s.jsx)("div",{className:"grow"}),(0,s.jsxs)("span",{children:[I.length," remaining"]})]}),_=I[0];if(!_)return(0,s.jsxs)(a.default,{children:[A,(0,s.jsx)("h1",{children:N.name}),(0,s.jsx)("div",{children:"There are no more flashcards to study in this deck!"})]});let R=async(e,t)=>{console.log("Reviewed flashcard",(0,d.L)(e.iri),", answer quality",t);let n=D.compute([{...e,q:t}]);await Promise.all(n.map(e=>p.updateFlashcard(e))),await y(),b(!1)};return(0,s.jsxs)(a.default,{children:[A,(0,s.jsx)("h1",{children:N.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(r.Zp,{className:"items-center",children:[!C&&(0,s.jsx)("h3",{children:_.front}),C&&(0,s.jsx)("h3",{children:_.back})]}),(0,s.jsxs)("div",{className:"flex sm:flex-row flex-col justify-center gap-2 flex-col-reverse",children:[!C&&(0,s.jsx)(r.$n,{onClick:()=>b(!0),children:"Display answer"}),C&&(0,s.jsx)(r.$n,{size:"lg",className:"bg-red-500/60 font-bold",onClick:()=>R(_,0),children:"Again"}),C&&(0,s.jsx)(r.$n,{size:"lg",className:"bg-orange-500/60 font-bold",onClick:()=>R(_,2),children:"Hard"}),C&&(0,s.jsx)(r.$n,{size:"lg",className:"bg-yellow-500/60 font-bold",onClick:()=>R(_,4),children:"Good"}),C&&(0,s.jsx)(r.$n,{size:"lg",className:"bg-green-500/60 font-bold",onClick:()=>R(_,5),children:"Easy"})]})]})]})}},9287:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(2041),a=n(4426),i=n(9651),r=n(7127);function l(e){let{data:t,mutate:n,isLoading:l}=(0,i.A)(e),o=(null!=t?t:[]).map(e=>(0,a.eC)(e)).flat().filter(t=>e.includes(t.url)).map(e=>(0,r.Ez)({iri:e.url,type:(0,s.ID)(e,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),name:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#name"),version:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#version"),isInSolidMemoDataInstance:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInSolidMemoDataInstance"),isInDeck:(0,s.ID)(e,"http://antwika.com/ns/solid-memo#isInDeck"),front:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#front"),back:(0,s.NB)(e,"http://antwika.com/ns/solid-memo#back"),interval:(0,s.XU)(e,"http://antwika.com/ns/solid-memo#interval"),easeFactor:(0,s.S5)(e,"http://antwika.com/ns/solid-memo#easeFactor"),repetition:(0,s.XU)(e,"http://antwika.com/ns/solid-memo#repetition"),lastReviewed:(0,s.oq)(e,"http://antwika.com/ns/solid-memo#lastReviewed")})),c=o.reduce((e,t)=>(e[t.iri]=t,e),{});return{flashcardDatasets:t,flashcards:o,flashcardMap:c,mutate:n,isLoading:l}}},9651:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(8429),a=n(6768);function i(e){let{data:t,mutate:n,isLoading:i}=(0,a.Ay)("string"==typeof e?[e]:e,s.P);return{data:t,mutate:n,isLoading:i}}}},e=>{var t=t=>e(e.s=t);e.O(0,[768,636,593,792],()=>t(3456)),_N_E=e.O()}]);