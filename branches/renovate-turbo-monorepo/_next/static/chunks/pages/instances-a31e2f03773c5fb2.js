(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{2216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var s=n(6029),a=n(7127),r=n(872),o=n(1922),l=n(8887),i=n(8337),c=n(5729),d=n(3681),h=n(4426),u=n(2041),m=n(8117),f=n(5040),p=n(5986),w=n(2203),v=n.n(w),g=n(2229);function x(){let e=(0,g.useRouter)(),{getService:t}=(0,c.useContext)(o.h),n=t(),{instanceUrls:w,mutate:x,isLoading:y}=function(){let e=(0,m._)(),{data:t,isLoading:n}=(0,p.A)(e.info.webId),[s,a]=(0,c.useState)([]),[r,o]=(0,c.useState)([]),[l,i]=(0,c.useState)([]),{data:w}=(0,p.A)(l),[v,g]=(0,c.useState)([]),{data:x,mutate:y,isLoading:_}=(0,d.Ay)(s,f.P),{data:A,mutate:C,isLoading:N}=(0,d.Ay)(r,f.P);return(0,c.useEffect)(()=>{if(!t)return void a([]);Promise.all(t.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>a(e)).catch(e=>console.error("Failed to fetch private type indices, error:",e)),Promise.all(t.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/2000/01/rdf-schema#seeAlso")))).then(e=>e.flat()).then(e=>i(e)).catch(e=>console.error("Failed to fetch see also references, error:",e))},[t]),(0,c.useEffect)(()=>{if(!w)return void o([]);Promise.all(w.map(e=>h.eC(e))).then(e=>e.flat()).then(e=>Promise.all(e.map(e=>u.tX(e,"http://www.w3.org/ns/solid/terms#privateTypeIndex")))).then(e=>e.flat()).then(e=>o(e)).catch(e=>console.error("Failed to fetch see also private type indices, error:",e))},[w]),(0,c.useEffect)(()=>{[...null!=x?x:[],...null!=A?A:[]].map(e=>{g(h.eC(e).reduce((e,t)=>{var n,s,a,r;let{predicates:o}=t;return(null==(s=o["http://www.w3.org/ns/solid/terms#forClass"])||null==(n=s.namedNodes)?void 0:n.includes("http://antwika.com/ns/solid-memo#SolidMemoData"))?[...e,...null!=(r=null==(a=o["http://www.w3.org/ns/solid/terms#instance"])?void 0:a.namedNodes)?r:[]]:e},[]))})},[x,A]),{webIdProfileDatasets:t,privateTypeIndexDatasets:x,instanceUrls:v,mutate:()=>{y(x).catch(e=>console.error("Failed to mutate, error:",e)),C(A).catch(e=>console.error("Failed to mutate, error:",e))},isLoading:n||_||N}}();return(0,c.useEffect)(()=>{if(1===w.length){let t=w[0];void 0!==t&&(console.log("There's only one instance url, assume the user want to use that one."),e.push("/instances/".concat(encodeURIComponent(t))))}},[e,w]),(0,s.jsxs)(r.default,{children:[(0,s.jsx)(l.$n,{onClick:()=>{n.newInstance().then(()=>x()).catch(e=>console.error("Failed with error:",e))},children:"Create new instance"}),y&&(0,s.jsx)("div",{children:"Loading instances..."}),!y&&0===w.length&&(0,s.jsx)("div",{children:"No instances found"}),!y&&w.map(e=>(0,s.jsx)("div",{className:"items-center gap-2",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(v(),{href:"/instances/".concat(encodeURIComponent(e)),className:"hover:underline",children:(0,s.jsxs)("div",{className:"flex gap-1",title:e,children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("strong",{children:(0,s.jsx)("span",{children:(0,a.L)(e)})})," ","(Instance)"]})})})},e))]})}},2276:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/instances",function(){return n(2216)}])},5986:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(5040),a=n(3681);function r(e){let{data:t,mutate:n,isLoading:r}=(0,a.Ay)("string"==typeof e?[e]:e,s.P);return{data:t,mutate:n,isLoading:r}}},8337:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(5229).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])}},e=>{e.O(0,[681,636,593,792],()=>e(e.s=2276)),_N_E=e.O()}]);